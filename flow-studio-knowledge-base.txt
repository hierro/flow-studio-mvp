FLOW STUDIO MVP - Complete Development Context
================================================

Generated: 2025-07-22T11:56:06.259Z
Purpose: Transfer complete understanding to Claude web interface

PROJECT STATUS: Phase 1 Authentication COMPLETE - Ready for Phase 2 Database

MISSION: Build web interface for proven n8n TESTA_ANIMATIC workflow
- Enables animatic production with Samantha character consistency
- Uses Italian "UN CONSIGLIO STELLARE" campaign as validated template
- 5-phase pipeline with >95% character recognition success rate

CURRENT STATE (What Works)
---------------------------
✅ Supabase authentication with SSR (email/password, protected routes)
✅ Next.js 15.4.2 with App Router and TypeScript strict mode
✅ Smart routing based on authentication state
✅ Professional UI with Tailwind CSS v4
✅ Modular component architecture established

IMMEDIATE PRIORITY (Phase 2)
-----------------------------
1. Deploy database schema to Supabase (designed, ready)
2. Build project CRUD APIs with Italian campaign structure
3. Create project management dashboard  
4. Integrate "UN CONSIGLIO STELLARE" as default template
5. Build PhaseContainer system for 5-phase n8n workflow

PROVEN INTEGRATIONS READY
--------------------------
- n8n TESTA_ANIMATIC: 5-phase pipeline (12-18 min processing)
- FAL.ai FLUX: 1024x768, 16:9, FLUX DEV model
- Character Consistency: Samantha >95% recognition across 13 scenes
- Italian Campaign: "UN CONSIGLIO STELLARE" (Ministero della Salute)
- Webhook: a1dbfc3a-b5fa-41be-9720-13960051b88d

TECHNOLOGY STACK
-----------------
Framework: Next.js 15.4.2 with App Router
Language: TypeScript 5 with strict mode
Styling: Tailwind CSS v4 with custom properties
Database: Supabase PostgreSQL with Row Level Security
Authentication: Supabase Auth with SSR
Deployment: Vercel

COMPLETE PROJECT STRUCTURE
===========================

flow-studio-mvp/
├── .gitignore                      # Git ignore patterns
├── package.json                    # Dependencies, scripts, ES module config
├── package-lock.json               # Dependency lock file
├── next.config.ts                  # Next.js configuration
├── tsconfig.json                   # TypeScript strict mode config
├── tailwind.config.ts              # Tailwind CSS v4 configuration  
├── eslint.config.mjs               # ESLint validation rules
├── postcss.config.mjs              # PostCSS configuration
├── project-scanner.js              # Knowledge base generator
├── flow-studio-knowledge-base.txt  # Generated codebase export
├── public/                         # Static assets
│   ├── next.svg                   # Next.js logo
│   ├── vercel.svg                 # Vercel logo  
│   └── file.svg                   # File icon
├── src/                           # Source code
│   ├── app/                       # Next.js App Router
│   │   ├── layout.tsx             # Root layout with Geist fonts
│   │   ├── page.tsx               # Smart routing (auth-based redirects)
│   │   ├── globals.css            # Tailwind CSS v4 + custom variables
│   │   ├── login/                 # Authentication pages
│   │   │   └── page.tsx           # Complete auth implementation
│   │   └── dashboard/             # Protected application area
│   │       └── page.tsx           # Protected route with server auth
│   ├── components/                # Reusable UI components
│   │   └── LogoutButton.tsx       # Client component pattern
│   └── lib/                       # Utility functions
│       └── supabase.ts            # SSR-compatible database client
└── docs/                          # Reference documentation  
    └── TESTA_ANIMATIC.json         # n8n workflow (69KB, 5-phase pipeline)

KEY PATTERNS
============
✅ Authentication: Server-side validation in dashboard, client handling in login
✅ Components: Client components use 'use client', server components default
✅ Database: SSR-compatible Supabase client with environment variables
✅ Styling: Tailwind CSS v4 with custom properties and Geist fonts
✅ TypeScript: Strict mode, proper interfaces, path mapping with @/*
✅ Error Handling: Comprehensive loading states and user feedback

ARCHITECTURE NOTES
===================
- App Router structure with server-first approach
- Authentication state drives routing logic
- Modular component architecture ready for expansion
- Complete configuration for development and production
- Smart session handoff system for Claude development continuity

ESSENTIAL CODE FILES
====================

FILE: package.json
PURPOSE: Project dependencies, scripts, and module configuration
------------------------------------------------------------

{
  "name": "flow-studio-mvp",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint src"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.52.0",
    "react": "19.1.0",
    "react-dom": "19.1.0",
    "react-router-dom": "^6.28.0"
  },
  "devDependencies": {
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@vitejs/plugin-react": "^4.2.1",
    "eslint": "^9",
    "typescript": "^5",
    "vite": "^5.1.0"
  }
}

============================================================

FILE: tsconfig.json
PURPOSE: TypeScript strict mode configuration with path mapping
------------------------------------------------------------

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}

============================================================

FILE: eslint.config.mjs
PURPOSE: ESLint rules for Next.js and TypeScript validation
------------------------------------------------------------

export default [
  {
    ignores: ['dist/**', 'node_modules/**'],
  },
  {
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      parser: '@typescript-eslint/parser',
      ecmaVersion: 2022,
      sourceType: 'module',
      parserOptions: {
        ecmaFeatures: {
          jsx: true,
        },
      },
    },
    rules: {
      '@typescript-eslint/no-unused-vars': 'warn',
    },
  },
];

============================================================

DEVELOPMENT GUIDANCE
====================

Pattern Recognition:
- Authentication: Follow complete pattern in login/page.tsx
- Components: Use LogoutButton.tsx as template for client components
- Server Auth: Use server-side validation pattern
- Database: Use supabase.ts client pattern consistently

Quality Standards:
- TypeScript strict mode (zero any types)
- Server-side rendering where possible  
- Comprehensive error handling and loading states
- Modular reusable component architecture

Next Steps Priority:
1. Database: Deploy schema and create project CRUD APIs
2. Templates: Use Italian UN CONSIGLIO STELLARE as default
3. Workflow: Build PhaseContainer system for 5-phase pipeline  
4. Integration: Connect n8n TESTA_ANIMATIC webhook

Ready for Phase 2: Authentication foundation solid. Focus on database implementation using proven patterns.

END OF KNOWLEDGE BASE
=====================
