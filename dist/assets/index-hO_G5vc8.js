function Kb(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var Tg={exports:{}},nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb=Symbol.for("react.transitional.element"),Jb=Symbol.for("react.fragment");function Eg(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:Zb,type:t,key:s,ref:e!==void 0?e:null,props:n}}nl.Fragment=Jb;nl.jsx=Eg;nl.jsxs=Eg;Tg.exports=nl;var f=Tg.exports,jg={exports:{}},H={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd=Symbol.for("react.transitional.element"),Wb=Symbol.for("react.portal"),eS=Symbol.for("react.fragment"),tS=Symbol.for("react.strict_mode"),nS=Symbol.for("react.profiler"),sS=Symbol.for("react.consumer"),iS=Symbol.for("react.context"),aS=Symbol.for("react.forward_ref"),rS=Symbol.for("react.suspense"),oS=Symbol.for("react.memo"),Ag=Symbol.for("react.lazy"),uf=Symbol.iterator;function lS(t){return t===null||typeof t!="object"?null:(t=uf&&t[uf]||t["@@iterator"],typeof t=="function"?t:null)}var Cg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Og=Object.assign,Ng={};function Ri(t,e,n){this.props=t,this.context=e,this.refs=Ng,this.updater=n||Cg}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Rg(){}Rg.prototype=Ri.prototype;function _d(t,e,n){this.props=t,this.context=e,this.refs=Ng,this.updater=n||Cg}var bd=_d.prototype=new Rg;bd.constructor=_d;Og(bd,Ri.prototype);bd.isPureReactComponent=!0;var df=Array.isArray,he={H:null,A:null,T:null,S:null,V:null},Dg=Object.prototype.hasOwnProperty;function Sd(t,e,n,s,i,a){return n=a.ref,{$$typeof:vd,type:t,key:e,ref:n!==void 0?n:null,props:a}}function cS(t,e){return Sd(t.type,e,void 0,void 0,void 0,t.props)}function wd(t){return typeof t=="object"&&t!==null&&t.$$typeof===vd}function uS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hf=/\/+/g;function Bl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uS(""+t.key):e.toString(36)}function ff(){}function dS(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(ff,ff):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Bs(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case vd:case Wb:r=!0;break;case Ag:return r=t._init,Bs(r(t._payload),e,n,s,i)}}if(r)return i=i(t),r=s===""?"."+Bl(t,0):s,df(i)?(n="",r!=null&&(n=r.replace(hf,"$&/")+"/"),Bs(i,e,n,"",function(c){return c})):i!=null&&(wd(i)&&(i=cS(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(hf,"$&/")+"/")+r)),e.push(i)),1;r=0;var o=s===""?".":s+":";if(df(t))for(var l=0;l<t.length;l++)s=t[l],a=o+Bl(s,l),r+=Bs(s,e,n,a,i);else if(l=lS(t),typeof l=="function")for(t=l.call(t),l=0;!(s=t.next()).done;)s=s.value,a=o+Bl(s,l++),r+=Bs(s,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return Bs(dS(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function jr(t,e,n){if(t==null)return t;var s=[],i=0;return Bs(t,s,"","",function(a){return e.call(n,a,i++)}),s}function hS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mf=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function fS(){}H.Children={map:jr,forEach:function(t,e,n){jr(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jr(t,function(){e++}),e},toArray:function(t){return jr(t,function(e){return e})||[]},only:function(t){if(!wd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Ri;H.Fragment=eS;H.Profiler=nS;H.PureComponent=_d;H.StrictMode=tS;H.Suspense=rS;H.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he;H.__COMPILER_RUNTIME={__proto__:null,c:function(t){return he.H.useMemoCache(t)}};H.cache=function(t){return function(){return t.apply(null,arguments)}};H.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=Og({},t.props),i=t.key,a=void 0;if(e!=null)for(r in e.ref!==void 0&&(a=void 0),e.key!==void 0&&(i=""+e.key),e)!Dg.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];s.children=o}return Sd(t.type,i,void 0,void 0,a,s)};H.createContext=function(t){return t={$$typeof:iS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:sS,_context:t},t};H.createElement=function(t,e,n){var s,i={},a=null;if(e!=null)for(s in e.key!==void 0&&(a=""+e.key),e)Dg.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(s in r=t.defaultProps,r)i[s]===void 0&&(i[s]=r[s]);return Sd(t,a,void 0,void 0,null,i)};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:aS,render:t}};H.isValidElement=wd;H.lazy=function(t){return{$$typeof:Ag,_payload:{_status:-1,_result:t},_init:hS}};H.memo=function(t,e){return{$$typeof:oS,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=he.T,n={};he.T=n;try{var s=t(),i=he.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(fS,mf)}catch(a){mf(a)}finally{he.T=e}};H.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()};H.use=function(t){return he.H.use(t)};H.useActionState=function(t,e,n){return he.H.useActionState(t,e,n)};H.useCallback=function(t,e){return he.H.useCallback(t,e)};H.useContext=function(t){return he.H.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t,e){return he.H.useDeferredValue(t,e)};H.useEffect=function(t,e,n){var s=he.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(t,e)};H.useId=function(){return he.H.useId()};H.useImperativeHandle=function(t,e,n){return he.H.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return he.H.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return he.H.useLayoutEffect(t,e)};H.useMemo=function(t,e){return he.H.useMemo(t,e)};H.useOptimistic=function(t,e){return he.H.useOptimistic(t,e)};H.useReducer=function(t,e,n){return he.H.useReducer(t,e,n)};H.useRef=function(t){return he.H.useRef(t)};H.useState=function(t){return he.H.useState(t)};H.useSyncExternalStore=function(t,e,n){return he.H.useSyncExternalStore(t,e,n)};H.useTransition=function(){return he.H.useTransition()};H.version="19.1.0";jg.exports=H;var w=jg.exports;const mS=Xb(w),pS=Kb({__proto__:null,default:mS},[w]);var Mg={exports:{}},sl={},kg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,M){var D=R.length;R.push(M);e:for(;0<D;){var L=D-1>>>1,I=R[L];if(0<i(I,M))R[L]=M,R[D]=I,D=L;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var M=R[0],D=R.pop();if(D!==M){R[0]=D;e:for(var L=0,I=R.length,re=I>>>1;L<re;){var ut=2*(L+1)-1,Rt=R[ut],ne=ut+1,ue=R[ne];if(0>i(Rt,D))ne<I&&0>i(ue,Rt)?(R[L]=ue,R[ne]=D,L=ne):(R[L]=Rt,R[ut]=D,L=ut);else if(ne<I&&0>i(ue,D))R[L]=ue,R[ne]=D,L=ne;else break e}}return M}function i(R,M){var D=R.sortIndex-M.sortIndex;return D!==0?D:R.id-M.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var r=Date,o=r.now();t.unstable_now=function(){return r.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,v=!1,_=!1,b=!1,p=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function S(R){for(var M=n(c);M!==null;){if(M.callback===null)s(c);else if(M.startTime<=R)s(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function T(R){if(_=!1,S(R),!v)if(n(l)!==null)v=!0,j||(j=!0,U());else{var M=n(c);M!==null&&B(T,M.startTime-R)}}var j=!1,x=-1,E=5,A=-1;function C(){return b?!0:!(t.unstable_now()-A<E)}function N(){if(b=!1,j){var R=t.unstable_now();A=R;var M=!0;try{e:{v=!1,_&&(_=!1,g(x),x=-1),m=!0;var D=h;try{t:{for(S(R),d=n(l);d!==null&&!(d.expirationTime>R&&C());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var I=L(d.expirationTime<=R);if(R=t.unstable_now(),typeof I=="function"){d.callback=I,S(R),M=!0;break t}d===n(l)&&s(l),S(R)}else s(l);d=n(l)}if(d!==null)M=!0;else{var re=n(c);re!==null&&B(T,re.startTime-R),M=!1}}break e}finally{d=null,h=D,m=!1}M=void 0}}finally{M?U():j=!1}}}var U;if(typeof y=="function")U=function(){y(N)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,V=P.port2;P.port1.onmessage=N,U=function(){V.postMessage(null)}}else U=function(){p(N,0)};function B(R,M){x=p(function(){R(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var D=h;h=M;try{return R()}finally{h=D}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=h;h=R;try{return M()}finally{h=D}},t.unstable_scheduleCallback=function(R,M,D){var L=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?L+D:L):D=L,R){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=D+I,R={id:u++,callback:M,priorityLevel:R,startTime:D,expirationTime:I,sortIndex:-1},D>L?(R.sortIndex=D,e(c,R),n(l)===null&&R===n(c)&&(_?(g(x),x=-1):_=!0,B(T,D-L))):(R.sortIndex=I,e(l,R),v||m||(v=!0,j||(j=!0,U()))),R},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(R){var M=h;return function(){var D=h;h=M;try{return R.apply(this,arguments)}finally{h=D}}}})(Ug);kg.exports=Ug;var gS=kg.exports,Pg={exports:{}},Fe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yS=w;function Lg(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function fn(){}var qe={d:{f:fn,r:function(){throw Error(Lg(522))},D:fn,C:fn,L:fn,m:fn,X:fn,S:fn,M:fn},p:0,findDOMNode:null},vS=Symbol.for("react.portal");function _S(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vS,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var ca=yS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function il(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Fe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qe;Fe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Lg(299));return _S(t,e,null,n)};Fe.flushSync=function(t){var e=ca.T,n=qe.p;try{if(ca.T=null,qe.p=2,t)return t()}finally{ca.T=e,qe.p=n,qe.d.f()}};Fe.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,qe.d.C(t,e))};Fe.prefetchDNS=function(t){typeof t=="string"&&qe.d.D(t)};Fe.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=il(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?qe.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:a}):n==="script"&&qe.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Fe.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=il(e.as,e.crossOrigin);qe.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&qe.d.M(t)};Fe.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=il(n,e.crossOrigin);qe.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Fe.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=il(e.as,e.crossOrigin);qe.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else qe.d.m(t)};Fe.requestFormReset=function(t){qe.d.r(t)};Fe.unstable_batchedUpdates=function(t,e){return t(e)};Fe.useFormState=function(t,e,n){return ca.H.useFormState(t,e,n)};Fe.useFormStatus=function(){return ca.H.useHostTransitionStatus()};Fe.version="19.1.0";function Vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vg)}catch(t){console.error(t)}}Vg(),Pg.exports=Fe;var bS=Pg.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oe=gS,Bg=w,SS=bS;function O(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function zg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $g(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pf(t){if(tr(t)!==t)throw Error(O(188))}function wS(t){var e=t.alternate;if(!e){if(e=tr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return pf(i),t;if(a===s)return pf(i),e;a=a.sibling}throw Error(O(188))}if(n.return!==s.return)n=i,s=a;else{for(var r=!1,o=i.child;o;){if(o===n){r=!0,n=i,s=a;break}if(o===s){r=!0,s=i,n=a;break}o=o.sibling}if(!r){for(o=a.child;o;){if(o===n){r=!0,n=a,s=i;break}if(o===s){r=!0,s=a,n=i;break}o=o.sibling}if(!r)throw Error(O(189))}}if(n.alternate!==s)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Gg(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Gg(t),e!==null)return e;t=t.sibling}return null}var ce=Object.assign,xS=Symbol.for("react.element"),Ar=Symbol.for("react.transitional.element"),na=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),Hg=Symbol.for("react.strict_mode"),Gc=Symbol.for("react.profiler"),TS=Symbol.for("react.provider"),qg=Symbol.for("react.consumer"),Zt=Symbol.for("react.context"),xd=Symbol.for("react.forward_ref"),Hc=Symbol.for("react.suspense"),qc=Symbol.for("react.suspense_list"),Td=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),Ic=Symbol.for("react.activity"),ES=Symbol.for("react.memo_cache_sentinel"),gf=Symbol.iterator;function Ii(t){return t===null||typeof t!="object"?null:(t=gf&&t[gf]||t["@@iterator"],typeof t=="function"?t:null)}var jS=Symbol.for("react.client.reference");function Fc(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===jS?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case Gc:return"Profiler";case Hg:return"StrictMode";case Hc:return"Suspense";case qc:return"SuspenseList";case Ic:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case na:return"Portal";case Zt:return(t.displayName||"Context")+".Provider";case qg:return(t._context.displayName||"Context")+".Consumer";case xd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Td:return e=t.displayName||null,e!==null?e:Fc(t.type)||"Memo";case bn:e=t._payload,t=t._init;try{return Fc(t(e))}catch{}}return null}var sa=Array.isArray,$=Bg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=SS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,hs={pending:!1,data:null,method:null,action:null},Yc=[],Fs=-1;function Gt(t){return{current:t}}function ke(t){0>Fs||(t.current=Yc[Fs],Yc[Fs]=null,Fs--)}function fe(t,e){Fs++,Yc[Fs]=t.current,t.current=e}var Pt=Gt(null),Ra=Gt(null),Mn=Gt(null),go=Gt(null);function yo(t,e){switch(fe(Mn,e),fe(Ra,t),fe(Pt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Sm(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Sm(e),t=o_(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ke(Pt),fe(Pt,t)}function yi(){ke(Pt),ke(Ra),ke(Mn)}function Kc(t){t.memoizedState!==null&&fe(go,t);var e=Pt.current,n=o_(e,t.type);e!==n&&(fe(Ra,t),fe(Pt,n))}function vo(t){Ra.current===t&&(ke(Pt),ke(Ra)),go.current===t&&(ke(go),$a._currentValue=hs)}var Xc=Object.prototype.hasOwnProperty,Ed=Oe.unstable_scheduleCallback,zl=Oe.unstable_cancelCallback,AS=Oe.unstable_shouldYield,CS=Oe.unstable_requestPaint,Lt=Oe.unstable_now,OS=Oe.unstable_getCurrentPriorityLevel,Ig=Oe.unstable_ImmediatePriority,Fg=Oe.unstable_UserBlockingPriority,_o=Oe.unstable_NormalPriority,NS=Oe.unstable_LowPriority,Yg=Oe.unstable_IdlePriority,RS=Oe.log,DS=Oe.unstable_setDisableYieldValue,nr=null,at=null;function Cn(t){if(typeof RS=="function"&&DS(t),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(nr,t)}catch{}}var rt=Math.clz32?Math.clz32:US,MS=Math.log,kS=Math.LN2;function US(t){return t>>>=0,t===0?32:31-(MS(t)/kS|0)|0}var Cr=256,Or=4194304;function ns(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function al(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,a=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~a,s!==0?i=ns(s):(r&=o,r!==0?i=ns(r):n||(n=o&~t,n!==0&&(i=ns(n))))):(o=s&~a,o!==0?i=ns(o):r!==0?i=ns(r):n||(n=s&~t,n!==0&&(i=ns(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function sr(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function PS(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kg(){var t=Cr;return Cr<<=1,!(Cr&4194048)&&(Cr=256),t}function Xg(){var t=Or;return Or<<=1,!(Or&62914560)&&(Or=4194304),t}function $l(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ir(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function LS(t,e,n,s,i,a){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=r&~n;0<n;){var u=31-rt(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(h!==null)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];m!==null&&(m.lane&=-536870913)}n&=~d}s!==0&&Qg(t,s,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(r&~e))}function Qg(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-rt(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&4194090}function Zg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-rt(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function jd(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ad(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Jg(){var t=J.p;return t!==0?t:(t=window.event,t===void 0?32:y_(t.type))}function VS(t,e){var n=J.p;try{return J.p=t,e()}finally{J.p=n}}var Yn=Math.random().toString(36).slice(2),ze="__reactFiber$"+Yn,We="__reactProps$"+Yn,Di="__reactContainer$"+Yn,Qc="__reactEvents$"+Yn,BS="__reactListeners$"+Yn,zS="__reactHandles$"+Yn,yf="__reactResources$"+Yn,ar="__reactMarker$"+Yn;function Cd(t){delete t[ze],delete t[We],delete t[Qc],delete t[BS],delete t[zS]}function Ys(t){var e=t[ze];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Di]||n[ze]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tm(t);t!==null;){if(n=t[ze])return n;t=Tm(t)}return e}t=n,n=t.parentNode}return null}function Mi(t){if(t=t[ze]||t[Di]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function ia(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(O(33))}function ci(t){var e=t[yf];return e||(e=t[yf]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function De(t){t[ar]=!0}var Wg=new Set,ey={};function js(t,e){vi(t,e),vi(t+"Capture",e)}function vi(t,e){for(ey[t]=e,t=0;t<e.length;t++)Wg.add(e[t])}var $S=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vf={},_f={};function GS(t){return Xc.call(_f,t)?!0:Xc.call(vf,t)?!1:$S.test(t)?_f[t]=!0:(vf[t]=!0,!1)}function Jr(t,e,n){if(GS(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Nr(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function qt(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}var Gl,bf;function zs(t){if(Gl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gl=e&&e[1]||"",bf=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gl+t+bf}var Hl=!1;function ql(t,e){if(!t||Hl)return"";Hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var h=m}Reflect.construct(t,[],d)}else{try{d.call()}catch(m){h=m}t.call(d.prototype)}}else{try{throw Error()}catch(m){h=m}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=s.DetermineComponentFrameRoot(),r=a[0],o=a[1];if(r&&o){var l=r.split(`
`),c=o.split(`
`);for(i=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(s===l.length||i===c.length)for(s=l.length-1,i=c.length-1;1<=s&&0<=i&&l[s]!==c[i];)i--;for(;1<=s&&0<=i;s--,i--)if(l[s]!==c[i]){if(s!==1||i!==1)do if(s--,i--,0>i||l[s]!==c[i]){var u=`
`+l[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=i);break}}}finally{Hl=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?zs(n):""}function HS(t){switch(t.tag){case 26:case 27:case 5:return zs(t.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 15:return ql(t.type,!1);case 11:return ql(t.type.render,!1);case 1:return ql(t.type,!0);case 31:return zs("Activity");default:return""}}function Sf(t){try{var e="";do e+=HS(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ty(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qS(t){var e=ty(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(r){s=""+r,a.call(this,r)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(r){s=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bo(t){t._valueTracker||(t._valueTracker=qS(t))}function ny(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=ty(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function So(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var IS=/[\n"\\]/g;function yt(t){return t.replace(IS,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Zc(t,e,n,s,i,a,r,o){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+mt(e)):t.value!==""+mt(e)&&(t.value=""+mt(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?Jc(t,r,mt(e)):n!=null?Jc(t,r,mt(n)):s!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+mt(o):t.removeAttribute("name")}function sy(t,e,n,s,i,a,r,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null))return;n=n!=null?""+mt(n):"",e=e!=null?""+mt(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r)}function Jc(t,e,n){e==="number"&&So(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ui(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+mt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function iy(t,e,n){if(e!=null&&(e=""+mt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+mt(n):""}function ay(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(O(92));if(sa(s)){if(1<s.length)throw Error(O(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=mt(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s)}function _i(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var FS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wf(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||FS.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function ry(t,e,n){if(e!=null&&typeof e!="object")throw Error(O(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&wf(t,i,s)}else for(var a in e)e.hasOwnProperty(a)&&wf(t,a,e[a])}function Od(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),KS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(t){return KS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Wc=null;function Nd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ks=null,di=null;function xf(t){var e=Mi(t);if(e&&(t=e.stateNode)){var n=t[We]||null;e:switch(t=e.stateNode,e.type){case"input":if(Zc(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[We]||null;if(!i)throw Error(O(90));Zc(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&ny(s)}break e;case"textarea":iy(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ui(t,!!n.multiple,e,!1)}}}var Il=!1;function oy(t,e,n){if(Il)return t(e,n);Il=!0;try{var s=t(e);return s}finally{if(Il=!1,(Ks!==null||di!==null)&&(pl(),Ks&&(e=Ks,t=di,di=Ks=null,xf(e),t)))for(e=0;e<t.length;e++)xf(t[e])}}function Da(t,e){var n=t.stateNode;if(n===null)return null;var s=n[We]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eu=!1;if(an)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){eu=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{eu=!1}var On=null,Rd=null,eo=null;function ly(){if(eo)return eo;var t,e=Rd,n=e.length,s,i="value"in On?On.value:On.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var r=n-t;for(s=1;s<=r&&e[n-s]===i[a-s];s++);return eo=i.slice(t,1<s?1-s:void 0)}function to(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rr(){return!0}function Tf(){return!1}function et(t){function e(n,s,i,a,r){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Rr:Tf,this.isPropagationStopped=Tf,this}return ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),e}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=et(As),rr=ce({},As,{view:0,detail:0}),XS=et(rr),Fl,Yl,Yi,ol=ce({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?(Fl=t.screenX-Yi.screenX,Yl=t.screenY-Yi.screenY):Yl=Fl=0,Yi=t),Fl)},movementY:function(t){return"movementY"in t?t.movementY:Yl}}),Ef=et(ol),QS=ce({},ol,{dataTransfer:0}),ZS=et(QS),JS=ce({},rr,{relatedTarget:0}),Kl=et(JS),WS=ce({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),ew=et(WS),tw=ce({},As,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nw=et(tw),sw=ce({},As,{data:0}),jf=et(sw),iw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ow(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rw[t])?!!e[t]:!1}function Dd(){return ow}var lw=ce({},rr,{key:function(t){if(t.key){var e=iw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=to(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dd,charCode:function(t){return t.type==="keypress"?to(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?to(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cw=et(lw),uw=ce({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Af=et(uw),dw=ce({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dd}),hw=et(dw),fw=ce({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),mw=et(fw),pw=ce({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gw=et(pw),yw=ce({},As,{newState:0,oldState:0}),vw=et(yw),_w=[9,13,27,32],Md=an&&"CompositionEvent"in window,ua=null;an&&"documentMode"in document&&(ua=document.documentMode);var bw=an&&"TextEvent"in window&&!ua,cy=an&&(!Md||ua&&8<ua&&11>=ua),Cf=" ",Of=!1;function uy(t,e){switch(t){case"keyup":return _w.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function Sw(t,e){switch(t){case"compositionend":return dy(e);case"keypress":return e.which!==32?null:(Of=!0,Cf);case"textInput":return t=e.data,t===Cf&&Of?null:t;default:return null}}function ww(t,e){if(Xs)return t==="compositionend"||!Md&&uy(t,e)?(t=ly(),eo=Rd=On=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cy&&e.locale!=="ko"?null:e.data;default:return null}}var xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xw[t.type]:e==="textarea"}function hy(t,e,n,s){Ks?di?di.push(s):di=[s]:Ks=s,e=Bo(e,"onChange"),0<e.length&&(n=new rl("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var da=null,Ma=null;function Tw(t){i_(t,0)}function ll(t){var e=ia(t);if(ny(e))return t}function Rf(t,e){if(t==="change")return e}var fy=!1;if(an){var Xl;if(an){var Ql="oninput"in document;if(!Ql){var Df=document.createElement("div");Df.setAttribute("oninput","return;"),Ql=typeof Df.oninput=="function"}Xl=Ql}else Xl=!1;fy=Xl&&(!document.documentMode||9<document.documentMode)}function Mf(){da&&(da.detachEvent("onpropertychange",my),Ma=da=null)}function my(t){if(t.propertyName==="value"&&ll(Ma)){var e=[];hy(e,Ma,t,Nd(t)),oy(Tw,e)}}function Ew(t,e,n){t==="focusin"?(Mf(),da=e,Ma=n,da.attachEvent("onpropertychange",my)):t==="focusout"&&Mf()}function jw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ll(Ma)}function Aw(t,e){if(t==="click")return ll(e)}function Cw(t,e){if(t==="input"||t==="change")return ll(e)}function Ow(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ct=typeof Object.is=="function"?Object.is:Ow;function ka(t,e){if(ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Xc.call(e,i)||!ct(t[i],e[i]))return!1}return!0}function kf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uf(t,e){var n=kf(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kf(n)}}function py(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?py(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=So(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=So(t.document)}return e}function kd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Nw=an&&"documentMode"in document&&11>=document.documentMode,Qs=null,tu=null,ha=null,nu=!1;function Pf(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nu||Qs==null||Qs!==So(s)||(s=Qs,"selectionStart"in s&&kd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ha&&ka(ha,s)||(ha=s,s=Bo(tu,"onSelect"),0<s.length&&(e=new rl("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Qs)))}function Jn(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:Jn("Animation","AnimationEnd"),animationiteration:Jn("Animation","AnimationIteration"),animationstart:Jn("Animation","AnimationStart"),transitionrun:Jn("Transition","TransitionRun"),transitionstart:Jn("Transition","TransitionStart"),transitioncancel:Jn("Transition","TransitionCancel"),transitionend:Jn("Transition","TransitionEnd")},Zl={},yy={};an&&(yy=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function Cs(t){if(Zl[t])return Zl[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yy)return Zl[t]=e[n];return t}var vy=Cs("animationend"),_y=Cs("animationiteration"),by=Cs("animationstart"),Rw=Cs("transitionrun"),Dw=Cs("transitionstart"),Mw=Cs("transitioncancel"),Sy=Cs("transitionend"),wy=new Map,su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");su.push("scrollEnd");function Nt(t,e){wy.set(t,e),js(e,[t])}var Lf=new WeakMap;function vt(t,e){if(typeof t=="object"&&t!==null){var n=Lf.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Sf(e)},Lf.set(t,e),e)}return{value:t,source:e,stack:Sf(e)}}var ft=[],Js=0,Ud=0;function cl(){for(var t=Js,e=Ud=Js=0;e<t;){var n=ft[e];ft[e++]=null;var s=ft[e];ft[e++]=null;var i=ft[e];ft[e++]=null;var a=ft[e];if(ft[e++]=null,s!==null&&i!==null){var r=s.pending;r===null?i.next=i:(i.next=r.next,r.next=i),s.pending=i}a!==0&&xy(n,i,a)}}function ul(t,e,n,s){ft[Js++]=t,ft[Js++]=e,ft[Js++]=n,ft[Js++]=s,Ud|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Pd(t,e,n,s){return ul(t,e,n,s),wo(t)}function ki(t,e){return ul(t,null,null,e),wo(t)}function xy(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,s=a.alternate,s!==null&&(s.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-rt(n),t=a.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),a):null}function wo(t){if(50<wa)throw wa=0,Tu=null,Error(O(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ws={};function kw(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(t,e,n,s){return new kw(t,e,n,s)}function Ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nn(t,e){var n=t.alternate;return n===null?(n=it(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Ty(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function no(t,e,n,s,i,a){var r=0;if(s=t,typeof t=="function")Ld(t)&&(r=1);else if(typeof t=="string")r=Px(t,n,Pt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Ic:return t=it(31,n,e,i),t.elementType=Ic,t.lanes=a,t;case Is:return fs(n.children,i,a,e);case Hg:r=8,i|=24;break;case Gc:return t=it(12,n,e,i|2),t.elementType=Gc,t.lanes=a,t;case Hc:return t=it(13,n,e,i),t.elementType=Hc,t.lanes=a,t;case qc:return t=it(19,n,e,i),t.elementType=qc,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TS:case Zt:r=10;break e;case qg:r=9;break e;case xd:r=11;break e;case Td:r=14;break e;case bn:r=16,s=null;break e}r=29,n=Error(O(130,t===null?"null":typeof t,"")),s=null}return e=it(r,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function fs(t,e,n,s){return t=it(7,t,s,e),t.lanes=n,t}function Jl(t,e,n){return t=it(6,t,null,e),t.lanes=n,t}function Wl(t,e,n){return e=it(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var ei=[],ti=0,xo=null,To=0,pt=[],gt=0,ms=null,Jt=1,Wt="";function ss(t,e){ei[ti++]=To,ei[ti++]=xo,xo=t,To=e}function Ey(t,e,n){pt[gt++]=Jt,pt[gt++]=Wt,pt[gt++]=ms,ms=t;var s=Jt;t=Wt;var i=32-rt(s)-1;s&=~(1<<i),n+=1;var a=32-rt(e)+i;if(30<a){var r=i-i%5;a=(s&(1<<r)-1).toString(32),s>>=r,i-=r,Jt=1<<32-rt(e)+i|n<<i|s,Wt=a+t}else Jt=1<<a|n<<i|s,Wt=t}function Vd(t){t.return!==null&&(ss(t,1),Ey(t,1,0))}function Bd(t){for(;t===xo;)xo=ei[--ti],ei[ti]=null,To=ei[--ti],ei[ti]=null;for(;t===ms;)ms=pt[--gt],pt[gt]=null,Wt=pt[--gt],pt[gt]=null,Jt=pt[--gt],pt[gt]=null}var He=null,ve=null,Z=!1,ps=null,kt=!1,iu=Error(O(519));function ws(t){var e=Error(O(418,""));throw Ua(vt(e,t)),iu}function Vf(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[ze]=t,e[We]=s,n){case"dialog":Y("cancel",e),Y("close",e);break;case"iframe":case"object":case"embed":Y("load",e);break;case"video":case"audio":for(n=0;n<Va.length;n++)Y(Va[n],e);break;case"source":Y("error",e);break;case"img":case"image":case"link":Y("error",e),Y("load",e);break;case"details":Y("toggle",e);break;case"input":Y("invalid",e),sy(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),bo(e);break;case"select":Y("invalid",e);break;case"textarea":Y("invalid",e),ay(e,s.value,s.defaultValue,s.children),bo(e)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||r_(e.textContent,n)?(s.popover!=null&&(Y("beforetoggle",e),Y("toggle",e)),s.onScroll!=null&&Y("scroll",e),s.onScrollEnd!=null&&Y("scrollend",e),s.onClick!=null&&(e.onclick=vl),e=!0):e=!1,e||ws(t)}function Bf(t){for(He=t.return;He;)switch(He.tag){case 5:case 13:kt=!1;return;case 27:case 3:kt=!0;return;default:He=He.return}}function Ki(t){if(t!==He)return!1;if(!Z)return Bf(t),Z=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Nu(t.type,t.memoizedProps)),n=!n),n&&ve&&ws(t),Bf(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){ve=Ot(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}ve=null}}else e===27?(e=ve,Kn(t.type)?(t=Mu,Mu=null,ve=t):ve=e):ve=He?Ot(t.stateNode.nextSibling):null;return!0}function or(){ve=He=null,Z=!1}function zf(){var t=ps;return t!==null&&(Qe===null?Qe=t:Qe.push.apply(Qe,t),ps=null),t}function Ua(t){ps===null?ps=[t]:ps.push(t)}var au=Gt(null),Os=null,en=null;function xn(t,e,n){fe(au,e._currentValue),e._currentValue=n}function sn(t){t._currentValue=au.current,ke(au)}function ru(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function ou(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var r=i.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),ru(a.return,n,t),s||(r=null);break e}a=o.next}}else if(i.tag===18){if(r=i.return,r===null)throw Error(O(341));r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),ru(r,n,t),r=null}else r=i.child;if(r!==null)r.return=i;else for(r=i;r!==null;){if(r===t){r=null;break}if(i=r.sibling,i!==null){i.return=r.return,r=i;break}r=r.return}i=r}}function lr(t,e,n,s){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var r=i.alternate;if(r===null)throw Error(O(387));if(r=r.memoizedProps,r!==null){var o=i.type;ct(i.pendingProps.value,r.value)||(t!==null?t.push(o):t=[o])}}else if(i===go.current){if(r=i.alternate,r===null)throw Error(O(387));r.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push($a):t=[$a])}i=i.return}t!==null&&ou(e,t,n,s),e.flags|=262144}function Eo(t){for(t=t.firstContext;t!==null;){if(!ct(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xs(t){Os=t,en=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $e(t){return jy(Os,t)}function Dr(t,e){return Os===null&&xs(t),jy(t,e)}function jy(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},en===null){if(t===null)throw Error(O(308));en=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else en=en.next=e;return n}var Uw=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Pw=Oe.unstable_scheduleCallback,Lw=Oe.unstable_NormalPriority,Ae={$$typeof:Zt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new Uw,data:new Map,refCount:0}}function cr(t){t.refCount--,t.refCount===0&&Pw(Lw,function(){t.controller.abort()})}var fa=null,lu=0,bi=0,hi=null;function Vw(t,e){if(fa===null){var n=fa=[];lu=0,bi=ch(),hi={status:"pending",value:void 0,then:function(s){n.push(s)}}}return lu++,e.then($f,$f),e}function $f(){if(--lu===0&&fa!==null){hi!==null&&(hi.status="fulfilled");var t=fa;fa=null,bi=0,hi=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Bw(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var Gf=$.S;$.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Vw(t,e),Gf!==null&&Gf(t,e)};var gs=Gt(null);function $d(){var t=gs.current;return t!==null?t:le.pooledCache}function so(t,e){e===null?fe(gs,gs.current):fe(gs,e.pool)}function Ay(){var t=$d();return t===null?null:{parent:Ae._currentValue,pool:t}}var ur=Error(O(460)),Cy=Error(O(474)),dl=Error(O(542)),cu={then:function(){}};function Hf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Mr(){}function Oy(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Mr,Mr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,If(t),t;default:if(typeof e.status=="string")e.then(Mr,Mr);else{if(t=le,t!==null&&100<t.shellSuspendCounter)throw Error(O(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,If(t),t}throw ma=e,ur}}var ma=null;function qf(){if(ma===null)throw Error(O(459));var t=ma;return ma=null,t}function If(t){if(t===ur||t===dl)throw Error(O(483))}var Sn=!1;function Gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uu(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function kn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Un(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,te&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=wo(t),xy(t,null,n),e}return ul(t,s,e,n),wo(t)}function pa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Zg(t,n)}}function ec(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=r:a=a.next=r,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var du=!1;function ga(){if(du){var t=hi;if(t!==null)throw t}}function ya(t,e,n,s){du=!1;var i=t.updateQueue;Sn=!1;var a=i.firstBaseUpdate,r=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,r===null?a=c:r.next=c,r=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==r&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;r=0,u=c=l=null,o=a;do{var h=o.lane&-536870913,m=h!==o.lane;if(m?(Q&h)===h:(s&h)===h){h!==0&&h===bi&&(du=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var v=t,_=o;h=e;var b=n;switch(_.tag){case 1:if(v=_.payload,typeof v=="function"){d=v.call(b,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,h=typeof v=="function"?v.call(b,d,h):v,h==null)break e;d=ce({},d,h);break e;case 2:Sn=!0}}h=o.callback,h!==null&&(t.flags|=64,m&&(t.flags|=8192),m=i.callbacks,m===null?i.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,r|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),qn|=r,t.lanes=r,t.memoizedState=d}}function Ny(t,e){if(typeof t!="function")throw Error(O(191,t));t.call(e)}function Ry(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Ny(n[t],e)}var Si=Gt(null),jo=Gt(0);function Ff(t,e){t=ln,fe(jo,t),fe(Si,e),ln=t|e.baseLanes}function hu(){fe(jo,ln),fe(Si,Si.current)}function Hd(){ln=jo.current,ke(Si),ke(jo)}var Gn=0,q=null,ie=null,Te=null,Ao=!1,fi=!1,Ts=!1,Co=0,Pa=0,mi=null,zw=0;function be(){throw Error(O(321))}function qd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ct(t[n],e[n]))return!1;return!0}function Id(t,e,n,s,i,a){return Gn=a,q=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$.H=t===null||t.memoizedState===null?lv:cv,Ts=!1,a=n(s,i),Ts=!1,fi&&(a=My(e,n,s,i)),Dy(t),a}function Dy(t){$.H=Oo;var e=ie!==null&&ie.next!==null;if(Gn=0,Te=ie=q=null,Ao=!1,Pa=0,mi=null,e)throw Error(O(300));t===null||Me||(t=t.dependencies,t!==null&&Eo(t)&&(Me=!0))}function My(t,e,n,s){q=t;var i=0;do{if(fi&&(mi=null),Pa=0,fi=!1,25<=i)throw Error(O(301));if(i+=1,Te=ie=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}$.H=Yw,a=e(n,s)}while(fi);return a}function $w(){var t=$.H,e=t.useState()[0];return e=typeof e.then=="function"?dr(e):e,t=t.useState()[0],(ie!==null?ie.memoizedState:null)!==t&&(q.flags|=1024),e}function Fd(){var t=Co!==0;return Co=0,t}function Yd(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Kd(t){if(Ao){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ao=!1}Gn=0,Te=ie=q=null,fi=!1,Pa=Co=0,mi=null}function Ke(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?q.memoizedState=Te=t:Te=Te.next=t,Te}function Ee(){if(ie===null){var t=q.alternate;t=t!==null?t.memoizedState:null}else t=ie.next;var e=Te===null?q.memoizedState:Te.next;if(e!==null)Te=e,ie=t;else{if(t===null)throw q.alternate===null?Error(O(467)):Error(O(310));ie=t,t={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Te===null?q.memoizedState=Te=t:Te=Te.next=t}return Te}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dr(t){var e=Pa;return Pa+=1,mi===null&&(mi=[]),t=Oy(mi,t,e),e=q,(Te===null?e.memoizedState:Te.next)===null&&(e=e.alternate,$.H=e===null||e.memoizedState===null?lv:cv),t}function hl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return dr(t);if(t.$$typeof===Zt)return $e(t)}throw Error(O(438,String(t)))}function Qd(t){var e=null,n=q.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=q.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Xd(),q.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=ES;return e.index++,n}function rn(t,e){return typeof e=="function"?e(t):e}function io(t){var e=Ee();return Zd(e,ie,t)}function Zd(t,e,n){var s=t.queue;if(s===null)throw Error(O(311));s.lastRenderedReducer=n;var i=t.baseQueue,a=s.pending;if(a!==null){if(i!==null){var r=i.next;i.next=a.next,a.next=r}e.baseQueue=i=a,s.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var o=r=null,l=null,c=e,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(Q&d)===d:(Gn&d)===d){var h=c.revertLane;if(h===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===bi&&(u=!0);else if((Gn&h)===h){c=c.next,h===bi&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,r=a):l=l.next=d,q.lanes|=h,qn|=h;d=c.action,Ts&&n(a,d),a=c.hasEagerState?c.eagerState:n(a,d)}else h={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,r=a):l=l.next=h,q.lanes|=d,qn|=d;c=c.next}while(c!==null&&c!==e);if(l===null?r=a:l.next=o,!ct(a,t.memoizedState)&&(Me=!0,u&&(n=hi,n!==null)))throw n;t.memoizedState=a,t.baseState=r,t.baseQueue=l,s.lastRenderedState=a}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function tc(t){var e=Ee(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var r=i=i.next;do a=t(a,r.action),r=r.next;while(r!==i);ct(a,e.memoizedState)||(Me=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function ky(t,e,n){var s=q,i=Ee(),a=Z;if(a){if(n===void 0)throw Error(O(407));n=n()}else n=e();var r=!ct((ie||i).memoizedState,n);r&&(i.memoizedState=n,Me=!0),i=i.queue;var o=Ly.bind(null,s,i,t);if(hr(2048,8,o,[t]),i.getSnapshot!==e||r||Te!==null&&Te.memoizedState.tag&1){if(s.flags|=2048,wi(9,fl(),Py.bind(null,s,i,n,e),null),le===null)throw Error(O(349));a||Gn&124||Uy(s,e,n)}return n}function Uy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=q.updateQueue,e===null?(e=Xd(),q.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Py(t,e,n,s){e.value=n,e.getSnapshot=s,Vy(e)&&By(t)}function Ly(t,e,n){return n(function(){Vy(e)&&By(t)})}function Vy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ct(t,n)}catch{return!0}}function By(t){var e=ki(t,2);e!==null&&lt(e,t,2)}function fu(t){var e=Ke();if(typeof t=="function"){var n=t;if(t=n(),Ts){Cn(!0);try{n()}finally{Cn(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rn,lastRenderedState:t},e}function zy(t,e,n,s){return t.baseState=n,Zd(t,ie,typeof s=="function"?s:rn)}function Gw(t,e,n,s,i){if(ml(t))throw Error(O(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};$.T!==null?n(!0):a.isTransition=!1,s(a),n=e.pending,n===null?(a.next=e.pending=a,$y(e,a)):(a.next=n.next,e.pending=n.next=a)}}function $y(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var a=$.T,r={};$.T=r;try{var o=n(i,s),l=$.S;l!==null&&l(r,o),Yf(t,e,o)}catch(c){mu(t,e,c)}finally{$.T=a}}else try{a=n(i,s),Yf(t,e,a)}catch(c){mu(t,e,c)}}function Yf(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Kf(t,e,s)},function(s){return mu(t,e,s)}):Kf(t,e,n)}function Kf(t,e,n){e.status="fulfilled",e.value=n,Gy(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,$y(t,n)))}function mu(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,Gy(e),e=e.next;while(e!==s)}t.action=null}function Gy(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Hy(t,e){return e}function Xf(t,e){if(Z){var n=le.formState;if(n!==null){e:{var s=q;if(Z){if(ve){t:{for(var i=ve,a=kt;i.nodeType!==8;){if(!a){i=null;break t}if(i=Ot(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){ve=Ot(i.nextSibling),s=i.data==="F!";break e}}ws(s)}s=!1}s&&(e=n[0])}}return n=Ke(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hy,lastRenderedState:e},n.queue=s,n=av.bind(null,q,s),s.dispatch=n,s=fu(!1),a=th.bind(null,q,!1,s.queue),s=Ke(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=Gw.bind(null,q,i,a,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function Qf(t){var e=Ee();return qy(e,ie,t)}function qy(t,e,n){if(e=Zd(t,e,Hy)[0],t=io(rn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=dr(e)}catch(r){throw r===ur?dl:r}else s=e;e=Ee();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(q.flags|=2048,wi(9,fl(),Hw.bind(null,i,n),null)),[s,a,t]}function Hw(t,e){t.action=e}function Zf(t){var e=Ee(),n=ie;if(n!==null)return qy(e,n,t);Ee(),e=e.memoizedState,n=Ee();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function wi(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=q.updateQueue,e===null&&(e=Xd(),q.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function fl(){return{destroy:void 0,resource:void 0}}function Iy(){return Ee().memoizedState}function ao(t,e,n,s){var i=Ke();s=s===void 0?null:s,q.flags|=t,i.memoizedState=wi(1|e,fl(),n,s)}function hr(t,e,n,s){var i=Ee();s=s===void 0?null:s;var a=i.memoizedState.inst;ie!==null&&s!==null&&qd(s,ie.memoizedState.deps)?i.memoizedState=wi(e,a,n,s):(q.flags|=t,i.memoizedState=wi(1|e,a,n,s))}function Jf(t,e){ao(8390656,8,t,e)}function Fy(t,e){hr(2048,8,t,e)}function Yy(t,e){return hr(4,2,t,e)}function Ky(t,e){return hr(4,4,t,e)}function Xy(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qy(t,e,n){n=n!=null?n.concat([t]):null,hr(4,4,Xy.bind(null,e,t),n)}function Jd(){}function Zy(t,e){var n=Ee();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&qd(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Jy(t,e){var n=Ee();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&qd(e,s[1]))return s[0];if(s=t(),Ts){Cn(!0);try{t()}finally{Cn(!1)}}return n.memoizedState=[s,e],s}function Wd(t,e,n){return n===void 0||Gn&1073741824?t.memoizedState=e:(t.memoizedState=n,t=Gv(),q.lanes|=t,qn|=t,n)}function Wy(t,e,n,s){return ct(n,e)?n:Si.current!==null?(t=Wd(t,n,s),ct(t,e)||(Me=!0),t):Gn&42?(t=Gv(),q.lanes|=t,qn|=t,e):(Me=!0,t.memoizedState=n)}function ev(t,e,n,s,i){var a=J.p;J.p=a!==0&&8>a?a:8;var r=$.T,o={};$.T=o,th(t,!1,e,n);try{var l=i(),c=$.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=Bw(l,s);va(t,e,u,ot(t))}else va(t,e,s,ot(t))}catch(d){va(t,e,{then:function(){},status:"rejected",reason:d},ot())}finally{J.p=a,$.T=r}}function qw(){}function pu(t,e,n,s){if(t.tag!==5)throw Error(O(476));var i=tv(t).queue;ev(t,i,e,hs,n===null?qw:function(){return nv(t),n(s)})}function tv(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:hs,baseState:hs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rn,lastRenderedState:hs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function nv(t){var e=tv(t).next.queue;va(t,e,{},ot())}function eh(){return $e($a)}function sv(){return Ee().memoizedState}function iv(){return Ee().memoizedState}function Iw(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ot();t=kn(n);var s=Un(e,t,n);s!==null&&(lt(s,e,n),pa(s,e,n)),e={cache:zd()},t.payload=e;return}e=e.return}}function Fw(t,e,n){var s=ot();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ml(t)?rv(e,n):(n=Pd(t,e,n,s),n!==null&&(lt(n,t,s),ov(n,e,s)))}function av(t,e,n){var s=ot();va(t,e,n,s)}function va(t,e,n,s){var i={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ml(t))rv(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var r=e.lastRenderedState,o=a(r,n);if(i.hasEagerState=!0,i.eagerState=o,ct(o,r))return ul(t,e,i,0),le===null&&cl(),!1}catch{}finally{}if(n=Pd(t,e,i,s),n!==null)return lt(n,t,s),ov(n,e,s),!0}return!1}function th(t,e,n,s){if(s={lane:2,revertLane:ch(),action:s,hasEagerState:!1,eagerState:null,next:null},ml(t)){if(e)throw Error(O(479))}else e=Pd(t,n,s,2),e!==null&&lt(e,t,2)}function ml(t){var e=t.alternate;return t===q||e!==null&&e===q}function rv(t,e){fi=Ao=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ov(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Zg(t,n)}}var Oo={readContext:$e,use:hl,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},lv={readContext:$e,use:hl,useCallback:function(t,e){return Ke().memoizedState=[t,e===void 0?null:e],t},useContext:$e,useEffect:Jf,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,ao(4194308,4,Xy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ao(4194308,4,t,e)},useInsertionEffect:function(t,e){ao(4,2,t,e)},useMemo:function(t,e){var n=Ke();e=e===void 0?null:e;var s=t();if(Ts){Cn(!0);try{t()}finally{Cn(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Ke();if(n!==void 0){var i=n(e);if(Ts){Cn(!0);try{n(e)}finally{Cn(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=Fw.bind(null,q,t),[s.memoizedState,t]},useRef:function(t){var e=Ke();return t={current:t},e.memoizedState=t},useState:function(t){t=fu(t);var e=t.queue,n=av.bind(null,q,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Jd,useDeferredValue:function(t,e){var n=Ke();return Wd(n,t,e)},useTransition:function(){var t=fu(!1);return t=ev.bind(null,q,t.queue,!0,!1),Ke().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=q,i=Ke();if(Z){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),le===null)throw Error(O(349));Q&124||Uy(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Jf(Ly.bind(null,s,a,t),[t]),s.flags|=2048,wi(9,fl(),Py.bind(null,s,a,n,e),null),n},useId:function(){var t=Ke(),e=le.identifierPrefix;if(Z){var n=Wt,s=Jt;n=(s&~(1<<32-rt(s)-1)).toString(32)+n,e="«"+e+"R"+n,n=Co++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=zw++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:eh,useFormState:Xf,useActionState:Xf,useOptimistic:function(t){var e=Ke();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=th.bind(null,q,!0,n),n.dispatch=e,[t,e]},useMemoCache:Qd,useCacheRefresh:function(){return Ke().memoizedState=Iw.bind(null,q)}},cv={readContext:$e,use:hl,useCallback:Zy,useContext:$e,useEffect:Fy,useImperativeHandle:Qy,useInsertionEffect:Yy,useLayoutEffect:Ky,useMemo:Jy,useReducer:io,useRef:Iy,useState:function(){return io(rn)},useDebugValue:Jd,useDeferredValue:function(t,e){var n=Ee();return Wy(n,ie.memoizedState,t,e)},useTransition:function(){var t=io(rn)[0],e=Ee().memoizedState;return[typeof t=="boolean"?t:dr(t),e]},useSyncExternalStore:ky,useId:sv,useHostTransitionStatus:eh,useFormState:Qf,useActionState:Qf,useOptimistic:function(t,e){var n=Ee();return zy(n,ie,t,e)},useMemoCache:Qd,useCacheRefresh:iv},Yw={readContext:$e,use:hl,useCallback:Zy,useContext:$e,useEffect:Fy,useImperativeHandle:Qy,useInsertionEffect:Yy,useLayoutEffect:Ky,useMemo:Jy,useReducer:tc,useRef:Iy,useState:function(){return tc(rn)},useDebugValue:Jd,useDeferredValue:function(t,e){var n=Ee();return ie===null?Wd(n,t,e):Wy(n,ie.memoizedState,t,e)},useTransition:function(){var t=tc(rn)[0],e=Ee().memoizedState;return[typeof t=="boolean"?t:dr(t),e]},useSyncExternalStore:ky,useId:sv,useHostTransitionStatus:eh,useFormState:Zf,useActionState:Zf,useOptimistic:function(t,e){var n=Ee();return ie!==null?zy(n,ie,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Qd,useCacheRefresh:iv},pi=null,La=0;function kr(t){var e=La;return La+=1,pi===null&&(pi=[]),Oy(pi,t,e)}function Xi(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ur(t,e){throw e.$$typeof===xS?Error(O(525)):(t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Wf(t){var e=t._init;return e(t._payload)}function uv(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function s(p){for(var g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(p,g){return p=nn(p,g),p.index=0,p.sibling=null,p}function a(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=67108866,g):y):(p.flags|=67108866,g)):(p.flags|=1048576,g)}function r(p){return t&&p.alternate===null&&(p.flags|=67108866),p}function o(p,g,y,S){return g===null||g.tag!==6?(g=Jl(y,p.mode,S),g.return=p,g):(g=i(g,y),g.return=p,g)}function l(p,g,y,S){var T=y.type;return T===Is?u(p,g,y.props.children,S,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bn&&Wf(T)===g.type)?(g=i(g,y.props),Xi(g,y),g.return=p,g):(g=no(y.type,y.key,y.props,null,p.mode,S),Xi(g,y),g.return=p,g)}function c(p,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Wl(y,p.mode,S),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function u(p,g,y,S,T){return g===null||g.tag!==7?(g=fs(y,p.mode,S,T),g.return=p,g):(g=i(g,y),g.return=p,g)}function d(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Jl(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ar:return y=no(g.type,g.key,g.props,null,p.mode,y),Xi(y,g),y.return=p,y;case na:return g=Wl(g,p.mode,y),g.return=p,g;case bn:var S=g._init;return g=S(g._payload),d(p,g,y)}if(sa(g)||Ii(g))return g=fs(g,p.mode,y,null),g.return=p,g;if(typeof g.then=="function")return d(p,kr(g),y);if(g.$$typeof===Zt)return d(p,Dr(p,g),y);Ur(p,g)}return null}function h(p,g,y,S){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return T!==null?null:o(p,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ar:return y.key===T?l(p,g,y,S):null;case na:return y.key===T?c(p,g,y,S):null;case bn:return T=y._init,y=T(y._payload),h(p,g,y,S)}if(sa(y)||Ii(y))return T!==null?null:u(p,g,y,S,null);if(typeof y.then=="function")return h(p,g,kr(y),S);if(y.$$typeof===Zt)return h(p,g,Dr(p,y),S);Ur(p,y)}return null}function m(p,g,y,S,T){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return p=p.get(y)||null,o(g,p,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ar:return p=p.get(S.key===null?y:S.key)||null,l(g,p,S,T);case na:return p=p.get(S.key===null?y:S.key)||null,c(g,p,S,T);case bn:var j=S._init;return S=j(S._payload),m(p,g,y,S,T)}if(sa(S)||Ii(S))return p=p.get(y)||null,u(g,p,S,T,null);if(typeof S.then=="function")return m(p,g,y,kr(S),T);if(S.$$typeof===Zt)return m(p,g,y,Dr(g,S),T);Ur(g,S)}return null}function v(p,g,y,S){for(var T=null,j=null,x=g,E=g=0,A=null;x!==null&&E<y.length;E++){x.index>E?(A=x,x=null):A=x.sibling;var C=h(p,x,y[E],S);if(C===null){x===null&&(x=A);break}t&&x&&C.alternate===null&&e(p,x),g=a(C,g,E),j===null?T=C:j.sibling=C,j=C,x=A}if(E===y.length)return n(p,x),Z&&ss(p,E),T;if(x===null){for(;E<y.length;E++)x=d(p,y[E],S),x!==null&&(g=a(x,g,E),j===null?T=x:j.sibling=x,j=x);return Z&&ss(p,E),T}for(x=s(x);E<y.length;E++)A=m(x,p,E,y[E],S),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?E:A.key),g=a(A,g,E),j===null?T=A:j.sibling=A,j=A);return t&&x.forEach(function(N){return e(p,N)}),Z&&ss(p,E),T}function _(p,g,y,S){if(y==null)throw Error(O(151));for(var T=null,j=null,x=g,E=g=0,A=null,C=y.next();x!==null&&!C.done;E++,C=y.next()){x.index>E?(A=x,x=null):A=x.sibling;var N=h(p,x,C.value,S);if(N===null){x===null&&(x=A);break}t&&x&&N.alternate===null&&e(p,x),g=a(N,g,E),j===null?T=N:j.sibling=N,j=N,x=A}if(C.done)return n(p,x),Z&&ss(p,E),T;if(x===null){for(;!C.done;E++,C=y.next())C=d(p,C.value,S),C!==null&&(g=a(C,g,E),j===null?T=C:j.sibling=C,j=C);return Z&&ss(p,E),T}for(x=s(x);!C.done;E++,C=y.next())C=m(x,p,E,C.value,S),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?E:C.key),g=a(C,g,E),j===null?T=C:j.sibling=C,j=C);return t&&x.forEach(function(U){return e(p,U)}),Z&&ss(p,E),T}function b(p,g,y,S){if(typeof y=="object"&&y!==null&&y.type===Is&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ar:e:{for(var T=y.key;g!==null;){if(g.key===T){if(T=y.type,T===Is){if(g.tag===7){n(p,g.sibling),S=i(g,y.props.children),S.return=p,p=S;break e}}else if(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bn&&Wf(T)===g.type){n(p,g.sibling),S=i(g,y.props),Xi(S,y),S.return=p,p=S;break e}n(p,g);break}else e(p,g);g=g.sibling}y.type===Is?(S=fs(y.props.children,p.mode,S,y.key),S.return=p,p=S):(S=no(y.type,y.key,y.props,null,p.mode,S),Xi(S,y),S.return=p,p=S)}return r(p);case na:e:{for(T=y.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),S=i(g,y.children||[]),S.return=p,p=S;break e}else{n(p,g);break}else e(p,g);g=g.sibling}S=Wl(y,p.mode,S),S.return=p,p=S}return r(p);case bn:return T=y._init,y=T(y._payload),b(p,g,y,S)}if(sa(y))return v(p,g,y,S);if(Ii(y)){if(T=Ii(y),typeof T!="function")throw Error(O(150));return y=T.call(y),_(p,g,y,S)}if(typeof y.then=="function")return b(p,g,kr(y),S);if(y.$$typeof===Zt)return b(p,g,Dr(p,y),S);Ur(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),S=i(g,y),S.return=p,p=S):(n(p,g),S=Jl(y,p.mode,S),S.return=p,p=S),r(p)):n(p,g)}return function(p,g,y,S){try{La=0;var T=b(p,g,y,S);return pi=null,T}catch(x){if(x===ur||x===dl)throw x;var j=it(29,x,null,p.mode);return j.lanes=S,j.return=p,j}finally{}}}var xi=uv(!0),dv=uv(!1),wt=Gt(null),Vt=null;function Tn(t){var e=t.alternate;fe(Ce,Ce.current&1),fe(wt,t),Vt===null&&(e===null||Si.current!==null||e.memoizedState!==null)&&(Vt=t)}function hv(t){if(t.tag===22){if(fe(Ce,Ce.current),fe(wt,t),Vt===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Vt=t)}}else En()}function En(){fe(Ce,Ce.current),fe(wt,wt.current)}function tn(t){ke(wt),Vt===t&&(Vt=null),ke(Ce)}var Ce=Gt(0);function No(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Du(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function nc(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gu={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=ot(),i=kn(s);i.payload=e,n!=null&&(i.callback=n),e=Un(t,i,s),e!==null&&(lt(e,t,s),pa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=ot(),i=kn(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Un(t,i,s),e!==null&&(lt(e,t,s),pa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),s=kn(n);s.tag=2,e!=null&&(s.callback=e),e=Un(t,s,n),e!==null&&(lt(e,t,n),pa(e,t,n))}};function em(t,e,n,s,i,a,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,r):e.prototype&&e.prototype.isPureReactComponent?!ka(n,s)||!ka(i,a):!0}function tm(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&gu.enqueueReplaceState(e,e.state,null)}function Es(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=ce({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var Ro=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function fv(t){Ro(t)}function mv(t){console.error(t)}function pv(t){Ro(t)}function Do(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function nm(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function yu(t,e,n){return n=kn(n),n.tag=3,n.payload={element:null},n.callback=function(){Do(t,e)},n}function gv(t){return t=kn(t),t.tag=3,t}function yv(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=s.value;t.payload=function(){return i(a)},t.callback=function(){nm(e,n,s)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){nm(e,n,s),typeof i!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function Kw(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&lr(e,n,i,!0),n=wt.current,n!==null){switch(n.tag){case 13:return Vt===null?Eu():n.alternate===null&&_e===0&&(_e=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===cu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),fc(t,s,i)),!1;case 22:return n.flags|=65536,s===cu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),fc(t,s,i)),!1}throw Error(O(435,n.tag))}return fc(t,s,i),Eu(),!1}if(Z)return e=wt.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==iu&&(t=Error(O(422),{cause:s}),Ua(vt(t,n)))):(s!==iu&&(e=Error(O(423),{cause:s}),Ua(vt(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=vt(s,n),i=yu(t.stateNode,s,i),ec(t,i),_e!==4&&(_e=2)),!1;var a=Error(O(520),{cause:s});if(a=vt(a,n),Sa===null?Sa=[a]:Sa.push(a),_e!==4&&(_e=2),e===null)return!0;s=vt(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=yu(n.stateNode,s,t),ec(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Pn===null||!Pn.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=gv(i),yv(i,t,n,s),ec(n,i),!1}n=n.return}while(n!==null);return!1}var vv=Error(O(461)),Me=!1;function Pe(t,e,n,s){e.child=t===null?dv(e,null,n,s):xi(e,t.child,n,s)}function sm(t,e,n,s,i){n=n.render;var a=e.ref;if("ref"in s){var r={};for(var o in s)o!=="ref"&&(r[o]=s[o])}else r=s;return xs(e),s=Id(t,e,n,r,a,i),o=Fd(),t!==null&&!Me?(Yd(t,e,i),on(t,e,i)):(Z&&o&&Vd(e),e.flags|=1,Pe(t,e,s,i),e.child)}function im(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!Ld(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,_v(t,e,a,s,i)):(t=no(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!nh(t,i)){var r=a.memoizedProps;if(n=n.compare,n=n!==null?n:ka,n(r,s)&&t.ref===e.ref)return on(t,e,i)}return e.flags|=1,t=nn(a,s),t.ref=e.ref,t.return=e,e.child=t}function _v(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(ka(a,s)&&t.ref===e.ref)if(Me=!1,e.pendingProps=s=a,nh(t,i))t.flags&131072&&(Me=!0);else return e.lanes=t.lanes,on(t,e,i)}return vu(t,e,n,s,i)}function bv(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden"){if(e.flags&128){if(s=a!==null?a.baseLanes|n:n,t!==null){for(i=e.child=t.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;e.childLanes=a&~s}else e.childLanes=0,e.child=null;return am(t,e,s,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&so(e,a!==null?a.cachePool:null),a!==null?Ff(e,a):hu(),hv(e);else return e.lanes=e.childLanes=536870912,am(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(so(e,a.cachePool),Ff(e,a),En(),e.memoizedState=null):(t!==null&&so(e,null),hu(),En());return Pe(t,e,i,n),e.child}function am(t,e,n,s){var i=$d();return i=i===null?null:{parent:Ae._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&so(e,null),hu(),hv(e),t!==null&&lr(t,e,s,!0),null}function ro(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(O(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function vu(t,e,n,s,i){return xs(e),n=Id(t,e,n,s,void 0,i),s=Fd(),t!==null&&!Me?(Yd(t,e,i),on(t,e,i)):(Z&&s&&Vd(e),e.flags|=1,Pe(t,e,n,i),e.child)}function rm(t,e,n,s,i,a){return xs(e),e.updateQueue=null,n=My(e,s,n,i),Dy(t),s=Fd(),t!==null&&!Me?(Yd(t,e,a),on(t,e,a)):(Z&&s&&Vd(e),e.flags|=1,Pe(t,e,n,a),e.child)}function om(t,e,n,s,i){if(xs(e),e.stateNode===null){var a=Ws,r=n.contextType;typeof r=="object"&&r!==null&&(a=$e(r)),a=new n(s,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=gu,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=s,a.state=e.memoizedState,a.refs={},Gd(e),r=n.contextType,a.context=typeof r=="object"&&r!==null?$e(r):Ws,a.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(nc(e,n,r,s),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&gu.enqueueReplaceState(a,a.state,null),ya(e,s,a,i),ga(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=Es(n,o);a.props=l;var c=a.context,u=n.contextType;r=Ws,typeof u=="object"&&u!==null&&(r=$e(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==r)&&tm(e,a,s,r),Sn=!1;var h=e.memoizedState;a.state=h,ya(e,s,a,i),ga(),c=e.memoizedState,o||h!==c||Sn?(typeof d=="function"&&(nc(e,n,d,s),c=e.memoizedState),(l=Sn||em(e,n,l,s,h,c,r))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=r,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,uu(t,e),r=e.memoizedProps,u=Es(n,r),a.props=u,d=e.pendingProps,h=a.context,c=n.contextType,l=Ws,typeof c=="object"&&c!==null&&(l=$e(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==d||h!==l)&&tm(e,a,s,l),Sn=!1,h=e.memoizedState,a.state=h,ya(e,s,a,i),ga();var m=e.memoizedState;r!==d||h!==m||Sn||t!==null&&t.dependencies!==null&&Eo(t.dependencies)?(typeof o=="function"&&(nc(e,n,o,s),m=e.memoizedState),(u=Sn||em(e,n,u,s,h,m,l)||t!==null&&t.dependencies!==null&&Eo(t.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),a.props=s,a.state=m,a.context=l,s=u):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return a=s,ro(t,e),s=(e.flags&128)!==0,a||s?(a=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&s?(e.child=xi(e,t.child,null,i),e.child=xi(e,null,n,i)):Pe(t,e,n,i),e.memoizedState=a.state,t=e.child):t=on(t,e,i),t}function lm(t,e,n,s){return or(),e.flags|=256,Pe(t,e,n,s),e.child}var sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ic(t){return{baseLanes:t,cachePool:Ay()}}function ac(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=_t),t}function Sv(t,e,n){var s=e.pendingProps,i=!1,a=(e.flags&128)!==0,r;if((r=a)||(r=t!==null&&t.memoizedState===null?!1:(Ce.current&2)!==0),r&&(i=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(Z){if(i?Tn(e):En(),Z){var o=ve,l;if(l=o){e:{for(l=o,o=kt;l.nodeType!==8;){if(!o){o=null;break e}if(l=Ot(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:ms!==null?{id:Jt,overflow:Wt}:null,retryLane:536870912,hydrationErrors:null},l=it(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,He=e,ve=null,l=!0):l=!1}l||ws(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return Du(o)?e.lanes=32:e.lanes=536870912,null;tn(e)}return o=s.children,s=s.fallback,i?(En(),i=e.mode,o=Mo({mode:"hidden",children:o},i),s=fs(s,i,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,i=e.child,i.memoizedState=ic(n),i.childLanes=ac(t,r,n),e.memoizedState=sc,s):(Tn(e),_u(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(Tn(e),e.flags&=-257,e=rc(t,e,n)):e.memoizedState!==null?(En(),e.child=t.child,e.flags|=128,e=null):(En(),i=s.fallback,o=e.mode,s=Mo({mode:"visible",children:s.children},o),i=fs(i,o,n,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,xi(e,t.child,null,n),s=e.child,s.memoizedState=ic(n),s.childLanes=ac(t,r,n),e.memoizedState=sc,e=i);else if(Tn(e),Du(o)){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;r=c,s=Error(O(419)),s.stack="",s.digest=r,Ua({value:s,source:null,stack:null}),e=rc(t,e,n)}else if(Me||lr(t,e,n,!1),r=(n&t.childLanes)!==0,Me||r){if(r=le,r!==null&&(s=n&-n,s=s&42?1:jd(s),s=s&(r.suspendedLanes|n)?0:s,s!==0&&s!==l.retryLane))throw l.retryLane=s,ki(t,s),lt(r,t,s),vv;o.data==="$?"||Eu(),e=rc(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,ve=Ot(o.nextSibling),He=e,Z=!0,ps=null,kt=!1,t!==null&&(pt[gt++]=Jt,pt[gt++]=Wt,pt[gt++]=ms,Jt=t.id,Wt=t.overflow,ms=e),e=_u(e,s.children),e.flags|=4096);return e}return i?(En(),i=s.fallback,o=e.mode,l=t.child,c=l.sibling,s=nn(l,{mode:"hidden",children:s.children}),s.subtreeFlags=l.subtreeFlags&65011712,c!==null?i=nn(c,i):(i=fs(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o===null?o=ic(n):(l=o.cachePool,l!==null?(c=Ae._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Ay(),o={baseLanes:o.baseLanes|n,cachePool:l}),i.memoizedState=o,i.childLanes=ac(t,r,n),e.memoizedState=sc,s):(Tn(e),n=t.child,t=n.sibling,n=nn(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function _u(t,e){return e=Mo({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Mo(t,e){return t=it(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function rc(t,e,n){return xi(e,t.child,null,n),t=_u(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cm(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),ru(t.return,e,n)}function oc(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function wv(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(Pe(t,e,s.children,n),s=Ce.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cm(t,n,e);else if(t.tag===19)cm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(fe(Ce,s),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&No(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),oc(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&No(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}oc(e,!0,n,null,a);break;case"together":oc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function on(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qn|=e.lanes,!(n&e.childLanes))if(t!==null){if(lr(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=nn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nh(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Eo(t)))}function Xw(t,e,n){switch(e.tag){case 3:yo(e,e.stateNode.containerInfo),xn(e,Ae,t.memoizedState.cache),or();break;case 27:case 5:Kc(e);break;case 4:yo(e,e.stateNode.containerInfo);break;case 10:xn(e,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Tn(e),e.flags|=128,null):n&e.child.childLanes?Sv(t,e,n):(Tn(e),t=on(t,e,n),t!==null?t.sibling:null);Tn(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(lr(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return wv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fe(Ce,Ce.current),s)break;return null;case 22:case 23:return e.lanes=0,bv(t,e,n);case 24:xn(e,Ae,t.memoizedState.cache)}return on(t,e,n)}function xv(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Me=!0;else{if(!nh(t,n)&&!(e.flags&128))return Me=!1,Xw(t,e,n);Me=!!(t.flags&131072)}else Me=!1,Z&&e.flags&1048576&&Ey(e,To,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var s=e.elementType,i=s._init;if(s=i(s._payload),e.type=s,typeof s=="function")Ld(s)?(t=Es(s,t),e.tag=1,e=om(null,e,s,t,n)):(e.tag=0,e=vu(null,e,s,t,n));else{if(s!=null){if(i=s.$$typeof,i===xd){e.tag=11,e=sm(null,e,s,t,n);break e}else if(i===Td){e.tag=14,e=im(null,e,s,t,n);break e}}throw e=Fc(s)||s,Error(O(306,e,""))}}return e;case 0:return vu(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Es(s,e.pendingProps),om(t,e,s,i,n);case 3:e:{if(yo(e,e.stateNode.containerInfo),t===null)throw Error(O(387));s=e.pendingProps;var a=e.memoizedState;i=a.element,uu(t,e),ya(e,s,null,n);var r=e.memoizedState;if(s=r.cache,xn(e,Ae,s),s!==a.cache&&ou(e,[Ae],n,!0),ga(),s=r.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=lm(t,e,s,n);break e}else if(s!==i){i=vt(Error(O(424)),e),Ua(i),e=lm(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ve=Ot(t.firstChild),He=e,Z=!0,ps=null,kt=!0,n=dv(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(or(),s===i){e=on(t,e,n);break e}Pe(t,e,s,n)}e=e.child}return e;case 26:return ro(t,e),t===null?(n=jm(e.type,null,e.pendingProps,null))?e.memoizedState=n:Z||(n=e.type,t=e.pendingProps,s=zo(Mn.current).createElement(n),s[ze]=e,s[We]=t,Ve(s,n,t),De(s),e.stateNode=s):e.memoizedState=jm(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Kc(e),t===null&&Z&&(s=e.stateNode=c_(e.type,e.pendingProps,Mn.current),He=e,kt=!0,i=ve,Kn(e.type)?(Mu=i,ve=Ot(s.firstChild)):ve=i),Pe(t,e,e.pendingProps.children,n),ro(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Z&&((i=s=ve)&&(s=xx(s,e.type,e.pendingProps,kt),s!==null?(e.stateNode=s,He=e,ve=Ot(s.firstChild),kt=!1,i=!0):i=!1),i||ws(e)),Kc(e),i=e.type,a=e.pendingProps,r=t!==null?t.memoizedProps:null,s=a.children,Nu(i,a)?s=null:r!==null&&Nu(i,r)&&(e.flags|=32),e.memoizedState!==null&&(i=Id(t,e,$w,null,null,n),$a._currentValue=i),ro(t,e),Pe(t,e,s,n),e.child;case 6:return t===null&&Z&&((t=n=ve)&&(n=Tx(n,e.pendingProps,kt),n!==null?(e.stateNode=n,He=e,ve=null,t=!0):t=!1),t||ws(e)),null;case 13:return Sv(t,e,n);case 4:return yo(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=xi(e,null,s,n):Pe(t,e,s,n),e.child;case 11:return sm(t,e,e.type,e.pendingProps,n);case 7:return Pe(t,e,e.pendingProps,n),e.child;case 8:return Pe(t,e,e.pendingProps.children,n),e.child;case 12:return Pe(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,xn(e,e.type,s.value),Pe(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,xs(e),i=$e(i),s=s(i),e.flags|=1,Pe(t,e,s,n),e.child;case 14:return im(t,e,e.type,e.pendingProps,n);case 15:return _v(t,e,e.type,e.pendingProps,n);case 19:return wv(t,e,n);case 31:return s=e.pendingProps,n=e.mode,s={mode:s.mode,children:s.children},t===null?(n=Mo(s,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=nn(t.child,s),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return bv(t,e,n);case 24:return xs(e),s=$e(Ae),t===null?(i=$d(),i===null&&(i=le,a=zd(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:s,cache:i},Gd(e),xn(e,Ae,i)):(t.lanes&n&&(uu(t,e),ya(e,null,null,n),ga()),i=t.memoizedState,a=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),xn(e,Ae,s)):(s=a.cache,xn(e,Ae,s),s!==i.cache&&ou(e,[Ae],n,!0))),Pe(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(O(156,e.tag))}function It(t){t.flags|=4}function um(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!h_(e)){if(e=wt.current,e!==null&&((Q&4194048)===Q?Vt!==null:(Q&62914560)!==Q&&!(Q&536870912)||e!==Vt))throw ma=cu,Cy;t.flags|=8192}}function Pr(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Xg():536870912,t.lanes|=e,Ti|=e)}function Qi(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Qw(t,e,n){var s=e.pendingProps;switch(Bd(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(e),null;case 1:return pe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),sn(Ae),yi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ki(e)?It(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zf())),pe(e),null;case 26:return n=e.memoizedState,t===null?(It(e),n!==null?(pe(e),um(e,n)):(pe(e),e.flags&=-16777217)):n?n!==t.memoizedState?(It(e),pe(e),um(e,n)):(pe(e),e.flags&=-16777217):(t.memoizedProps!==s&&It(e),pe(e),e.flags&=-16777217),null;case 27:vo(e),n=Mn.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==s&&It(e);else{if(!s){if(e.stateNode===null)throw Error(O(166));return pe(e),null}t=Pt.current,Ki(e)?Vf(e):(t=c_(i,s,n),e.stateNode=t,It(e))}return pe(e),null;case 5:if(vo(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&It(e);else{if(!s){if(e.stateNode===null)throw Error(O(166));return pe(e),null}if(t=Pt.current,Ki(e))Vf(e);else{switch(i=zo(Mn.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?i.createElement("select",{is:s.is}):i.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?i.createElement(n,{is:s.is}):i.createElement(n)}}t[ze]=e,t[We]=s;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(Ve(t,n,s),n){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&It(e)}}return pe(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&It(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(O(166));if(t=Mn.current,Ki(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=He,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[ze]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||r_(t.nodeValue,n)),t||ws(e)}else t=zo(t).createTextNode(s),t[ze]=e,e.stateNode=t}return pe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Ki(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[ze]=e}else or(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pe(e),i=!1}else i=zf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(tn(e),e):(tn(e),null)}if(tn(e),e.flags&128)return e.lanes=n,e;if(n=s!==null,t=t!==null&&t.memoizedState!==null,n){s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool);var a=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==i&&(s.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Pr(e,e.updateQueue),pe(e),null;case 4:return yi(),t===null&&uh(e.stateNode.containerInfo),pe(e),null;case 10:return sn(e.type),pe(e),null;case 19:if(ke(Ce),i=e.memoizedState,i===null)return pe(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)Qi(i,!1);else{if(_e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=No(t),a!==null){for(e.flags|=128,Qi(i,!1),t=a.updateQueue,e.updateQueue=t,Pr(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Ty(n,t),n=n.sibling;return fe(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Lt()>Uo&&(e.flags|=128,s=!0,Qi(i,!1),e.lanes=4194304)}else{if(!s)if(t=No(a),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Pr(e,t),Qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Z)return pe(e),null}else 2*Lt()-i.renderingStartTime>Uo&&n!==536870912&&(e.flags|=128,s=!0,Qi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Lt(),e.sibling=null,t=Ce.current,fe(Ce,s?t&1|2:t&1),e):(pe(e),null);case 22:case 23:return tn(e),Hd(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(pe(e),e.subtreeFlags&6&&(e.flags|=8192)):pe(e),n=e.updateQueue,n!==null&&Pr(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&ke(gs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),sn(Ae),pe(e),null;case 25:return null;case 30:return null}throw Error(O(156,e.tag))}function Zw(t,e){switch(Bd(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sn(Ae),yi(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return vo(e),null;case 13:if(tn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));or()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ce),null;case 4:return yi(),null;case 10:return sn(e.type),null;case 22:case 23:return tn(e),Hd(),t!==null&&ke(gs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return sn(Ae),null;case 25:return null;default:return null}}function Tv(t,e){switch(Bd(e),e.tag){case 3:sn(Ae),yi();break;case 26:case 27:case 5:vo(e);break;case 4:yi();break;case 13:tn(e);break;case 19:ke(Ce);break;case 10:sn(e.type);break;case 22:case 23:tn(e),Hd(),t!==null&&ke(gs);break;case 24:sn(Ae)}}function fr(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var a=n.create,r=n.inst;s=a(),r.destroy=s}n=n.next}while(n!==i)}}catch(o){ae(e,e.return,o)}}function Hn(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var a=i.next;s=a;do{if((s.tag&t)===t){var r=s.inst,o=r.destroy;if(o!==void 0){r.destroy=void 0,i=e;var l=n,c=o;try{c()}catch(u){ae(i,l,u)}}}s=s.next}while(s!==a)}}catch(u){ae(e,e.return,u)}}function Ev(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Ry(e,n)}catch(s){ae(t,t.return,s)}}}function jv(t,e,n){n.props=Es(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){ae(t,e,s)}}function _a(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){ae(t,e,i)}}function Ut(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){ae(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){ae(t,e,i)}else n.current=null}function Av(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){ae(t,t.return,i)}}function lc(t,e,n){try{var s=t.stateNode;vx(s,t.type,n,e),s[We]=e}catch(i){ae(t,t.return,i)}}function Cv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Kn(t.type)||t.tag===4}function cc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Kn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vl));else if(s!==4&&(s===27&&Kn(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(bu(t,e,n),t=t.sibling;t!==null;)bu(t,e,n),t=t.sibling}function ko(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Kn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(ko(t,e,n),t=t.sibling;t!==null;)ko(t,e,n),t=t.sibling}function Ov(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ve(e,s,n),e[ze]=t,e[We]=n}catch(a){ae(t,t.return,a)}}var Qt=!1,we=!1,uc=!1,dm=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Jw(t,e){if(t=t.containerInfo,Cu=qo,t=gy(t),kd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var r=0,o=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=r+i),d!==a||s!==0&&d.nodeType!==3||(l=r+s),d.nodeType===3&&(r+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++c===i&&(o=r),h===a&&++u===s&&(l=r),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ou={focusedElem:t,selectionRange:n},qo=!1,Re=e;Re!==null;)if(e=Re,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Re=t;else for(;Re!==null;){switch(e=Re,a=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,s=n.stateNode;try{var v=Es(n.type,i,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(v,a),s.__reactInternalSnapshotBeforeUpdate=t}catch(_){ae(n,n.return,_)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Ru(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ru(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(O(163))}if(t=e.sibling,t!==null){t.return=e.return,Re=t;break}Re=e.return}}function Nv(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:mn(t,n),s&4&&fr(5,n);break;case 1:if(mn(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){ae(n,n.return,r)}else{var i=Es(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){ae(n,n.return,r)}}s&64&&Ev(n),s&512&&_a(n,n.return);break;case 3:if(mn(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Ry(t,e)}catch(r){ae(n,n.return,r)}}break;case 27:e===null&&s&4&&Ov(n);case 26:case 5:mn(t,n),e===null&&s&4&&Av(n),s&512&&_a(n,n.return);break;case 12:mn(t,n);break;case 13:mn(t,n),s&4&&Mv(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=ox.bind(null,n),Ex(t,n))));break;case 22:if(s=n.memoizedState!==null||Qt,!s){e=e!==null&&e.memoizedState!==null||we,i=Qt;var a=we;Qt=s,(we=e)&&!a?yn(t,n,(n.subtreeFlags&8772)!==0):mn(t,n),Qt=i,we=a}break;case 30:break;default:mn(t,n)}}function Rv(t){var e=t.alternate;e!==null&&(t.alternate=null,Rv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Cd(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var de=null,Xe=!1;function Ft(t,e,n){for(n=n.child;n!==null;)Dv(t,e,n),n=n.sibling}function Dv(t,e,n){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(nr,n)}catch{}switch(n.tag){case 26:we||Ut(n,e),Ft(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:we||Ut(n,e);var s=de,i=Xe;Kn(n.type)&&(de=n.stateNode,Xe=!1),Ft(t,e,n),xa(n.stateNode),de=s,Xe=i;break;case 5:we||Ut(n,e);case 6:if(s=de,i=Xe,de=null,Ft(t,e,n),de=s,Xe=i,de!==null)if(Xe)try{(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).removeChild(n.stateNode)}catch(a){ae(n,e,a)}else try{de.removeChild(n.stateNode)}catch(a){ae(n,e,a)}break;case 18:de!==null&&(Xe?(t=de,xm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),qa(t)):xm(de,n.stateNode));break;case 4:s=de,i=Xe,de=n.stateNode.containerInfo,Xe=!0,Ft(t,e,n),de=s,Xe=i;break;case 0:case 11:case 14:case 15:we||Hn(2,n,e),we||Hn(4,n,e),Ft(t,e,n);break;case 1:we||(Ut(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&jv(n,e,s)),Ft(t,e,n);break;case 21:Ft(t,e,n);break;case 22:we=(s=we)||n.memoizedState!==null,Ft(t,e,n),we=s;break;default:Ft(t,e,n)}}function Mv(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{qa(t)}catch(n){ae(e,e.return,n)}}function Ww(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new dm),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new dm),e;default:throw Error(O(435,t.tag))}}function dc(t,e){var n=Ww(t);e.forEach(function(s){var i=lx.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}function tt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],a=t,r=e,o=r;e:for(;o!==null;){switch(o.tag){case 27:if(Kn(o.type)){de=o.stateNode,Xe=!1;break e}break;case 5:de=o.stateNode,Xe=!1;break e;case 3:case 4:de=o.stateNode.containerInfo,Xe=!0;break e}o=o.return}if(de===null)throw Error(O(160));Dv(a,r,i),de=null,Xe=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)kv(e,t),e=e.sibling}var At=null;function kv(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:tt(e,t),nt(t),s&4&&(Hn(3,t,t.return),fr(3,t),Hn(5,t,t.return));break;case 1:tt(e,t),nt(t),s&512&&(we||n===null||Ut(n,n.return)),s&64&&Qt&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=At;if(tt(e,t),nt(t),s&512&&(we||n===null||Ut(n,n.return)),s&4){var a=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":a=i.getElementsByTagName("title")[0],(!a||a[ar]||a[ze]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(s),i.head.insertBefore(a,i.querySelector("head > title"))),Ve(a,s,n),a[ze]=t,De(a),s=a;break e;case"link":var r=Cm("link","href",i).get(s+(n.href||""));if(r){for(var o=0;o<r.length;o++)if(a=r[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(o,1);break t}}a=i.createElement(s),Ve(a,s,n),i.head.appendChild(a);break;case"meta":if(r=Cm("meta","content",i).get(s+(n.content||""))){for(o=0;o<r.length;o++)if(a=r[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(o,1);break t}}a=i.createElement(s),Ve(a,s,n),i.head.appendChild(a);break;default:throw Error(O(468,s))}a[ze]=t,De(a),s=a}t.stateNode=s}else Om(i,t.type,t.stateNode);else t.stateNode=Am(i,s,t.memoizedProps);else a!==s?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,s===null?Om(i,t.type,t.stateNode):Am(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&lc(t,t.memoizedProps,n.memoizedProps)}break;case 27:tt(e,t),nt(t),s&512&&(we||n===null||Ut(n,n.return)),n!==null&&s&4&&lc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(tt(e,t),nt(t),s&512&&(we||n===null||Ut(n,n.return)),t.flags&32){i=t.stateNode;try{_i(i,"")}catch(m){ae(t,t.return,m)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,lc(t,i,n!==null?n.memoizedProps:i)),s&1024&&(uc=!0);break;case 6:if(tt(e,t),nt(t),s&4){if(t.stateNode===null)throw Error(O(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(m){ae(t,t.return,m)}}break;case 3:if(co=null,i=At,At=$o(e.containerInfo),tt(e,t),At=i,nt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{qa(e.containerInfo)}catch(m){ae(t,t.return,m)}uc&&(uc=!1,Uv(t));break;case 4:s=At,At=$o(t.stateNode.containerInfo),tt(e,t),nt(t),At=s;break;case 12:tt(e,t),nt(t);break;case 13:tt(e,t),nt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(oh=Lt()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,dc(t,s)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Qt,u=we;if(Qt=c||i,we=u||l,tt(e,t),we=u,Qt=c,nt(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||Qt||we||is(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(a=l.stateNode,i)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,h=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){ae(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(m){ae(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,dc(t,n))));break;case 19:tt(e,t),nt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,dc(t,s)));break;case 30:break;case 21:break;default:tt(e,t),nt(t)}}function nt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(Cv(s)){n=s;break}s=s.return}if(n==null)throw Error(O(160));switch(n.tag){case 27:var i=n.stateNode,a=cc(t);ko(t,a,i);break;case 5:var r=n.stateNode;n.flags&32&&(_i(r,""),n.flags&=-33);var o=cc(t);ko(t,o,r);break;case 3:case 4:var l=n.stateNode.containerInfo,c=cc(t);bu(t,c,l);break;default:throw Error(O(161))}}catch(u){ae(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Uv(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function mn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Nv(t,e.alternate,e),e=e.sibling}function is(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Hn(4,e,e.return),is(e);break;case 1:Ut(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&jv(e,e.return,n),is(e);break;case 27:xa(e.stateNode);case 26:case 5:Ut(e,e.return),is(e);break;case 22:e.memoizedState===null&&is(e);break;case 30:is(e);break;default:is(e)}t=t.sibling}}function yn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,a=e,r=a.flags;switch(a.tag){case 0:case 11:case 15:yn(i,a,n),fr(4,a);break;case 1:if(yn(i,a,n),s=a,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){ae(s,s.return,c)}if(s=a,i=s.updateQueue,i!==null){var o=s.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ny(l[i],o)}catch(c){ae(s,s.return,c)}}n&&r&64&&Ev(a),_a(a,a.return);break;case 27:Ov(a);case 26:case 5:yn(i,a,n),n&&s===null&&r&4&&Av(a),_a(a,a.return);break;case 12:yn(i,a,n);break;case 13:yn(i,a,n),n&&r&4&&Mv(i,a);break;case 22:a.memoizedState===null&&yn(i,a,n),_a(a,a.return);break;case 30:break;default:yn(i,a,n)}e=e.sibling}}function sh(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&cr(n))}function ih(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&cr(t))}function Mt(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pv(t,e,n,s),e=e.sibling}function Pv(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Mt(t,e,n,s),i&2048&&fr(9,e);break;case 1:Mt(t,e,n,s);break;case 3:Mt(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&cr(t)));break;case 12:if(i&2048){Mt(t,e,n,s),t=e.stateNode;try{var a=e.memoizedProps,r=a.id,o=a.onPostCommit;typeof o=="function"&&o(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){ae(e,e.return,l)}}else Mt(t,e,n,s);break;case 13:Mt(t,e,n,s);break;case 23:break;case 22:a=e.stateNode,r=e.alternate,e.memoizedState!==null?a._visibility&2?Mt(t,e,n,s):ba(t,e):a._visibility&2?Mt(t,e,n,s):(a._visibility|=2,$s(t,e,n,s,(e.subtreeFlags&10256)!==0)),i&2048&&sh(r,e);break;case 24:Mt(t,e,n,s),i&2048&&ih(e.alternate,e);break;default:Mt(t,e,n,s)}}function $s(t,e,n,s,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var a=t,r=e,o=n,l=s,c=r.flags;switch(r.tag){case 0:case 11:case 15:$s(a,r,o,l,i),fr(8,r);break;case 23:break;case 22:var u=r.stateNode;r.memoizedState!==null?u._visibility&2?$s(a,r,o,l,i):ba(a,r):(u._visibility|=2,$s(a,r,o,l,i)),i&&c&2048&&sh(r.alternate,r);break;case 24:$s(a,r,o,l,i),i&&c&2048&&ih(r.alternate,r);break;default:$s(a,r,o,l,i)}e=e.sibling}}function ba(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:ba(n,s),i&2048&&sh(s.alternate,s);break;case 24:ba(n,s),i&2048&&ih(s.alternate,s);break;default:ba(n,s)}e=e.sibling}}var aa=8192;function Rs(t){if(t.subtreeFlags&aa)for(t=t.child;t!==null;)Lv(t),t=t.sibling}function Lv(t){switch(t.tag){case 26:Rs(t),t.flags&aa&&t.memoizedState!==null&&Vx(At,t.memoizedState,t.memoizedProps);break;case 5:Rs(t);break;case 3:case 4:var e=At;At=$o(t.stateNode.containerInfo),Rs(t),At=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=aa,aa=16777216,Rs(t),aa=e):Rs(t));break;default:Rs(t)}}function Vv(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Zi(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Re=s,zv(s,t)}Vv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bv(t),t=t.sibling}function Bv(t){switch(t.tag){case 0:case 11:case 15:Zi(t),t.flags&2048&&Hn(9,t,t.return);break;case 3:Zi(t);break;case 12:Zi(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,oo(t)):Zi(t);break;default:Zi(t)}}function oo(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Re=s,zv(s,t)}Vv(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Hn(8,e,e.return),oo(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,oo(e));break;default:oo(e)}t=t.sibling}}function zv(t,e){for(;Re!==null;){var n=Re;switch(n.tag){case 0:case 11:case 15:Hn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:cr(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Re=s;else e:for(n=t;Re!==null;){s=Re;var i=s.sibling,a=s.return;if(Rv(s),s===n){Re=null;break e}if(i!==null){i.return=a,Re=i;break e}Re=a}}}var ex={getCacheForType:function(t){var e=$e(Ae),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},tx=typeof WeakMap=="function"?WeakMap:Map,te=0,le=null,K=null,Q=0,ee=0,st=null,Nn=!1,Ui=!1,ah=!1,ln=0,_e=0,qn=0,ys=0,rh=0,_t=0,Ti=0,Sa=null,Qe=null,Su=!1,oh=0,Uo=1/0,Po=null,Pn=null,Le=0,Ln=null,Ei=null,gi=0,wu=0,xu=null,$v=null,wa=0,Tu=null;function ot(){if(te&2&&Q!==0)return Q&-Q;if($.T!==null){var t=bi;return t!==0?t:ch()}return Jg()}function Gv(){_t===0&&(_t=!(Q&536870912)||Z?Kg():536870912);var t=wt.current;return t!==null&&(t.flags|=32),_t}function lt(t,e,n){(t===le&&(ee===2||ee===9)||t.cancelPendingCommit!==null)&&(ji(t,0),Rn(t,Q,_t,!1)),ir(t,n),(!(te&2)||t!==le)&&(t===le&&(!(te&2)&&(ys|=n),_e===4&&Rn(t,Q,_t,!1)),Ht(t))}function Hv(t,e,n){if(te&6)throw Error(O(327));var s=!n&&(e&124)===0&&(e&t.expiredLanes)===0||sr(t,e),i=s?ix(t,e):hc(t,e,!0),a=s;do{if(i===0){Ui&&!s&&Rn(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!nx(n)){i=hc(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var o=t;i=Sa;var l=o.current.memoizedState.isDehydrated;if(l&&(ji(o,r).flags|=256),r=hc(o,r,!1),r!==2){if(ah&&!l){o.errorRecoveryDisabledLanes|=a,ys|=a,i=4;break e}a=Qe,Qe=i,a!==null&&(Qe===null?Qe=a:Qe.push.apply(Qe,a))}i=r}if(a=!1,i!==2)continue}}if(i===1){ji(t,0),Rn(t,e,0,!0);break}e:{switch(s=t,a=i,a){case 0:case 1:throw Error(O(345));case 4:if((e&4194048)!==e)break;case 6:Rn(s,e,_t,!Nn);break e;case 2:Qe=null;break;case 3:case 5:break;default:throw Error(O(329))}if((e&62914560)===e&&(i=oh+300-Lt(),10<i)){if(Rn(s,e,_t,!Nn),al(s,0,!0)!==0)break e;s.timeoutHandle=l_(hm.bind(null,s,n,Qe,Po,Su,e,_t,ys,Ti,Nn,a,2,-0,0),i);break e}hm(s,n,Qe,Po,Su,e,_t,ys,Ti,Nn,a,0,-0,0)}}break}while(!0);Ht(t)}function hm(t,e,n,s,i,a,r,o,l,c,u,d,h,m){if(t.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(za={stylesheets:null,count:0,unsuspend:Lx},Lv(e),d=Bx(),d!==null)){t.cancelPendingCommit=d(mm.bind(null,t,e,a,n,s,i,r,o,l,u,1,h,m)),Rn(t,a,r,!c);return}mm(t,e,a,n,s,i,r,o,l)}function nx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!ct(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rn(t,e,n,s){e&=~rh,e&=~ys,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var a=31-rt(i),r=1<<a;s[a]=-1,i&=~r}n!==0&&Qg(t,n,e)}function pl(){return te&6?!0:(mr(0),!1)}function lh(){if(K!==null){if(ee===0)var t=K.return;else t=K,en=Os=null,Kd(t),pi=null,La=0,t=K;for(;t!==null;)Tv(t.alternate,t),t=t.return;K=null}}function ji(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,bx(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),lh(),le=t,K=n=nn(t.current,null),Q=e,ee=0,st=null,Nn=!1,Ui=sr(t,e),ah=!1,Ti=_t=rh=ys=qn=_e=0,Qe=Sa=null,Su=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-rt(s),a=1<<i;e|=t[i],s&=~a}return ln=e,cl(),n}function qv(t,e){q=null,$.H=Oo,e===ur||e===dl?(e=qf(),ee=3):e===Cy?(e=qf(),ee=4):ee=e===vv?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,st=e,K===null&&(_e=1,Do(t,vt(e,t.current)))}function Iv(){var t=$.H;return $.H=Oo,t===null?Oo:t}function Fv(){var t=$.A;return $.A=ex,t}function Eu(){_e=4,Nn||(Q&4194048)!==Q&&wt.current!==null||(Ui=!0),!(qn&134217727)&&!(ys&134217727)||le===null||Rn(le,Q,_t,!1)}function hc(t,e,n){var s=te;te|=2;var i=Iv(),a=Fv();(le!==t||Q!==e)&&(Po=null,ji(t,e)),e=!1;var r=_e;e:do try{if(ee!==0&&K!==null){var o=K,l=st;switch(ee){case 8:lh(),r=6;break e;case 3:case 2:case 9:case 6:wt.current===null&&(e=!0);var c=ee;if(ee=0,st=null,ni(t,o,l,c),n&&Ui){r=0;break e}break;default:c=ee,ee=0,st=null,ni(t,o,l,c)}}sx(),r=_e;break}catch(u){qv(t,u)}while(!0);return e&&t.shellSuspendCounter++,en=Os=null,te=s,$.H=i,$.A=a,K===null&&(le=null,Q=0,cl()),r}function sx(){for(;K!==null;)Yv(K)}function ix(t,e){var n=te;te|=2;var s=Iv(),i=Fv();le!==t||Q!==e?(Po=null,Uo=Lt()+500,ji(t,e)):Ui=sr(t,e);e:do try{if(ee!==0&&K!==null){e=K;var a=st;t:switch(ee){case 1:ee=0,st=null,ni(t,e,a,1);break;case 2:case 9:if(Hf(a)){ee=0,st=null,fm(e);break}e=function(){ee!==2&&ee!==9||le!==t||(ee=7),Ht(t)},a.then(e,e);break e;case 3:ee=7;break e;case 4:ee=5;break e;case 7:Hf(a)?(ee=0,st=null,fm(e)):(ee=0,st=null,ni(t,e,a,7));break;case 5:var r=null;switch(K.tag){case 26:r=K.memoizedState;case 5:case 27:var o=K;if(!r||h_(r)){ee=0,st=null;var l=o.sibling;if(l!==null)K=l;else{var c=o.return;c!==null?(K=c,gl(c)):K=null}break t}}ee=0,st=null,ni(t,e,a,5);break;case 6:ee=0,st=null,ni(t,e,a,6);break;case 8:lh(),_e=6;break e;default:throw Error(O(462))}}ax();break}catch(u){qv(t,u)}while(!0);return en=Os=null,$.H=s,$.A=i,te=n,K!==null?0:(le=null,Q=0,cl(),_e)}function ax(){for(;K!==null&&!AS();)Yv(K)}function Yv(t){var e=xv(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?gl(t):K=e}function fm(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=rm(n,e,e.pendingProps,e.type,void 0,Q);break;case 11:e=rm(n,e,e.pendingProps,e.type.render,e.ref,Q);break;case 5:Kd(e);default:Tv(n,e),e=K=Ty(e,ln),e=xv(n,e,ln)}t.memoizedProps=t.pendingProps,e===null?gl(t):K=e}function ni(t,e,n,s){en=Os=null,Kd(e),pi=null,La=0;var i=e.return;try{if(Kw(t,i,e,n,Q)){_e=1,Do(t,vt(n,t.current)),K=null;return}}catch(a){if(i!==null)throw K=i,a;_e=1,Do(t,vt(n,t.current)),K=null;return}e.flags&32768?(Z||s===1?t=!0:Ui||Q&536870912?t=!1:(Nn=t=!0,(s===2||s===9||s===3||s===6)&&(s=wt.current,s!==null&&s.tag===13&&(s.flags|=16384))),Kv(e,t)):gl(e)}function gl(t){var e=t;do{if(e.flags&32768){Kv(e,Nn);return}t=e.return;var n=Qw(e.alternate,e,ln);if(n!==null){K=n;return}if(e=e.sibling,e!==null){K=e;return}K=e=t}while(e!==null);_e===0&&(_e=5)}function Kv(t,e){do{var n=Zw(t.alternate,t);if(n!==null){n.flags&=32767,K=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){K=t;return}K=t=n}while(t!==null);_e=6,K=null}function mm(t,e,n,s,i,a,r,o,l){t.cancelPendingCommit=null;do yl();while(Le!==0);if(te&6)throw Error(O(327));if(e!==null){if(e===t.current)throw Error(O(177));if(a=e.lanes|e.childLanes,a|=Ud,LS(t,n,a,r,o,l),t===le&&(K=le=null,Q=0),Ei=e,Ln=t,gi=n,wu=a,xu=i,$v=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,cx(_o,function(){return Wv(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=$.T,$.T=null,i=J.p,J.p=2,r=te,te|=4;try{Jw(t,e,n)}finally{te=r,J.p=i,$.T=s}}Le=1,Xv(),Qv(),Zv()}}function Xv(){if(Le===1){Le=0;var t=Ln,e=Ei,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=$.T,$.T=null;var s=J.p;J.p=2;var i=te;te|=4;try{kv(e,t);var a=Ou,r=gy(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(r!==o&&o&&o.ownerDocument&&py(o.ownerDocument.documentElement,o)){if(l!==null&&kd(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),v=o.textContent.length,_=Math.min(l.start,v),b=l.end===void 0?_:Math.min(l.end,v);!m.extend&&_>b&&(r=b,b=_,_=r);var p=Uf(o,_),g=Uf(o,b);if(p&&g&&(m.rangeCount!==1||m.anchorNode!==p.node||m.anchorOffset!==p.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var y=d.createRange();y.setStart(p.node,p.offset),m.removeAllRanges(),_>b?(m.addRange(y),m.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),m.addRange(y))}}}}for(d=[],m=o;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var S=d[o];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}qo=!!Cu,Ou=Cu=null}finally{te=i,J.p=s,$.T=n}}t.current=e,Le=2}}function Qv(){if(Le===2){Le=0;var t=Ln,e=Ei,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=$.T,$.T=null;var s=J.p;J.p=2;var i=te;te|=4;try{Nv(t,e.alternate,e)}finally{te=i,J.p=s,$.T=n}}Le=3}}function Zv(){if(Le===4||Le===3){Le=0,CS();var t=Ln,e=Ei,n=gi,s=$v;e.subtreeFlags&10256||e.flags&10256?Le=5:(Le=0,Ei=Ln=null,Jv(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Pn=null),Ad(n),e=e.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(nr,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=$.T,i=J.p,J.p=2,$.T=null;try{for(var a=t.onRecoverableError,r=0;r<s.length;r++){var o=s[r];a(o.value,{componentStack:o.stack})}}finally{$.T=e,J.p=i}}gi&3&&yl(),Ht(t),i=t.pendingLanes,n&4194090&&i&42?t===Tu?wa++:(wa=0,Tu=t):wa=0,mr(0)}}function Jv(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,cr(e)))}function yl(t){return Xv(),Qv(),Zv(),Wv()}function Wv(){if(Le!==5)return!1;var t=Ln,e=wu;wu=0;var n=Ad(gi),s=$.T,i=J.p;try{J.p=32>n?32:n,$.T=null,n=xu,xu=null;var a=Ln,r=gi;if(Le=0,Ei=Ln=null,gi=0,te&6)throw Error(O(331));var o=te;if(te|=4,Bv(a.current),Pv(a,a.current,r,n),te=o,mr(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(nr,a)}catch{}return!0}finally{J.p=i,$.T=s,Jv(t,e)}}function pm(t,e,n){e=vt(n,e),e=yu(t.stateNode,e,2),t=Un(t,e,2),t!==null&&(ir(t,2),Ht(t))}function ae(t,e,n){if(t.tag===3)pm(t,t,n);else for(;e!==null;){if(e.tag===3){pm(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Pn===null||!Pn.has(s))){t=vt(n,t),n=gv(2),s=Un(e,n,2),s!==null&&(yv(n,s,e,t),ir(s,2),Ht(s));break}}e=e.return}}function fc(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new tx;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(ah=!0,i.add(n),t=rx.bind(null,t,e,n),e.then(t,t))}function rx(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,le===t&&(Q&n)===n&&(_e===4||_e===3&&(Q&62914560)===Q&&300>Lt()-oh?!(te&2)&&ji(t,0):rh|=n,Ti===Q&&(Ti=0)),Ht(t)}function e_(t,e){e===0&&(e=Xg()),t=ki(t,e),t!==null&&(ir(t,e),Ht(t))}function ox(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),e_(t,n)}function lx(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(O(314))}s!==null&&s.delete(e),e_(t,n)}function cx(t,e){return Ed(t,e)}var Lo=null,Gs=null,ju=!1,Vo=!1,mc=!1,vs=0;function Ht(t){t!==Gs&&t.next===null&&(Gs===null?Lo=Gs=t:Gs=Gs.next=t),Vo=!0,ju||(ju=!0,dx())}function mr(t,e){if(!mc&&Vo){mc=!0;do for(var n=!1,s=Lo;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var a=0;else{var r=s.suspendedLanes,o=s.pingedLanes;a=(1<<31-rt(42|t)+1)-1,a&=i&~(r&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,gm(s,a))}else a=Q,a=al(s,s===le?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(a&3)||sr(s,a)||(n=!0,gm(s,a));s=s.next}while(n);mc=!1}}function ux(){t_()}function t_(){Vo=ju=!1;var t=0;vs!==0&&(_x()&&(t=vs),vs=0);for(var e=Lt(),n=null,s=Lo;s!==null;){var i=s.next,a=n_(s,e);a===0?(s.next=null,n===null?Lo=i:n.next=i,i===null&&(Gs=n)):(n=s,(t!==0||a&3)&&(Vo=!0)),s=i}mr(t)}function n_(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var r=31-rt(a),o=1<<r,l=i[r];l===-1?(!(o&n)||o&s)&&(i[r]=PS(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=le,n=Q,n=al(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(ee===2||ee===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&zl(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||sr(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&zl(s),Ad(n)){case 2:case 8:n=Fg;break;case 32:n=_o;break;case 268435456:n=Yg;break;default:n=_o}return s=s_.bind(null,t),n=Ed(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&zl(s),t.callbackPriority=2,t.callbackNode=null,2}function s_(t,e){if(Le!==0&&Le!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(yl()&&t.callbackNode!==n)return null;var s=Q;return s=al(t,t===le?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(Hv(t,s,e),n_(t,Lt()),t.callbackNode!=null&&t.callbackNode===n?s_.bind(null,t):null)}function gm(t,e){if(yl())return null;Hv(t,e,!0)}function dx(){Sx(function(){te&6?Ed(Ig,ux):t_()})}function ch(){return vs===0&&(vs=Kg()),vs}function ym(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wr(""+t)}function vm(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function hx(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var a=ym((i[We]||null).action),r=s.submitter;r&&(e=(e=r[We]||null)?ym(e.formAction):r.getAttribute("formAction"),e!==null&&(a=e,r=null));var o=new rl("action","action",null,s,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(vs!==0){var l=r?vm(i,r):new FormData(i);pu(n,{pending:!0,data:l,method:i.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=r?vm(i,r):new FormData(i),pu(n,{pending:!0,data:l,method:i.method,action:a},a,l))},currentTarget:i}]})}}for(var pc=0;pc<su.length;pc++){var gc=su[pc],fx=gc.toLowerCase(),mx=gc[0].toUpperCase()+gc.slice(1);Nt(fx,"on"+mx)}Nt(vy,"onAnimationEnd");Nt(_y,"onAnimationIteration");Nt(by,"onAnimationStart");Nt("dblclick","onDoubleClick");Nt("focusin","onFocus");Nt("focusout","onBlur");Nt(Rw,"onTransitionRun");Nt(Dw,"onTransitionStart");Nt(Mw,"onTransitionCancel");Nt(Sy,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),px=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Va));function i_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var r=s.length-1;0<=r;r--){var o=s[r],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Ro(u)}i.currentTarget=null,a=l}else for(r=0;r<s.length;r++){if(o=s[r],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Ro(u)}i.currentTarget=null,a=l}}}}function Y(t,e){var n=e[Qc];n===void 0&&(n=e[Qc]=new Set);var s=t+"__bubble";n.has(s)||(a_(e,t,2,!1),n.add(s))}function yc(t,e,n){var s=0;e&&(s|=4),a_(n,t,s,e)}var Lr="_reactListening"+Math.random().toString(36).slice(2);function uh(t){if(!t[Lr]){t[Lr]=!0,Wg.forEach(function(n){n!=="selectionchange"&&(px.has(n)||yc(n,!1,t),yc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lr]||(e[Lr]=!0,yc("selectionchange",!1,e))}}function a_(t,e,n,s){switch(y_(e)){case 2:var i=Gx;break;case 8:i=Hx;break;default:i=mh}n=i.bind(null,e,n,t),i=void 0,!eu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vc(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var r=s.tag;if(r===3||r===4){var o=s.stateNode.containerInfo;if(o===i)break;if(r===4)for(r=s.return;r!==null;){var l=r.tag;if((l===3||l===4)&&r.stateNode.containerInfo===i)return;r=r.return}for(;o!==null;){if(r=Ys(o),r===null)return;if(l=r.tag,l===5||l===6||l===26||l===27){s=a=r;continue e}o=o.parentNode}}s=s.return}oy(function(){var c=a,u=Nd(n),d=[];e:{var h=wy.get(t);if(h!==void 0){var m=rl,v=t;switch(t){case"keypress":if(to(n)===0)break e;case"keydown":case"keyup":m=cw;break;case"focusin":v="focus",m=Kl;break;case"focusout":v="blur",m=Kl;break;case"beforeblur":case"afterblur":m=Kl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ZS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hw;break;case vy:case _y:case by:m=ew;break;case Sy:m=mw;break;case"scroll":case"scrollend":m=XS;break;case"wheel":m=gw;break;case"copy":case"cut":case"paste":m=nw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Af;break;case"toggle":case"beforetoggle":m=vw}var _=(e&4)!==0,b=!_&&(t==="scroll"||t==="scrollend"),p=_?h!==null?h+"Capture":null:h;_=[];for(var g=c,y;g!==null;){var S=g;if(y=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||y===null||p===null||(S=Da(g,p),S!=null&&_.push(Ba(g,S,y))),b)break;g=g.return}0<_.length&&(h=new m(h,v,null,n,u),d.push({event:h,listeners:_}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Wc&&(v=n.relatedTarget||n.fromElement)&&(Ys(v)||v[Di]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Ys(v):null,v!==null&&(b=tr(v),_=v.tag,v!==b||_!==5&&_!==27&&_!==6)&&(v=null)):(m=null,v=c),m!==v)){if(_=Ef,S="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(_=Af,S="onPointerLeave",p="onPointerEnter",g="pointer"),b=m==null?h:ia(m),y=v==null?h:ia(v),h=new _(S,g+"leave",m,n,u),h.target=b,h.relatedTarget=y,S=null,Ys(u)===c&&(_=new _(p,g+"enter",v,n,u),_.target=y,_.relatedTarget=b,S=_),b=S,m&&v)t:{for(_=m,p=v,g=0,y=_;y;y=Ds(y))g++;for(y=0,S=p;S;S=Ds(S))y++;for(;0<g-y;)_=Ds(_),g--;for(;0<y-g;)p=Ds(p),y--;for(;g--;){if(_===p||p!==null&&_===p.alternate)break t;_=Ds(_),p=Ds(p)}_=null}else _=null;m!==null&&_m(d,h,m,_,!1),v!==null&&b!==null&&_m(d,b,v,_,!0)}}e:{if(h=c?ia(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var T=Rf;else if(Nf(h))if(fy)T=Cw;else{T=jw;var j=Ew}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&Od(c.elementType)&&(T=Rf):T=Aw;if(T&&(T=T(t,c))){hy(d,T,n,u);break e}j&&j(t,h,c),t==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&Jc(h,"number",h.value)}switch(j=c?ia(c):window,t){case"focusin":(Nf(j)||j.contentEditable==="true")&&(Qs=j,tu=c,ha=null);break;case"focusout":ha=tu=Qs=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,Pf(d,n,u);break;case"selectionchange":if(Nw)break;case"keydown":case"keyup":Pf(d,n,u)}var x;if(Md)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Xs?uy(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(cy&&n.locale!=="ko"&&(Xs||E!=="onCompositionStart"?E==="onCompositionEnd"&&Xs&&(x=ly()):(On=u,Rd="value"in On?On.value:On.textContent,Xs=!0)),j=Bo(c,E),0<j.length&&(E=new jf(E,t,null,n,u),d.push({event:E,listeners:j}),x?E.data=x:(x=dy(n),x!==null&&(E.data=x)))),(x=bw?Sw(t,n):ww(t,n))&&(E=Bo(c,"onBeforeInput"),0<E.length&&(j=new jf("onBeforeInput","beforeinput",null,n,u),d.push({event:j,listeners:E}),j.data=x)),hx(d,t,c,n,u)}i_(d,e)})}function Ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bo(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Da(t,n),i!=null&&s.unshift(Ba(t,i,a)),i=Da(t,e),i!=null&&s.push(Ba(t,i,a))),t.tag===3)return s;t=t.return}return[]}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function _m(t,e,n,s,i){for(var a=e._reactName,r=[];n!==null&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===s)break;o!==5&&o!==26&&o!==27||c===null||(l=c,i?(c=Da(n,a),c!=null&&r.unshift(Ba(n,c,l))):i||(c=Da(n,a),c!=null&&r.push(Ba(n,c,l)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var gx=/\r\n?/g,yx=/\u0000|\uFFFD/g;function bm(t){return(typeof t=="string"?t:""+t).replace(gx,`
`).replace(yx,"")}function r_(t,e){return e=bm(e),bm(t)===e}function vl(){}function se(t,e,n,s,i,a){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||_i(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&_i(t,""+s);break;case"className":Nr(t,"class",s);break;case"tabIndex":Nr(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Nr(t,n,s);break;case"style":ry(t,s,a);break;case"data":if(e!=="object"){Nr(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Wr(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&se(t,e,"name",i.name,i,null),se(t,e,"formEncType",i.formEncType,i,null),se(t,e,"formMethod",i.formMethod,i,null),se(t,e,"formTarget",i.formTarget,i,null)):(se(t,e,"encType",i.encType,i,null),se(t,e,"method",i.method,i,null),se(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Wr(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=vl);break;case"onScroll":s!=null&&Y("scroll",t);break;case"onScrollEnd":s!=null&&Y("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(O(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(O(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Wr(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":Y("beforetoggle",t),Y("toggle",t),Jr(t,"popover",s);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Jr(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=YS.get(n)||n,Jr(t,n,s))}}function Au(t,e,n,s,i,a){switch(n){case"style":ry(t,s,a);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(O(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(O(60));t.innerHTML=n}}break;case"children":typeof s=="string"?_i(t,s):(typeof s=="number"||typeof s=="bigint")&&_i(t,""+s);break;case"onScroll":s!=null&&Y("scroll",t);break;case"onScrollEnd":s!=null&&Y("scrollend",t);break;case"onClick":s!=null&&(t.onclick=vl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ey.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[We]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof s=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Jr(t,n,s)}}}function Ve(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Y("error",t),Y("load",t);var s=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var r=n[a];if(r!=null)switch(a){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(O(137,e));default:se(t,e,a,r,n,null)}}i&&se(t,e,"srcSet",n.srcSet,n,null),s&&se(t,e,"src",n.src,n,null);return;case"input":Y("invalid",t);var o=a=r=i=null,l=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(u!=null)switch(s){case"name":i=u;break;case"type":r=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(O(137,e));break;default:se(t,e,s,u,n,null)}}sy(t,a,o,l,c,r,i,!1),bo(t);return;case"select":Y("invalid",t),s=r=a=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":r=o;break;case"multiple":s=o;default:se(t,e,i,o,n,null)}e=a,n=r,t.multiple=!!s,e!=null?ui(t,!!s,e,!1):n!=null&&ui(t,!!s,n,!0);return;case"textarea":Y("invalid",t),a=i=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(O(91));break;default:se(t,e,r,o,n,null)}ay(t,s,i,a),bo(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(s=n[l],s!=null))switch(l){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:se(t,e,l,s,n,null)}return;case"dialog":Y("beforetoggle",t),Y("toggle",t),Y("cancel",t),Y("close",t);break;case"iframe":case"object":Y("load",t);break;case"video":case"audio":for(s=0;s<Va.length;s++)Y(Va[s],t);break;case"image":Y("error",t),Y("load",t);break;case"details":Y("toggle",t);break;case"embed":case"source":case"link":Y("error",t),Y("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(O(137,e));default:se(t,e,c,s,n,null)}return;default:if(Od(e)){for(u in n)n.hasOwnProperty(u)&&(s=n[u],s!==void 0&&Au(t,e,u,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&se(t,e,o,s,n,null))}function vx(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,r=null,o=null,l=null,c=null,u=null;for(m in n){var d=n[m];if(n.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":l=d;default:s.hasOwnProperty(m)||se(t,e,m,null,s,d)}}for(var h in s){var m=s[h];if(d=n[h],s.hasOwnProperty(h)&&(m!=null||d!=null))switch(h){case"type":a=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":u=m;break;case"value":r=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(O(137,e));break;default:m!==d&&se(t,e,h,m,s,d)}}Zc(t,r,o,l,c,u,a,i);return;case"select":m=r=o=h=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":m=l;default:s.hasOwnProperty(a)||se(t,e,a,null,s,l)}for(i in s)if(a=s[i],l=n[i],s.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case"value":h=a;break;case"defaultValue":o=a;break;case"multiple":r=a;default:a!==l&&se(t,e,i,a,s,l)}e=o,n=r,s=m,h!=null?ui(t,!!n,h,!1):!!s!=!!n&&(e!=null?ui(t,!!n,e,!0):ui(t,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:se(t,e,o,null,s,i)}for(r in s)if(i=s[r],a=n[r],s.hasOwnProperty(r)&&(i!=null||a!=null))switch(r){case"value":h=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(O(91));break;default:i!==a&&se(t,e,r,i,s,a)}iy(t,h,m);return;case"option":for(var v in n)if(h=n[v],n.hasOwnProperty(v)&&h!=null&&!s.hasOwnProperty(v))switch(v){case"selected":t.selected=!1;break;default:se(t,e,v,null,s,h)}for(l in s)if(h=s[l],m=n[l],s.hasOwnProperty(l)&&h!==m&&(h!=null||m!=null))switch(l){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:se(t,e,l,h,s,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _ in n)h=n[_],n.hasOwnProperty(_)&&h!=null&&!s.hasOwnProperty(_)&&se(t,e,_,null,s,h);for(c in s)if(h=s[c],m=n[c],s.hasOwnProperty(c)&&h!==m&&(h!=null||m!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(O(137,e));break;default:se(t,e,c,h,s,m)}return;default:if(Od(e)){for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!==void 0&&!s.hasOwnProperty(b)&&Au(t,e,b,void 0,s,h);for(u in s)h=s[u],m=n[u],!s.hasOwnProperty(u)||h===m||h===void 0&&m===void 0||Au(t,e,u,h,s,m);return}}for(var p in n)h=n[p],n.hasOwnProperty(p)&&h!=null&&!s.hasOwnProperty(p)&&se(t,e,p,null,s,h);for(d in s)h=s[d],m=n[d],!s.hasOwnProperty(d)||h===m||h==null&&m==null||se(t,e,d,h,s,m)}var Cu=null,Ou=null;function zo(t){return t.nodeType===9?t:t.ownerDocument}function Sm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o_(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Nu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _c=null;function _x(){var t=window.event;return t&&t.type==="popstate"?t===_c?!1:(_c=t,!0):(_c=null,!1)}var l_=typeof setTimeout=="function"?setTimeout:void 0,bx=typeof clearTimeout=="function"?clearTimeout:void 0,wm=typeof Promise=="function"?Promise:void 0,Sx=typeof queueMicrotask=="function"?queueMicrotask:typeof wm<"u"?function(t){return wm.resolve(null).then(t).catch(wx)}:l_;function wx(t){setTimeout(function(){throw t})}function Kn(t){return t==="head"}function xm(t,e){var n=e,s=0,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<s&&8>s){n=s;var r=t.ownerDocument;if(n&1&&xa(r.documentElement),n&2&&xa(r.body),n&4)for(n=r.head,xa(n),r=n.firstChild;r;){var o=r.nextSibling,l=r.nodeName;r[ar]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=o}}if(i===0){t.removeChild(a),qa(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:s=n.charCodeAt(0)-48;else s=0;n=a}while(n);qa(e)}function Ru(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ru(n),Cd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function xx(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[ar])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=Ot(t.nextSibling),t===null)break}return null}function Tx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ot(t.nextSibling),t===null))return null;return t}function Du(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Ex(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Ot(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Mu=null;function Tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function c_(t,e,n){switch(e=zo(n),t){case"html":if(t=e.documentElement,!t)throw Error(O(452));return t;case"head":if(t=e.head,!t)throw Error(O(453));return t;case"body":if(t=e.body,!t)throw Error(O(454));return t;default:throw Error(O(451))}}function xa(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Cd(t)}var xt=new Map,Em=new Set;function $o(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var dn=J.d;J.d={f:jx,r:Ax,D:Cx,C:Ox,L:Nx,m:Rx,X:Mx,S:Dx,M:kx};function jx(){var t=dn.f(),e=pl();return t||e}function Ax(t){var e=Mi(t);e!==null&&e.tag===5&&e.type==="form"?nv(e):dn.r(t)}var Pi=typeof document>"u"?null:document;function u_(t,e,n){var s=Pi;if(s&&typeof e=="string"&&e){var i=yt(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Em.has(i)||(Em.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),Ve(e,"link",t),De(e),s.head.appendChild(e)))}}function Cx(t){dn.D(t),u_("dns-prefetch",t,null)}function Ox(t,e){dn.C(t,e),u_("preconnect",t,e)}function Nx(t,e,n){dn.L(t,e,n);var s=Pi;if(s&&t&&e){var i='link[rel="preload"][as="'+yt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(t)+'"]';var a=i;switch(e){case"style":a=Ai(t);break;case"script":a=Li(t)}xt.has(a)||(t=ce({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),xt.set(a,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(pr(a))||e==="script"&&s.querySelector(gr(a))||(e=s.createElement("link"),Ve(e,"link",t),De(e),s.head.appendChild(e)))}}function Rx(t,e){dn.m(t,e);var n=Pi;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+yt(s)+'"][href="'+yt(t)+'"]',a=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Li(t)}if(!xt.has(a)&&(t=ce({rel:"modulepreload",href:t},e),xt.set(a,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(gr(a)))return}s=n.createElement("link"),Ve(s,"link",t),De(s),n.head.appendChild(s)}}}function Dx(t,e,n){dn.S(t,e,n);var s=Pi;if(s&&t){var i=ci(s).hoistableStyles,a=Ai(t);e=e||"default";var r=i.get(a);if(!r){var o={loading:0,preload:null};if(r=s.querySelector(pr(a)))o.loading=5;else{t=ce({rel:"stylesheet",href:t,"data-precedence":e},n),(n=xt.get(a))&&dh(t,n);var l=r=s.createElement("link");De(l),Ve(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,lo(r,e,s)}r={type:"stylesheet",instance:r,count:1,state:o},i.set(a,r)}}}function Mx(t,e){dn.X(t,e);var n=Pi;if(n&&t){var s=ci(n).hoistableScripts,i=Li(t),a=s.get(i);a||(a=n.querySelector(gr(i)),a||(t=ce({src:t,async:!0},e),(e=xt.get(i))&&hh(t,e),a=n.createElement("script"),De(a),Ve(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function kx(t,e){dn.M(t,e);var n=Pi;if(n&&t){var s=ci(n).hoistableScripts,i=Li(t),a=s.get(i);a||(a=n.querySelector(gr(i)),a||(t=ce({src:t,async:!0,type:"module"},e),(e=xt.get(i))&&hh(t,e),a=n.createElement("script"),De(a),Ve(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function jm(t,e,n,s){var i=(i=Mn.current)?$o(i):null;if(!i)throw Error(O(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ai(n.href),n=ci(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ai(n.href);var a=ci(i).hoistableStyles,r=a.get(t);if(r||(i=i.ownerDocument||i,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,r),(a=i.querySelector(pr(t)))&&!a._p&&(r.instance=a,r.state.loading=5),xt.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xt.set(t,n),a||Ux(i,t,n,r.state))),e&&s===null)throw Error(O(528,""));return r}if(e&&s!==null)throw Error(O(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Li(n),n=ci(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(O(444,t))}}function Ai(t){return'href="'+yt(t)+'"'}function pr(t){return'link[rel="stylesheet"]['+t+"]"}function d_(t){return ce({},t,{"data-precedence":t.precedence,precedence:null})}function Ux(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Ve(e,"link",n),De(e),t.head.appendChild(e))}function Li(t){return'[src="'+yt(t)+'"]'}function gr(t){return"script[async]"+t}function Am(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+yt(n.href)+'"]');if(s)return e.instance=s,De(s),s;var i=ce({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),De(s),Ve(s,"style",i),lo(s,n.precedence,t),e.instance=s;case"stylesheet":i=Ai(n.href);var a=t.querySelector(pr(i));if(a)return e.state.loading|=4,e.instance=a,De(a),a;s=d_(n),(i=xt.get(i))&&dh(s,i),a=(t.ownerDocument||t).createElement("link"),De(a);var r=a;return r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),Ve(a,"link",s),e.state.loading|=4,lo(a,n.precedence,t),e.instance=a;case"script":return a=Li(n.src),(i=t.querySelector(gr(a)))?(e.instance=i,De(i),i):(s=n,(i=xt.get(a))&&(s=ce({},n),hh(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),De(i),Ve(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(O(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,lo(s,n.precedence,t));return e.instance}function lo(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,a=i,r=0;r<s.length;r++){var o=s[r];if(o.dataset.precedence===e)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function dh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function hh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var co=null;function Cm(t,e,n){if(co===null){var s=new Map,i=co=new Map;i.set(n,s)}else i=co,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[ar]||a[ze]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(e)||"";r=t+r;var o=s.get(r);o?o.push(a):s.set(r,[a])}}return s}function Om(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Px(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function h_(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var za=null;function Lx(){}function Vx(t,e,n){if(za===null)throw Error(O(475));var s=za;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=Ai(n.href),a=t.querySelector(pr(i));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=Go.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=a,De(a);return}a=t.ownerDocument||t,n=d_(n),(i=xt.get(i))&&dh(n,i),a=a.createElement("link"),De(a);var r=a;r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),Ve(a,"link",n),e.instance=a}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(s.count++,e=Go.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}function Bx(){if(za===null)throw Error(O(475));var t=za;return t.stylesheets&&t.count===0&&ku(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&ku(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Go(){if(this.count--,this.count===0){if(this.stylesheets)ku(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ho=null;function ku(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ho=new Map,e.forEach(zx,t),Ho=null,Go.call(t))}function zx(t,e){if(!(e.state.loading&4)){var n=Ho.get(t);if(n)var s=n.get(null);else{n=new Map,Ho.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var r=i[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),s=r)}s&&n.set(null,s)}i=e.instance,r=i.getAttribute("data-precedence"),a=n.get(r)||s,a===s&&n.set(null,i),n.set(r,i),this.count++,s=Go.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var $a={$$typeof:Zt,Provider:null,Consumer:null,_currentValue:hs,_currentValue2:hs,_threadCount:0};function $x(t,e,n,s,i,a,r,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$l(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.hiddenUpdates=$l(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function f_(t,e,n,s,i,a,r,o,l,c,u,d){return t=new $x(t,e,n,r,o,l,c,d),e=1,a===!0&&(e|=24),a=it(3,null,null,e),t.current=a,a.stateNode=t,e=zd(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:s,isDehydrated:n,cache:e},Gd(a),t}function m_(t){return t?(t=Ws,t):Ws}function p_(t,e,n,s,i,a){i=m_(i),s.context===null?s.context=i:s.pendingContext=i,s=kn(e),s.payload={element:n},a=a===void 0?null:a,a!==null&&(s.callback=a),n=Un(t,s,e),n!==null&&(lt(n,t,e),pa(n,t,e))}function Nm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fh(t,e){Nm(t,e),(t=t.alternate)&&Nm(t,e)}function g_(t){if(t.tag===13){var e=ki(t,67108864);e!==null&&lt(e,t,67108864),fh(t,67108864)}}var qo=!0;function Gx(t,e,n,s){var i=$.T;$.T=null;var a=J.p;try{J.p=2,mh(t,e,n,s)}finally{J.p=a,$.T=i}}function Hx(t,e,n,s){var i=$.T;$.T=null;var a=J.p;try{J.p=8,mh(t,e,n,s)}finally{J.p=a,$.T=i}}function mh(t,e,n,s){if(qo){var i=Uu(s);if(i===null)vc(t,e,s,Io,n),Rm(t,s);else if(Ix(i,t,e,n,s))s.stopPropagation();else if(Rm(t,s),e&4&&-1<qx.indexOf(t)){for(;i!==null;){var a=Mi(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=ns(a.pendingLanes);if(r!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;r;){var l=1<<31-rt(r);o.entanglements[1]|=l,r&=~l}Ht(a),!(te&6)&&(Uo=Lt()+500,mr(0))}}break;case 13:o=ki(a,2),o!==null&&lt(o,a,2),pl(),fh(a,2)}if(a=Uu(s),a===null&&vc(t,e,s,Io,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else vc(t,e,s,null,n)}}function Uu(t){return t=Nd(t),ph(t)}var Io=null;function ph(t){if(Io=null,t=Ys(t),t!==null){var e=tr(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=$g(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Io=t,null}function y_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(OS()){case Ig:return 2;case Fg:return 8;case _o:case NS:return 32;case Yg:return 268435456;default:return 32}default:return 32}}var Pu=!1,Vn=null,Bn=null,zn=null,Ga=new Map,Ha=new Map,jn=[],qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rm(t,e){switch(t){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(e.pointerId)}}function Ji(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Mi(e),e!==null&&g_(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ix(t,e,n,s,i){switch(e){case"focusin":return Vn=Ji(Vn,t,e,n,s,i),!0;case"dragenter":return Bn=Ji(Bn,t,e,n,s,i),!0;case"mouseover":return zn=Ji(zn,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Ga.set(a,Ji(Ga.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Ha.set(a,Ji(Ha.get(a)||null,t,e,n,s,i)),!0}return!1}function v_(t){var e=Ys(t.target);if(e!==null){var n=tr(e);if(n!==null){if(e=n.tag,e===13){if(e=$g(n),e!==null){t.blockedOn=e,VS(t.priority,function(){if(n.tag===13){var s=ot();s=jd(s);var i=ki(n,s);i!==null&&lt(i,n,s),fh(n,s)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uu(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Wc=s,n.target.dispatchEvent(s),Wc=null}else return e=Mi(n),e!==null&&g_(e),t.blockedOn=n,!1;e.shift()}return!0}function Dm(t,e,n){uo(t)&&n.delete(e)}function Fx(){Pu=!1,Vn!==null&&uo(Vn)&&(Vn=null),Bn!==null&&uo(Bn)&&(Bn=null),zn!==null&&uo(zn)&&(zn=null),Ga.forEach(Dm),Ha.forEach(Dm)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,Pu||(Pu=!0,Oe.unstable_scheduleCallback(Oe.unstable_NormalPriority,Fx)))}var Br=null;function Mm(t){Br!==t&&(Br=t,Oe.unstable_scheduleCallback(Oe.unstable_NormalPriority,function(){Br===t&&(Br=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(ph(s||n)===null)continue;break}var a=Mi(n);a!==null&&(t.splice(e,3),e-=3,pu(a,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function qa(t){function e(l){return Vr(l,t)}Vn!==null&&Vr(Vn,t),Bn!==null&&Vr(Bn,t),zn!==null&&Vr(zn,t),Ga.forEach(e),Ha.forEach(e);for(var n=0;n<jn.length;n++){var s=jn[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<jn.length&&(n=jn[0],n.blockedOn===null);)v_(n),n.blockedOn===null&&jn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],a=n[s+1],r=i[We]||null;if(typeof a=="function")r||Mm(n);else if(r){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,r=a[We]||null)o=r.formAction;else if(ph(i)!==null)continue}else o=r.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),Mm(n)}}}function gh(t){this._internalRoot=t}_l.prototype.render=gh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));var n=e.current,s=ot();p_(n,s,t,e,null,null)};_l.prototype.unmount=gh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;p_(t.current,2,null,t,null,null),pl(),e[Di]=null}};function _l(t){this._internalRoot=t}_l.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jn.length&&e!==0&&e<jn[n].priority;n++);jn.splice(n,0,t),n===0&&v_(t)}};var km=Bg.version;if(km!=="19.1.0")throw Error(O(527,km,"19.1.0"));J.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=wS(e),t=t!==null?Gg(t):null,t=t===null?null:t.stateNode,t};var Yx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zr.isDisabled&&zr.supportsFiber)try{nr=zr.inject(Yx),at=zr}catch{}}sl.createRoot=function(t,e){if(!zg(t))throw Error(O(299));var n=!1,s="",i=fv,a=mv,r=pv,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=f_(t,1,!1,null,null,n,s,i,a,r,o,null),t[Di]=e.current,uh(t),new gh(e)};sl.hydrateRoot=function(t,e,n){if(!zg(t))throw Error(O(299));var s=!1,i="",a=fv,r=mv,o=pv,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),e=f_(t,1,!0,e,n??null,s,i,a,r,o,l,c),e.context=m_(null),n=e.current,s=ot(),s=jd(s),i=kn(s),i.callback=null,Un(n,i,s),n=s,e.current.lanes=n,ir(e,n),Ht(e),t[Di]=e.current,uh(t),new _l(e)};sl.version="19.1.0";function __(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(__)}catch(t){console.error(t)}}__(),Mg.exports=sl;var Kx=Mg.exports;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ia(){return Ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ia.apply(this,arguments)}var Dn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dn||(Dn={}));const Um="popstate";function Xx(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:r,hash:o}=s.location;return Lu("",{pathname:a,search:r,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:S_(i)}return Zx(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function b_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qx(){return Math.random().toString(36).substr(2,8)}function Pm(t,e){return{usr:t.state,key:t.key,idx:e}}function Lu(t,e,n,s){return n===void 0&&(n=null),Ia({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vi(e):e,{state:n,key:e&&e.key||s||Qx()})}function S_(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Zx(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,r=i.history,o=Dn.Pop,l=null,c=u();c==null&&(c=0,r.replaceState(Ia({},r.state,{idx:c}),""));function u(){return(r.state||{idx:null}).idx}function d(){o=Dn.Pop;let b=u(),p=b==null?null:b-c;c=b,l&&l({action:o,location:_.location,delta:p})}function h(b,p){o=Dn.Push;let g=Lu(_.location,b,p);c=u()+1;let y=Pm(g,c),S=_.createHref(g);try{r.pushState(y,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(S)}a&&l&&l({action:o,location:_.location,delta:1})}function m(b,p){o=Dn.Replace;let g=Lu(_.location,b,p);c=u();let y=Pm(g,c),S=_.createHref(g);r.replaceState(y,"",S),a&&l&&l({action:o,location:_.location,delta:0})}function v(b){let p=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof b=="string"?b:S_(b);return g=g.replace(/ $/,"%20"),je(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let _={get action(){return o},get location(){return t(i,r)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Um,d),l=b,()=>{i.removeEventListener(Um,d),l=null}},createHref(b){return e(i,b)},createURL:v,encodeLocation(b){let p=v(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:m,go(b){return r.go(b)}};return _}var Lm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lm||(Lm={}));function Jx(t,e,n){return n===void 0&&(n="/"),Wx(t,e,n)}function Wx(t,e,n,s){let i=typeof e=="string"?Vi(e):e,a=T_(i.pathname||"/",n);if(a==null)return null;let r=w_(t);eT(r);let o=null;for(let l=0;o==null&&l<r.length;++l){let c=hT(a);o=cT(r[l],c)}return o}function w_(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,r,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:r,route:a};l.relativePath.startsWith("/")&&(je(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let c=_s([s,l.relativePath]),u=n.concat(l);a.children&&a.children.length>0&&(je(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),w_(a.children,e,u,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:oT(c,a.index),routesMeta:u})};return t.forEach((a,r)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,r);else for(let l of x_(a.path))i(a,r,l)}),e}function x_(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let r=x_(s.join("/")),o=[];return o.push(...r.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...r),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function eT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lT(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const tT=/^:[\w-]+$/,nT=3,sT=2,iT=1,aT=10,rT=-2,Vm=t=>t==="*";function oT(t,e){let n=t.split("/"),s=n.length;return n.some(Vm)&&(s+=rT),e&&(s+=sT),n.filter(i=>!Vm(i)).reduce((i,a)=>i+(tT.test(a)?nT:a===""?iT:aT),s)}function lT(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function cT(t,e,n){let{routesMeta:s}=t,i={},a="/",r=[];for(let o=0;o<s.length;++o){let l=s[o],c=o===s.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=uT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(i,d.params),r.push({params:i,pathname:_s([a,d.pathname]),pathnameBase:gT(_s([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=_s([a,d.pathnameBase]))}return r}function uT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=dT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],r=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((c,u,d)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let _=o[d]||"";r=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const v=o[d];return m&&!v?c[h]=void 0:c[h]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:r,pattern:t}}function dT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),b_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,o,l)=>(s.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function hT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return b_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function T_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function fT(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?Vi(t):t;return{pathname:n?n.startsWith("/")?n:mT(n,e):e,search:yT(s),hash:vT(i)}}function mT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bc(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function E_(t,e){let n=pT(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function j_(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=Vi(t):(i=Ia({},t),je(!i.pathname||!i.pathname.includes("?"),bc("?","pathname","search",i)),je(!i.pathname||!i.pathname.includes("#"),bc("#","pathname","hash",i)),je(!i.search||!i.search.includes("#"),bc("#","search","hash",i)));let a=t===""||i.pathname==="",r=a?"/":i.pathname,o;if(r==null)o=n;else{let d=e.length-1;if(!s&&r.startsWith("..")){let h=r.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=fT(i,o),c=r&&r!=="/"&&r.endsWith("/"),u=(a||r===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const _s=t=>t.join("/").replace(/\/\/+/g,"/"),gT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _T(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const A_=["post","put","patch","delete"];new Set(A_);const bT=["get",...A_];new Set(bT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Fa.apply(this,arguments)}const yh=w.createContext(null),ST=w.createContext(null),yr=w.createContext(null),bl=w.createContext(null),Xn=w.createContext({outlet:null,matches:[],isDataRoute:!1}),C_=w.createContext(null);function vr(){return w.useContext(bl)!=null}function vh(){return vr()||je(!1),w.useContext(bl).location}function O_(t){w.useContext(yr).static||w.useLayoutEffect(t)}function Sl(){let{isDataRoute:t}=w.useContext(Xn);return t?UT():wT()}function wT(){vr()||je(!1);let t=w.useContext(yh),{basename:e,future:n,navigator:s}=w.useContext(yr),{matches:i}=w.useContext(Xn),{pathname:a}=vh(),r=JSON.stringify(E_(i,n.v7_relativeSplatPath)),o=w.useRef(!1);return O_(()=>{o.current=!0}),w.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){s.go(c);return}let d=j_(c,JSON.parse(r),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:_s([e,d.pathname])),(u.replace?s.replace:s.push)(d,u.state,u)},[e,s,r,a,t])}function xT(){let{matches:t}=w.useContext(Xn),e=t[t.length-1];return e?e.params:{}}function TT(t,e){return ET(t,e)}function ET(t,e,n,s){vr()||je(!1);let{navigator:i}=w.useContext(yr),{matches:a}=w.useContext(Xn),r=a[a.length-1],o=r?r.params:{};r&&r.pathname;let l=r?r.pathnameBase:"/";r&&r.route;let c=vh(),u;if(e){var d;let b=typeof e=="string"?Vi(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||je(!1),u=b}else u=c;let h=u.pathname||"/",m=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=Jx(t,{pathname:m}),_=NT(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:_s([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:_s([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,s);return e&&_?w.createElement(bl.Provider,{value:{location:Fa({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Dn.Pop}},_):_}function jT(){let t=kT(),e=_T(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,null)}const AT=w.createElement(jT,null);class CT extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(Xn.Provider,{value:this.props.routeContext},w.createElement(C_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OT(t){let{routeContext:e,match:n,children:s}=t,i=w.useContext(yh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Xn.Provider,{value:e},s)}function NT(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let u=r.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||je(!1),r=r.slice(0,Math.min(r.length,u+1))}let l=!1,c=-1;if(n&&s&&s.v7_partialHydration)for(let u=0;u<r.length;u++){let d=r[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:m}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((u,d,h)=>{let m,v=!1,_=null,b=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,_=d.route.errorElement||AT,l&&(c<0&&h===0?(PT("route-fallback"),v=!0,b=null):c===h&&(v=!0,b=d.route.hydrateFallbackElement||null)));let p=e.concat(r.slice(0,h+1)),g=()=>{let y;return m?y=_:v?y=b:d.route.Component?y=w.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=u,w.createElement(OT,{match:d,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?w.createElement(CT,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var N_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(N_||{}),R_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(R_||{});function RT(t){let e=w.useContext(yh);return e||je(!1),e}function DT(t){let e=w.useContext(ST);return e||je(!1),e}function MT(t){let e=w.useContext(Xn);return e||je(!1),e}function D_(t){let e=MT(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function kT(){var t;let e=w.useContext(C_),n=DT(),s=D_();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function UT(){let{router:t}=RT(N_.UseNavigateStable),e=D_(R_.UseNavigateStable),n=w.useRef(!1);return O_(()=>{n.current=!0}),w.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Fa({fromRouteId:e},a)))},[t,e])}const Bm={};function PT(t,e,n){Bm[t]||(Bm[t]=!0)}function LT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function $r(t){let{to:e,replace:n,state:s,relative:i}=t;vr()||je(!1);let{future:a,static:r}=w.useContext(yr),{matches:o}=w.useContext(Xn),{pathname:l}=vh(),c=Sl(),u=j_(e,E_(o,a.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return w.useEffect(()=>c(JSON.parse(d),{replace:n,state:s,relative:i}),[c,d,i,n,s]),null}function ra(t){je(!1)}function VT(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Dn.Pop,navigator:a,static:r=!1,future:o}=t;vr()&&je(!1);let l=e.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:a,static:r,future:Fa({v7_relativeSplatPath:!1},o)}),[l,o,a,r]);typeof s=="string"&&(s=Vi(s));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:v="default"}=s,_=w.useMemo(()=>{let b=T_(u,l);return b==null?null:{location:{pathname:b,search:d,hash:h,state:m,key:v},navigationType:i}},[l,u,d,h,m,v,i]);return _==null?null:w.createElement(yr.Provider,{value:c},w.createElement(bl.Provider,{children:n,value:_}))}function BT(t){let{children:e,location:n}=t;return TT(Vu(e),n)}new Promise(()=>{});function Vu(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(s,i)=>{if(!w.isValidElement(s))return;let a=[...e,i];if(s.type===w.Fragment){n.push.apply(n,Vu(s.props.children,a));return}s.type!==ra&&je(!1),!s.props.index||!s.props.children||je(!1);let r={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(r.children=Vu(s.props.children,a)),n.push(r)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const zT="6";try{window.__reactRouterVersion=zT}catch{}const $T="startTransition",zm=pS[$T];function GT(t){let{basename:e,children:n,future:s,window:i}=t,a=w.useRef();a.current==null&&(a.current=Xx({window:i,v5Compat:!0}));let r=a.current,[o,l]=w.useState({action:r.action,location:r.location}),{v7_startTransition:c}=s||{},u=w.useCallback(d=>{c&&zm?zm(()=>l(d)):l(d)},[l,c]);return w.useLayoutEffect(()=>r.listen(u),[r,u]),w.useEffect(()=>LT(s),[s]),w.createElement(VT,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:r,future:s})}var $m;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($m||($m={}));var Gm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gm||(Gm={}));const HT="modulepreload",qT=function(t){return"/"+t},Hm={},hn=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=qT(l),l in Hm)return;Hm[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":HT,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(r){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r}return i.then(r=>{for(const o of r||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},IT=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>hn(async()=>{const{default:s}=await Promise.resolve().then(()=>Bi);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class _h extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class FT extends _h{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qm extends _h{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Im extends _h{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bu||(Bu={}));var YT=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};class KT{constructor(e,{headers:n={},customFetch:s,region:i=Bu.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=IT(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return YT(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:r}=n;let o={},{region:l}=n;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=r):typeof r=="string"?(o["Content-Type"]="text/plain",u=r):typeof FormData<"u"&&r instanceof FormData?u=r:(o["Content-Type"]="application/json",u=JSON.stringify(r)));const d=yield this.fetch(c.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:u}).catch(_=>{throw new FT(_)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new qm(d);if(!d.ok)throw new Im(d);let m=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield d.json():m==="application/octet-stream"?v=yield d.blob():m==="text/event-stream"?v=d:m==="multipart/form-data"?v=yield d.formData():v=yield d.text(),{data:v,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Im||i instanceof qm?i.context:void 0}}})}}var Ze={},bh={},wl={},_r={},xl={},Tl={},XT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ci=XT();const QT=Ci.fetch,M_=Ci.fetch.bind(Ci),k_=Ci.Headers,ZT=Ci.Request,JT=Ci.Response,Bi=Object.freeze(Object.defineProperty({__proto__:null,Headers:k_,Request:ZT,Response:JT,default:M_,fetch:QT},Symbol.toStringTag,{value:"Module"})),WT=Qb(Bi);var El={};Object.defineProperty(El,"__esModule",{value:!0});let eE=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};El.default=eE;var U_=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tl,"__esModule",{value:!0});const tE=U_(WT),nE=U_(El);let sE=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=tE.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var r,o,l;let c=null,u=null,d=null,h=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const p=await a.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const _=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),b=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");_&&b&&b.length>1&&(d=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const _=await a.text();try{c=JSON.parse(_),Array.isArray(c)&&a.status===404&&(u=[],c=null,h=200,m="OK")}catch{a.status===404&&_===""?(h=204,m="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,m="OK"),c&&this.shouldThrowOnError)throw new nE.default(c)}return{error:c,data:u,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var r,o,l;return{error:{message:`${(r=a==null?void 0:a.name)!==null&&r!==void 0?r:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Tl.default=sE;var iE=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xl,"__esModule",{value:!0});const aE=iE(Tl);let rE=class extends aE.default{select(e){let n=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:s,foreignTable:i,referencedTable:a=i}={}){const r=a?`${a}.order`:"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"offset":`${i}.offset`,r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(r,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:s=!1,buffers:i=!1,wal:a=!1,format:r="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,s?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${c}"; options=${l};`,r==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};xl.default=rE;var oE=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_r,"__esModule",{value:!0});const lE=oE(xl);let cE=class extends lE.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const s=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:s,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const r=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${r}.${n}`),this}match(e){return Object.entries(e).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(e,n,s){return this.url.searchParams.append(e,`not.${n}.${s}`),this}or(e,{foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,s){return this.url.searchParams.append(e,`${n}.${s}`),this}};_r.default=cE;var uE=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wl,"__esModule",{value:!0});const Wi=uE(_r);let dE=class{constructor(e,{headers:n={},schema:s,fetch:i}){this.url=e,this.headers=n,this.schema=s,this.fetch=i}select(e,{head:n=!1,count:s}={}){const i=n?"HEAD":"GET";let a=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",r),s&&(this.headers.Prefer=`count=${s}`),new Wi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:s=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const r=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(r.length>0){const o=[...new Set(r)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Wi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:s=!1,count:i,defaultToNull:a=!0}={}){const r="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Wi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const s="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new Wi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Wi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};wl.default=dE;var jl={},Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.version=void 0;Al.version="0.0.0-automated";Object.defineProperty(jl,"__esModule",{value:!0});jl.DEFAULT_HEADERS=void 0;const hE=Al;jl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${hE.version}`};var P_=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bh,"__esModule",{value:!0});const fE=P_(wl),mE=P_(_r),pE=jl;let gE=class L_{constructor(e,{headers:n={},schema:s,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},pE.DEFAULT_HEADERS),n),this.schemaName=s,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new fE.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new L_(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:i=!1,count:a}={}){let r;const o=new URL(`${this.url}/rpc/${e}`);let l;s||i?(r=s?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{o.searchParams.append(u,d)})):(r="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new mE.default({method:r,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};bh.default=gE;var zi=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.PostgrestError=Ze.PostgrestBuilder=Ze.PostgrestTransformBuilder=Ze.PostgrestFilterBuilder=Ze.PostgrestQueryBuilder=Ze.PostgrestClient=void 0;const V_=zi(bh);Ze.PostgrestClient=V_.default;const B_=zi(wl);Ze.PostgrestQueryBuilder=B_.default;const z_=zi(_r);Ze.PostgrestFilterBuilder=z_.default;const $_=zi(xl);Ze.PostgrestTransformBuilder=$_.default;const G_=zi(Tl);Ze.PostgrestBuilder=G_.default;const H_=zi(El);Ze.PostgrestError=H_.default;var yE=Ze.default={PostgrestClient:V_.default,PostgrestQueryBuilder:B_.default,PostgrestFilterBuilder:z_.default,PostgrestTransformBuilder:$_.default,PostgrestBuilder:G_.default,PostgrestError:H_.default};const{PostgrestClient:vE,PostgrestQueryBuilder:fR,PostgrestFilterBuilder:mR,PostgrestTransformBuilder:pR,PostgrestBuilder:gR,PostgrestError:yR}=yE;function _E(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const bE=_E(),SE="2.11.15",wE=`realtime-js/${SE}`,xE="1.0.0",q_=1e4,TE=1e3;var Ta;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ta||(Ta={}));var Be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Be||(Be={}));var Ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ct||(Ct={}));var zu;(function(t){t.websocket="websocket"})(zu||(zu={}));var ls;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ls||(ls={}));class EE{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const i=n.getUint8(1),a=n.getUint8(2);let r=this.HEADER_LENGTH+2;const o=s.decode(e.slice(r,r+i));r=r+i;const l=s.decode(e.slice(r,r+a));r=r+a;const c=JSON.parse(s.decode(e.slice(r,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class I_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(oe||(oe={}));const Fm=(t,e,n={})=>{var s;const i=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,r)=>(a[r]=jE(r,t,e,i),a),{})},jE=(t,e,n,s)=>{const i=e.find(o=>o.name===t),a=i==null?void 0:i.type,r=n[t];return a&&!s.includes(a)?F_(a,r):$u(r)},F_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return NE(e,n)}switch(t){case oe.bool:return AE(e);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return CE(e);case oe.json:case oe.jsonb:return OE(e);case oe.timestamp:return RE(e);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return $u(e);default:return $u(e)}},$u=t=>t,AE=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},CE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},OE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},NE=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let a;const r=t.slice(1,n);try{a=JSON.parse("["+r+"]")}catch{a=r?r.split(","):[]}return a.map(o=>F_(e,o))}return t},RE=t=>typeof t=="string"?t.replace(" ","T"):t,Y_=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sc{constructor(e,n,s={},i=q_){this.channel=e,this.event=n,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ym;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ym||(Ym={}));class Ea{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:r,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ea.syncState(this.state,i,a,r),this.pendingDiffs.forEach(l=>{this.state=Ea.syncDiff(this.state,l,a,r)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:r,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ea.syncDiff(this.state,i,a,r),o())}),this.onJoin((i,a,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:r})}),this.onLeave((i,a,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,i){const a=this.cloneDeep(e),r=this.transformState(n),o={},l={};return this.map(a,(c,u)=>{r[c]||(l[c]=u)}),this.map(r,(c,u)=>{const d=a[c];if(d){const h=u.map(b=>b.presence_ref),m=d.map(b=>b.presence_ref),v=u.filter(b=>m.indexOf(b.presence_ref)<0),_=d.filter(b=>h.indexOf(b.presence_ref)<0);v.length>0&&(o[c]=v),_.length>0&&(l[c]=_)}else o[c]=u}),this.syncDiff(a,{joins:o,leaves:l},s,i)}static syncDiff(e,n,s,i){const{joins:a,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const d=e[o].map(m=>m.presence_ref),h=u.filter(m=>d.indexOf(m.presence_ref)<0);e[o].unshift(...h)}s(o,u,l)}),this.map(r,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=c,i(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const i=e[s];return"metas"in i?n[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[s]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Km;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Km||(Km={}));var Xm;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Xm||(Xm={}));var Kt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kt||(Kt={}));class Sh{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sc(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new I_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Ea(this),this.broadcastEndpointURL=Y_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:a,presence:r,private:o}}=this.params;this._onError(u=>e==null?void 0:e(Kt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Kt.CLOSED));const l={},c={broadcast:a,presence:r,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Kt.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,v=[];for(let _=0;_<m;_++){const b=h[_],{filter:{event:p,schema:g,table:y,filter:S}}=b,T=u&&u[_];if(T&&T.event===p&&T.schema===g&&T.table===y&&T.filter===S)v.push(Object.assign(Object.assign({},b),{id:T.id}));else{this.unsubscribe(),this.state=Be.errored,e==null||e(Kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Kt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Be.errored,e==null||e(Kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:r}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var r,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(r=this.params)===null||r===void 0?void 0:r.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Be.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Sc(this,Ct.leave,{},e),s.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),r=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),r}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Sc(this,e,n,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var i,a;const r=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=Ct;if(s&&[o,l,c,u].indexOf(r)>=0&&s!==this._joinRef())return;let h=this._onMessage(r,n,s);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var v,_,b;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(_=m.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===r}).map(m=>m.callback(h,s)):(a=this.bindings[r])===null||a===void 0||a.filter(m=>{var v,_,b,p,g,y;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in m){const S=m.id,T=(v=m.filter)===null||v===void 0?void 0:v.event;return S&&((_=n.ids)===null||_===void 0?void 0:_.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(g=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===r}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:_,table:b,commit_timestamp:p,type:g,errors:y}=v;h=Object.assign(Object.assign({},{schema:_,table:b,commit_timestamp:p,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(v))}m.callback(h,s)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Sh.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ct.close,{},e)}_onError(e){this._on(Ct.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Fm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Fm(e.columns,e.old_record)),n}}const Qm=()=>{},DE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ME{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=q_,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qm,this.ref=0,this.logger=Qm,this.conn=null,this.sendBuffer=[],this.serializer=new EE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let r;return a?r=a:typeof fetch>"u"?r=(...o)=>hn(async()=>{const{default:l}=await Promise.resolve().then(()=>Bi);return{default:l}},void 0).then(({default:l})=>l(...o)):r=fetch,(...o)=>r(...o)},this.endPoint=`${e}/${zu.websocket}`,this.httpEndpoint=Y_(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,r)=>r(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new I_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bE),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xE}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ta.connecting:return ls.Connecting;case Ta.open:return ls.Open;case Ta.closing:return ls.Closing;default:return ls.Closed}}isConnected(){return this.connectionState()===ls.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new Sh(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:s,payload:i,ref:a}=e,r=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${s} (${a})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:wE};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ct.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(TE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:i,payload:a,ref:r}=n;s==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${i} ${r&&"("+r+")"||""}`,a),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(i,a,r)),this.stateChangeCallbacks.message.forEach(o=>o(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ct.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${s}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([DE],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class wh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kE extends wh{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Gu extends wh{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var UE=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const K_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>hn(async()=>{const{default:s}=await Promise.resolve().then(()=>Bi);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},PE=()=>UE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield hn(()=>Promise.resolve().then(()=>Bi),void 0)).Response:Response}),Hu=t=>{if(Array.isArray(t))return t.map(n=>Hu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Hu(s)}),e};var Ns=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const wc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),LE=(t,e,n)=>Ns(void 0,void 0,void 0,function*(){const s=yield PE();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new kE(wc(i),t.status||500))}).catch(i=>{e(new Gu(wc(i),i))}):e(new Gu(wc(t),t))}),VE=(t,e,n,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),n))};function br(t,e,n,s,i,a){return Ns(this,void 0,void 0,function*(){return new Promise((r,o)=>{t(n,VE(e,s,i,a)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>LE(l,o,s))})})}function Fo(t,e,n,s){return Ns(this,void 0,void 0,function*(){return br(t,"GET",e,n,s)})}function wn(t,e,n,s,i){return Ns(this,void 0,void 0,function*(){return br(t,"POST",e,s,i,n)})}function BE(t,e,n,s,i){return Ns(this,void 0,void 0,function*(){return br(t,"PUT",e,s,i,n)})}function zE(t,e,n,s){return Ns(this,void 0,void 0,function*(){return br(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function X_(t,e,n,s,i){return Ns(this,void 0,void 0,function*(){return br(t,"DELETE",e,s,i,n)})}var Ye=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const $E={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GE{constructor(e,n={},s,i){this.url=e,this.headers=n,this.bucketId=s,this.fetch=K_(i)}uploadOrUpdate(e,n,s,i){return Ye(this,void 0,void 0,function*(){try{let a;const r=Object.assign(Object.assign({},Zm),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",r.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",r.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=s,o["cache-control"]=`max-age=${r.cacheControl}`,o["content-type"]=r.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:o},r!=null&&r.duplex?{duplex:r.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(Ne(a))return{data:null,error:a};throw a}})}upload(e,n,s){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,i){return Ye(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),r=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${r}`);o.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Zm.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Ne(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ye(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield wn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),r=new URL(this.url+a.url),o=r.searchParams.get("token");if(!o)throw new wh("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:o},error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}update(e,n,s){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Ye(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}copy(e,n,s){return Ye(this,void 0,void 0,function*(){try{return{data:{path:(yield wn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,s){return Ye(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield wn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const r=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${r}`)},{data:a,error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,s){return Ye(this,void 0,void 0,function*(){try{const i=yield wn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${a}`):null})),error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}download(e,n){return Ye(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),r=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Fo(this.fetch,`${this.url}/${i}/${o}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Ne(o))return{data:null,error:o};throw o}})}info(e){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Fo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Hu(s),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}exists(e){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield zE(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Ne(s)&&s instanceof Gu){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(e){return Ye(this,void 0,void 0,function*(){try{return{data:yield X_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}list(e,n,s){return Ye(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},$E),n),{prefix:e||""});return{data:yield wn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const HE="2.7.1",qE={"X-Client-Info":`storage-js/${HE}`};var Ms=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};class IE{constructor(e,n={},s){this.url=e,this.headers=Object.assign(Object.assign({},qE),n),this.fetch=K_(s)}listBuckets(){return Ms(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ne(e))return{data:null,error:e};throw e}})}getBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ms(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Ms(this,void 0,void 0,function*(){try{return{data:yield BE(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield X_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}}class FE extends IE{constructor(e,n={},s){super(e,n,s)}from(e){return new GE(this.url,this.headers,e,this.fetch)}}const YE="2.52.0";let oa="";typeof Deno<"u"?oa="deno":typeof document<"u"?oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oa="react-native":oa="node";const KE={"X-Client-Info":`supabase-js-${oa}/${YE}`},XE={headers:KE},QE={schema:"public"},ZE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},JE={};var WE=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const e1=t=>{let e;return t?e=t:typeof fetch>"u"?e=M_:e=fetch,(...n)=>e(...n)},t1=()=>typeof Headers>"u"?k_:Headers,n1=(t,e,n)=>{const s=e1(n),i=t1();return(a,r)=>WE(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(a,Object.assign(Object.assign({},r),{headers:c}))})};var s1=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};function i1(t){return t.endsWith("/")?t:t+"/"}function a1(t,e){var n,s;const{db:i,auth:a,realtime:r,global:o}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),r),global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>s1(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const Q_="2.71.1",Hs=30*1e3,qu=3,xc=qu*Hs,r1="http://localhost:9999",o1="supabase.auth.token",l1={"X-Client-Info":`gotrue-js/${Q_}`},Iu="X-Supabase-Api-Version",Z_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,u1=10*60*1e3;class xh extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function G(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class d1 extends xh{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function h1(t){return G(t)&&t.name==="AuthApiError"}class J_ extends xh{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Qn extends xh{constructor(e,n,s,i){super(e,s,i),this.name=n,this.status=s}}class vn extends Qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function f1(t){return G(t)&&t.name==="AuthSessionMissingError"}class Gr extends Qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hr extends Qn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qr extends Qn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m1(t){return G(t)&&t.name==="AuthImplicitGrantRedirectError"}class Jm extends Qn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fu extends Qn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Tc(t){return G(t)&&t.name==="AuthRetryableFetchError"}class Wm extends Qn{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Yu extends Qn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ep=` 	
\r=`.split(""),p1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ep.length;e+=1)t[ep[e].charCodeAt(0)]=-2;for(let e=0;e<Yo.length;e+=1)t[Yo[e].charCodeAt(0)]=e;return t})();function tp(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Yo[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Yo[s]),e.queuedBits-=6}}function W_(t,e,n){const s=p1[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function np(t){const e=[],n=r=>{e.push(String.fromCodePoint(r))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=r=>{v1(r,s,n)};for(let r=0;r<t.length;r+=1)W_(t.charCodeAt(r),i,a);return e.join("")}function g1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function y1(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}g1(s,e)}}function v1(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function _1(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)W_(t.charCodeAt(i),n,s);return new Uint8Array(e)}function b1(t){const e=[];return y1(t,n=>e.push(n)),new Uint8Array(e)}function S1(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};return t.forEach(i=>tp(i,n,s)),tp(null,n,s),e.join("")}function w1(t){return Math.round(Date.now()/1e3)+t}function x1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Et=()=>typeof window<"u"&&typeof document<"u",Wn={tested:!1,writable:!1},e0=()=>{if(!Et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wn.tested)return Wn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wn.tested=!0,Wn.writable=!0}catch{Wn.tested=!0,Wn.writable=!1}return Wn.writable};function T1(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((s,i)=>{e[i]=s}),e}const t0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>hn(async()=>{const{default:s}=await Promise.resolve().then(()=>Bi);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},E1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},es=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},pn=async(t,e)=>{await t.removeItem(e)};class Cl{constructor(){this.promise=new Cl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Cl.promiseConstructor=Promise;function Ec(t){const e=t.split(".");if(e.length!==3)throw new Yu("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!c1.test(e[s]))throw new Yu("JWT not in base64url format");return{header:JSON.parse(np(e[0])),payload:JSON.parse(np(e[1])),signature:_1(e[2]),raw:{header:e[0],payload:e[1]}}}async function j1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function A1(t,e){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const r=await t(a);if(!e(a,null,r)){s(r);return}}catch(r){if(!e(a,r)){i(r);return}}})()})}function C1(t){return("0"+t.toString(16)).substr(-2)}function O1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,C1).join("")}async function N1(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function R1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await N1(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ks(t,e,n=!1){const s=O1();let i=s;n&&(i+="/PASSWORD_RECOVERY"),await qs(t,`${e}-code-verifier`,i);const a=await R1(s);return[a,s===a?"plain":"s256"]}const D1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function M1(t){const e=t.headers.get(Iu);if(!e||!e.match(D1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function k1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function U1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const P1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Us(t){if(!P1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sp(t){return JSON.parse(JSON.stringify(t))}var L1=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n};const as=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),V1=[502,503,504];async function ip(t){var e;if(!E1(t))throw new Fu(as(t),0);if(V1.includes(t.status))throw new Fu(as(t),t.status);let n;try{n=await t.json()}catch(a){throw new J_(as(a),a)}let s;const i=M1(t);if(i&&i.getTime()>=Z_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Wm(as(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new vn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,r)=>a&&typeof r=="string",!0))throw new Wm(as(n),t.status,n.weak_password.reasons);throw new d1(as(n),t.status||500,s)}const B1=(t,e,n,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),n))};async function F(t,e,n,s){var i;const a=Object.assign({},s==null?void 0:s.headers);a[Iu]||(a[Iu]=Z_["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const r=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(r.redirect_to=s.redirectTo);const o=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await z1(t,e,n+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function z1(t,e,n,s,i,a){const r=B1(e,s,i,a);let o;try{o=await t(n,Object.assign({},r))}catch(l){throw console.error(l),new Fu(as(l),0)}if(o.ok||await ip(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(l){await ip(l)}}function Yt(t){var e;let n=null;q1(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=w1(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function ap(t){const e=Yt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function An(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function $1(t){return{data:t,error:null}}function G1(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a}=t,r=L1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a},l=Object.assign({},r);return{data:{properties:o,user:l},error:null}}function H1(t){return t}function q1(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ac=["global","local","others"];var I1=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n};class F1{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=t0(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Ac[0]){if(Ac.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ac.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:An})}catch(s){if(G(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=I1(e,["options"]),i=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:G1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(G(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:An})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,i,a,r,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:H1});if(u.error)throw u.error;const d=await u.json(),h=(r=u.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(G(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Us(e);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:An})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Us(e);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:An})}catch(s){if(G(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Us(e);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:An})}catch(s){if(G(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Us(e.userId);try{const{data:n,error:s}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:s}}catch(n){if(G(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Us(e.userId),Us(e.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}}function rp(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Y1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ps={debug:!!(globalThis&&e0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class n0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class K1 extends n0{}async function X1(t,e,n){Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new K1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ps.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Y1();const Q1={url:r1,storageKey:o1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:l1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function op(t,e,n){return await n()}const Ls={};class Ya{constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ya.nextInstanceID,Ya.nextInstanceID+=1,this.instanceID>0&&Et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Q1),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new F1({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=t0(i.fetch),this.lock=i.lock||op,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Et()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=X1:this.lock=op,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:e0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rp(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=rp(this.memoryStorage)),Et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Ls[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ls[this.storageKey]=Object.assign(Object.assign({},Ls[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ls[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ls[this.storageKey]=Object.assign(Object.assign({},Ls[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Q_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=T1(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Et()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),m1(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:r,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",o),await this._saveSession(r),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return G(n)?{error:n}:{error:new J_("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,i;try{const a=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Yt}),{data:r,error:o}=a;if(o||!r)return{data:{user:null,session:null},error:o};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(G(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,s,i;try{let a;if("email"in e){const{email:u,password:d,options:h}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await ks(this.storage,this.storageKey)),a=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:Yt})}else if("phone"in e){const{phone:u,password:d,options:h}=e;a=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Yt})}else throw new Hr("You must provide either an email or phone number and a password");const{data:r,error:o}=a;if(o||!r)return{data:{user:null,session:null},error:o};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(G(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:r,options:o}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ap})}else if("phone"in e){const{phone:a,password:r,options:o}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ap})}else throw new Hr("You must provide either an email or phone number and a password");const{data:s,error:i}=n;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Gr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(n){if(G(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,i,a,r,o,l,c,u,d,h,m;let v,_;if("message"in e)v=e.message,_=e.signature;else{const{chain:b,wallet:p,statement:g,options:y}=e;let S;if(Et())if(typeof p=="object")S=p;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=p}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),g?{statement:g}:null));let x;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")x=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)x=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)v=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),_=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((r=y==null?void 0:y.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(u=y==null?void 0:y.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=j}}try{const{data:b,error:p}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:S1(_)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Yt});if(p)throw p;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Gr}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:p})}catch(b){if(G(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await es(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(n??"").split("/");try{const{data:a,error:r}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Yt});if(await pn(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Gr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:r})}catch(a){if(G(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:s,token:i,access_token:a,nonce:r}=e,o=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Yt}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Gr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(G(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,i,a,r;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ks(this.storage,this.storageKey));const{error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(r=l==null?void 0:l.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Hr("You must provide either an email or phone number.")}catch(o){if(G(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,s;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:r,error:o}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Yt});if(o)throw o;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,s,i;try{let a=null,r=null;return this.flowType==="pkce"&&([a,r]=await ks(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:r}),headers:this.headers,xform:$1})}catch(a){if(G(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new vn;const{error:i}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(G(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:a}=e,{error:r}=await F(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in e){const{phone:s,type:i,options:a}=e,{data:r,error:o}=await F(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:o}}throw new Hr("You must provide either an email or phone number and a type")}catch(n){if(G(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await es(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<xc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const r=await es(this.userStorage,this.storageKey+"-user");r!=null&&r.user?e.user=r.user:e.user=jc()}if(this.storage.isServer&&e.user){let r=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:An}):await this._useSession(async n=>{var s,i,a;const{data:r,error:o}=n;if(o)throw o;return!(!((s=r.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vn}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:An})})}catch(n){if(G(n))return f1(n)&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new vn;const r=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await ks(this.storage,this.storageKey));const{data:c,error:u}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:r.access_token,xform:An});if(u)throw u;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(s){if(G(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vn;const n=Date.now()/1e3;let s=n,i=!0,a=null;const{payload:r}=Ec(e.access_token);if(r.exp&&(s=r.exp,i=s<=n),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(G(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:r,error:o}=n;if(o)throw o;e=(s=r.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new vn;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(G(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Et())throw new qr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Jm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jm("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:r,expires_in:o,expires_at:l,token_type:c}=e;if(!a||!o||!r||!c)throw new qr("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let h=u+d;l&&(h=parseInt(l));const m=h-u;m*1e3<=Hs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const v=h-d;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,u);const{data:_,error:b}=await this._getUser(a);if(b)throw b;const p={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:h,refresh_token:r,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if(G(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await es(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{error:a};const r=(s=i.session)===null||s===void 0?void 0:s.access_token;if(r){const{error:o}=await this.admin.signOut(r,e);if(o&&!(h1(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=x1(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,i;try{const{data:{session:a},error:r}=n;if(r)throw r;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await ks(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(G(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:i}=await this._useSession(async a=>{var r,o,l,c,u;const{data:d,error:h}=a;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Et()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(G(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:r}=n;if(r)throw r;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(G(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await A1(async i=>(i>0&&await j1(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Yt})),(i,a)=>{const r=200*Math.pow(2,i);return a&&Tc(a)&&Date.now()+r-s<Hs})}catch(s){if(this._debug(n,"error",s),G(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Et()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await es(this.storage,this.storageKey);if(i&&this.userStorage){let r=await es(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:i.user},await qs(this.userStorage,this.storageKey+"-user",r)),i.user=(e=r==null?void 0:r.user)!==null&&e!==void 0?e:jc()}else if(i&&!i.user&&!i.user){const r=await es(this.storage,this.storageKey+"-user");r&&(r!=null&&r.user)?(i.user=r.user,await pn(this.storage,this.storageKey+"-user"),await qs(this.storage,this.storageKey,i)):i.user=jc()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xc;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${xc}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:r}=await this._callRefreshToken(i.refresh_token);r&&(console.error(r),Tc(r)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:o}=await this._getUser(i.access_token);!o&&(r!=null&&r.user)?(i.user=r.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Cl;const{data:a,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!a.session)throw new vn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),G(a)){const r={session:null,error:a};return Tc(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(r),r}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],r=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){a.push(l)}});if(await Promise.all(r),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await qs(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=sp(i);await qs(this.storage,this.storageKey,a)}else{const i=sp(n);await qs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await pn(this.storage,this.storageKey),await pn(this.storage,this.storageKey+"-code-verifier"),await pn(this.storage,this.storageKey+"-user"),this.userStorage&&await pn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/Hs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Hs}ms, refresh threshold is ${qu} ticks`),i<=qu&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof n0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const i=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,r]=await ks(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;return a?{data:null,error:a}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(G(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:r}=n;if(r)return{data:null,error:r};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await F(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(G(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const{data:r,error:o}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:o})})}catch(n){if(G(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;return a?{data:null,error:a}:await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(G(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],i=s.filter(r=>r.factor_type==="totp"&&r.status==="verified"),a=s.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:s,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Ec(i.access_token);let o=null;r.aal&&(o=r.aal);let l=o;((s=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(o=>o.kid===e);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+u1>i)return s;const{data:a,error:r}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,s=a.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};s=m.session.access_token}const{header:i,payload:a,signature:r,raw:{header:o,payload:l}}=Ec(s);n!=null&&n.allowExpired||k1(a.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:a,header:i,signature:r},error:null}}const u=U1(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,r,b1(`${o}.${l}`)))throw new Yu("Invalid JWT signature");return{data:{claims:a,header:i,signature:r},error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}}}Ya.nextInstanceID=0;const Z1=Ya;class J1 extends Z1{constructor(e){super(e)}}var W1=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};class ej{constructor(e,n,s){var i,a,r;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=i1(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:QE,realtime:JE,auth:Object.assign(Object.assign({},ZE),{storageKey:c}),global:XE},d=a1(s??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=n1(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new vE(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new KT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new FE(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return W1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,storageKey:a,flowType:r,lock:o,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new J1({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,flowType:r,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ME(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tj=(t,e,n)=>new ej(t,e,n),W=tj("https://ssxxaztyibwkcrowyarw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzeHhhenR5aWJ3a2Nyb3d5YXJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxNzE1MjYsImV4cCI6MjA2ODc0NzUyNn0.5wfjQfBzyQyxQT2X-03uzjsz54xN79mbShjdiQFfiXY");function nj(){const[t,e]=w.useState(""),[n,s]=w.useState(""),[i,a]=w.useState(!1),[r,o]=w.useState(""),l=Sl(),c=async d=>{d.preventDefault(),a(!0),o("");const{data:h,error:m}=await W.auth.signInWithPassword({email:t,password:n});m?o(m.message):h.user&&l("/dashboard"),a(!1)},u=async()=>{a(!0),o("");const{error:d}=await W.auth.signUp({email:t,password:n});o(d?d.message:"Check your email for confirmation link"),a(!1)};return f.jsx("div",{className:"login-container",children:f.jsxs("div",{className:"login-card",children:[f.jsx("h1",{className:"login-title",children:"Login"}),f.jsxs("form",{onSubmit:c,className:"login-form",children:[f.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:d=>e(d.target.value),className:"form-input",required:!0}),f.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:d=>s(d.target.value),className:"form-input",required:!0}),f.jsx("button",{type:"submit",disabled:i,className:"login-button",children:i?"Loading...":"Sign In"})]}),f.jsx("button",{onClick:u,disabled:i,className:"signup-button",children:"Create Account"}),r&&f.jsx("div",{className:"login-error",children:r})]})})}class s0{static getCompletedPhases(e){let n=0;return e!=null&&e.scenes&&typeof e.scenes=="object"&&Object.keys(e.scenes).length>0&&n++,e!=null&&e.scenes&&this.hasGeneratedFrames(e)&&n++,n}static getPhaseProgress(e){const n=this.getCompletedPhases(e);let s=null;return n===0?s="script_interpretation":n===1?s="element_images":n===2?s="scene_generation":n===3?s="scene_videos":n===4&&(s="final_assembly"),{completed_phases:n,total_phases:5,current_phase:s}}static isPhaseCompleted(e,n){return this.getCompletedPhases(e)>=n}static canPhaseProceeed(e,n){return n===1?!0:n===2||n===3?this.isPhaseCompleted(e,1):n===4?this.isPhaseCompleted(e,3):n===5?this.isPhaseCompleted(e,4):!1}static hasGeneratedFrames(e){if(!e.scenes||typeof e.scenes!="object")return!1;const n=Object.keys(e.scenes);return n.length===0?!1:n.every(s=>{const i=e.scenes[s];return(i==null?void 0:i.scene_frame_prompt)&&(i==null?void 0:i.scene_start_frame)})}}const lp={scenes:{},elements:{},project_metadata:{title:"New Project",client:"Client Name",schema_version:"3.0",production_workflow:"animatic_to_video_scalable"}};async function i0(t){try{const{data:e}=await W.from("project_assets").select("asset_filename").eq("project_id",t),{error:n}=await W.from("projects").delete().eq("id",t);if(n)return console.error("Error deleting project:",n),!1;if(e&&e.length>0){const{data:s,error:i}=await W.storage.from("scene-images").list(`projects/${t}/scenes`);if(!i&&s&&s.length>0){const a=s.map(o=>`projects/${t}/scenes/${o.name}`),{error:r}=await W.storage.from("scene-images").remove(a);r?console.warn("Storage cleanup failed (non-critical):",r):console.log(`✅ Cleaned up ${a.length} storage files`)}try{await W.storage.from("scene-images").remove([`projects/${t}/scenes`,`projects/${t}`])}catch{console.log("Folder cleanup completed (or folders non-empty)")}}return!0}catch(e){return console.error("Error in deleteProject:",e),!1}}async function a0(t,e){try{const n={...lp,project_metadata:{...lp.project_metadata,title:t}},{data:s,error:i}=await W.from("projects").insert({name:t,user_id:e,status:"active",master_json:n,current_version:0}).select().single();if(i||!s)return console.error("Error creating project:",i),null;const{data:a,error:r}=await W.from("project_phases").select("*").eq("project_id",s.id).order("phase_index");return r||!a?(console.error("Error fetching phases:",r),{project:s,phases:[]}):{project:s,phases:a}}catch(n){return console.error("Error in createProject:",n),null}}async function r0(t){try{const{data:e,error:n}=await W.from("projects").select("master_json").eq("id",t).single();return n||!e?(console.error("Error fetching master JSON:",n),null):e.master_json}catch(e){return console.error("Error in getMasterJSON:",e),null}}async function Ko(t,e,n="Master JSON updated"){try{const{data:s,error:i}=await W.from("projects").select("current_version").eq("id",t).single();if(i||!s)return console.error("Error fetching project for version:",i),!1;const a=s.current_version+1,{error:r}=await W.from("projects").update({master_json:e,current_version:a,updated_at:new Date().toISOString()}).eq("id",t);return r?(console.error("Error updating master JSON:",r),!1):!0}catch(s){return console.error("Error in saveMasterJSONFromObject:",s),!1}}async function o0(t){try{const{data:e,error:n}=await W.from("project_versions").select("*").eq("project_id",t).order("version_number",{ascending:!1});return n||!e?(console.error("Error fetching project versions:",n),[]):e}catch(e){return console.error("Error in getProjectVersions:",e),[]}}async function l0(t,e){try{const{data:n,error:s}=await W.from("project_versions").select("*").eq("project_id",t).eq("version_number",e).single();return s||!n?(console.error("Error fetching project version:",s),null):n}catch(n){return console.error("Error in getProjectVersion:",n),null}}async function c0(t){try{const{data:e,error:n}=await W.from("projects").select(`
        id,
        name,
        status,
        created_at,
        master_json,
        project_phases(
          phase_index,
          status,
          phase_name,
          can_proceed,
          completed_at
        )
      `).eq("user_id",t).order("created_at",{ascending:!1});return n||!e?(console.error("Error fetching projects:",n),[]):e.map(s=>{const i=s0.getPhaseProgress(s.master_json);return{id:s.id,name:s.name,status:s.status,created_at:s.created_at,phase_progress:i}})}catch(e){return console.error("Error in getUserProjects:",e),[]}}async function Ku(t){try{const{data:e,error:n}=await W.from("projects").select("*").eq("id",t).single();return n||!e?(console.error("Error fetching project:",n),null):e}catch(e){return console.error("Error in getProject:",e),null}}async function Xu(t){try{const[e,n]=await Promise.all([W.from("project_phases").select("*").eq("project_id",t).order("phase_index",{ascending:!0}),W.from("projects").select("master_json").eq("id",t).single()]);if(e.error||!e.data)return console.error("Error fetching phases:",e.error),[];if(n.error||!n.data)return console.error("Error fetching project:",n.error),e.data.map(r=>({...r,can_proceed:r.phase_index===1}));const s=e.data,i=n.data.master_json;return s.map(r=>{let o=!1;return r.phase_index===1?o=!0:(r.phase_index===2||r.phase_index===3)&&(o=i&&i.scenes&&Object.keys(i.scenes).length>0),{...r,can_proceed:o}})}catch(e){return console.error("Error in getProjectPhases:",e),[]}}async function Ol(){var t;try{const{data:e,error:n}=await W.from("app_configuration").select("config_data").order("updated_at",{ascending:!1}).limit(1);return n?(console.error("Error loading app configuration:",n),{}):!e||e.length===0?(console.log("No app configuration found in database"),{}):((t=e[0])==null?void 0:t.config_data)||{}}catch(e){return console.error("Error loading app configuration:",e),{}}}async function u0(t){try{const{error:e}=await W.from("app_configuration").upsert({config_data:t,updated_at:new Date().toISOString()});if(e)throw e;return!0}catch(e){return console.error("Error saving app configuration:",e),!1}}const sj=Object.freeze(Object.defineProperty({__proto__:null,createProject:a0,deleteProject:i0,getAppConfiguration:Ol,getMasterJSON:r0,getProject:Ku,getProjectPhases:Xu,getProjectVersion:l0,getProjectVersions:o0,getUserProjects:c0,saveAppConfiguration:u0,saveMasterJSONFromObject:Ko},Symbol.toStringTag,{value:"Module"}));function ij({user:t}){const e=Sl(),[n,s]=w.useState([]),[i,a]=w.useState(!0),[r,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState(""),[h,m]=w.useState(null),[v,_]=w.useState(!1);w.useEffect(()=>{b()},[t]);const b=async()=>{if(!t)return;a(!0);const x=await c0(t.id);s(x),a(!1)},p=async()=>{await W.auth.signOut(),e("/login")},g=async()=>{if(!u.trim()||!t||l)return;c(!0),await a0(u.trim(),t.id)?(o(!1),d(""),await b()):alert("Error creating project. Please try again."),c(!1)},y=x=>{e(`/project/${x}`)},S=async x=>{if(!x||v)return;_(!0),await i0(x)?(m(null),await b()):alert("Error deleting project. Please try again."),_(!1)},T=x=>new Date(x).toLocaleDateString(),j=x=>{switch(x){case"active":return"#00cc00";case"completed":return"#0066cc";case"archived":return"#666";default:return"#ccc"}};return f.jsx("div",{className:"min-h-screen bg-primary p-2xl",children:f.jsxs("div",{className:"dashboard-container",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2xl",children:[f.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects"}),f.jsxs("div",{className:"flex gap-xl items-center",children:[f.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"New Project"}),f.jsx("button",{onClick:p,className:"btn btn-logout",children:"Logout"})]})]}),i?f.jsx("div",{className:"text-center text-secondary p-2xl",children:"Loading projects..."}):n.length===0?f.jsxs("div",{className:"bg-secondary p-4xl rounded-lg text-center",children:[f.jsx("h2",{className:"text-primary mb-xl",children:"No projects yet"}),f.jsx("p",{className:"text-secondary mb-2xl",children:"Create your first FLOW.STUDIO project to get started with AI-powered animatic generation"}),f.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"Create Your First Project"})]}):f.jsx("div",{className:"grid grid-auto-fit gap-2xl",children:n.map(x=>f.jsxs("div",{onClick:()=>y(x.id),className:"project-card cursor-pointer",children:[f.jsxs("div",{className:"flex justify-between items-start mb-xl",children:[f.jsx("h3",{className:"text-primary text-xl flex-1 mb-0",children:x.name}),f.jsxs("div",{className:"flex items-center gap-md",children:[f.jsx("button",{onClick:E=>{E.stopPropagation(),m(x.id)},className:"btn-delete",children:"🗑️"}),f.jsx("span",{className:"status-badge",style:{background:j(x.status)},children:x.status})]})]}),f.jsxs("div",{className:"project-progress",children:[f.jsxs("div",{className:"flex justify-between text-secondary text-sm mb-sm",children:[f.jsx("span",{children:"Progress"}),f.jsxs("span",{children:[x.phase_progress.completed_phases,"/5 phases"]})]}),f.jsx("div",{className:"progress-bar",children:f.jsx("div",{className:"progress-fill",style:{width:`${x.phase_progress.completed_phases/5*100}%`}})})]}),f.jsxs("div",{className:"project-info",children:[f.jsxs("span",{children:["Created ",T(x.created_at)]}),x.phase_progress.current_phase&&f.jsxs("span",{className:"current-phase",children:["Active: ",x.phase_progress.current_phase.replace("_"," ")]})]})]},x.id))}),r&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content modal-width-400",children:[f.jsx("h2",{className:"modal-header",children:"Create New Project"}),f.jsxs("div",{className:"mb-xl",children:[f.jsx("label",{className:"form-label",children:"Project Name"}),f.jsx("input",{type:"text",value:u,onChange:x=>d(x.target.value),placeholder:"e.g. UN CONSIGLIO STELLARE",className:"form-input",onKeyPress:x=>x.key==="Enter"&&g(),autoFocus:!0})]}),f.jsx("div",{className:"modal-info",children:f.jsx("p",{children:"This will create a new project with 5 phases: Script Interpretation, Element Images, Scene Generation, Scene Videos, and Final Assembly. Based on the Italian campaign template."})}),f.jsxs("div",{className:"modal-actions",children:[f.jsx("button",{onClick:()=>{o(!1),d("")},disabled:l,className:"btn btn-secondary",children:"Cancel"}),f.jsx("button",{onClick:g,disabled:!u.trim()||l,className:"btn btn-primary",children:l?"Creating...":"Create Project"})]})]})}),h&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content delete-modal modal-width-400",children:[f.jsx("h2",{className:"delete-header",children:"⚠️ Delete Project?"}),f.jsxs("div",{className:"delete-warning",children:[f.jsx("p",{children:"This will permanently delete:"}),f.jsxs("ul",{children:[f.jsx("li",{children:"All project data and phases"}),f.jsx("li",{children:"All generated content and versions"}),f.jsx("li",{children:"All n8n job history"})]}),f.jsx("p",{className:"warning-final",children:"This action cannot be undone!"})]}),f.jsxs("div",{className:"modal-actions",children:[f.jsx("button",{onClick:()=>m(null),disabled:v,className:"btn btn-secondary btn-padding-lg",children:"Cancel"}),f.jsx("button",{onClick:()=>S(h),disabled:v,className:"btn btn-danger btn-padding-lg",children:v?"🗑️ Deleting...":"🗑️ Delete Forever"})]})]})})]})})}const aj="/assets/goood_ideas_logo_600x600_white_trans-DU0S--7E.png",rj=[{timestamp:"07_26_2025_16_08",image_engine:"FLUX DEV",max_prompt_length:800,aspect_ratio:"16:9",model_endpoint:"fal-ai/flux/dev",base_url:"https://queue.fal.run",project_dest_folder:"UN CONSIGLIO STELLARE_07_26_2025_16_08",project_metadata:{title:"UN CONSIGLIO STELLARE",client:"Ministero della Salute",extraction_date:"2025-01-23",schema_version:"1.0",production_workflow:"animatic_to_video_scalable"},global_style:{color_palette:{primary:"Deep blue backgrounds (library, tech elements)",secondary:"Warm amber/golden lighting",accent:"Bright cyan/blue (holograms, tech effects)",character_tones:"Natural skin tones, blue uniforms"},rendering_style:{level:"simplified illustration transitioning to cinematic realism",line_work:"clean vector-style outlines",shading:"minimal, flat color zones with depth",detail_level:"stylized but scalable to photorealistic"},composition:{framing:"cinematic storyboard frames",depth:"clear foreground/background separation",camera_style:"traditional film language (wide/medium/close-up)",aspect_ratio:"16:9"},mood_style:{overall_mood:"educational, inspiring, warm",lighting_description:"soft, natural library lighting with holographic tech elements",atmosphere:"technological wonder, protective, educational",tone:"professional, accessible, reassuring"}},elements:{samantha:{element_type:"character",element_subtype:"primary",frequency:10,scenes_present:[1,2,3,5,6,7,8,9,10,12],base_description:"Samantha Cristoforetti, 47 years old, short brown hair, confident expression, blue ESA astronaut uniform with patches",consistency_rules:["Identical facial features and hair across all scenes","Blue ESA uniform must be consistent in color and design","Confident, authoritative expression maintained","Professional astronaut posture and demeanor"],variants_by_scene:{scene_1:{action:"standing confidently at entrance, welcoming gesture toward children",position:"foreground center, facing children group",expression:"warm, welcoming, confident",props_interaction:"none",dialogue_state:"introducing, setting context"},scene_2:{action:"pointing at space imagery, explaining with gestures",position:"beside display area, angled toward children",expression:"focused, educational, protective",props_interaction:"gesturing toward space_imagery_displays",dialogue_state:"teaching, explaining dangers"},scene_3:{action:"interacting with astronaut hologram, demonstrating",position:"at library table, engaging with hologram",expression:"knowledgeable, demonstrative",props_interaction:"activating/pointing to astronaut_hologram",dialogue_state:"demonstrating, showing equipment"},scene_5:{action:"guiding children along circular walkway",position:"leading group on circular balcony",expression:"engaging, storytelling",props_interaction:"gesturing toward earth_hologram",dialogue_state:"narrative continuation"},scene_6:{action:"explaining Earth hologram with pointing gestures",position:"beside Earth hologram, facing children",expression:"educational, protective",props_interaction:"demonstrating earth_hologram features",dialogue_state:"explaining Earth protection"},scene_7:{action:"determined guidance, reassuring children",position:"with children, facing hologram displays",expression:"determined, reassuring",props_interaction:"guiding attention to red indicators",dialogue_state:"responding to children's curiosity"},scene_8:{action:"explaining disease threats and protection",position:"pointing at Italy map with red indicators",expression:"serious, educational, protective",props_interaction:"demonstrating earth_hologram Italy focus",dialogue_state:"explaining vaccine protection"},scene_9:{action:"listening to children's questions",position:"attentive pose facing children",expression:"listening, thoughtful",props_interaction:"none",dialogue_state:"receiving children's questions"},scene_10:{action:"providing clear, simple explanation",position:"educational stance, addressing children",expression:"clear, reassuring, knowledgeable",props_interaction:"none",dialogue_state:"explaining vaccine analogy"},scene_12:{action:"direct camera address, final message",position:"facing camera, confident stance",expression:"reassuring, authoritative, trustworthy",props_interaction:"none",dialogue_state:"delivering final message"}}},children_group:{element_type:"character",element_subtype:"group",frequency:8,scenes_present:[1,2,4,5,7,9,11,12],base_description:"5 diverse children aged 6-7, small stature, mixed gender, curious expressions, casual school clothes",consistency_rules:["Same 5 children throughout (consistent faces and diversity)","Age range 6-7 maintained across all scenes","Casual school clothing consistent per child","Curious, engaged expressions as baseline"],variants_by_scene:{scene_1:{action:"grouped together, looking around with wonder",position:"clustered near entrance, facing library interior",expression:"wonder, anticipation, slight awe",props_interaction:"carrying children_backpacks",dialogue_state:"listening, absorbing introduction"},scene_2:{action:"attentively watching Samantha's explanation",position:"semicircle facing Samantha and displays",expression:"focused attention, learning engagement",props_interaction:"some still holding children_backpacks",dialogue_state:"engaged learning, processing information"},scene_4:{action:"watching space imagery with amazement",position:"gathered around viewing area",expression:"eyes full of wonder, amazed",props_interaction:"some with children_backpacks set aside",dialogue_state:"absorbing space content"},scene_5:{action:"following Samantha along circular walkway",position:"walking behind Samantha on balcony",expression:"increasingly fascinated",props_interaction:"carrying children_backpacks",dialogue_state:"engaged in Samantha's story"},scene_7:{action:"looking with curious but fearful expressions",position:"clustered together, observing displays",expression:"curious but slightly apprehensive",props_interaction:"holding children_backpacks closer",dialogue_state:"questioning, seeking understanding"},scene_9:{action:"asking questions, seeking more understanding",position:"engaged group facing Samantha",expression:"inquisitive, learning-focused",props_interaction:"children_backpacks at sides",dialogue_state:"actively questioning"},scene_11:{action:"appearing in final campaign message",position:"arranged with Samantha for group shot",expression:"confident, understanding achieved",props_interaction:"none",dialogue_state:"part of collective message"},scene_12:{action:"standing with Samantha in unity",position:"beside Samantha, showing solidarity",expression:"reassured, confident, protected",props_interaction:"none",dialogue_state:"united in health message"}}},circular_library:{element_type:"location",element_subtype:"primary",frequency:13,scenes_present:[1,2,3,4,5,6,7,8,9,10,11,12,13],base_description:"magnificent circular library with multiple levels, warm ambient lighting, wood and modern architectural elements, balcony overlooks",consistency_rules:["Circular architecture always prominent","Warm ambient lighting consistent throughout","Wood and modern elements balance maintained","Multi-level structure visible when relevant"],variants_by_scene:{scene_1:{view_angle:"wide establishing shot from entrance",focus_area:"full architectural magnificence, circular grandeur",lighting_state:"welcoming warm entrance lighting",architectural_details:"entrance perspective, full space visibility",camera_position:"entrance level, looking into main space"},scene_2:{view_angle:"medium shot focusing on display area",focus_area:"educational zone with space imagery capability",lighting_state:"focused lighting on display area",architectural_details:"space imagery integration, teaching zone",camera_position:"interior, focusing on interaction area"},scene_3:{view_angle:"close-up on library table area",focus_area:"table with holographic projection capability",lighting_state:"tech-enhanced lighting, hologram ambiance",architectural_details:"holographic technology integration",camera_position:"table level, intimate technology focus"},scene_4:{view_angle:"wide view showing space imagery displays",focus_area:"large projection area with space content",lighting_state:"dramatic lighting for space imagery",architectural_details:"technology integration, display capabilities",camera_position:"optimized for space content viewing"},scene_5:{view_angle:"circular walkway perspective",focus_area:"balcony overlooking central hologram area",lighting_state:"ambient walkway lighting",architectural_details:"circular balcony, multi-level architecture",camera_position:"balcony level, showing circulation"},scene_6:{view_angle:"central space focusing on Earth hologram",focus_area:"main floor with Earth hologram prominence",lighting_state:"hologram-enhanced lighting, blue glow",architectural_details:"central projection capabilities",camera_position:"central space, hologram-focused"},scene_7:{view_angle:"close view of group with hologram",focus_area:"intimate space around Earth display",lighting_state:"focused lighting on group and hologram",architectural_details:"technology integration seamless",camera_position:"close to group and display"},scene_8:{view_angle:"close-up on Italy hologram display",focus_area:"detailed Earth projection with Italy focus",lighting_state:"intense hologram lighting, red indicators",architectural_details:"advanced projection technology",camera_position:"optimal for Italy map detail"},scene_9:{view_angle:"medium shot of group interaction",focus_area:"conversation area within library",lighting_state:"warm conversational lighting",architectural_details:"library setting supporting dialogue",camera_position:"conversational distance"},scene_10:{view_angle:"close shot for explanation scene",focus_area:"intimate educational setting",lighting_state:"focused lighting on Samantha",architectural_details:"library background supporting explanation",camera_position:"close for clear explanation delivery"},scene_11:{view_angle:"neutral background for campaign message",focus_area:"clean background for text overlay",lighting_state:"even lighting for text readability",architectural_details:"minimal library elements visible",camera_position:"optimized for text and message"},scene_12:{view_angle:"group shot within library setting",focus_area:"Samantha and children in library environment",lighting_state:"warm, inclusive lighting",architectural_details:"library setting supporting unity message",camera_position:"group shot positioning"},scene_13:{view_angle:"neutral institutional background",focus_area:"clean background for institutional logo",lighting_state:"professional lighting for branding",architectural_details:"minimal, supporting institutional message",camera_position:"optimal for logo presentation"}}},space_imagery_displays:{element_type:"prop",element_subtype:"technological",frequency:2,scenes_present:[2,4],base_description:"educational space imagery and astronomical displays showing space operations, astronauts, and cosmic scenes",consistency_rules:["Educational content focus maintained","Professional space imagery quality","Integrated into library technology seamlessly","Blue-dominant color scheme for space content"],variants_by_scene:{scene_2:{state:"active, displaying space dangers and beauty",interaction_mode:"samantha pointing and explaining",visibility:"clearly visible, prominent in scene",technical_specs:"wall-mounted displays, clear resolution",position_relative:"background to teaching moment, supporting"},scene_4:{state:"showing astronauts and space operations",interaction_mode:"children_group watching with wonder",visibility:"prominent, central to scene",technical_specs:"large displays, detailed space content",position_relative:"focal point for children's amazement"}}},earth_hologram:{element_type:"prop",element_subtype:"holographic",frequency:4,scenes_present:[5,6,7,8],base_description:"realistic Earth hologram with glowing red indicator points concentrated on Italy, interactive and detailed",consistency_rules:["Realistic Earth appearance maintained","Red indicator points specifically on Italy","Holographic blue glow effect consistent","Interactive capability demonstrated"],variants_by_scene:{scene_5:{state:"approaching activation, becoming visible",interaction_mode:"children_group approaching with fascination",visibility:"emerging prominence, drawing attention",technical_specs:"holographic projection system activating",position_relative:"central space, becoming focal point"},scene_6:{state:"fully active, Italy focus clearly visible",interaction_mode:"samantha explaining and pointing",visibility:"primary focus, red points on Italy prominent",technical_specs:"full holographic detail, interactive capability",position_relative:"central display, primary educational tool"},scene_7:{state:"showing red indicators clearly",interaction_mode:"children_group observing with concern",visibility:"prominent, concerning indicators visible",technical_specs:"detailed Italia mapping with red points",position_relative:"central focus, generating questions"},scene_8:{state:"zoomed on Italy with disease indicators",interaction_mode:"samantha demonstrating threat points",visibility:"maximum detail, red points with emoji symbols",technical_specs:"close-up projection, detailed mapping",position_relative:"primary educational tool showing threats"}}},astronaut_hologram:{element_type:"prop",element_subtype:"holographic",frequency:1,scenes_present:[3],base_description:"full-body astronaut in complete spacesuit, holographic projection, realistic detail showing space protection equipment",consistency_rules:["Complete spacesuit with all details","Holographic blue glow effect","Realistic proportions and appearance"],variants_by_scene:{scene_3:{state:"fully active, demonstration mode",interaction_mode:"samantha demonstrating and explaining",visibility:"prominent, clear detail of spacesuit",technical_specs:"full holographic projection, interactive demonstration",position_relative:"library table, central demonstration focus"}}},children_backpacks:{element_type:"prop",element_subtype:"physical",frequency:7,scenes_present:[1,2,4,5,7,9,12],base_description:"casual school backpacks and books carried by children, age-appropriate school equipment",consistency_rules:["Age-appropriate school equipment","Casual, not uniform appearance","Proportional to children's size"],variants_by_scene:{scene_1:{state:"carried and held, arrival configuration",interaction_mode:"children_group naturally carrying",visibility:"clearly visible, establishing school context",technical_specs:"standard school backpacks and books",position_relative:"with children_group, natural school appearance"},scene_2:{state:"mixed - some set aside, some still carried",interaction_mode:"transitioning to learning mode",visibility:"partially visible, learning focus emerging",technical_specs:"standard school equipment",position_relative:"secondary to learning interaction"},scene_4:{state:"some set aside for better viewing",interaction_mode:"children_group focusing on displays",visibility:"partially visible, not distracting",technical_specs:"standard school equipment",position_relative:"secondary to space imagery focus"},scene_5:{state:"carried during walkway tour",interaction_mode:"children_group maintaining school context",visibility:"visible, maintaining student identity",technical_specs:"standard school backpacks",position_relative:"with children during movement"},scene_7:{state:"held closer due to apprehension",interaction_mode:"children_group seeking comfort",visibility:"more prominent due to emotional state",technical_specs:"standard school equipment",position_relative:"closer to children, comfort objects"},scene_9:{state:"set aside for focused conversation",interaction_mode:"children_group in learning dialogue",visibility:"minimally visible, not distracting",technical_specs:"standard school equipment",position_relative:"secondary to educational conversation"},scene_12:{state:"not present, formal message delivery",interaction_mode:"none",visibility:"not visible, clean final message",technical_specs:"not applicable",position_relative:"not present for formal conclusion"}}},warm_library_lighting:{element_type:"atmosphere",element_subtype:"lighting",frequency:13,scenes_present:[1,2,3,4,5,6,7,8,9,10,11,12,13],base_description:"soft, warm ambient lighting creating educational and welcoming atmosphere throughout library",consistency_rules:["Warm color temperature maintained","Soft, diffused quality consistent","Educational ambiance preserved"],variants_by_scene:{scene_1:{intensity:"welcoming, establishing mood",color_temperature:"warm amber, inviting",mood_contribution:"wonder and anticipation",effect_type:"ambient, architectural enhancement",coverage_area:"full library space, entrance emphasis"},scene_2:{intensity:"focused on educational interaction",color_temperature:"warm amber with display enhancement",mood_contribution:"educational, protective",effect_type:"focused ambient with display lighting",coverage_area:"display area emphasis"},scene_3:{intensity:"enhanced for technology demonstration",color_temperature:"warm amber with holographic blue accents",mood_contribution:"technological wonder",effect_type:"ambient with tech enhancement",coverage_area:"table area, hologram enhancement"},scene_4:{intensity:"dramatic for space imagery",color_temperature:"warm with cooler space display lighting",mood_contribution:"wonder and amazement",effect_type:"ambient with display enhancement",coverage_area:"space imagery viewing area"},scene_5:{intensity:"gentle walkway lighting",color_temperature:"warm amber, circulation-friendly",mood_contribution:"engaging narrative flow",effect_type:"ambient circulation lighting",coverage_area:"circular walkway and central space"},scene_6:{intensity:"enhanced for Earth hologram",color_temperature:"warm amber with blue holographic accents",mood_contribution:"educational wonder",effect_type:"ambient with hologram enhancement",coverage_area:"central space, Earth hologram focus"},scene_7:{intensity:"focused on group and hologram",color_temperature:"warm amber with concern undertones",mood_contribution:"curious apprehension",effect_type:"focused ambient with hologram",coverage_area:"group area with Earth display"},scene_8:{intensity:"enhanced for detailed mapping",color_temperature:"warm amber with red indicator accents",mood_contribution:"serious educational concern",effect_type:"ambient with detailed projection lighting",coverage_area:"Italy mapping detail area"},scene_9:{intensity:"conversational, supportive",color_temperature:"warm amber, encouraging",mood_contribution:"supportive learning dialogue",effect_type:"ambient conversational lighting",coverage_area:"conversation area"},scene_10:{intensity:"focused on explanation delivery",color_temperature:"warm amber, clear and reassuring",mood_contribution:"clarity and reassurance",effect_type:"focused ambient for explanation",coverage_area:"Samantha-focused with background"},scene_11:{intensity:"even for text presentation",color_temperature:"neutral warm for text readability",mood_contribution:"professional campaign message",effect_type:"even ambient for text overlay",coverage_area:"full frame for text presentation"},scene_12:{intensity:"warm, inclusive for group message",color_temperature:"warm amber, unifying",mood_contribution:"unity and reassurance",effect_type:"ambient group lighting",coverage_area:"group area for final message"},scene_13:{intensity:"professional for institutional branding",color_temperature:"neutral professional",mood_contribution:"official, trustworthy",effect_type:"professional institutional lighting",coverage_area:"institutional logo presentation"}}}},scenes:{scene_1:{scene_id:1,duration:"3 seconds",camera_type:"wide establishing shot",mood:"wonder and anticipation",natural_description:"The spot opens in a magnificent circular environment: it's the hall of the great library of the Monte Porzio Catone Astronomical Observatory. We immediately notice a group of children with a very special guide...",dialogue:"LO SPAZIO È UN LUOGO INOSPITALE E PERICOLOSO...",action_summary:"Introduction of the setting and characters",elements_present:["samantha","children_group","circular_library","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"children_group",interaction_type:"welcoming_introduction",description:"Samantha welcomes children to library space"},{primary_element:"children_group",secondary_element:"circular_library",interaction_type:"discovery_wonder",description:"Children discovering magnificent library architecture"},{primary_element:"warm_library_lighting",secondary_element:"circular_library",interaction_type:"atmosphere_enhancement",description:"Lighting enhances architectural grandeur"}],primary_focus:"establishing magnificent circular library architecture with character introduction",lighting_approach:"warm welcoming library lighting, architectural grandeur emphasis",composition_approach:"wide shot showing full space, character positioning for introduction"},scene_2:{scene_id:2,duration:"3 seconds",camera_type:"medium shot",mood:"educational, protective",natural_description:"Samantha, in the company of some small guests, shows them the beauty of space while explaining at the same time that it is a dangerous environment: it must be faced with the right protections.",dialogue:"MA C'È LA SCIENZA CHE PENSA A NOI.",action_summary:"Samantha explains space dangers and protection needs",elements_present:["samantha","children_group","circular_library","space_imagery_displays","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"space_imagery_displays",interaction_type:"educational_demonstration",description:"Samantha pointing to and explaining space imagery"},{primary_element:"children_group",secondary_element:"space_imagery_displays",interaction_type:"focused_observation",description:"Children attentively watching space imagery"},{primary_element:"samantha",secondary_element:"children_group",interaction_type:"teaching_protection",description:"Samantha educating children about space dangers"}],primary_focus:"Samantha teaching children about space dangers using imagery displays",lighting_approach:"focused lighting on display area, educational ambiance",composition_approach:"medium shot emphasizing teaching interaction and space displays"},scene_3:{scene_id:3,duration:"1.5 seconds",camera_type:"close-up on hologram interaction",mood:"technological wonder",natural_description:"Samantha interacts with the hologram of an astronaut, in his typical suit, which she knows very well.",dialogue:"VEDETE LE NOSTRE TUTE?",action_summary:"Holographic demonstration of space protection equipment",elements_present:["samantha","circular_library","astronaut_hologram","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"astronaut_hologram",interaction_type:"technology_demonstration",description:"Samantha demonstrating and explaining holographic astronaut equipment"},{primary_element:"astronaut_hologram",secondary_element:"circular_library",interaction_type:"technology_integration",description:"Hologram seamlessly integrated into library environment"}],primary_focus:"close-up interaction between Samantha and astronaut hologram demonstration",lighting_approach:"tech-enhanced lighting, hologram blue glow effects",composition_approach:"close-up framing, technological demonstration focus",special_notes:"children not present in this scene, focus on technology demonstration"},scene_4:{scene_id:4,duration:"2 seconds",camera_type:"wide shot",mood:"wonder and amazement",natural_description:"Children look at space images with eyes full of wonder: astronauts and space operations follow one another. At the same time on the large table in the library we see a projection of an astronaut on a mission.",dialogue:"CI TENGONO AL SICURO.",action_summary:"Children amazed by space imagery and astronaut projections",elements_present:["children_group","circular_library","space_imagery_displays","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"space_imagery_displays",interaction_type:"wonder_observation",description:"Children watching space operations with amazement"},{primary_element:"space_imagery_displays",secondary_element:"circular_library",interaction_type:"content_integration",description:"Space imagery seamlessly integrated into library environment"}],primary_focus:"children's wonder at space imagery and astronaut operations",lighting_approach:"dramatic lighting for space imagery, wonder enhancement",composition_approach:"wide shot capturing children's amazement and space content"},scene_5:{scene_id:5,duration:"2 seconds",camera_type:"medium shot",mood:"engaging narrative flow",natural_description:"Children follow Samantha's story with increasing fascination. Walking along the circular walkway, they arrive very close to the large hologram of Earth in the central space...",dialogue:"LA SCIENZA...",action_summary:"Children following Samantha's narrative along circular walkway",elements_present:["samantha","children_group","circular_library","earth_hologram","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"samantha",interaction_type:"narrative_following",description:"Children increasingly fascinated by Samantha's story"},{primary_element:"children_group",secondary_element:"earth_hologram",interaction_type:"approaching_discovery",description:"Children approaching large Earth hologram with fascination"},{primary_element:"samantha",secondary_element:"earth_hologram",interaction_type:"narrative_guidance",description:"Samantha guiding attention toward Earth hologram"}],primary_focus:"narrative progression as group approaches Earth hologram",lighting_approach:"gentle walkway lighting, Earth hologram becoming prominent",composition_approach:"medium shot showing movement and hologram approach"},scene_6:{scene_id:6,duration:"3 seconds",camera_type:"close-up on Earth hologram",mood:"educational majesty",natural_description:"...It's majestic. While Samantha continues her explanation, we see red dots particularly dense on our nation.",dialogue:"...CI PROTEGGE ANCHE QUI SULLA TERRA.",action_summary:"Earth hologram reveals red indicators concentrated on Italy",elements_present:["samantha","circular_library","earth_hologram","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"earth_hologram",interaction_type:"explanation_demonstration",description:"Samantha explaining Earth protection while pointing to hologram"},{primary_element:"earth_hologram",secondary_element:"circular_library",interaction_type:"focal_display",description:"Earth hologram as central educational focus"}],primary_focus:"majestic Earth hologram with red indicators on Italy",lighting_approach:"hologram-enhanced lighting, blue glow with red indicators",composition_approach:"close-up framing emphasizing Earth detail and Italy focus"},scene_7:{scene_id:7,duration:"1.5 seconds",camera_type:"medium shot",mood:"curious apprehension",natural_description:"Children look with curious but fearful air: what is it about? Samantha, determined, accompanies them to discover it...",dialogue:"- (bambino) DA COSA, SAMANTHA?",action_summary:"Children showing concern while Samantha prepares to explain",elements_present:["samantha","children_group","circular_library","earth_hologram","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"earth_hologram",interaction_type:"concerned_observation",description:"Children observing red indicators with curiosity and apprehension"},{primary_element:"samantha",secondary_element:"children_group",interaction_type:"reassuring_guidance",description:"Samantha providing determined, reassuring guidance"}],primary_focus:"children's concerned curiosity and Samantha's reassuring presence",lighting_approach:"focused lighting on group with hologram, concern undertones",composition_approach:"medium shot capturing emotional interaction and hologram context"},scene_8:{scene_id:8,duration:"4 seconds",camera_type:"close-up on Italy mapping",mood:"serious educational concern",natural_description:"The camera quickly approaches Europe, we recognize Italy. The camera gets even closer and we see some red dots flashing on the territory of our country. Inside we see a sort of emoji representing a sick person.",dialogue:"DA MALATTIE PERICOLOSE, COME IL MORBILLO. CI PROTEGGE GRAZIE AI VACCINI.",action_summary:"Detailed view of Italy showing disease threat indicators",elements_present:["samantha","circular_library","earth_hologram","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"earth_hologram",interaction_type:"threat_explanation",description:"Samantha explaining disease threats shown on Italy mapping"},{primary_element:"earth_hologram",secondary_element:"circular_library",interaction_type:"detailed_mapping",description:"Earth hologram showing detailed Italy mapping with threat indicators"}],primary_focus:"detailed Italy mapping with red indicators showing disease threats",lighting_approach:"enhanced lighting for detailed mapping with red indicator accents",composition_approach:"close-up framing for maximum Italy detail and threat visualization"},scene_9:{scene_id:9,duration:"2 seconds",camera_type:"medium shot",mood:"inquisitive learning",natural_description:"The small visitors try to understand more, making use of what has already been explained by their guide.",dialogue:"- (bambino) COME LA TUA TUTA DA ASTRONAUTA?",action_summary:"Children asking questions to understand vaccine protection analogy",elements_present:["samantha","children_group","circular_library","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"samantha",interaction_type:"inquisitive_questioning",description:"Children asking questions to understand protection analogy"},{primary_element:"samantha",secondary_element:"children_group",interaction_type:"receptive_listening",description:"Samantha listening attentively to children's questions"}],primary_focus:"children's learning process and question formation",lighting_approach:"supportive conversational lighting, encouraging dialogue",composition_approach:"medium shot capturing interactive learning dialogue"},scene_10:{scene_id:10,duration:"2 seconds",camera_type:"close-up on Samantha",mood:"clear explanation",natural_description:"... Samantha, once again, manages to explain in a simple and clear way what science makes available to us.",dialogue:"ESATTO, COME LA MIA TUTA.",action_summary:"Samantha providing clear vaccine analogy explanation",elements_present:["samantha","circular_library","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"circular_library",interaction_type:"clear_explanation",description:"Samantha delivering clear, simple explanation in library setting"}],primary_focus:"Samantha's clear and reassuring explanation delivery",lighting_approach:"focused lighting on Samantha for clear explanation delivery",composition_approach:"close-up framing emphasizing explanation clarity and reassurance"},scene_11:{scene_id:11,duration:"2 seconds",camera_type:"full screen text overlay",mood:"campaign message",natural_description:"Sign: Let's team up for our health #ivaccinifunzionano",dialogue:"",action_summary:"Campaign message presentation with hashtag",elements_present:["children_group","circular_library","warm_library_lighting"],element_interactions:[],primary_focus:"campaign message and hashtag presentation",lighting_approach:"even lighting for optimal text readability",composition_approach:"full screen text overlay with clean background"},scene_12:{scene_id:12,duration:"2 seconds",camera_type:"medium shot group",mood:"unity and reassurance",natural_description:"Samantha looks towards the camera, reassuring, to give us her message:",dialogue:"I VACCINI FUNZIONANO.",action_summary:"Final message delivery with group unity",elements_present:["samantha","children_group","circular_library","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"children_group",interaction_type:"unified_message",description:"Samantha and children presenting unified health message"},{primary_element:"samantha",secondary_element:"circular_library",interaction_type:"authoritative_delivery",description:"Samantha delivering authoritative message in educational setting"}],primary_focus:"unified final message with Samantha's authoritative reassurance",lighting_approach:"warm, inclusive lighting for group unity message",composition_approach:"medium group shot emphasizing unity and final message delivery"},scene_13:{scene_id:13,duration:"2 seconds",camera_type:"full screen institutional",mood:"official institutional",natural_description:"Institutional sign",dialogue:"INFO SU SALUTE.GOV.IT",action_summary:"Institutional branding and information presentation",elements_present:["circular_library","warm_library_lighting"],element_interactions:[],primary_focus:"Ministero della Salute institutional branding",lighting_approach:"professional institutional lighting for branding",composition_approach:"full screen institutional logo and information presentation"}}}];async function oj(t="Script_STELLARE+storyboard 0611_B.pdf",e="New Project"){await new Promise(n=>setTimeout(n,1e3));try{return{masterJSON:lj(rj,e,t),success:!0}}catch(n){return console.error("Error processing reference script:",n),{masterJSON:{},success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}function lj(t,e,n){var i,a;const s=Array.isArray(t)?t[0]:t;return{scenes:s.scenes||{},elements:s.elements||{},global_style:s.global_style||{color_palette:{primary:"Deep blue backgrounds",secondary:"Warm amber lighting",character_tones:"Natural skin tones"},rendering_style:{level:"simplified illustration transitioning to cinematic realism",line_work:"clean vector-style outlines",detail_level:"stylized but scalable to photorealistic"}},project_metadata:{title:((i=s.project_metadata)==null?void 0:i.title)||e,client:((a=s.project_metadata)==null?void 0:a.client)||"Client Name",schema_version:"3.0",production_workflow:"animatic_to_video_scalable",source_pdf:n,extraction_date:new Date().toISOString().split("T")[0],extraction_method:"reference_data_simulation"}}}function cj(){return["🔄 Analyzing PDF structure...","🤖 Extracting scenes with AI...","🎭 Identifying characters and elements...","🎨 Processing style guidelines...","✅ Script extraction complete!"]}function uj(){const[t,e]=w.useState({isVisible:!1,content:null}),n=w.useCallback(o=>{e({isVisible:!0,content:o})},[]),s=w.useCallback(o=>{e(l=>({...l,content:l.content?{...l.content,...o}:null}))},[]),i=w.useCallback(()=>{e({isVisible:!1,content:null})},[]),a=w.useCallback((o,l)=>{n({title:"🤖 Generating Prompts",message:`Processing ${l} scenes with ${o.toUpperCase()}...`,details:["Single batch call for efficiency","Cross-scene consistency optimization","Variable injection processing"],type:"loading"})},[n]),r=w.useCallback((o,l,c)=>{const u=l>0?Math.round(o/l*100):0;s({progress:{current:o,total:l,percentage:u,currentItem:c}})},[s]);return{modalState:t,showModal:n,updateModal:s,hideModal:i,showLLMLoading:a,updateLLMProgress:r}}let d0=null;const dj=t=>{d0=t},cs=()=>d0;function hj({phase:t,projectId:e,projectName:n,onContentChange:s,jsonContent:i,hasUnsavedChanges:a,isSaving:r,error:o,databaseStatus:l,showVersionHistory:c,versionHistory:u,loadingVersions:d,onJsonChange:h,onSavePhase:m,onLoadPhaseContent:v,onLoadVersionHistory:_,onLoadVersionContent:b,onShowVersionHistory:p}){const[g,y]=w.useState(!1),[S,T]=w.useState(!1),[j,x]=w.useState(0);w.useEffect(()=>{v(t.id)},[t.id,v]);const E=async(A=!1)=>{if(l.version>0&&!A){y(!0);return}T(!0),y(!1),x(0);const C=cs(),N=cj();try{C==null||C.showModal({title:"🔄 Processing PDF",content:N[0],type:"loading"});for(let P=0;P<N.length-1;P++)await new Promise(V=>setTimeout(V,200)),x(P+1),C==null||C.showModal({title:"🔄 Processing PDF",content:N[P+1],type:"loading"});const U=await oj("Script_STELLARE+storyboard 0611_B.pdf",n);if(U.success){const P=l.version===0;if(P){const{saveMasterJSONFromObject:V}=await hn(async()=>{const{saveMasterJSONFromObject:R}=await Promise.resolve().then(()=>sj);return{saveMasterJSONFromObject:R}},void 0);await V(e,U.masterJSON,"First revision auto-created from PDF processing")&&(s(),console.log("Auto-save successful - first revision created and UI updated"))}else{const V=JSON.stringify(U.masterJSON,null,2);h(V)}C==null||C.showModal({title:"✅ PDF Processed Successfully",content:P?"Script extracted and first revision created! Timeline is now ready.":"Script has been extracted and is ready for editing in the timeline.",type:"success"})}else throw new Error(U.error||"PDF processing failed")}catch(U){const P=U instanceof Error?U.message:"Unknown error occurred";console.error("PDF processing error:",U);const V=cs();V==null||V.showModal({title:"❌ PDF Processing Failed",content:`Error: ${P}`,type:"error"})}finally{T(!1),x(0)}};return f.jsxs("div",{children:[f.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem",margin:0,marginBottom:"0.5rem"},children:"Upload your document to generate script mapping"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("button",{disabled:!0,className:"btn btn-secondary text-sm",style:{opacity:.5},children:"Select File"}),f.jsx("span",{style:{color:"#cccccc",fontSize:"0.875rem"},children:"Script_STELLARE+storyboard 0611_B.pdf"}),f.jsx("button",{onClick:()=>E(),disabled:S,className:`btn text-sm ${S?"btn-secondary":"btn-primary"}`,children:S?"Processing...":"Map Script"})]}),g&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content modal-width-500",children:[f.jsx("h2",{className:"text-primary text-2xl mb-xl flex items-center gap-md mb-0",children:"⚠️ Regenerate Content?"}),f.jsxs("div",{className:"bg-accent border border-light p-xl rounded-md mb-2xl",children:[f.jsxs("p",{className:"text-secondary mb-md mb-0",children:["You already have content saved (Version ",l.version,"). Regenerating will create new content that you'll need to save as a new version."]}),f.jsx("p",{className:"text-sm version-warning-text mb-0",children:"Current content will be preserved until you save the new version."})]}),f.jsx("div",{className:"db-status db-status-success mb-2xl",children:f.jsx("p",{className:"text-sm mb-0",children:"✨ This will preserve version history and allow you to compare results."})}),f.jsxs("div",{className:"flex gap-xl justify-end",children:[f.jsx("button",{onClick:()=>y(!1),className:"btn btn-secondary",children:"Cancel"}),f.jsx("button",{onClick:()=>E(!0),className:"btn script-regenerate-button",children:"Regenerate Script"})]})]})}),c&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content flex flex-col modal-version-history",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2xl",children:[f.jsx("h2",{className:"text-primary text-2xl mb-0",children:"📋 Version History"}),f.jsx("button",{onClick:()=>p(!1),className:"bg-transparent text-secondary border-none text-2xl cursor-pointer",children:"×"})]}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:d?f.jsx("div",{className:"text-center text-secondary p-2xl",children:"Loading versions..."}):u.length===0?f.jsx("div",{className:"text-center text-secondary p-2xl",children:"No version history available"}):f.jsx("div",{className:"flex flex-col gap-md",children:u.map(A=>f.jsxs("div",{className:`version-item ${A.version_number===l.version?"current":""}`,onClick:()=>b(A.version_number),children:[f.jsxs("div",{className:"version-header",children:[f.jsxs("span",{className:"version-title",children:["Version ",A.version_number,A.version_number===l.version&&f.jsx("span",{className:"version-current-badge",children:"(Current)"})]}),f.jsx("span",{className:"version-date",children:new Date(A.created_at).toLocaleString()})]}),f.jsx("div",{className:"version-description",children:A.change_description||"No description"})]},A.id))})}),f.jsx("div",{className:"version-tip",children:"💡 Click any version to load it into the editor. Remember to save after loading different content."})]})})]})}class Ir{static processTemplate(e,n){if(!e||typeof e!="string")return e;const s=/\{\{\$json\.([^}]+)\}\}/g;return e.replace(s,(i,a)=>{const r=this.getValueFromPath(a,n);return r!==void 0?String(r):i})}static getValueFromPath(e,n){const{masterJSON:s,sceneId:i,currentScene:a}=n;if(e==="scene_id"&&i)return i;if(a&&this.isSceneProperty(e)){const r=this.getNestedValue(a,e);if(r!==void 0)return r}if(this.isGlobalProperty(e))return this.getNestedValue(s,e);if(e.startsWith("project_metadata."))return this.getNestedValue(s,e);if(this.isTechnicalSpec(e)){const r=a?this.getNestedValue(a,e):void 0;if(r!==void 0)return r;const o=this.getNestedValue(s,`extraction_metadata.${e}`);return o!==void 0?o:this.getNestedValue(s,e)}return this.getNestedValue(s,e)}static isSceneProperty(e){return["action_summary","natural_description","locations_text","characters_text","props_text","actions_text","interactions_text","camera_type","composition_approach","overall_mood","color_primary","color_secondary","line_work","shading","framing","duration","mood","depth"].some(s=>e===s||e.includes(s))}static isTechnicalSpec(e){return["image_engine","max_prompt_length","aspect_ratio","base_url","model_endpoint","project_dest_folder"].includes(e)}static isGlobalProperty(e){return["global_style","elements","scenes"].some(s=>e.startsWith(s))}static getNestedValue(e,n){if(!(!e||!n))return n.split(".").reduce((s,i)=>s&&s[i]!==void 0?s[i]:void 0,e)}static getAvailableVariables(e){const{masterJSON:n,sceneId:s,currentScene:i}=e,a={};return n!=null&&n.project_metadata&&Object.keys(n.project_metadata).forEach(r=>{a[`project_metadata.${r}`]=n.project_metadata[r]}),s&&(a.scene_id=s),i&&Object.keys(i).forEach(r=>{a[r]=i[r]}),n!=null&&n.global_style&&Object.keys(n.global_style).forEach(r=>{a[`global_style.${r}`]=n.global_style[r]}),a}static validateTemplate(e,n){const s=/\{\{\$json\.([^}]+)\}\}/g,i=[];let a;for(;(a=s.exec(e))!==null;){const r=a[1];this.getValueFromPath(r,n)===void 0&&i.push(r)}return{isValid:i.length===0,missingVariables:i}}}class Fr{static formatForLLM(e){return!e||typeof e!="string"?e:e.replace(/\\n\\n/g,`

`).replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\t/g,"	").trim()}static formatForEditor(e){return!e||typeof e!="string"?e:e.replace(/\n\n/g,"\\n\\n").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/\t/g,"\\t")}static getProcessedConfig(e){if(!e)return e;const n={...e};if(n.start_frame_prompt_generation){const s=n.start_frame_prompt_generation;s.system_prompt&&(s.system_prompt=this.formatForLLM(s.system_prompt)),s.user_prompt&&(s.user_prompt=this.formatForLLM(s.user_prompt))}return n}static validatePromptFormat(e){const n=[];if(!e||typeof e!="string")return n.push("Prompt is empty or not a string"),{isValid:!1,issues:n};const s=e.includes("\\n"),i=e.includes(`
`)&&!e.includes("\\n");s&&i&&n.push("Mixed newline formatting detected (both \\n and actual newlines)");const r=e.split(/\n|\\n/).filter(o=>o.length>200);return r.length>0&&n.push(`${r.length} lines are very long (>200 chars) and might need formatting`),{isValid:n.length===0,issues:n}}}class cp{static transformSceneForPrompt(e,n,s){var d,h,m,v,_,b,p,g;const i=e.startsWith("scene_")?e:`scene_${e}`,a=(d=n.scenes)==null?void 0:d[i];if(!a)throw new Error(`Scene ${i} not found in master JSON`);const r=n.global_style||{},o=n.elements||{},l=n.project_metadata||{},c=a.elements_present||[];return{...this.extractTechnicalSpecs(s,l),scene_id:parseInt(e.replace("scene_","")),natural_description:a.natural_description||"",action_summary:a.action_summary||"",locations_text:this.buildLocationText(c,o,i),characters_text:this.buildCharacterText(c,o,i),props_text:this.buildPropsText(c,o,i),actions_text:this.buildActionsText(c,o,i),interactions_text:this.buildInteractionsText(a.element_interactions||[]),camera_type:a.camera_type||"",composition_approach:a.composition_approach||a.lighting_approach||"",color_primary:((h=r.color_palette)==null?void 0:h.primary)||"",color_secondary:((m=r.color_palette)==null?void 0:m.secondary)||"",line_work:((v=r.rendering_style)==null?void 0:v.line_work)||"",shading:((_=r.rendering_style)==null?void 0:_.shading)||"",framing:((b=r.composition)==null?void 0:b.framing)||"",depth:((p=r.composition)==null?void 0:p.depth)||"",overall_mood:((g=r.mood_style)==null?void 0:g.overall_mood)||a.mood||""}}static extractTechnicalSpecs(e,n){const s=new Date().toISOString().slice(0,19).replace(/[-:]/g,"_").replace("T","_");return{image_engine:(e==null?void 0:e.image_engine)||"FLUX DEV",base_url:(e==null?void 0:e.base_url)||"https://queue.fal.run",model_endpoint:(e==null?void 0:e.model_endpoint)||"fal-ai/flux/dev",project_dest_folder:(e==null?void 0:e.project_dest_folder)||`${n.title||"PROJECT"}_${s}`,max_prompt_length:(e==null?void 0:e.max_prompt_length)||800,aspect_ratio:(e==null?void 0:e.aspect_ratio)||"16:9"}}static buildLocationText(e,n,s){return e.filter(a=>{var r;return((r=n[a])==null?void 0:r.element_type)==="location"}).map(a=>{var d;const r=n[a],o=r.base_description||"",l=r.consistency_rules||[],c=(d=r.variants_by_scene)==null?void 0:d[s];let u=o;if(l.length>0&&(u+=`
Consistency Rules: ${l.join("; ")}`),c){const h=[c.view_angle,c.focus_area,c.lighting_state,c.architectural_details].filter(Boolean).join(", ");h&&(u+=`
Scene Context: ${h}`)}return u}).join(`

`)}static buildCharacterText(e,n,s){return e.filter(a=>{var r;return((r=n[a])==null?void 0:r.element_type)==="character"}).map(a=>{var d;const r=n[a],o=r.base_description||"",l=r.consistency_rules||[],c=(d=r.variants_by_scene)==null?void 0:d[s];let u=o;if(l.length>0&&(u+=`
Consistency Rules: ${l.join("; ")}`),c){const h=[c.action,c.position,c.expression].filter(Boolean).join(", ");h&&(u+=`
Scene Behavior: ${h}`)}return u}).join(`

`)}static buildPropsText(e,n,s){return e.filter(a=>{var r;return((r=n[a])==null?void 0:r.element_type)==="prop"}).map(a=>{var d;const r=n[a],o=r.base_description||"",l=r.consistency_rules||[],c=(d=r.variants_by_scene)==null?void 0:d[s];let u=o;if(l.length>0&&(u+=`
Consistency Rules: ${l.join("; ")}`),c){const h=[c.state,c.interaction_mode,c.visibility].filter(Boolean).join(", ");h&&(u+=`
Scene State: ${h}`)}return u}).join(`

`)}static buildActionsText(e,n,s){return e.map(i=>{var l;const a=n[i],r=(l=a.variants_by_scene)==null?void 0:l[s];if(!r)return`${i}: positioned at in scene`;let o=`${i}:`;return a.element_type==="character"?(o+=` ${r.action||"present"} at ${r.position||"in scene"}`,r.props_interaction&&(o+=`
Interacting with: ${r.props_interaction}`)):a.element_type==="location"?o+=` positioned at ${r.camera_position||"in scene"}`:a.element_type==="prop"?o+=` positioned at ${r.position_relative||"in scene"}`:o+=" positioned at in scene",o}).join(`

`)}static buildInteractionsText(e){return e.map(n=>n.description||`${n.primary_element} ${n.interaction_type} ${n.secondary_element}`).join(`
`)}}class h0{}class fj extends h0{constructor(){super(...arguments),this.name="openai"}async generatePrompt(e,n,s){var i,a,r,o;try{const{OpenAI:l}=await hn(async()=>{const{OpenAI:h}=await import("./index-DE0nlkNR.js");return{OpenAI:h}},[]),u=await new l({apiKey:"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",dangerouslyAllowBrowser:!0}).chat.completions.create({model:(s==null?void 0:s.model)||"gpt-4-turbo",messages:[{role:"system",content:e},{role:"user",content:n}],max_tokens:(s==null?void 0:s.max_tokens)||1e3,temperature:(s==null?void 0:s.temperature)||.7}),d=(a=(i=u.choices[0])==null?void 0:i.message)==null?void 0:a.content;if(!d)throw new Error("No content received from OpenAI");return{success:!0,content:d,usage:{promptTokens:((r=u.usage)==null?void 0:r.prompt_tokens)||0,completionTokens:((o=u.usage)==null?void 0:o.completion_tokens)||0},provider:"openai"}}catch(l){return{success:!1,content:"",error:`OpenAI Error: ${l.message}`,provider:"openai"}}}}class mj extends h0{constructor(){super(...arguments),this.name="claude"}async generatePrompt(e,n,s){try{const{Anthropic:i}=await hn(async()=>{const{Anthropic:l}=await import("./index-CauCVHbN.js");return{Anthropic:l}},[]),r=await new i({apiKey:"your_anthropic_api_key_here",dangerouslyAllowBrowser:!0}).messages.create({model:(s==null?void 0:s.model)||"claude-3-sonnet-20240229",max_tokens:(s==null?void 0:s.max_tokens)||1e3,temperature:(s==null?void 0:s.temperature)||.7,system:e,messages:[{role:"user",content:n}]}),o=r.content[0];if(!o||o.type!=="text")throw new Error("No text content received from Claude");return{success:!0,content:o.text,usage:{promptTokens:r.usage.input_tokens,completionTokens:r.usage.output_tokens},provider:"claude"}}catch(i){return{success:!1,content:"",error:`Claude Error: ${i.message}`,provider:"claude"}}}}const rf=class rf{static getProvider(e="openai"){const n=this.providers.get(e);if(!n)throw new Error(`Unknown LLM provider: ${e}`);return n}static getAvailableProviders(){return Array.from(this.providers.keys())}static async testProvider(e){try{return(await this.getProvider(e).generatePrompt("You are a test assistant.",'Say "test successful" in JSON format: {"status": "success"}',{model:e==="openai"?"gpt-3.5-turbo":"claude-3-haiku-20240307",max_tokens:50,temperature:0})).success}catch(n){return console.error(`Provider ${e} test failed:`,n),!1}}};rf.providers=new Map([["openai",new fj],["claude",new mj]]);let si=rf;class Qu{constructor(){this.config=null,this.defaultProvider="openai"}async initialize(){var e,n,s,i,a;try{if(this.config=await Ol(),console.log("🔍 LLM Service Debug - Raw config loaded:",{configExists:!!this.config,configKeys:Object.keys(this.config||{}),hasStartFrame:!!((e=this.config)!=null&&e.start_frame_prompt_generation),fullStartFrameConfig:(n=this.config)==null?void 0:n.start_frame_prompt_generation}),!((s=this.config)!=null&&s.start_frame_prompt_generation))throw new Error("LLM configuration not found - please configure prompts in Config tab");console.log("✅ LLM Service initialized with config:",{hasSystemPrompt:!!this.config.start_frame_prompt_generation.system_prompt,hasUserPrompt:!!this.config.start_frame_prompt_generation.user_prompt,systemPromptLength:((i=this.config.start_frame_prompt_generation.system_prompt)==null?void 0:i.length)||0,userPromptLength:((a=this.config.start_frame_prompt_generation.user_prompt)==null?void 0:a.length)||0,defaultProvider:this.defaultProvider})}catch(r){throw console.error("LLM Service initialization failed:",r),r}}async generateSceneImagePrompt(e,n,s={}){var i,a,r,o,l,c;try{this.config||await this.initialize();const u=s.provider||this.defaultProvider;console.log(`Generating prompt for ${e} using ${u}...`);const d=cp.transformSceneForPrompt(e,n,s.extractionMetadata),h=this.config.start_frame_prompt_generation.system_prompt,m=this.config.start_frame_prompt_generation.user_prompt;if(!h||!m)throw new Error("System or user prompt not configured");const v=Fr.formatForLLM(h),_=Fr.formatForLLM(m),b={masterJSON:n,sceneId:e.startsWith("scene_")?e:`scene_${e}`,currentScene:d},p=Ir.processTemplate(v,b),g=Ir.processTemplate(_,b),y=si.getProvider(u),S={model:((a=(i=this.config.llm_providers)==null?void 0:i[u])==null?void 0:a.model)||(u==="openai"?"gpt-4-turbo":"claude-3-sonnet-20240229"),max_tokens:((o=(r=this.config.llm_providers)==null?void 0:r[u])==null?void 0:o.max_tokens)||1e3,temperature:((c=(l=this.config.llm_providers)==null?void 0:l[u])==null?void 0:c.temperature)||.7};console.log("Calling LLM with:",{provider:u,model:S.model,systemPromptLength:p.length,userPromptLength:g.length});const T=await y.generatePrompt(p,g,S);if(!T.success)throw new Error(T.error||"LLM call failed");let j;try{j=JSON.parse(T.content)}catch{j={scene_id:parseInt(e.replace("scene_","")),prompt:T.content.trim(),character_count:T.content.length}}const x=j.prompt||j.content||T.content,E=j.character_count||x.length;return console.log(`✅ Generated prompt for ${e}:`,{provider:T.provider,promptLength:x.length,characterCount:E,usage:T.usage}),{success:!0,sceneId:e,generatedPrompt:x,characterCount:E,provider:T.provider,usage:T.usage}}catch(u){return console.error(`❌ Failed to generate prompt for ${e}:`,u),{success:!1,sceneId:e,error:u.message||"Unknown error occurred"}}}async generateAllScenePrompts(e,n={}){var a,r,o,l,c,u,d,h,m;const s=Object.keys(e.scenes||{}),i=n.sceneIds||s;console.log(`🚀 Starting BATCH prompt generation for ${i.length} scenes...`,{requestedScenes:n.sceneIds?`specific: [${i.join(", ")}]`:"all scenes",totalAvailable:s.length,processing:i.length,approach:"SINGLE BATCH CALL"});try{this.config||await this.initialize();const v=n.provider||this.defaultProvider;(a=n.onProgress)==null||a.call(n,0,i.length,"preparing batch");const _=i.map(N=>({sceneId:N,...cp.transformSceneForPrompt(N,e,n.extractionMetadata)})),b=this.config.start_frame_prompt_generation.system_prompt,p=this.config.start_frame_prompt_generation.user_prompt;if(!b||!p)throw new Error("System or user prompt not configured");const g={masterJSON:e,scenes:_,totalScenes:i.length},y=Fr.formatForLLM(b),S=Fr.formatForLLM(p),T=`
BATCH PROCESSING REQUEST: Generate prompts for ${i.length} scenes in single response.

${_.map(N=>`
--- SCENE ${N.sceneId} ---
${Ir.processTemplate(S,{masterJSON:e,sceneId:N.sceneId,currentScene:N})}
`).join(`
`)}

REQUIRED OUTPUT FORMAT:
{
  "scenes": [
    {"scene_id": 1, "prompt": "...", "character_count": number},
    {"scene_id": 2, "prompt": "...", "character_count": number},
    ...
  ]
}`,j=si.getProvider(v),x={model:((o=(r=this.config.llm_providers)==null?void 0:r[v])==null?void 0:o.model)||(v==="openai"?"gpt-4-turbo":"claude-3-sonnet-20240229"),max_tokens:((c=(l=this.config.llm_providers)==null?void 0:l[v])==null?void 0:c.max_tokens)||4e3,temperature:((d=(u=this.config.llm_providers)==null?void 0:u[v])==null?void 0:d.temperature)||.7};console.log("🔥 BATCH LLM call:",{provider:v,model:x.model,systemPromptLength:y.length,batchUserPromptLength:T.length,scenesInBatch:i.length}),(h=n.onProgress)==null||h.call(n,1,i.length,"calling LLM");const E=await j.generatePrompt(Ir.processTemplate(y,g),T,x);if(!E.success)throw new Error(E.error||"Batch LLM call failed");let A;try{A=JSON.parse(E.content)}catch(N){throw new Error(`Failed to parse batch response: ${N}`)}if(!A.scenes||!Array.isArray(A.scenes))throw new Error("Invalid batch response format - missing scenes array");const C=A.scenes.map(N=>{var P,V;return{success:!0,sceneId:`scene_${N.scene_id}`,generatedPrompt:N.prompt,characterCount:N.character_count,provider:E.provider,usage:{promptTokens:Math.round((((P=E.usage)==null?void 0:P.promptTokens)||0)/i.length),completionTokens:Math.round((((V=E.usage)==null?void 0:V.completionTokens)||0)/i.length)}}});return(m=n.onProgress)==null||m.call(n,i.length,i.length,"complete"),console.log("✅ BATCH generation complete:",{totalScenes:i.length,successfulScenes:C.length,failedScenes:0,totalTokens:E.usage,approach:"SINGLE BATCH CALL"}),console.log("🎬 GENERATED PROMPTS PREVIEW:"),C.forEach(N=>{var U;console.log(`📝 ${N.sceneId}: "${(U=N.generatedPrompt)==null?void 0:U.substring(0,100)}..." (${N.characterCount} chars)`)}),{success:!0,totalScenes:i.length,successfulScenes:C.length,results:C,errors:[]}}catch(v){return console.error("💥 Batch generation failed:",v),{success:!1,totalScenes:i.length,successfulScenes:0,results:[],errors:[v.message]}}}static updateMasterJSONWithPrompts(e,n){const s={...e},i=[];return s.scenes||(s.scenes={}),n.forEach(a=>{if(a.success&&a.generatedPrompt){const r=a.sceneId.startsWith("scene_")?a.sceneId:`scene_${a.sceneId}`;s.scenes[r]||(s.scenes[r]={}),s.scenes[r].scene_frame_prompt=a.generatedPrompt,s.scenes[r].prompt_metadata={generated_at:new Date().toISOString(),provider:a.provider,character_count:a.characterCount,usage:a.usage},i.push(r)}}),console.log(`📝 Updated master JSON with prompts for ${i.length} scenes:`,i),{updatedJSON:s,updatedScenes:i}}async testProvider(e){try{return await si.testProvider(e)}catch(n){return console.error(`Provider ${e} test failed:`,n),!1}}getAvailableProviders(){return si.getAvailableProviders()}setDefaultProvider(e){this.defaultProvider=e}}const gn=new Qu;function pj(){const[t,e]=w.useState({isGenerating:!1,isInitializing:!1,progress:{completed:0,total:0,currentScene:"",percentage:0},lastResult:null,error:null,availableProviders:["openai","claude"],currentProvider:"openai"}),n=w.useCallback(async()=>{e(d=>({...d,isInitializing:!0,error:null}));try{await gn.initialize();const d=gn.getAvailableProviders();return e(h=>({...h,isInitializing:!1,availableProviders:d})),!0}catch(d){return e(h=>({...h,isInitializing:!1,error:`Initialization failed: ${d.message}`})),!1}},[]),s=w.useCallback(async(d,h,m={})=>{var v;e(_=>({..._,isGenerating:!0,error:null,progress:{completed:0,total:1,currentScene:d,percentage:0}}));try{gn.getAvailableProviders||await n();const _=await gn.generateSceneImagePrompt(d,h,{provider:m.provider||t.currentProvider,extractionMetadata:m.extractionMetadata});if(_.success&&m.saveToDatabase!==!1){const{updatedJSON:b}=Qu.updateMasterJSONWithPrompts(h,[_]);try{await Ko(((v=h.project_metadata)==null?void 0:v.id)||"unknown",b,`Generated image prompt for ${d}`),console.log(`✅ Saved prompt for ${d} to database`)}catch(p){console.error(`❌ Failed to save prompt for ${d}:`,p)}}return e(b=>({...b,isGenerating:!1,lastResult:_,progress:{completed:1,total:1,currentScene:d,percentage:100}})),_}catch(_){const b={success:!1,sceneId:d,error:_.message};return e(p=>({...p,isGenerating:!1,lastResult:b,error:_.message})),b}},[t.currentProvider,n]),i=w.useCallback(async(d,h={})=>{var m;e(v=>({...v,isGenerating:!0,error:null,progress:{completed:0,total:0,currentScene:"initializing",percentage:0}}));try{gn.getAvailableProviders||await n();const v=await gn.generateAllScenePrompts(d,{provider:h.provider||t.currentProvider,extractionMetadata:h.extractionMetadata,sceneIds:h.sceneIds,onProgress:(_,b,p)=>{const g=b>0?Math.round(_/b*100):0;e(y=>({...y,progress:{completed:_,total:b,currentScene:p,percentage:g}}))}});if(v.successfulScenes>0&&h.saveToDatabase!==!1){const{updatedJSON:_,updatedScenes:b}=Qu.updateMasterJSONWithPrompts(d,v.results);try{await Ko(((m=d.project_metadata)==null?void 0:m.id)||"unknown",_,`Generated image prompts for ${v.successfulScenes} scenes`),console.log(`✅ Saved prompts for ${b.length} scenes to database`)}catch(p){console.error("❌ Failed to save prompts to database:",p)}}return e(_=>({..._,isGenerating:!1,lastResult:v,error:v.errors.length>0?`${v.errors.length} scenes failed`:null})),v}catch(v){const _={success:!1,totalScenes:0,successfulScenes:0,results:[],errors:[v.message]};return e(b=>({...b,isGenerating:!1,lastResult:_,error:v.message})),_}},[t.currentProvider,n]),a=w.useCallback(async d=>{try{return await gn.testProvider(d)}catch(h){return console.error(`Provider ${d} test failed:`,h),!1}},[]),r=w.useCallback(d=>{gn.setDefaultProvider(d),e(h=>({...h,currentProvider:d}))},[]),o=w.useCallback(()=>{e(d=>({...d,error:null}))},[]),l=w.useCallback(()=>{e(d=>({...d,lastResult:null}))},[]),c=w.useMemo(()=>!t.isInitializing&&!t.error,[t.isInitializing,t.error]),u=w.useMemo(()=>t.lastResult!==null,[t.lastResult]);return{...t,isReady:c,hasResults:u,initializeService:n,generateScenePrompt:s,generateAllPrompts:i,testProvider:a,setProvider:r,clearError:o,clearResult:l}}const el=class el{static async downloadAndStore(e,n){var i;const s=`🎨 [${n.sceneId}]`;console.log(`${s} 📥 STEP 1/4: Starting image download and storage process...`),console.log(`${s} 📋 Request details:`,{sceneId:n.sceneId,projectId:e,falUrl:n.falUrl,promptLength:((i=n.generationPrompt)==null?void 0:i.length)||0});try{console.log(`${s} 📡 STEP 1/4: Downloading from FAL.ai...`);const a=Date.now(),r=await this.downloadImage(n.falUrl),o=Date.now()-a;console.log(`${s} ✅ STEP 1/4: Download complete - ${r.byteLength} bytes in ${o}ms`),console.log(`${s} 📂 STEP 2/4: Generating storage path...`);const l=this.generateStoragePath(e,n.sceneId);console.log(`${s} ✅ STEP 2/4: Storage path: ${l}`),console.log(`${s} ☁️ STEP 3/4: Uploading to Supabase Storage...`);const c=Date.now(),u=await this.uploadToStorage(l,r),d=Date.now()-c;console.log(`${s} ✅ STEP 3/4: Upload complete in ${d}ms`),console.log(`${s} 🔗 Our permanent URL: ${u}`),console.log(`${s} 💾 STEP 4/4: Creating database record...`);const h=Date.now(),m=await this.createDatabaseRecord(e,n,{storagePath:l,storageUrl:u,fileSize:r.byteLength}),v=Date.now()-h;console.log(`${s} ✅ STEP 4/4: Database record created in ${v}ms`),console.log(`${s} 📊 Database record ID: ${m.id}`);const _=Date.now()-a;return console.log(`${s} 🎉 COMPLETE: Full storage process finished in ${_}ms`),console.log(`${s} 🏆 RESULT: FAL.ai URL → Our Database URL`),console.log(`${s} 📤 FROM: ${n.falUrl}`),console.log(`${s} 📥 TO:   ${u}`),{success:!0,sceneId:n.sceneId,ourImageUrl:u,storageRecord:m}}catch(a){return console.error(`${s} 💥 FAILED: Storage process error:`,a),console.error(`${s} 🔍 Error details:`,{name:a instanceof Error?a.name:"Unknown",message:a instanceof Error?a.message:String(a),stack:a instanceof Error?a.stack:void 0}),{success:!1,sceneId:n.sceneId,error:a instanceof Error?a.message:"Unknown storage error"}}}static async downloadImage(e){console.log(`📡 Downloading image from: ${e}`);const n=await fetch(e);if(!n.ok)throw new Error(`Failed to download image: ${n.status} ${n.statusText}`);const s=n.headers.get("content-type");if(!(s!=null&&s.startsWith("image/")))throw new Error(`Invalid content type: ${s}. Expected image.`);const i=await n.arrayBuffer();if(i.byteLength>this.MAX_FILE_SIZE)throw new Error(`Image too large: ${i.byteLength} bytes. Max: ${this.MAX_FILE_SIZE}`);return console.log(`✅ Downloaded image: ${i.byteLength} bytes, type: ${s}`),i}static generateStoragePath(e,n){const s=new Date().toISOString().replace(/[:.]/g,"-");return`projects/${e}/scenes/${n}_${s}.jpeg`}static async uploadToStorage(e,n){console.log(`☁️ Uploading to storage: ${e}`);const{data:s,error:i}=await W.storage.from(this.STORAGE_BUCKET).upload(e,n,{contentType:"image/jpeg",cacheControl:"3600",upsert:!1});if(i)throw new Error(`Storage upload failed: ${i.message}`);const{data:a}=W.storage.from(this.STORAGE_BUCKET).getPublicUrl(e);return console.log(`✅ Uploaded to storage: ${a.publicUrl}`),a.publicUrl}static async createDatabaseRecord(e,n,s){console.log(`💾 Creating database record for ${n.sceneId}...`),await W.from("project_assets").update({is_current:!1}).eq("project_id",e).eq("scene_id",n.sceneId).eq("asset_type","scene_image").eq("is_current",!0);const{data:i,error:a}=await W.from("project_assets").insert({project_id:e,scene_id:n.sceneId,asset_type:"scene_image",asset_url:s.storageUrl,asset_filename:s.storagePath.split("/").pop(),generation_prompt:n.generationPrompt,generation_model:"fal_ai_flux",generation_parameters:{...n.falMetadata,original_fal_url:n.falUrl,file_size:s.fileSize,content_type:"image/jpeg",storage_path:s.storagePath},version_number:1,is_current:!0}).select().single();if(a)throw new Error(`Database record creation failed: ${a.message}`);return console.log(`✅ Created database record for ${n.sceneId}`),i}static async ensureBucketExists(){const{data:e}=await W.storage.listBuckets();if(!(e==null?void 0:e.some(s=>s.name===this.STORAGE_BUCKET))){console.log(`🪣 Creating storage bucket: ${this.STORAGE_BUCKET}`);const{error:s}=await W.storage.createBucket(this.STORAGE_BUCKET,{public:!0,allowedMimeTypes:["image/jpeg","image/png","image/webp"],fileSizeLimit:this.MAX_FILE_SIZE});if(s)throw new Error(`Failed to create storage bucket: ${s.message}`)}}static async getCurrentImageUrl(e,n){const{data:s,error:i}=await W.from("project_assets").select("asset_url").eq("project_id",e).eq("scene_id",n).eq("asset_type","scene_image").eq("is_current",!0).single();return i||!s?null:s.asset_url}static async downloadAndStoreBulk(e,n){console.log(`📥 Bulk downloading and storing ${n.length} images...`);const s=[];for(const a of n){const r=await this.downloadAndStore(e,a);s.push(r),await new Promise(o=>setTimeout(o,500))}const i=s.filter(a=>a.success).length;return console.log(`✅ Bulk storage complete: ${i}/${n.length} successful`),s}static async cleanupOldVersions(e,n,s=3){console.log(`🧹 Cleanup for ${n} - keeping ${s} versions (future feature)`)}};el.STORAGE_BUCKET="scene-images",el.MAX_FILE_SIZE=10*1024*1024;let Zu=el;class gj{constructor(){this.config=null,this.serviceType=null,this.serviceConfig=null}async initialize(){var e;try{if(this.config=await Ol(),!((e=this.config)!=null&&e.image_generation))throw new Error("Image generation configuration not found");const n=this.config.image_generation;if(n.fal_ai_flux)this.serviceType="fal_ai_flux",this.serviceConfig=n.fal_ai_flux,console.log("✅ ImageGenerationService: Detected FAL.ai FLUX configuration");else throw new Error("No supported image generation service found in configuration");console.log("🎨 ImageGenerationService initialized:",{serviceType:this.serviceType,endpoint:this.serviceConfig.endpoint,hasParameters:!!this.serviceConfig.parameters})}catch(n){throw console.error("ImageGenerationService initialization failed:",n),n}}async generateSceneImage(e){try{switch((!this.serviceType||!this.serviceConfig)&&await this.initialize(),console.log(`🎨 Generating image for ${e.sceneId} using ${this.serviceType}...`),this.serviceType){case"fal_ai_flux":return await this.generateWithFalAi(e);default:throw new Error(`Unsupported service type: ${this.serviceType}`)}}catch(n){return console.error(`❌ Failed to generate image for ${e.sceneId}:`,n),{success:!1,sceneId:e.sceneId,error:n.message||"Unknown error occurred",provider:this.serviceType||"unknown"}}}async generateAllSceneImages(e,n={}){var o,l;const s=[],i=[];console.log(`🚀 Starting bulk image generation for ${e.length} scenes using ${this.serviceType}...`);for(let c=0;c<e.length;c++){const u=e[c],d={completed:c,total:e.length,currentScene:u.sceneId,currentSceneIndex:c+1,percentage:Math.round(c/e.length*100),provider:this.serviceType||"unknown"};(o=n.onProgress)==null||o.call(n,d);try{const h=await this.generateSceneImage(u);s.push(h),!h.success&&h.error&&i.push(`${u.sceneId}: ${h.error}`)}catch(h){const m={success:!1,sceneId:u.sceneId,error:h.message,provider:this.serviceType||"unknown"};s.push(m),i.push(`${u.sceneId}: ${h.message}`)}c<e.length-1&&await new Promise(h=>setTimeout(h,1e3))}const a={completed:e.length,total:e.length,currentScene:"complete",currentSceneIndex:e.length,percentage:100,provider:this.serviceType||"unknown"};(l=n.onProgress)==null||l.call(n,a);const r=s.filter(c=>c.success).length;return console.log("✅ Bulk image generation complete:",{totalScenes:e.length,successfulScenes:r,failedScenes:e.length-r,errors:i.length,provider:this.serviceType}),{success:r===e.length,totalScenes:e.length,successfulScenes:r,results:s,errors:i,provider:this.serviceType||"unknown"}}async generateWithFalAi(e){var n,s,i;try{const{fal:a}=await hn(async()=>{const{fal:m}=await import("./index-BtQYkZgZ.js").then(v=>v.i);return{fal:m}},[]);a.config({credentials:"cc591b31-c323-4b0e-b978-32ffb34af24f:6462b409182255512edc46ec27d7c5a0"});const r={input:{prompt:e.prompt,image_size:((n=this.serviceConfig.parameters)==null?void 0:n.image_size)||{width:1024,height:768},num_inference_steps:((s=this.serviceConfig.parameters)==null?void 0:s.num_inference_steps)||28,guidance_scale:((i=this.serviceConfig.parameters)==null?void 0:i.guidance_scale)||3.5,num_images:1,enable_safety_checker:!0,output_format:"jpeg",acceleration:"none"},logs:!0};console.log("🔥 FAL.ai call:",{endpoint:this.serviceConfig.endpoint,promptLength:e.prompt.length,imageSize:r.input.image_size,sceneId:e.sceneId});const o=await a.subscribe(this.serviceConfig.endpoint,r);if(!o.data||!o.data.images||o.data.images.length===0)throw new Error("No images generated by FAL.ai");const l=o.data.images[0],c=`🖼️ [${e.sceneId}]`;console.log(`${c} ✅ FAL.ai GENERATION COMPLETE:`,{url:l.url,contentType:l.content_type,width:l.width,height:l.height,seed:o.data.seed,requestId:o.requestId,timings:o.data.timings}),console.log(`${c} 🔄 TRANSITIONING: FAL.ai → Our Database Storage...`),console.log(`${c} 🎯 NEXT PHASE: Download, Store, and Create Permanent URL...`);const u=Date.now(),d=await Zu.downloadAndStore(e.projectId,{sceneId:e.sceneId,falUrl:l.url,generationPrompt:e.prompt,falMetadata:{width:l.width,height:l.height,seed:o.data.seed,requestId:o.requestId,timings:o.data.timings,contentType:l.content_type}}),h=Date.now()-u;return d.success?(console.log(`${c} 🎉 STORAGE SUCCESS: Complete pipeline finished in ${h}ms`),console.log(`${c} 🏆 FINAL RESULT: Permanent database URL ready`),console.log(`${c} 📋 SUMMARY:`),console.log(`${c}   • FAL.ai generation: SUCCESS`),console.log(`${c}   • Download from FAL.ai: SUCCESS`),console.log(`${c}   • Upload to our storage: SUCCESS`),console.log(`${c}   • Database record: SUCCESS`),console.log(`${c}   • Final URL: ${d.ourImageUrl}`),{success:!0,sceneId:e.sceneId,imageUrl:d.ourImageUrl,contentType:l.content_type,width:l.width,height:l.height,seed:o.data.seed,provider:"fal_ai_flux",requestId:o.requestId,timings:o.data.timings,originalFalUrl:l.url,storageRecord:d.storageRecord}):(console.error(`${c} 💥 STORAGE FAILED: Falling back to FAL.ai URL`),console.error(`${c} 🔍 Storage error: ${d.error}`),console.error(`${c} ⚠️ FALLBACK ACTIVATED: Using temporary FAL.ai URL`),{success:!0,sceneId:e.sceneId,imageUrl:l.url,contentType:l.content_type,width:l.width,height:l.height,seed:o.data.seed,provider:"fal_ai_flux",requestId:o.requestId,timings:o.data.timings,storageError:d.error})}catch(a){return console.error(`💥 FAL.ai error for ${e.sceneId}:`,a),{success:!1,sceneId:e.sceneId,error:`FAL.ai Error: ${a.message}`,provider:"fal_ai_flux"}}}getAvailableProviders(){var n;if(!((n=this.config)!=null&&n.image_generation))return[];const e=[];return this.config.image_generation.fal_ai_flux&&e.push("fal_ai_flux"),e}getCurrentService(){return this.serviceType}async testService(){try{this.serviceType||await this.initialize();const e={sceneId:"test",prompt:"A simple test image"};return(await this.generateSceneImage(e)).success}catch(e){return console.error("Service test failed:",e),!1}}}const Vs=new gj;function yj(){const[t,e]=w.useState({isGenerating:!1,isInitializing:!1,progress:null,lastResult:null,error:null,currentService:null,availableServices:[]}),n=w.useCallback(async()=>{e(u=>({...u,isInitializing:!0,error:null}));try{await Vs.initialize();const u=Vs.getCurrentService(),d=Vs.getAvailableProviders();return e(h=>({...h,isInitializing:!1,currentService:u,availableServices:d})),!0}catch(u){return e(d=>({...d,isInitializing:!1,error:`Service initialization failed: ${u.message}`})),!1}},[]),s=w.useCallback(async(u,d)=>{e(h=>({...h,isGenerating:!0,error:null,progress:{completed:0,total:1,currentScene:u,currentSceneIndex:1,percentage:0,provider:h.currentService||"unknown"}}));try{t.currentService||await n();const h={sceneId:u,prompt:d},m=await Vs.generateSceneImage(h);return e(v=>({...v,isGenerating:!1,lastResult:m,progress:{completed:1,total:1,currentScene:u,currentSceneIndex:1,percentage:100,provider:m.provider||"unknown"}})),m}catch(h){const m={success:!1,sceneId:u,error:h.message,provider:t.currentService||"unknown"};return e(v=>({...v,isGenerating:!1,lastResult:m,error:h.message})),m}},[t.currentService,n]),i=w.useCallback(async u=>{e(d=>({...d,isGenerating:!0,error:null,progress:{completed:0,total:u.length,currentScene:"initializing",currentSceneIndex:0,percentage:0,provider:d.currentService||"unknown"}}));try{t.currentService||await n();const d=u.map((m,v)=>({sceneId:m.sceneId,prompt:m.prompt,projectId:m.projectId,sceneIndex:v})),h=await Vs.generateAllSceneImages(d,{onProgress:m=>{e(v=>({...v,progress:m}))}});return e(m=>({...m,isGenerating:!1,lastResult:h,error:h.errors.length>0?`${h.errors.length} scenes failed`:null})),h}catch(d){const h={success:!1,totalScenes:u.length,successfulScenes:0,results:[],errors:[d.message],provider:t.currentService||"unknown"};return e(m=>({...m,isGenerating:!1,lastResult:h,error:d.message})),h}},[t.currentService,n]),a=w.useCallback(async()=>{try{return await Vs.testService()}catch(u){return console.error("Service test failed:",u),!1}},[]),r=w.useCallback(()=>{e(u=>({...u,error:null}))},[]),o=w.useCallback(()=>{e(u=>({...u,lastResult:null}))},[]),l=!t.isInitializing&&!t.error&&!!t.currentService,c=t.lastResult!==null;return{...t,isReady:l,hasResults:c,initializeService:n,generateSceneImage:s,generateAllSceneImages:i,testService:a,clearError:r,clearResult:o}}function vj({phase:t,projectId:e,projectName:n,masterJSON:s,onContentUpdate:i,hasUnsavedChanges:a,onJsonChange:r}){const{generateAllPrompts:o,isGenerating:l,isReady:c,error:u,currentProvider:d,setProvider:h,initializeService:m}=pj(),{generateAllSceneImages:v,isGenerating:_,isReady:b,error:p,currentService:g,initializeService:y}=yj();w.useEffect(()=>{console.log("🚀 ScenesFrameGenerationModule: Initializing services..."),m().then(C=>{console.log(`✅ LLM service initialization: ${C?"SUCCESS":"FAILED"}`)}),y().then(C=>{console.log(`✅ Image service initialization: ${C?"SUCCESS":"FAILED"}`)})},[]);const S=s!=null&&s.scenes?Object.keys(s.scenes):[],T=S.length,j=S.filter(C=>{var N;return(N=s.scenes[C])==null?void 0:N.scene_frame_prompt}).length,x=S.filter(C=>{var N;return(N=s.scenes[C])==null?void 0:N.scene_start_frame}).length;console.log("📊 Scenes Frame Generation State:",{totalScenes:T,scenesWithPrompts:j,scenesWithImages:x,hasUnsavedChanges:a,isGeneratingPrompts:l,isGeneratingImages:_,isLLMReady:c,isImageServiceReady:b,currentProvider:d,currentService:g});const E=async()=>{console.log("🚀 Starting bulk prompt generation for all scenes..."),console.log("📊 Bulk generation context:",{totalScenes:T,scenes:S,masterJSONKeys:Object.keys(s||{}),provider:d});const C=cs();if(C){const N=S.length<=5?S.join(", "):`${S.slice(0,3).join(", ")} ... +${S.length-3} more`;C.showModal({title:"🤖 Generating Scene Prompts",message:`Single batch call processing ${S.length} scenes with ${d.toUpperCase()}`,details:[`Processing scenes: ${N}`,`LLM Provider: ${d.toUpperCase()}`,"Call type: Single batch request",`Expected output: ${S.length} image generation prompts`,"Variable injection & cross-scene consistency optimization"],type:"loading"})}try{const N=await o(s,{provider:d,saveToDatabase:!1,sceneIds:S});if(console.log("📋 Bulk generation complete:",{success:N.success,totalScenes:N.totalScenes,successfulScenes:N.successfulScenes,failedScenes:N.totalScenes-N.successfulScenes,errors:N.errors}),N.successfulScenes>0){const U={...s};N.results.forEach(P=>{var V;if(P.success&&P.generatedPrompt){const B=P.sceneId.startsWith("scene_")?P.sceneId:`scene_${P.sceneId}`;U.scenes[B]||(U.scenes[B]={}),U.scenes[B].scene_frame_prompt=P.generatedPrompt,U.scenes[B].prompt_metadata={generated_at:new Date().toISOString(),provider:P.provider,character_count:P.characterCount,usage:P.usage},console.log(`✅ Updated scene ${B} with generated prompt (${(V=P.generatedPrompt)==null?void 0:V.length} chars)`)}}),console.log("🎉 Master JSON updated with all successful prompts"),i(U),r(JSON.stringify(U,null,2)),C&&(C.showModal({title:"✅ Prompts Generated Successfully",message:`Generated ${N.successfulScenes} prompts for ${T} scenes`,type:"success"}),setTimeout(()=>{C.hideModal()},3e3))}else C&&C.showModal({title:"❌ Generation Failed",message:"No prompts were generated successfully",type:"error"})}catch(N){console.error("💥 Exception during bulk generation:",N);const U=cs();U&&U.showModal({title:"❌ Generation Error",message:`Error: ${N instanceof Error?N.message:"Unknown error occurred"}`,type:"error"})}},A=async()=>{console.log("🎨 Starting bulk frame generation for all scenes...");const C=S.filter(M=>{var D;return(D=s.scenes[M])==null?void 0:D.scene_frame_prompt});if(C.length===0){const M=cs();M&&M.showModal({title:"⚠️ No Prompts Available",message:"Generate prompts first before creating frames",details:['Click "Generate Prompts" to create image prompts','Then use "Generate Frames" to create the actual images'],type:"error"});return}const N=!0,U=3,P=C.slice(0,U);console.log(`🧪 Testing mode: Processing ${P.length} of ${C.length} scenes`),console.log("📊 Bulk frame generation context:",{totalScenes:C.length,processScenes:P.length,testingMode:N,currentService:g,hasPrompts:!0});const V=cs();let B=0;const R=P.map(M=>{const D=s.scenes[M],L=M.replace("scene_",""),I=(D==null?void 0:D.title)||(D==null?void 0:D.action_summary)||`Scene ${L}`;return{id:M,number:L,title:I.substring(0,35),status:"pending",step:"queued",details:""}});if(V){const M=` (Testing: First ${U} scenes only)`;V.showModal({title:"🎨 Generating Scene Frames with Database Storage",message:`Processing ${P.length} scene images${M}`,details:["🔧 Service Pipeline: FAL.ai FLUX → Download → Supabase Storage → Database",`📊 Progress: 0/${P.length} completed`,"⏱️ Process: Each scene goes through 5 steps (Generate → Download → Upload → Database → Complete)","","📋 Scene Processing List:",...R.map(D=>`⚪ Scene ${D.number}: ${D.title} - Queued`),"","🔄 Process Steps for Each Scene:","  1️⃣ Generate with FAL.ai FLUX API","  2️⃣ Download image from FAL.ai servers","  3️⃣ Upload to our Supabase Storage","  4️⃣ Create database record with metadata","  5️⃣ Update masterJSON with permanent URL","","💾 Storage: Images stored permanently in our database","🔗 URLs: Permanent URLs replace temporary FAL.ai links","✅ Phase 3: Completes when all scenes have permanent stored images"],type:"loading"})}try{console.log("🚀 STARTING BULK FRAME GENERATION PROCESS"),console.log("📊 Session Context:",{testingMode:N,totalAvailableScenes:C.length,processingScenes:P.length,projectId:e,currentService:g});const M=P.map(L=>({sceneId:L,prompt:s.scenes[L].scene_frame_prompt,projectId:e}));console.log("🎬 SCENE PROCESSING QUEUE:",M.map(L=>{var I;return{sceneId:L.sceneId,promptLength:((I=L.prompt)==null?void 0:I.length)||0,hasPrompt:!!L.prompt}}));const D=await v(M,{onProgress:L=>{if(B=L.completed,V){const I=R.map((re,ut)=>{if(ut<B)return`✅ Scene ${re.number}: ${re.title} - ✅ COMPLETE (Database Stored)`;if(ut===B){const Rt=L.currentScene===re.id?"⏳ Generating → Download → Upload → Database → Complete":"⏳ Processing...";return`🔄 Scene ${re.number}: ${re.title} - ${Rt}`}else return`⚪ Scene ${re.number}: ${re.title} - Queued`});V.showModal({title:"🎨 Frame Generation Progress",message:`${B}/${P.length} scenes completed${testingNote}`,details:["📋 Scene Status:",...I,"",`🔄 Current Step: ${L.currentScene?`Processing ${L.currentScene}`:"Starting..."}`,`📊 Overall: ${L.percentage}% complete`],type:"loading"})}}});if(console.log("🎊 BULK FRAME GENERATION PROCESS COMPLETE"),console.log("📋 Final Results Summary:",{success:D.success,totalScenes:D.totalScenes,successfulScenes:D.successfulScenes,failedScenes:D.totalScenes-D.successfulScenes,errors:D.errors,testingMode:N,processingTime:"Logged individually per scene"}),D.results.forEach((L,I)=>{const re=`📊 [${L.sceneId}]`;L.success?(console.log(`${re} ✅ COMPLETE SUCCESS:`),console.log(`${re}   • FAL.ai generation: SUCCESS`),console.log(`${re}   • Database storage: SUCCESS`),console.log(`${re}   • Final URL: ${L.imageUrl}`),console.log(`${re}   • Original FAL.ai: ${L.originalFalUrl||"N/A"}`)):(console.log(`${re} ❌ FAILED:`),console.log(`${re}   • Error: ${L.error}`))}),D.successfulScenes>0){const L={...s};D.results.forEach(ne=>{if(ne.success&&ne.imageUrl){const ue=ne.sceneId.startsWith("scene_")?ne.sceneId:`scene_${ne.sceneId}`;L.scenes[ue]||(L.scenes[ue]={}),L.scenes[ue].scene_start_frame=ne.imageUrl,L.scenes[ue].frame_metadata={generated_at:new Date().toISOString(),provider:ne.provider,width:ne.width,height:ne.height,content_type:ne.contentType,seed:ne.seed,request_id:ne.requestId},console.log(`✅ Updated scene ${ue} with generated frame image`)}}),console.log("🎉 Master JSON updated with all successful frame images"),i(L),r(JSON.stringify(L,null,2));const I=S.every(ne=>{var ue;return(ue=s.scenes[ne])==null?void 0:ue.scene_frame_prompt}),re=P.every(ne=>{var ue;return(ue=L.scenes[ne])==null?void 0:ue.scene_start_frame}),ut=I&&re,Rt=N?` (${P.length}/${C.length} in testing mode)`:"";if(V){const ne=D.results.filter(Tt=>Tt.success),ue=D.results.filter(Tt=>!Tt.success);V.showModal({title:"✅ Generation Complete",message:`${D.successfulScenes}/${D.totalScenes} scenes processed successfully${Rt}`,details:["✅ Completed Scenes:",...ne.map(Tt=>`  ✅ ${Tt.sceneId}: Stored in database`),...ue.length>0?["","❌ Failed Scenes:",...ue.map(Tt=>`  ❌ ${Tt.sceneId}: ${Tt.error}`)]:[],"",`📊 Project: ${x+D.successfulScenes}/${T} scenes have images`,ut?"🎉 Phase 3 Complete!":"⏳ Generate remaining scenes to complete Phase 3"],type:"success"}),setTimeout(()=>{V.hideModal()},7e3)}}else V&&V.showModal({title:"❌ Frame Generation Failed",message:"No frame images were generated successfully",type:"error"})}catch(M){console.error("💥 Exception during bulk frame generation:",M);const D=cs();D&&D.showModal({title:"❌ Frame Generation Error",message:`Error: ${M instanceof Error?M.message:"Unknown error occurred"}`,type:"error"})}};return f.jsx("div",{style:{padding:"0.5rem"},children:f.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem",color:"#999",marginBottom:"0.375rem"},children:[f.jsxs("span",{children:["Phase 3: ",f.jsx("strong",{style:{color:"#66ccff"},children:"Scenes Frame Generation"})]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:["Status: ",f.jsx("strong",{className:t.status==="completed"?"script-status-completed":"script-status-progress",children:t.status==="completed"?"Completed":"Available"})]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:["Prompts: ",f.jsxs("strong",{className:"script-db-connected",children:[j,"/",T]})]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:["Frames: ",f.jsxs("strong",{className:"script-db-connected",children:[x,"/",T]})]})]}),f.jsx("div",{style:{marginBottom:"0.25rem"},children:f.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem",margin:0},children:"Generate image prompts for scene frames using LLM analysis of script elements"})}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem"},children:[f.jsx("span",{className:c?"text-success":"text-error",children:c?c?f.jsx(f.Fragment,{children:"✅ LLM Ready"}):f.jsx(f.Fragment,{children:"⏳ LLM Loading"}):f.jsx(f.Fragment,{children:"❌ LLM Error"})}),f.jsx("span",{className:b?"text-success":"text-error",children:b?b?f.jsx(f.Fragment,{children:"✅ Image Ready"}):f.jsx(f.Fragment,{children:"⏳ Image Loading"}):f.jsx(f.Fragment,{children:"❌ Image Error"})}),(u||p)&&f.jsxs("span",{className:"text-error",children:["❌ ",u||p]}),a&&f.jsx("span",{className:"text-warning",children:"⚠️ Unsaved changes"}),f.jsx("span",{className:d==="openai"?"text-success":"text-accent",children:d==="openai"?"🤖 OPENAI":"🧠 CLAUDE"}),g&&f.jsxs("span",{className:"text-accent",children:["🎨 ",g.toUpperCase().replace("_"," ")]}),(l||_)&&f.jsx("span",{className:"text-muted",style:{fontSize:"0.75rem"},children:l?"Generating prompts...":"Generating frames..."})]})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.375rem"},children:[f.jsx("div",{children:f.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:"0.875rem",color:"#cccccc"},children:[f.jsx("input",{type:"checkbox",checked:d==="claude",onChange:C=>h(C.target.checked?"claude":"openai"),style:{marginRight:"0.375rem"},disabled:l||_}),"Use Claude (vs OpenAI)"]})}),f.jsxs("div",{style:{display:"flex",gap:"0.375rem"},children:[f.jsx("button",{onClick:E,disabled:!c||l||_||T===0,className:`btn text-xs px-md py-xs ${l?"btn-secondary":"btn-primary"}`,children:l?"⏳ Generating...":"Generate Prompts"}),f.jsx("button",{onClick:A,disabled:!b||l||_||j===0,className:`btn text-xs px-md py-xs ${_?"btn-secondary":"btn-primary"}`,title:"Testing mode: Generates first 3 scenes only",children:_?"⏳ Generating...":"🧪 Generate Frames (Test: 3 scenes)"})]})]})]})})}function _j({activeView:t,onViewChange:e,masterJSON:n}){const s=[{id:"json",label:"JSON",icon:"{ }",description:"Raw data view"},{id:"timeline",label:"Timeline",icon:"📊",description:"Visual timeline interface"},{id:"elements",label:"Elements",icon:"🎭",description:"Element management (Phase 2+)"},{id:"style",label:"Style",icon:"🎨",description:"Global style control"},{id:"config",label:"Config",icon:"⚙️",description:"LLM configuration (Admin)"}],i=(n==null?void 0:n.scenes)&&typeof n.scenes=="object"&&Object.keys(n.scenes).length>0,a=o=>o==="json"||o==="timeline"?!0:o==="style"?i:o!=="elements",r=o=>{var l;return o==="elements"?"Available in Phase 2+":o==="style"&&!i?"Complete Phase 1 JSON generation first":((l=s.find(c=>c.id===o))==null?void 0:l.description)||""};return f.jsx("div",{className:"project-view-navigation",children:f.jsx("div",{className:"flex gap-md p-md",children:s.map(o=>{const l=a(o.id);return f.jsxs("button",{onClick:()=>l&&e(o.id),className:`
                flex-1 flex items-center justify-center transition-fast cursor-pointer
                border border-solid rounded-lg font-semibold
                ${t===o.id?"bg-accent border-focus text-primary shadow-md":"bg-secondary border-default text-secondary hover:text-primary hover:bg-accent hover:border-light"}
                ${l?"":"opacity-50 cursor-not-allowed"}
              `,style:{padding:"1rem 1.5rem",fontSize:"1rem",minHeight:"3rem"},disabled:!l,title:r(o.id),children:[f.jsx("span",{className:"font-semibold",children:o.label}),(o.id==="elements"||o.id==="style")&&f.jsx("span",{className:"text-xs text-muted",children:o.id==="elements"?"(Phase 2+)":"(Soon)"})]},o.id)})})})}const Th=w.createContext({});function Eh(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const jh=typeof window<"u",f0=jh?w.useLayoutEffect:w.useEffect,Nl=w.createContext(null);function Ah(t,e){t.indexOf(e)===-1&&t.push(e)}function Ch(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const cn=(t,e,n)=>n>e?e:n<t?t:n;let Oh=()=>{};const un={},m0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function p0(t){return typeof t=="object"&&t!==null}const g0=t=>/^0[^.\s]+$/u.test(t);function Nh(t){let e;return()=>(e===void 0&&(e=t()),e)}const bt=t=>t,bj=(t,e)=>n=>e(t(n)),Sr=(...t)=>t.reduce(bj),Ka=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Rh{constructor(){this.subscriptions=[]}add(e){return Ah(this.subscriptions,e),()=>Ch(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let a=0;a<i;a++){const r=this.subscriptions[a];r&&r(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bt=t=>t*1e3,zt=t=>t/1e3;function y0(t,e){return e?t*(1e3/e):0}const v0=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Sj=1e-7,wj=12;function xj(t,e,n,s,i){let a,r,o=0;do r=e+(n-e)/2,a=v0(r,s,i)-t,a>0?n=r:e=r;while(Math.abs(a)>Sj&&++o<wj);return r}function wr(t,e,n,s){if(t===e&&n===s)return bt;const i=a=>xj(a,0,1,t,n);return a=>a===0||a===1?a:v0(i(a),e,s)}const _0=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,b0=t=>e=>1-t(1-e),S0=wr(.33,1.53,.69,.99),Dh=b0(S0),w0=_0(Dh),x0=t=>(t*=2)<1?.5*Dh(t):.5*(2-Math.pow(2,-10*(t-1))),Mh=t=>1-Math.sin(Math.acos(t)),T0=b0(Mh),E0=_0(Mh),Tj=wr(.42,0,1,1),Ej=wr(0,0,.58,1),j0=wr(.42,0,.58,1),jj=t=>Array.isArray(t)&&typeof t[0]!="number",A0=t=>Array.isArray(t)&&typeof t[0]=="number",Aj={linear:bt,easeIn:Tj,easeInOut:j0,easeOut:Ej,circIn:Mh,circInOut:E0,circOut:T0,backIn:Dh,backInOut:w0,backOut:S0,anticipate:x0},Cj=t=>typeof t=="string",up=t=>{if(A0(t)){Oh(t.length===4);const[e,n,s,i]=t;return wr(e,n,s,i)}else if(Cj(t))return Aj[t];return t},Yr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Oj(t,e){let n=new Set,s=new Set,i=!1,a=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){r.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,d=!1,h=!1)=>{const v=h&&i?n:s;return d&&r.add(u),v.has(u)||v.add(u),u},cancel:u=>{s.delete(u),r.delete(u)},process:u=>{if(o=u,i){a=!0;return}i=!0,[n,s]=[s,n],n.forEach(l),n.clear(),i=!1,a&&(a=!1,c.process(u))}};return c}const Nj=40;function C0(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,r=Yr.reduce((y,S)=>(y[S]=Oj(a),y),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:m,postRender:v}=r,_=()=>{const y=un.useManualTiming?i.timestamp:performance.now();n=!1,un.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(y-i.timestamp,Nj),1)),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),m.process(i),v.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(_))},b=()=>{n=!0,s=!0,i.isProcessing||t(_)};return{schedule:Yr.reduce((y,S)=>{const T=r[S];return y[S]=(j,x=!1,E=!1)=>(n||b(),T.schedule(j,x,E)),y},{}),cancel:y=>{for(let S=0;S<Yr.length;S++)r[Yr[S]].cancel(y)},state:i,steps:r}}const{schedule:me,cancel:In,state:Ue,steps:Cc}=C0(typeof requestAnimationFrame<"u"?requestAnimationFrame:bt,!0);let ho;function Rj(){ho=void 0}const Je={now:()=>(ho===void 0&&Je.set(Ue.isProcessing||un.useManualTiming?Ue.timestamp:performance.now()),ho),set:t=>{ho=t,queueMicrotask(Rj)}},O0=t=>e=>typeof e=="string"&&e.startsWith(t),kh=O0("--"),Dj=O0("var(--"),Uh=t=>Dj(t)?Mj.test(t.split("/*")[0].trim()):!1,Mj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$i={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Xa={...$i,transform:t=>cn(0,1,t)},Kr={...$i,default:1},ja=t=>Math.round(t*1e5)/1e5,Ph=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kj(t){return t==null}const Uj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lh=(t,e)=>n=>!!(typeof n=="string"&&Uj.test(n)&&n.startsWith(t)||e&&!kj(n)&&Object.prototype.hasOwnProperty.call(n,e)),N0=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,a,r,o]=s.match(Ph);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(r),alpha:o!==void 0?parseFloat(o):1}},Pj=t=>cn(0,255,t),Oc={...$i,transform:t=>Math.round(Pj(t))},us={test:Lh("rgb","red"),parse:N0("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Oc.transform(t)+", "+Oc.transform(e)+", "+Oc.transform(n)+", "+ja(Xa.transform(s))+")"};function Lj(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Ju={test:Lh("#"),parse:Lj,transform:us.transform},xr=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_n=xr("deg"),$t=xr("%"),z=xr("px"),Vj=xr("vh"),Bj=xr("vw"),dp={...$t,parse:t=>$t.parse(t)/100,transform:t=>$t.transform(t*100)},ii={test:Lh("hsl","hue"),parse:N0("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+$t.transform(ja(e))+", "+$t.transform(ja(n))+", "+ja(Xa.transform(s))+")"},xe={test:t=>us.test(t)||Ju.test(t)||ii.test(t),parse:t=>us.test(t)?us.parse(t):ii.test(t)?ii.parse(t):Ju.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?us.transform(t):ii.transform(t),getAnimatableNone:t=>{const e=xe.parse(t);return e.alpha=0,xe.transform(e)}},zj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $j(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ph))==null?void 0:e.length)||0)+(((n=t.match(zj))==null?void 0:n.length)||0)>0}const R0="number",D0="color",Gj="var",Hj="var(",hp="${}",qj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qa(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(qj,l=>(xe.test(l)?(s.color.push(a),i.push(D0),n.push(xe.parse(l))):l.startsWith(Hj)?(s.var.push(a),i.push(Gj),n.push(l)):(s.number.push(a),i.push(R0),n.push(parseFloat(l))),++a,hp)).split(hp);return{values:n,split:o,indexes:s,types:i}}function M0(t){return Qa(t).values}function k0(t){const{split:e,types:n}=Qa(t),s=e.length;return i=>{let a="";for(let r=0;r<s;r++)if(a+=e[r],i[r]!==void 0){const o=n[r];o===R0?a+=ja(i[r]):o===D0?a+=xe.transform(i[r]):a+=i[r]}return a}}const Ij=t=>typeof t=="number"?0:xe.test(t)?xe.getAnimatableNone(t):t;function Fj(t){const e=M0(t);return k0(t)(e.map(Ij))}const Fn={test:$j,parse:M0,createTransformer:k0,getAnimatableNone:Fj};function Nc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Yj({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,a=0,r=0;if(!e)i=a=r=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=Nc(l,o,t+1/3),a=Nc(l,o,t),r=Nc(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(r*255),alpha:s}}function Xo(t,e){return n=>n>0?e:t}const ge=(t,e,n)=>t+(e-t)*n,Rc=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},Kj=[Ju,us,ii],Xj=t=>Kj.find(e=>e.test(t));function fp(t){const e=Xj(t);if(!e)return!1;let n=e.parse(t);return e===ii&&(n=Yj(n)),n}const mp=(t,e)=>{const n=fp(t),s=fp(e);if(!n||!s)return Xo(t,e);const i={...n};return a=>(i.red=Rc(n.red,s.red,a),i.green=Rc(n.green,s.green,a),i.blue=Rc(n.blue,s.blue,a),i.alpha=ge(n.alpha,s.alpha,a),us.transform(i))},Wu=new Set(["none","hidden"]);function Qj(t,e){return Wu.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Zj(t,e){return n=>ge(t,e,n)}function Vh(t){return typeof t=="number"?Zj:typeof t=="string"?Uh(t)?Xo:xe.test(t)?mp:eA:Array.isArray(t)?U0:typeof t=="object"?xe.test(t)?mp:Jj:Xo}function U0(t,e){const n=[...t],s=n.length,i=t.map((a,r)=>Vh(a)(a,e[r]));return a=>{for(let r=0;r<s;r++)n[r]=i[r](a);return n}}function Jj(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=Vh(t[i])(t[i],e[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function Wj(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],r=t.indexes[a][s[a]],o=t.values[r]??0;n[i]=o,s[a]++}return n}const eA=(t,e)=>{const n=Fn.createTransformer(e),s=Qa(t),i=Qa(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Wu.has(t)&&!i.values.length||Wu.has(e)&&!s.values.length?Qj(t,e):Sr(U0(Wj(s,i),i.values),n):Xo(t,e)};function P0(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ge(t,e,n):Vh(t)(t,e)}const tA=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>me.update(e,n),stop:()=>In(e),now:()=>Ue.isProcessing?Ue.timestamp:Je.now()}},L0=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)s+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Qo=2e4;function Bh(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Qo;)e+=n,s=t.next(e);return e>=Qo?1/0:e}function nA(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(Bh(s),Qo);return{type:"keyframes",ease:a=>s.next(i*a).value/e,duration:zt(i)}}const sA=5;function V0(t,e,n){const s=Math.max(e-sA,0);return y0(n-t(s),e-s)}const ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dc=.001;function iA({duration:t=ye.duration,bounce:e=ye.bounce,velocity:n=ye.velocity,mass:s=ye.mass}){let i,a,r=1-e;r=cn(ye.minDamping,ye.maxDamping,r),t=cn(ye.minDuration,ye.maxDuration,zt(t)),r<1?(i=c=>{const u=c*r,d=u*t,h=u-n,m=ed(c,r),v=Math.exp(-d);return Dc-h/m*v},a=c=>{const d=c*r*t,h=d*n+n,m=Math.pow(r,2)*Math.pow(c,2)*t,v=Math.exp(-d),_=ed(Math.pow(c,2),r);return(-i(c)+Dc>0?-1:1)*((h-m)*v)/_}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Dc+u*d},a=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const o=5/t,l=rA(i,a,o);if(t=Bt(t),isNaN(l))return{stiffness:ye.stiffness,damping:ye.damping,duration:t};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:r*2*Math.sqrt(s*c),duration:t}}}const aA=12;function rA(t,e,n){let s=n;for(let i=1;i<aA;i++)s=s-t(s)/e(s);return s}function ed(t,e){return t*Math.sqrt(1-e*e)}const oA=["duration","bounce"],lA=["stiffness","damping","mass"];function pp(t,e){return e.some(n=>t[n]!==void 0)}function cA(t){let e={velocity:ye.velocity,stiffness:ye.stiffness,damping:ye.damping,mass:ye.mass,isResolvedFromDuration:!1,...t};if(!pp(t,lA)&&pp(t,oA))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,a=2*cn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ye.mass,stiffness:i,damping:a}}else{const n=iA(t);e={...e,...n,mass:ye.mass},e.isResolvedFromDuration=!0}return e}function Zo(t=ye.visualDuration,e=ye.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const a=n.keyframes[0],r=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=cA({...n,velocity:-zt(n.velocity||0)}),v=h||0,_=c/(2*Math.sqrt(l*u)),b=r-a,p=zt(Math.sqrt(l/u)),g=Math.abs(b)<5;s||(s=g?ye.restSpeed.granular:ye.restSpeed.default),i||(i=g?ye.restDelta.granular:ye.restDelta.default);let y;if(_<1){const T=ed(p,_);y=j=>{const x=Math.exp(-_*p*j);return r-x*((v+_*p*b)/T*Math.sin(T*j)+b*Math.cos(T*j))}}else if(_===1)y=T=>r-Math.exp(-p*T)*(b+(v+p*b)*T);else{const T=p*Math.sqrt(_*_-1);y=j=>{const x=Math.exp(-_*p*j),E=Math.min(T*j,300);return r-x*((v+_*p*b)*Math.sinh(E)+T*b*Math.cosh(E))/T}}const S={calculatedDuration:m&&d||null,next:T=>{const j=y(T);if(m)o.done=T>=d;else{let x=T===0?v:0;_<1&&(x=T===0?Bt(v):V0(y,T,j));const E=Math.abs(x)<=s,A=Math.abs(r-j)<=i;o.done=E&&A}return o.value=o.done?r:j,o},toString:()=>{const T=Math.min(Bh(S),Qo),j=L0(x=>S.next(T*x).value,T,30);return T+"ms "+j},toTransition:()=>{}};return S}Zo.applyToOptions=t=>{const e=nA(t,100,Zo);return t.ease=e.ease,t.duration=Bt(e.duration),t.type="keyframes",t};function td({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:r,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},m=E=>o!==void 0&&E<o||l!==void 0&&E>l,v=E=>o===void 0?l:l===void 0||Math.abs(o-E)<Math.abs(l-E)?o:l;let _=n*e;const b=d+_,p=r===void 0?b:r(b);p!==b&&(_=p-d);const g=E=>-_*Math.exp(-E/s),y=E=>p+g(E),S=E=>{const A=g(E),C=y(E);h.done=Math.abs(A)<=c,h.value=h.done?p:C};let T,j;const x=E=>{m(h.value)&&(T=E,j=Zo({keyframes:[h.value,v(h.value)],velocity:V0(y,E,h.value),damping:i,stiffness:a,restDelta:c,restSpeed:u}))};return x(0),{calculatedDuration:null,next:E=>{let A=!1;return!j&&T===void 0&&(A=!0,S(E),x(E)),T!==void 0&&E>=T?j.next(E-T):(!A&&S(E),h)}}}function uA(t,e,n){const s=[],i=n||un.mix||P0,a=t.length-1;for(let r=0;r<a;r++){let o=i(t[r],t[r+1]);if(e){const l=Array.isArray(e)?e[r]||bt:e;o=Sr(l,o)}s.push(o)}return s}function dA(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const a=t.length;if(Oh(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const r=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=uA(e,s,i),l=o.length,c=u=>{if(r&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=Ka(t[d],t[d+1],u);return o[d](h)};return n?u=>c(cn(t[0],t[a-1],u)):c}function hA(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Ka(0,e,s);t.push(ge(n,1,i))}}function fA(t){const e=[0];return hA(e,t.length-1),e}function mA(t,e){return t.map(n=>n*e)}function pA(t,e){return t.map(()=>e||j0).splice(0,t.length-1)}function Aa({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=jj(s)?s.map(up):up(s),a={done:!1,value:e[0]},r=mA(n&&n.length===e.length?n:fA(e),t),o=dA(r,e,{ease:Array.isArray(i)?i:pA(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const gA=t=>t!==null;function zh(t,{repeat:e,repeatType:n="loop"},s,i=1){const a=t.filter(gA),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const yA={decay:td,inertia:td,tween:Aa,keyframes:Aa,spring:Zo};function B0(t){typeof t.type=="string"&&(t.type=yA[t.type])}class $h{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const vA=t=>t/100;class Gh extends $h{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Je.now()&&this.tick(Je.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;B0(e);const{type:n=Aa,repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:r=0}=e;let{keyframes:o}=e;const l=n||Aa;l!==Aa&&typeof o[0]!="number"&&(this.mixKeyframes=Sr(vA,P0(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-r})),c.calculatedDuration===null&&(c.calculatedDuration=Bh(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:a,mirroredGenerator:r,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:m,type:v,onUpdate:_,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const p=this.currentTime-c*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?p<0:p>i;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let y=this.currentTime,S=s;if(d){const E=Math.min(this.currentTime,i)/o;let A=Math.floor(E),C=E%1;!C&&E>=1&&(C=1),C===1&&A--,A=Math.min(A,d+1),!!(A%2)&&(h==="reverse"?(C=1-C,m&&(C-=m/o)):h==="mirror"&&(S=r)),y=cn(0,1,C)*o}const T=g?{done:!1,value:u[0]}:S.next(y);a&&(T.value=a(T.value));let{done:j}=T;!g&&l!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return x&&v!==td&&(T.value=zh(u,this.options,b,this.speed)),_&&_(T.value),x&&this.finish(),T}then(e,n){return this.finished.then(e,n)}get duration(){return zt(this.calculatedDuration)}get time(){return zt(this.currentTime)}set time(e){var n;e=Bt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Je.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zt(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=tA,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),(a=(i=this.options).onPlay)==null||a.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Je.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function _A(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ds=t=>t*180/Math.PI,nd=t=>{const e=ds(Math.atan2(t[1],t[0]));return sd(e)},bA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:nd,rotateZ:nd,skewX:t=>ds(Math.atan(t[1])),skewY:t=>ds(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},sd=t=>(t=t%360,t<0&&(t+=360),t),gp=nd,yp=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),vp=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),SA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yp,scaleY:vp,scale:t=>(yp(t)+vp(t))/2,rotateX:t=>sd(ds(Math.atan2(t[6],t[5]))),rotateY:t=>sd(ds(Math.atan2(-t[2],t[0]))),rotateZ:gp,rotate:gp,skewX:t=>ds(Math.atan(t[4])),skewY:t=>ds(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function id(t){return t.includes("scale")?1:0}function ad(t,e){if(!t||t==="none")return id(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=SA,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=bA,i=o}if(!i)return id(e);const a=s[e],r=i[1].split(",").map(xA);return typeof a=="function"?a(r):r[a]}const wA=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ad(n,e)};function xA(t){return parseFloat(t.trim())}const Gi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hi=new Set(Gi),_p=t=>t===$i||t===z,TA=new Set(["x","y","z"]),EA=Gi.filter(t=>!TA.has(t));function jA(t){const e=[];return EA.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const bs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ad(e,"x"),y:(t,{transform:e})=>ad(e,"y")};bs.translateX=bs.x;bs.translateY=bs.y;const Ss=new Set;let rd=!1,od=!1,ld=!1;function z0(){if(od){const t=Array.from(Ss).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=jA(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,r])=>{var o;(o=s.getValue(a))==null||o.set(r)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}od=!1,rd=!1,Ss.forEach(t=>t.complete(ld)),Ss.clear()}function $0(){Ss.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(od=!0)})}function AA(){ld=!0,$0(),z0(),ld=!1}class Hh{constructor(e,n,s,i,a,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(Ss.add(this),rd||(rd=!0,me.read($0),me.resolveKeyframes(z0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),r=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&n){const o=s.readValue(n,r);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=r),i&&a===void 0&&i.set(e[0])}_A(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ss.delete(this)}cancel(){this.state==="scheduled"&&(Ss.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const CA=t=>t.startsWith("--");function OA(t,e,n){CA(e)?t.style.setProperty(e,n):t.style[e]=n}const NA=Nh(()=>window.ScrollTimeline!==void 0),RA={};function DA(t,e){const n=Nh(t);return()=>RA[e]??n()}const G0=DA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),la=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,bp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:la([0,.65,.55,1]),circOut:la([.55,0,1,.45]),backIn:la([.31,.01,.66,-.59]),backOut:la([.33,1.53,.69,.99])};function H0(t,e){if(t)return typeof t=="function"?G0()?L0(t,e):"ease-out":A0(t)?la(t):Array.isArray(t)?t.map(n=>H0(n,e)||bp.easeOut):bp[t]}function MA(t,e,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:r="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const d=H0(o,i);Array.isArray(d)&&(u.easing=d);const h={delay:s,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:r==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(u,h)}function q0(t){return typeof t=="function"&&"applyToOptions"in t}function kA({type:t,...e}){return q0(t)&&G0()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class UA extends $h{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:a,allowFlatten:r=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=r,this.options=e,Oh(typeof e.type!="string");const c=kA(e);this.animation=MA(n,s,i,c,a),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const u=zh(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):OA(n,s,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return zt(Number(e))}get time(){return zt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Bt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&NA()?(this.animation.timeline=e,bt):n(this)}}const I0={anticipate:x0,backInOut:w0,circInOut:E0};function PA(t){return t in I0}function LA(t){typeof t.ease=="string"&&PA(t.ease)&&(t.ease=I0[t.ease])}const Sp=10;class VA extends UA{constructor(e){LA(e),B0(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:a,...r}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new Gh({...r,autoplay:!1}),l=Bt(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-Sp).value,o.sample(l).value,Sp),o.stop()}}const wp=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Fn.test(t)||t==="0")&&!t.startsWith("url("));function BA(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function zA(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],r=wp(i,e),o=wp(a,e);return!r||!o?!1:BA(t)||(n==="spring"||q0(n))&&s}const $A=new Set(["opacity","clipPath","filter","transform"]),GA=Nh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HA(t){var u;const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:a,type:r}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return GA()&&n&&$A.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&a!==0&&r!=="inertia"}const qA=40;class IA extends $h{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:r="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var v;super(),this.stop=()=>{var _,b;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Je.now();const h={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:r,name:l,motionValue:c,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||Hh;this.keyframeResolver=new m(o,(_,b,p)=>this.onKeyframesResolved(_,b,h,!p),l,c,u),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:a,type:r,velocity:o,delay:l,isHandoff:c,onUpdate:u}=s;this.resolvedAt=Je.now(),zA(e,a,r,o)||((un.instantAnimations||!l)&&(u==null||u(zh(e,s,n))),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>qA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},m=!c&&HA(h)?new VA({...h,element:h.motionValue.owner.current}):new Gh(h);m.finished.then(()=>this.notifyFinished()).catch(bt),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),AA()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const FA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YA(t){const e=FA.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function F0(t,e,n=1){const[s,i]=YA(t);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const r=a.trim();return m0(r)?parseFloat(r):r}return Uh(i)?F0(i,e,n+1):i}function qh(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Y0=new Set(["width","height","top","left","right","bottom",...Gi]),KA={test:t=>t==="auto",parse:t=>t},K0=t=>e=>e.test(t),X0=[$i,z,$t,_n,Bj,Vj,KA],xp=t=>X0.find(K0(t));function XA(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||g0(t):!0}const QA=new Set(["brightness","contrast","saturate","opacity"]);function ZA(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(Ph)||[];if(!s)return t;const i=n.replace(s,"");let a=QA.has(e)?1:0;return s!==n&&(a*=100),e+"("+a+i+")"}const JA=/\b([a-z-]*)\(.*?\)/gu,cd={...Fn,getAnimatableNone:t=>{const e=t.match(JA);return e?e.map(ZA).join(" "):t}},Tp={...$i,transform:Math.round},WA={rotate:_n,rotateX:_n,rotateY:_n,rotateZ:_n,scale:Kr,scaleX:Kr,scaleY:Kr,scaleZ:Kr,skew:_n,skewX:_n,skewY:_n,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:Xa,originX:dp,originY:dp,originZ:z},Ih={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,backgroundPositionX:z,backgroundPositionY:z,...WA,zIndex:Tp,fillOpacity:Xa,strokeOpacity:Xa,numOctaves:Tp},eC={...Ih,color:xe,backgroundColor:xe,outlineColor:xe,fill:xe,stroke:xe,borderColor:xe,borderTopColor:xe,borderRightColor:xe,borderBottomColor:xe,borderLeftColor:xe,filter:cd,WebkitFilter:cd},Q0=t=>eC[t];function Z0(t,e){let n=Q0(t);return n!==cd&&(n=Fn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const tC=new Set(["auto","none","0"]);function nC(t,e,n){let s=0,i;for(;s<t.length&&!i;){const a=t[s];typeof a=="string"&&!tC.has(a)&&Qa(a).values.length&&(i=t[s]),s++}if(i&&n)for(const a of e)t[a]=Z0(n,i)}class sC extends Hh{constructor(e,n,s,i,a){super(e,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Uh(c))){const u=F0(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Y0.has(s)||e.length!==2)return;const[i,a]=e,r=xp(i),o=xp(a);if(r!==o)if(_p(r)&&_p(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else bs[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||XA(e[i]))&&s.push(i);s.length&&nC(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bs[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,r=s[a];s[a]=bs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=r),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function iC(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=(n==null?void 0:n[t])??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const J0=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function W0(t){return p0(t)&&"offsetHeight"in t}const Ep=30,aC=t=>!isNaN(parseFloat(t));class rC{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{var r,o;const a=Je.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Je.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=aC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Rh);const s=this.events[e].add(n);return e==="change"?()=>{s(),me.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Je.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ep)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ep);return y0(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Oi(t,e){return new rC(t,e)}const{schedule:Fh}=C0(queueMicrotask,!1),jt={x:!1,y:!1};function eb(){return jt.x||jt.y}function oC(t){return t==="x"||t==="y"?jt[t]?null:(jt[t]=!0,()=>{jt[t]=!1}):jt.x||jt.y?null:(jt.x=jt.y=!0,()=>{jt.x=jt.y=!1})}function tb(t,e){const n=iC(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function jp(t){return!(t.pointerType==="touch"||eb())}function lC(t,e,n={}){const[s,i,a]=tb(t,n),r=o=>{if(!jp(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const u=d=>{jp(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return s.forEach(o=>{o.addEventListener("pointerenter",r,i)}),a}const nb=(t,e)=>e?t===e?!0:nb(t,e.parentElement):!1,Yh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,cC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function uC(t){return cC.has(t.tagName)||t.tabIndex!==-1}const fo=new WeakSet;function Ap(t){return e=>{e.key==="Enter"&&t(e)}}function Mc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dC=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Ap(()=>{if(fo.has(n))return;Mc(n,"down");const i=Ap(()=>{Mc(n,"up")}),a=()=>Mc(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Cp(t){return Yh(t)&&!eb()}function hC(t,e,n={}){const[s,i,a]=tb(t,n),r=o=>{const l=o.currentTarget;if(!Cp(o))return;fo.add(l);const c=e(l,o),u=(m,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),fo.has(l)&&fo.delete(l),Cp(m)&&typeof c=="function"&&c(m,{success:v})},d=m=>{u(m,l===window||l===document||n.useGlobalTarget||nb(l,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return s.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",r,i),W0(o)&&(o.addEventListener("focus",c=>dC(c,i)),!uC(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function sb(t){return p0(t)&&"ownerSVGElement"in t}function fC(t){return sb(t)&&t.tagName==="svg"}const Ge=t=>!!(t&&t.getVelocity),mC=[...X0,xe,Fn],pC=t=>mC.find(K0(t)),Kh=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class gC extends w.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=W0(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function yC({children:t,isPresent:e,anchorX:n,root:s}){const i=w.useId(),a=w.useRef(null),r=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=w.useContext(Kh);return w.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:d,right:h}=r.current;if(e||!a.current||!l||!c)return;const m=n==="left"?`left: ${d}`:`right: ${h}`;a.current.dataset.motionPopId=i;const v=document.createElement("style");o&&(v.nonce=o);const _=s??document.head;return _.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{_.contains(v)&&_.removeChild(v)}},[e]),f.jsx(gC,{isPresent:e,childRef:a,sizeRef:r,children:w.cloneElement(t,{ref:a})})}const vC=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:r,anchorX:o,root:l})=>{const c=Eh(_C),u=w.useId();let d=!0,h=w.useMemo(()=>(d=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:m=>{c.set(m,!0);for(const v of c.values())if(!v)return;s&&s()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[n,c,s]);return a&&d&&(h={...h}),w.useMemo(()=>{c.forEach((m,v)=>c.set(v,!1))},[n]),w.useEffect(()=>{!n&&!c.size&&s&&s()},[n]),r==="popLayout"&&(t=f.jsx(yC,{isPresent:n,anchorX:o,root:l,children:t})),f.jsx(Nl.Provider,{value:h,children:t})};function _C(){return new Map}function ib(t=!0){const e=w.useContext(Nl);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,a=w.useId();w.useEffect(()=>{if(t)return i(a)},[t]);const r=w.useCallback(()=>t&&s&&s(a),[a,s,t]);return!n&&s?[!1,r]:[!0]}const Xr=t=>t.key||"";function Op(t){const e=[];return w.Children.forEach(t,n=>{w.isValidElement(n)&&e.push(n)}),e}const Qr=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync",propagate:r=!1,anchorX:o="left",root:l})=>{const[c,u]=ib(r),d=w.useMemo(()=>Op(t),[t]),h=r&&!c?[]:d.map(Xr),m=w.useRef(!0),v=w.useRef(d),_=Eh(()=>new Map),[b,p]=w.useState(d),[g,y]=w.useState(d);f0(()=>{m.current=!1,v.current=d;for(let j=0;j<g.length;j++){const x=Xr(g[j]);h.includes(x)?_.delete(x):_.get(x)!==!0&&_.set(x,!1)}},[g,h.length,h.join("-")]);const S=[];if(d!==b){let j=[...d];for(let x=0;x<g.length;x++){const E=g[x],A=Xr(E);h.includes(A)||(j.splice(x,0,E),S.push(E))}return a==="wait"&&S.length&&(j=S),y(Op(j)),p(d),null}const{forceRender:T}=w.useContext(Th);return f.jsx(f.Fragment,{children:g.map(j=>{const x=Xr(j),E=r&&!c?!1:d===g||h.includes(x),A=()=>{if(_.has(x))_.set(x,!0);else return;let C=!0;_.forEach(N=>{N||(C=!1)}),C&&(T==null||T(),y(v.current),r&&(u==null||u()),s&&s())};return f.jsx(vC,{isPresent:E,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:l,onExitComplete:E?void 0:A,anchorX:o,children:j},x)})})},ab=w.createContext({strict:!1}),Np={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ni={};for(const t in Np)Ni[t]={isEnabled:e=>Np[t].some(n=>!!e[n])};function bC(t){for(const e in t)Ni[e]={...Ni[e],...t[e]}}const SC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jo(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||SC.has(t)}let rb=t=>!Jo(t);function wC(t){typeof t=="function"&&(rb=e=>e.startsWith("on")?!Jo(e):t(e))}try{wC(require("@emotion/is-prop-valid").default)}catch{}function xC(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(rb(i)||n===!0&&Jo(i)||!e&&!Jo(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Rl=w.createContext({});function Dl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Za(t){return typeof t=="string"||Array.isArray(t)}const Xh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qh=["initial",...Xh];function Ml(t){return Dl(t.animate)||Qh.some(e=>Za(t[e]))}function ob(t){return!!(Ml(t)||t.variants)}function TC(t,e){if(Ml(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Za(n)?n:void 0,animate:Za(s)?s:void 0}}return t.inherit!==!1?e:{}}function EC(t){const{initial:e,animate:n}=TC(t,w.useContext(Rl));return w.useMemo(()=>({initial:e,animate:n}),[Rp(e),Rp(n)])}function Rp(t){return Array.isArray(t)?t.join(" "):t}const Ja={};function jC(t){for(const e in t)Ja[e]=t[e],kh(e)&&(Ja[e].isCSSVariable=!0)}function lb(t,{layout:e,layoutId:n}){return Hi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ja[t]||t==="opacity")}const AC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},CC=Gi.length;function OC(t,e,n){let s="",i=!0;for(let a=0;a<CC;a++){const r=Gi[a],o=t[r];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(r.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=J0(o,Ih[r]);if(!l){i=!1;const u=AC[r]||r;s+=`${u}(${c}) `}n&&(e[r]=c)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function Zh(t,e,n){const{style:s,vars:i,transformOrigin:a}=t;let r=!1,o=!1;for(const l in e){const c=e[l];if(Hi.has(l)){r=!0;continue}else if(kh(l)){i[l]=c;continue}else{const u=J0(c,Ih[l]);l.startsWith("origin")?(o=!0,a[l]=u):s[l]=u}}if(e.transform||(r||n?s.transform=OC(e,t.transform,n):s.transform&&(s.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=a;s.transformOrigin=`${l} ${c} ${u}`}}const Jh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cb(t,e,n){for(const s in e)!Ge(e[s])&&!lb(s,n)&&(t[s]=e[s])}function NC({transformTemplate:t},e){return w.useMemo(()=>{const n=Jh();return Zh(n,e,t),Object.assign({},n.vars,n.style)},[e])}function RC(t,e){const n=t.style||{},s={};return cb(s,n,t),Object.assign(s,NC(t,e)),s}function DC(t,e){const n={},s=RC(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const MC={offset:"stroke-dashoffset",array:"stroke-dasharray"},kC={offset:"strokeDashoffset",array:"strokeDasharray"};function UC(t,e,n=1,s=0,i=!0){t.pathLength=1;const a=i?MC:kC;t[a.offset]=z.transform(-s);const r=z.transform(e),o=z.transform(n);t[a.array]=`${r} ${o}`}function ub(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:a=1,pathOffset:r=0,...o},l,c,u){if(Zh(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),s!==void 0&&(d.scale=s),i!==void 0&&UC(d,i,a,r,!1)}const db=()=>({...Jh(),attrs:{}}),hb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PC(t,e,n,s){const i=w.useMemo(()=>{const a=db();return ub(a,e,hb(s),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};cb(a,t.style,t),i.style={...a,...i.style}}return i}const LC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Wh(t){return typeof t!="string"||t.includes("-")?!1:!!(LC.indexOf(t)>-1||/[A-Z]/u.test(t))}function VC(t,e,n,{latestValues:s},i,a=!1){const o=(Wh(t)?PC:DC)(e,s,i,t),l=xC(e,typeof t=="string",a),c=t!==w.Fragment?{...l,...o,ref:n}:{},{children:u}=e,d=w.useMemo(()=>Ge(u)?u.get():u,[u]);return w.createElement(t,{...c,children:d})}function Dp(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function ef(t,e,n,s){if(typeof e=="function"){const[i,a]=Dp(s);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Dp(s);e=e(n!==void 0?n:t.custom,i,a)}return e}function mo(t){return Ge(t)?t.get():t}function BC({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:zC(n,s,i,t),renderState:e()}}function zC(t,e,n,s){const i={},a=s(t,{});for(const h in a)i[h]=mo(a[h]);let{initial:r,animate:o}=t;const l=Ml(t),c=ob(t);e&&c&&!l&&t.inherit!==!1&&(r===void 0&&(r=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||r===!1;const d=u?o:r;if(d&&typeof d!="boolean"&&!Dl(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const v=ef(t,h[m]);if(v){const{transitionEnd:_,transition:b,...p}=v;for(const g in p){let y=p[g];if(Array.isArray(y)){const S=u?y.length-1:0;y=y[S]}y!==null&&(i[g]=y)}for(const g in _)i[g]=_[g]}}}return i}const fb=t=>(e,n)=>{const s=w.useContext(Rl),i=w.useContext(Nl),a=()=>BC(t,e,s,i);return n?a():Eh(a)};function tf(t,e,n){var a;const{style:s}=t,i={};for(const r in s)(Ge(s[r])||e.style&&Ge(e.style[r])||lb(r,t)||((a=n==null?void 0:n.getValue(r))==null?void 0:a.liveStyle)!==void 0)&&(i[r]=s[r]);return i}const $C=fb({scrapeMotionValuesFromProps:tf,createRenderState:Jh});function mb(t,e,n){const s=tf(t,e,n);for(const i in t)if(Ge(t[i])||Ge(e[i])){const a=Gi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=t[i]}return s}const GC=fb({scrapeMotionValuesFromProps:mb,createRenderState:db}),HC=Symbol.for("motionComponentSymbol");function ai(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qC(t,e,n){return w.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):ai(n)&&(n.current=s))},[e])}const nf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),IC="framerAppearId",pb="data-"+nf(IC),gb=w.createContext({});function FC(t,e,n,s,i){var _,b;const{visualElement:a}=w.useContext(Rl),r=w.useContext(ab),o=w.useContext(Nl),l=w.useContext(Kh).reducedMotion,c=w.useRef(null);s=s||r.renderer,!c.current&&s&&(c.current=s(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=w.useContext(gb);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&YC(c.current,n,i,d);const h=w.useRef(!1);w.useInsertionEffect(()=>{u&&h.current&&u.update(n,o)});const m=n[pb],v=w.useRef(!!m&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,m))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,m)));return f0(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),v.current&&u.animationState&&u.animationState.animateChanges())}),w.useEffect(()=>{u&&(!v.current&&u.animationState&&u.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)==null||p.call(window,m)}),v.current=!1))}),u}function YC(t,e,n,s){const{layoutId:i,layout:a,drag:r,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:yb(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!r||o&&ai(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:u,layoutScroll:l,layoutRoot:c})}function yb(t){if(t)return t.options.allowProjection!==!1?t.projection:yb(t.parent)}function kc(t,{forwardMotionProps:e=!1}={},n,s){n&&bC(n);const i=Wh(t)?GC:$C;function a(o,l){let c;const u={...w.useContext(Kh),...o,layoutId:KC(o)},{isStatic:d}=u,h=EC(o),m=i(o,d);if(!d&&jh){XC();const v=QC(u);c=v.MeasureLayout,h.visualElement=FC(t,m,u,s,v.ProjectionNode)}return f.jsxs(Rl.Provider,{value:h,children:[c&&h.visualElement?f.jsx(c,{visualElement:h.visualElement,...u}):null,VC(t,o,qC(m,h.visualElement,l),m,d,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const r=w.forwardRef(a);return r[HC]=t,r}function KC({layoutId:t}){const e=w.useContext(Th).id;return e&&t!==void 0?e+"-"+t:t}function XC(t,e){w.useContext(ab).strict}function QC(t){const{drag:e,layout:n}=Ni;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function ZC(t,e){if(typeof Proxy>"u")return kc;const n=new Map,s=(a,r)=>kc(a,r,t,e),i=(a,r)=>s(a,r);return new Proxy(i,{get:(a,r)=>r==="create"?s:(n.has(r)||n.set(r,kc(r,void 0,t,e)),n.get(r))})}function vb({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function JC({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function WC(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Uc(t){return t===void 0||t===1}function ud({scale:t,scaleX:e,scaleY:n}){return!Uc(t)||!Uc(e)||!Uc(n)}function rs(t){return ud(t)||_b(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _b(t){return Mp(t.x)||Mp(t.y)}function Mp(t){return t&&t!=="0%"}function Wo(t,e,n){const s=t-n,i=e*s;return n+i}function kp(t,e,n,s,i){return i!==void 0&&(t=Wo(t,i,s)),Wo(t,n,s)+e}function dd(t,e=0,n=1,s,i){t.min=kp(t.min,e,n,s,i),t.max=kp(t.max,e,n,s,i)}function bb(t,{x:e,y:n}){dd(t.x,e.translate,e.scale,e.originPoint),dd(t.y,n.translate,n.scale,n.originPoint)}const Up=.999999999999,Pp=1.0000000000001;function eO(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,r;for(let o=0;o<i;o++){a=n[o],r=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&oi(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),r&&(e.x*=r.x.scale,e.y*=r.y.scale,bb(t,r)),s&&rs(a.latestValues)&&oi(t,a.latestValues))}e.x<Pp&&e.x>Up&&(e.x=1),e.y<Pp&&e.y>Up&&(e.y=1)}function ri(t,e){t.min=t.min+e,t.max=t.max+e}function Lp(t,e,n,s,i=.5){const a=ge(t.min,t.max,i);dd(t,e,n,a,s)}function oi(t,e){Lp(t.x,e.x,e.scaleX,e.scale,e.originX),Lp(t.y,e.y,e.scaleY,e.scale,e.originY)}function Sb(t,e){return vb(WC(t.getBoundingClientRect(),e))}function tO(t,e,n){const s=Sb(t,n),{scroll:i}=e;return i&&(ri(s.x,i.offset.x),ri(s.y,i.offset.y)),s}const Vp=()=>({translate:0,scale:1,origin:0,originPoint:0}),li=()=>({x:Vp(),y:Vp()}),Bp=()=>({min:0,max:0}),Se=()=>({x:Bp(),y:Bp()}),hd={current:null},wb={current:!1};function nO(){if(wb.current=!0,!!jh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>hd.current=t.matches;t.addEventListener("change",e),e()}else hd.current=!1}const sO=new WeakMap;function iO(t,e,n){for(const s in e){const i=e[s],a=n[s];if(Ge(i))t.addValue(s,i);else if(Ge(a))t.addValue(s,Oi(i,{owner:t}));else if(a!==i)if(t.hasValue(s)){const r=t.getValue(s);r.liveStyle===!0?r.jump(i):r.hasAnimated||r.set(i)}else{const r=t.getStaticValue(s);t.addValue(s,Oi(r!==void 0?r:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const zp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aO{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Je.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,me.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=r;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Ml(n),this.isVariantNode=ob(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const m=d[h];l[h]!==void 0&&Ge(m)&&m.set(l[h],!1)}}mount(e){this.current=e,sO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),wb.current||nO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),In(this.notifyUpdate),In(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Hi.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&me.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ni){const n=Ni[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Se()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<zp.length;s++){const i=zp[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,r=e[a];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=iO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Oi(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(m0(s)||g0(s))?s=parseFloat(s):!pC(s)&&Fn.test(n)&&(s=Z0(e,n)),this.setBaseTarget(e,Ge(s)?s.get():s)),Ge(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const r=ef(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);r&&(s=r[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ge(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Rh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Fh.render(this.render)}}class xb extends aO{constructor(){super(...arguments),this.KeyframeResolver=sC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ge(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Tb(t,{style:e,vars:n},s,i){const a=t.style;let r;for(r in e)a[r]=e[r];i==null||i.applyProjectionStyles(a,s);for(r in n)a.setProperty(r,n[r])}function rO(t){return window.getComputedStyle(t)}class oO extends xb{constructor(){super(...arguments),this.type="html",this.renderInstance=Tb}readValueFromInstance(e,n){var s;if(Hi.has(n))return(s=this.projection)!=null&&s.isProjecting?id(n):wA(e,n);{const i=rO(e),a=(kh(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Sb(e,n)}build(e,n,s){Zh(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return tf(e,n,s)}}const Eb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lO(t,e,n,s){Tb(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(Eb.has(i)?i:nf(i),e.attrs[i])}class cO extends xb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Se}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Hi.has(n)){const s=Q0(n);return s&&s.default||0}return n=Eb.has(n)?n:nf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return mb(e,n,s)}build(e,n,s){ub(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){lO(e,n,s,i)}mount(e){this.isSVGTag=hb(e.tagName),super.mount(e)}}const uO=(t,e)=>Wh(t)?new cO(e):new oO(e,{allowProjection:t!==w.Fragment});function Wa(t,e,n){const s=t.getProps();return ef(s,e,n!==void 0?n:s.custom,t)}const fd=t=>Array.isArray(t);function dO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Oi(n))}function hO(t){return fd(t)?t[t.length-1]||0:t}function fO(t,e){const n=Wa(t,e);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const r in a){const o=hO(a[r]);dO(t,r,o)}}function mO(t){return!!(Ge(t)&&t.add)}function md(t,e){const n=t.getValue("willChange");if(mO(n))return n.add(e);if(!n&&un.WillChange){const s=new un.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function jb(t){return t.props[pb]}const pO=t=>t!==null;function gO(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(pO),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const yO={type:"spring",stiffness:500,damping:25,restSpeed:10},vO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_O={type:"keyframes",duration:.8},bO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SO=(t,{keyframes:e})=>e.length>2?_O:Hi.has(t)?t.startsWith("scale")?vO(e[1]):yO:bO;function wO({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:r,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const sf=(t,e,n,s={},i,a)=>r=>{const o=qh(s,t)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c=c-Bt(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{r(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};wO(o)||Object.assign(u,SO(t,u)),u.duration&&(u.duration=Bt(u.duration)),u.repeatDelay&&(u.repeatDelay=Bt(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),(un.instantAnimations||un.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!a&&e.get()!==void 0){const h=gO(u.keyframes,o);if(h!==void 0){me.update(()=>{u.onUpdate(h),u.onComplete()});return}}return o.isSync?new Gh(u):new IA(u)};function xO({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Ab(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:r,...o}=e;s&&(a=s);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in o){const d=t.getValue(u,t.latestValues[u]??null),h=o[u];if(h===void 0||c&&xO(c,u))continue;const m={delay:n,...qh(a||{},u)},v=d.get();if(v!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===v&&!m.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const p=jb(t);if(p){const g=window.MotionHandoffAnimation(p,u,me);g!==null&&(m.startTime=g,_=!0)}}md(t,u),d.start(sf(u,d,h,t.shouldReduceMotion&&Y0.has(u)?{type:!1}:m,t,_));const b=d.animation;b&&l.push(b)}return r&&Promise.all(l).then(()=>{me.update(()=>{r&&fO(t,r)})}),l}function pd(t,e,n={}){var l;const s=Wa(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const a=s?()=>Promise.all(Ab(t,s,n)):()=>Promise.resolve(),r=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return TO(t,e,c,u,d,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,r]:[r,a];return c().then(()=>u())}else return Promise.all([a(),r(n.delay)])}function TO(t,e,n=0,s=0,i=0,a=1,r){const o=[],l=t.variantChildren.size,c=(l-1)*i,u=typeof s=="function",d=u?h=>s(h,l):a===1?(h=0)=>h*i:(h=0)=>c-h*i;return Array.from(t.variantChildren).sort(EO).forEach((h,m)=>{h.notify("AnimationStart",e),o.push(pd(h,e,{...r,delay:n+(u?0:s)+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function EO(t,e){return t.sortNodePosition(e)}function jO(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(a=>pd(t,a,n));s=Promise.all(i)}else if(typeof e=="string")s=pd(t,e,n);else{const i=typeof e=="function"?Wa(t,e,n.custom):e;s=Promise.all(Ab(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Cb(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const AO=Qh.length;function Ob(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ob(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<AO;n++){const s=Qh[n],i=t.props[s];(Za(i)||i===!1)&&(e[s]=i)}return e}const CO=[...Xh].reverse(),OO=Xh.length;function NO(t){return e=>Promise.all(e.map(({animation:n,options:s})=>jO(t,n,s)))}function RO(t){let e=NO(t),n=$p(),s=!0;const i=l=>(c,u)=>{var h;const d=Wa(t,u,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:v,..._}=d;c={...c,..._,...v}}return c};function a(l){e=l(t)}function r(l){const{props:c}=t,u=Ob(t.parent)||{},d=[],h=new Set;let m={},v=1/0;for(let b=0;b<OO;b++){const p=CO[b],g=n[p],y=c[p]!==void 0?c[p]:u[p],S=Za(y),T=p===l?g.isActive:null;T===!1&&(v=b);let j=y===u[p]&&y!==c[p]&&S;if(j&&s&&t.manuallyAnimateOnMount&&(j=!1),g.protectedKeys={...m},!g.isActive&&T===null||!y&&!g.prevProp||Dl(y)||typeof y=="boolean")continue;const x=DO(g.prevProp,y);let E=x||p===l&&g.isActive&&!j&&S||b>v&&S,A=!1;const C=Array.isArray(y)?y:[y];let N=C.reduce(i(p),{});T===!1&&(N={});const{prevResolvedValues:U={}}=g,P={...U,...N},V=M=>{E=!0,h.has(M)&&(A=!0,h.delete(M)),g.needsAnimating[M]=!0;const D=t.getValue(M);D&&(D.liveStyle=!1)};for(const M in P){const D=N[M],L=U[M];if(m.hasOwnProperty(M))continue;let I=!1;fd(D)&&fd(L)?I=!Cb(D,L):I=D!==L,I?D!=null?V(M):h.add(M):D!==void 0&&h.has(M)?V(M):g.protectedKeys[M]=!0}g.prevProp=y,g.prevResolvedValues=N,g.isActive&&(m={...m,...N}),s&&t.blockInitialAnimation&&(E=!1),E&&(!(j&&x)||A)&&d.push(...C.map(M=>({animation:M,options:{type:p}})))}if(h.size){const b={};if(typeof c.initial!="boolean"){const p=Wa(t,Array.isArray(c.initial)?c.initial[0]:c.initial);p&&p.transition&&(b.transition=p.transition)}h.forEach(p=>{const g=t.getBaseTarget(p),y=t.getValue(p);y&&(y.liveStyle=!0),b[p]=g??null}),d.push({animation:b})}let _=!!d.length;return s&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),s=!1,_?e(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const u=r(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:r,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=$p(),s=!0}}}function DO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Cb(e,t):!1}function ts(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $p(){return{animate:ts(!0),whileInView:ts(),whileHover:ts(),whileTap:ts(),whileDrag:ts(),whileFocus:ts(),exit:ts()}}class Zn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class MO extends Zn{constructor(e){super(e),e.animationState||(e.animationState=RO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Dl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let kO=0;class UO extends Zn{constructor(){super(...arguments),this.id=kO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const PO={animation:{Feature:MO},exit:{Feature:UO}};function er(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Tr(t){return{point:{x:t.pageX,y:t.pageY}}}const LO=t=>e=>Yh(e)&&t(e,Tr(e));function Ca(t,e,n,s){return er(t,e,LO(n),s)}const Nb=1e-4,VO=1-Nb,BO=1+Nb,Rb=.01,zO=0-Rb,$O=0+Rb;function Ie(t){return t.max-t.min}function GO(t,e,n){return Math.abs(t-e)<=n}function Gp(t,e,n,s=.5){t.origin=s,t.originPoint=ge(e.min,e.max,t.origin),t.scale=Ie(n)/Ie(e),t.translate=ge(n.min,n.max,t.origin)-t.originPoint,(t.scale>=VO&&t.scale<=BO||isNaN(t.scale))&&(t.scale=1),(t.translate>=zO&&t.translate<=$O||isNaN(t.translate))&&(t.translate=0)}function Oa(t,e,n,s){Gp(t.x,e.x,n.x,s?s.originX:void 0),Gp(t.y,e.y,n.y,s?s.originY:void 0)}function Hp(t,e,n){t.min=n.min+e.min,t.max=t.min+Ie(e)}function HO(t,e,n){Hp(t.x,e.x,n.x),Hp(t.y,e.y,n.y)}function qp(t,e,n){t.min=e.min-n.min,t.max=t.min+Ie(e)}function Na(t,e,n){qp(t.x,e.x,n.x),qp(t.y,e.y,n.y)}function ht(t){return[t("x"),t("y")]}const Db=({current:t})=>t?t.ownerDocument.defaultView:null,Ip=(t,e)=>Math.abs(t-e);function qO(t,e){const n=Ip(t.x,e.x),s=Ip(t.y,e.y);return Math.sqrt(n**2+s**2)}class Mb{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Lc(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,v=qO(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!v)return;const{point:_}=h,{timestamp:b}=Ue;this.history.push({..._,timestamp:b});const{onStart:p,onMove:g}=this.handlers;m||(p&&p(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Pc(m,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:v,onSessionEnd:_,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Lc(h.type==="pointercancel"?this.lastMoveEventInfo:Pc(m,this.transformPagePoint),this.history);this.startEvent&&v&&v(h,p),_&&_(h,p)},!Yh(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=i||window;const o=Tr(e),l=Pc(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ue;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,Lc(l,this.history)),this.removeListeners=Sr(Ca(this.contextWindow,"pointermove",this.handlePointerMove),Ca(this.contextWindow,"pointerup",this.handlePointerUp),Ca(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),In(this.updatePoint)}}function Pc(t,e){return e?{point:e(t.point)}:t}function Fp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Lc({point:t},e){return{point:t,delta:Fp(t,kb(e)),offset:Fp(t,IO(e)),velocity:FO(e,.1)}}function IO(t){return t[0]}function kb(t){return t[t.length-1]}function FO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=kb(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>Bt(e)));)n--;if(!s)return{x:0,y:0};const a=zt(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const r={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function YO(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?ge(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?ge(n,t,s.max):Math.min(t,n)),t}function Yp(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function KO(t,{top:e,left:n,bottom:s,right:i}){return{x:Yp(t.x,n,i),y:Yp(t.y,e,s)}}function Kp(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function XO(t,e){return{x:Kp(t.x,e.x),y:Kp(t.y,e.y)}}function QO(t,e){let n=.5;const s=Ie(t),i=Ie(e);return i>s?n=Ka(e.min,e.max-s,t.min):s>i&&(n=Ka(t.min,t.max-i,e.min)),cn(0,1,n)}function ZO(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const gd=.35;function JO(t=gd){return t===!1?t=0:t===!0&&(t=gd),{x:Xp(t,"left","right"),y:Xp(t,"top","bottom")}}function Xp(t,e,n){return{min:Qp(t,e),max:Qp(t,n)}}function Qp(t,e){return typeof t=="number"?t:t[e]||0}const WO=new WeakMap;class eN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Se(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Tr(d).point)},r=(d,h)=>{const{drag:m,dragPropagation:v,onDragStart:_}=this.getProps();if(m&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oC(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ht(p=>{let g=this.getAxisMotionValue(p).get()||0;if($t.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const S=y.layout.layoutBox[p];S&&(g=Ie(S)*(parseFloat(g)/100))}}this.originPoint[p]=g}),_&&me.postRender(()=>_(d,h)),md(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:_,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:p}=h;if(v&&this.currentDirection===null){this.currentDirection=tN(p),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,p),this.updateAxis("y",h.point,p),this.visualElement.render(),b&&b(d,h)},l=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ht(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Mb(e,{onSessionStart:a,onStart:r,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:s,contextWindow:Db(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!s)return;const{velocity:r}=i;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&me.postRender(()=>o(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!Zr(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let r=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(r=YO(r,this.constraints[e],this.elastic[e])),a.set(r)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&ai(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=KO(s.layoutBox,e):this.constraints=!1,this.elastic=JO(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ht(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=ZO(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ai(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=tO(s,i.root,this.visualElement.getTransformPagePoint());let r=XO(i.layout.layoutBox,a);if(n){const o=n(JC(r));this.hasMutatedConstraints=!!o,o&&(r=vb(o))}return r}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:r,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=ht(u=>{if(!Zr(u,n,this.currentDirection))return;let d=l&&l[u]||{};r&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:s?e[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return md(this.visualElement,e),s.start(sf(e,s,0,n,this.visualElement,!1))}stopAnimation(){ht(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ht(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ht(n=>{const{drag:s}=this.getProps();if(!Zr(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:r,max:o}=i.layout.layoutBox[n];a.set(e[n]-ge(r,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!ai(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ht(r=>{const o=this.getAxisMotionValue(r);if(o&&this.constraints!==!1){const l=o.get();i[r]=QO({min:l,max:l},this.constraints[r])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ht(r=>{if(!Zr(r,e,null))return;const o=this.getAxisMotionValue(r),{min:l,max:c}=this.constraints[r];o.set(ge(l,c,i[r]))})}addListeners(){if(!this.visualElement.current)return;WO.set(this.visualElement,this);const e=this.visualElement.current,n=Ca(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();ai(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),me.read(s);const r=er(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ht(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{r(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:r=gd,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:r,dragMomentum:o}}}function Zr(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function tN(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class nN extends Zn{constructor(e){super(e),this.removeGroupControls=bt,this.removeListeners=bt,this.controls=new eN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zp=t=>(e,n)=>{t&&me.postRender(()=>t(e,n))};class sN extends Zn{constructor(){super(...arguments),this.removePointerDownListener=bt}onPointerDown(e){this.session=new Mb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Db(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Zp(e),onStart:Zp(n),onMove:s,onEnd:(a,r)=>{delete this.session,i&&me.postRender(()=>i(a,r))}}}mount(){this.removePointerDownListener=Ca(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const po={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Jp(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ea={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(z.test(t))t=parseFloat(t);else return t;const n=Jp(t,e.target.x),s=Jp(t,e.target.y);return`${n}% ${s}%`}},iN={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Fn.parse(t);if(i.length>5)return s;const a=Fn.createTransformer(t),r=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+r]/=o,i[1+r]/=l;const c=ge(o,l,.5);return typeof i[2+r]=="number"&&(i[2+r]/=c),typeof i[3+r]=="number"&&(i[3+r]/=c),a(i)}};let Wp=!1;class aN extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=e;jC(rN),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),Wp&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),po.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,{projection:r}=s;return r&&(r.isPresent=a,Wp=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?r.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?r.promote():r.relegate()||me.postRender(()=>{const o=r.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fh.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ub(t){const[e,n]=ib(),s=w.useContext(Th);return f.jsx(aN,{...t,layoutGroup:s,switchLayoutGroup:w.useContext(gb),isPresent:e,safeToRemove:n})}const rN={borderRadius:{...ea,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ea,borderTopRightRadius:ea,borderBottomLeftRadius:ea,borderBottomRightRadius:ea,boxShadow:iN};function oN(t,e,n){const s=Ge(t)?t:Oi(t);return s.start(sf("",s,e,n)),s.animation}const lN=(t,e)=>t.depth-e.depth;class cN{constructor(){this.children=[],this.isDirty=!1}add(e){Ah(this.children,e),this.isDirty=!0}remove(e){Ch(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lN),this.isDirty=!1,this.children.forEach(e)}}function uN(t,e){const n=Je.now(),s=({timestamp:i})=>{const a=i-n;a>=e&&(In(s),t(a-e))};return me.setup(s,!0),()=>In(s)}const Pb=["TopLeft","TopRight","BottomLeft","BottomRight"],dN=Pb.length,eg=t=>typeof t=="string"?parseFloat(t):t,tg=t=>typeof t=="number"||z.test(t);function hN(t,e,n,s,i,a){i?(t.opacity=ge(0,n.opacity??1,fN(s)),t.opacityExit=ge(e.opacity??1,0,mN(s))):a&&(t.opacity=ge(e.opacity??1,n.opacity??1,s));for(let r=0;r<dN;r++){const o=`border${Pb[r]}Radius`;let l=ng(e,o),c=ng(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||tg(l)===tg(c)?(t[o]=Math.max(ge(eg(l),eg(c),s),0),($t.test(c)||$t.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=ge(e.rotate||0,n.rotate||0,s))}function ng(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fN=Lb(0,.5,T0),mN=Lb(.5,.95,bt);function Lb(t,e,n){return s=>s<t?0:s>e?1:n(Ka(t,e,s))}function sg(t,e){t.min=e.min,t.max=e.max}function dt(t,e){sg(t.x,e.x),sg(t.y,e.y)}function ig(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ag(t,e,n,s,i){return t-=e,t=Wo(t,1/n,s),i!==void 0&&(t=Wo(t,1/i,s)),t}function pN(t,e=0,n=1,s=.5,i,a=t,r=t){if($t.test(e)&&(e=parseFloat(e),e=ge(r.min,r.max,e/100)-r.min),typeof e!="number")return;let o=ge(a.min,a.max,s);t===a&&(o-=e),t.min=ag(t.min,e,n,o,i),t.max=ag(t.max,e,n,o,i)}function rg(t,e,[n,s,i],a,r){pN(t,e[n],e[s],e[i],e.scale,a,r)}const gN=["x","scaleX","originX"],yN=["y","scaleY","originY"];function og(t,e,n,s){rg(t.x,e,gN,n?n.x:void 0,s?s.x:void 0),rg(t.y,e,yN,n?n.y:void 0,s?s.y:void 0)}function lg(t){return t.translate===0&&t.scale===1}function Vb(t){return lg(t.x)&&lg(t.y)}function cg(t,e){return t.min===e.min&&t.max===e.max}function vN(t,e){return cg(t.x,e.x)&&cg(t.y,e.y)}function ug(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Bb(t,e){return ug(t.x,e.x)&&ug(t.y,e.y)}function dg(t){return Ie(t.x)/Ie(t.y)}function hg(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class _N{constructor(){this.members=[]}add(e){Ah(this.members,e),e.scheduleRender()}remove(e){if(Ch(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bN(t,e,n){let s="";const i=t.x.translate/e.x,a=t.y.translate/e.y,r=(n==null?void 0:n.z)||0;if((i||a||r)&&(s=`translate3d(${i}px, ${a}px, ${r}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:v}=n;c&&(s=`perspective(${c}px) ${s}`),u&&(s+=`rotate(${u}deg) `),d&&(s+=`rotateX(${d}deg) `),h&&(s+=`rotateY(${h}deg) `),m&&(s+=`skewX(${m}deg) `),v&&(s+=`skewY(${v}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const Vc=["","X","Y","Z"],SN=1e3;let wN=0;function Bc(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function zb(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=jb(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",me,!(i||a))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&zb(s)}function $b({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(r={},o=e==null?void 0:e()){this.id=wN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(EN),this.nodes.forEach(ON),this.nodes.forEach(NN),this.nodes.forEach(jN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new cN)}addEventListener(r,o){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new Rh),this.eventHandlers.get(r).add(o)}notifyListeners(r,...o){const l=this.eventHandlers.get(r);l&&l.notify(...o)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=sb(r)&&!fC(r),this.instance=r;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;me.read(()=>{d=window.innerWidth}),t(r,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,u&&u(),u=uN(h,250),po.hasAnimatedSinceResize&&(po.hasAnimatedSinceResize=!1,this.nodes.forEach(pg)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||UN,{onLayoutAnimationStart:_,onLayoutAnimationComplete:b}=c.getProps(),p=!this.targetLayout||!Bb(this.targetLayout,m),g=!d&&h;if(this.options.layoutRoot||this.resumeFrom||g||d&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...qh(v,"layout"),onPlay:_,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(u,g)}else d||pg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),In(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RN),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CN),this.nodes.forEach(xN),this.nodes.forEach(TN)):this.nodes.forEach(mg),this.clearAllSnapshots();const o=Je.now();Ue.delta=cn(0,1e3/60,o-Ue.timestamp),Ue.timestamp=o,Ue.isProcessing=!0,Cc.update.process(Ue),Cc.preRender.process(Ue),Cc.render.process(Ue),Ue.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AN),this.sharedNodes.forEach(DN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ie(this.snapshot.measuredBox.x)&&!Ie(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Se(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(o=!1),o&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Vb(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;r&&this.instance&&(o||rs(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return r&&(l=this.removeTransform(l)),PN(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:r}=this.options;if(!r)return Se();const o=r.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(LN))){const{scroll:u}=this.root;u&&(ri(o.x,u.offset.x),ri(o.y,u.offset.y))}return o}removeElementScroll(r){var l;const o=Se();if(dt(o,r),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&dt(o,r),ri(o.x,d.offset.x),ri(o.y,d.offset.y))}return o}applyTransform(r,o=!1){const l=Se();dt(l,r);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&oi(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),rs(u.latestValues)&&oi(l,u.latestValues)}return rs(this.latestValues)&&oi(l,this.latestValues),l}removeTransform(r){const o=Se();dt(o,r);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!rs(c.latestValues))continue;ud(c.latestValues)&&c.updateSnapshot();const u=Se(),d=c.measurePageBox();dt(u,d),og(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return rs(this.latestValues)&&og(o,this.latestValues),o}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ue.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(r||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=Ue.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),Na(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),dt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Se(),this.targetWithTransforms=Se()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),HO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dt(this.target,this.layout.layoutBox),bb(this.target,this.targetDelta)):dt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),Na(this.relativeTargetOrigin,this.target,m.target),dt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ud(this.parent.latestValues)||_b(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const r=this.getLead(),o=!!this.resumingFrom||this!==r;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ue.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;dt(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;eO(this.layoutCorrected,this.treeScale,this.path,o),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=Se());const{target:m}=r;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ig(this.prevProjectionDelta.x,this.projectionDelta.x),ig(this.prevProjectionDelta.y,this.projectionDelta.y)),Oa(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!hg(this.projectionDelta.x,this.prevProjectionDelta.x)||!hg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),r){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=li(),this.projectionDelta=li(),this.projectionDeltaWithTransform=li()}setAnimationOrigin(r,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=li();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Se(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,_=m!==v,b=this.getStack(),p=!b||b.members.length<=1,g=!!(_&&!p&&this.options.crossfade===!0&&!this.path.some(kN));this.animationProgress=0;let y;this.mixTargetDelta=S=>{const T=S/1e3;gg(d.x,r.x,T),gg(d.y,r.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Na(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MN(this.relativeTarget,this.relativeTargetOrigin,h,T),y&&vN(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Se()),dt(y,this.relativeTarget)),_&&(this.animationValues=u,hN(u,c,this.latestValues,T,g,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(In(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{po.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Oi(0)),this.currentAnimation=oN(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),r.onUpdate&&r.onUpdate(u)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=r;if(!(!o||!l||!c)){if(this!==r&&this.layout&&c&&Gb(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Se();const d=Ie(this.layout.layoutBox.x);l.x.min=r.target.x.min,l.x.max=l.x.min+d;const h=Ie(this.layout.layoutBox.y);l.y.min=r.target.y.min,l.y.max=l.y.min+h}dt(o,l),oi(o,u),Oa(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(r,o){this.sharedNodes.has(r)||this.sharedNodes.set(r,new _N),this.sharedNodes.get(r).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){var o;const{layoutId:r}=this.options;return r?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:r}=this.options;return r?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),r&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let o=!1;const{latestValues:l}=r;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Bc("z",r,c,this.animationValues);for(let u=0;u<Vc.length;u++)Bc(`rotate${Vc[u]}`,r,c,this.animationValues),Bc(`skew${Vc[u]}`,r,c,this.animationValues);r.render();for(const u in c)r.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);r.scheduleRender()}applyProjectionStyles(r,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=mo(o==null?void 0:o.pointerEvents)||"",r.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=mo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!rs(this.latestValues)&&(r.transform=l?l({},""):"none",this.hasProjected=!1);return}r.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=bN(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),r.transform=d;const{x:h,y:m}=this.projectionDelta;r.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,c.animationValues?r.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:r.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const v in Ja){if(u[v]===void 0)continue;const{correct:_,applyTo:b,isCSSVariable:p}=Ja[v],g=d==="none"?u[v]:_(u[v],c);if(b){const y=b.length;for(let S=0;S<y;S++)r[b[S]]=g}else p?this.options.visualElement.renderState.vars[v]=g:r[v]=g}this.options.layoutId&&(r.pointerEvents=c===this?mo(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>{var o;return(o=r.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(fg),this.root.sharedNodes.clear()}}}function xN(t){t.updateLayout()}function TN(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:a}=t.options,r=e.source!==t.layout.source;a==="size"?ht(d=>{const h=r?e.measuredBox[d]:e.layoutBox[d],m=Ie(h);h.min=s[d].min,h.max=h.min+m}):Gb(a,e.layoutBox,s)&&ht(d=>{const h=r?e.measuredBox[d]:e.layoutBox[d],m=Ie(s[d]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const o=li();Oa(o,s,e.layoutBox);const l=li();r?Oa(l,t.applyTransform(i,!0),e.measuredBox):Oa(l,s,e.layoutBox);const c=!Vb(o);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const v=Se();Na(v,e.layoutBox,h.layoutBox);const _=Se();Na(_,s,m.layoutBox),Bb(v,_)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function EN(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function AN(t){t.clearSnapshot()}function fg(t){t.clearMeasurements()}function mg(t){t.isLayoutDirty=!1}function CN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function pg(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ON(t){t.resolveTargetDelta()}function NN(t){t.calcProjection()}function RN(t){t.resetSkewAndRotation()}function DN(t){t.removeLeadSnapshot()}function gg(t,e,n){t.translate=ge(e.translate,0,n),t.scale=ge(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yg(t,e,n,s){t.min=ge(e.min,n.min,s),t.max=ge(e.max,n.max,s)}function MN(t,e,n,s){yg(t.x,e.x,n.x,s),yg(t.y,e.y,n.y,s)}function kN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const UN={duration:.45,ease:[.4,0,.1,1]},vg=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_g=vg("applewebkit/")&&!vg("chrome/")?Math.round:bt;function bg(t){t.min=_g(t.min),t.max=_g(t.max)}function PN(t){bg(t.x),bg(t.y)}function Gb(t,e,n){return t==="position"||t==="preserve-aspect"&&!GO(dg(e),dg(n),.2)}function LN(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const VN=$b({attachResizeListener:(t,e)=>er(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zc={current:void 0},Hb=$b({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zc.current){const t=new VN({});t.mount(window),t.setOptions({layoutScroll:!0}),zc.current=t}return zc.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),BN={pan:{Feature:sN},drag:{Feature:nN,ProjectionNode:Hb,MeasureLayout:Ub}};function Sg(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=s[i];a&&me.postRender(()=>a(e,Tr(e)))}class zN extends Zn{mount(){const{current:e}=this.node;e&&(this.unmount=lC(e,(n,s)=>(Sg(this.node,s,"Start"),i=>Sg(this.node,i,"End"))))}unmount(){}}class $N extends Zn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sr(er(this.node.current,"focus",()=>this.onFocus()),er(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wg(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=s[i];a&&me.postRender(()=>a(e,Tr(e)))}class GN extends Zn{mount(){const{current:e}=this.node;e&&(this.unmount=hC(e,(n,s)=>(wg(this.node,s,"Start"),(i,{success:a})=>wg(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yd=new WeakMap,$c=new WeakMap,HN=t=>{const e=yd.get(t.target);e&&e(t)},qN=t=>{t.forEach(HN)};function IN({root:t,...e}){const n=t||document;$c.has(n)||$c.set(n,{});const s=$c.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(qN,{root:t,...e})),s[i]}function FN(t,e,n){const s=IN(e);return yd.set(t,n),s.observe(t),()=>{yd.delete(t),s.unobserve(t)}}const YN={some:0,all:1};class KN extends Zn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=e,r={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:YN[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return FN(this.node.current,r,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(XN(e,n))&&this.startObserver()}unmount(){}}function XN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const QN={inView:{Feature:KN},tap:{Feature:GN},focus:{Feature:$N},hover:{Feature:zN}},ZN={layout:{ProjectionNode:Hb,MeasureLayout:Ub}},JN={...PO,...QN,...BN,...ZN},os=ZC(JN,uO);class WN{static parsePhase1Content(e,n){const s=Array.isArray(e)?e[0]:e;return{project_info:this.extractProjectMetadata(s,n),global_style:this.extractGlobalStyle(s),scenes:this.extractTimelineScenes(s),elements:this.extractTimelineElements(s),style_evolution:this.extractStyleProgression(s)}}static extractProjectMetadata(e,n){var i,a,r,o,l,c;return{title:((i=e.project_metadata)==null?void 0:i.title)||e.title||e.project_title||((a=e.extraction_metadata)==null?void 0:a.project_title)||n||"Untitled Project",client:((r=e.project_metadata)==null?void 0:r.client)||e.client||"Unknown Client",schema_version:((o=e.project_metadata)==null?void 0:o.schema_version)||"1.0",production_workflow:((l=e.project_metadata)==null?void 0:l.production_workflow)||"animatic_to_video",extraction_date:(c=e.project_metadata)==null?void 0:c.extraction_date}}static extractGlobalStyle(e){var n,s,i,a,r,o,l,c,u,d,h,m,v,_,b,p,g,y,S,T,j,x,E,A,C,N,U,P,V,B,R,M;return{color_palette:{primary:((s=(n=e.global_style)==null?void 0:n.color_palette)==null?void 0:s.primary)||"Deep blue backgrounds",secondary:((a=(i=e.global_style)==null?void 0:i.color_palette)==null?void 0:a.secondary)||"Warm amber lighting",accent:(o=(r=e.global_style)==null?void 0:r.color_palette)==null?void 0:o.accent,character_tones:((c=(l=e.global_style)==null?void 0:l.color_palette)==null?void 0:c.character_tones)||"Natural skin tones"},rendering_style:{level:((d=(u=e.global_style)==null?void 0:u.rendering_style)==null?void 0:d.level)||"cinematic realism",line_work:((m=(h=e.global_style)==null?void 0:h.rendering_style)==null?void 0:m.line_work)||"clean vector-style",shading:((_=(v=e.global_style)==null?void 0:v.rendering_style)==null?void 0:_.shading)||"minimal, flat color zones",detail_level:((p=(b=e.global_style)==null?void 0:b.rendering_style)==null?void 0:p.detail_level)||"photorealistic"},composition:{framing:((y=(g=e.global_style)==null?void 0:g.composition)==null?void 0:y.framing)||"cinematic storyboard frames",depth:((T=(S=e.global_style)==null?void 0:S.composition)==null?void 0:T.depth)||"clear foreground/background separation",camera_style:((x=(j=e.global_style)==null?void 0:j.composition)==null?void 0:x.camera_style)||"traditional film language",aspect_ratio:((A=(E=e.global_style)==null?void 0:E.composition)==null?void 0:A.aspect_ratio)||"16:9"},mood_style:{overall_mood:((N=(C=e.global_style)==null?void 0:C.mood_style)==null?void 0:N.overall_mood)||"educational, inspiring",lighting_description:((P=(U=e.global_style)==null?void 0:U.mood_style)==null?void 0:P.lighting_description)||"natural library lighting",atmosphere:((B=(V=e.global_style)==null?void 0:V.mood_style)==null?void 0:B.atmosphere)||"technological wonder",tone:((M=(R=e.global_style)==null?void 0:R.mood_style)==null?void 0:M.tone)||"professional, accessible"}}}static extractTimelineScenes(e){const n=e.scenes||{};return Object.entries(n).map(([s,i])=>{var a,r,o,l,c,u,d,h,m,v,_,b,p,g;return{scene_id:i.scene_id||parseInt(s.replace("scene_",""))||0,title:this.generateSceneTitle(i.action_summary,i.scene_id),duration:i.duration||"3 seconds",camera_type:i.camera_type||"medium shot",mood:i.mood||"neutral",natural_description:i.natural_description||"",dialogue:i.dialogue,action_summary:i.action_summary||"Scene action",elements_present:i.elements_present||[],element_interactions:i.element_interactions||[],primary_focus:i.primary_focus||"",lighting_approach:i.lighting_approach||"",composition_approach:i.composition_approach||"",scene_frame_prompt:i.scene_frame_prompt,scene_start_frame:i.scene_start_frame,expandable_content:{locations_text:this.extractLocationText(e.elements,i.elements_present),characters_text:this.extractCharacterText(e.elements,i.elements_present),props_text:this.extractPropsText(e.elements,i.elements_present),actions_text:this.generateActionsText(e.elements,i),interactions_text:this.generateInteractionsText(i.element_interactions),color_primary:((r=(a=e.global_style)==null?void 0:a.color_palette)==null?void 0:r.primary)||"Deep blue backgrounds",color_secondary:((l=(o=e.global_style)==null?void 0:o.color_palette)==null?void 0:l.secondary)||"Warm amber lighting",line_work:((u=(c=e.global_style)==null?void 0:c.rendering_style)==null?void 0:u.line_work)||"clean vector-style",shading:((h=(d=e.global_style)==null?void 0:d.rendering_style)==null?void 0:h.shading)||"minimal, flat color zones",framing:((v=(m=e.global_style)==null?void 0:m.composition)==null?void 0:v.framing)||"cinematic storyboard frames",depth:((b=(_=e.global_style)==null?void 0:_.composition)==null?void 0:b.depth)||"clear foreground/background separation",overall_mood:((g=(p=e.global_style)==null?void 0:p.mood_style)==null?void 0:g.overall_mood)||"educational, inspiring"}}}).sort((s,i)=>s.scene_id-i.scene_id)}static extractTimelineElements(e){const n=e.elements||{};return Object.entries(n).map(([s,i])=>{var a;return{id:s,name:this.formatElementName(s),type:this.mapElementType(i.element_type),subtype:i.element_subtype||"secondary",frequency:i.frequency||0,scenes_present:i.scenes_present||[],base_description:i.base_description||"",consistency_rules:i.consistency_rules||[],consistency_score:this.calculateConsistencyScore(i.frequency,(a=i.consistency_rules)==null?void 0:a.length),icon:this.getElementIcon(i.element_type,s),color:this.getElementColor(i.element_type)}})}static extractStyleProgression(e){const n=e.scenes||{},s=Object.entries(n).sort(([,i],[,a])=>i.scene_id-a.scene_id);return{color_evolution:s.map(([,i])=>{var a,r,o,l;return{scene_id:i.scene_id,primary:((r=(a=e.global_style)==null?void 0:a.color_palette)==null?void 0:r.primary)||"Deep blue",secondary:((l=(o=e.global_style)==null?void 0:o.color_palette)==null?void 0:l.secondary)||"Warm amber"}}),mood_evolution:s.map(([,i])=>({scene_id:i.scene_id,mood:i.mood||"neutral",lighting:i.lighting_approach||"natural"})),camera_progression:s.map(([,i])=>({scene_id:i.scene_id,camera_type:i.camera_type||"medium shot",composition:i.composition_approach||"standard framing"}))}}static generateSceneTitle(e,n){return e?e.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):`Scene ${n}`}static extractLocationText(e,n){return n.filter(i=>{var a;return((a=e[i])==null?void 0:a.element_type)==="location"}).map(i=>{var r;const a=e[i];return`${a.base_description}
Consistency Rules: ${(r=a.consistency_rules)==null?void 0:r.join("; ")}`}).join(`

`)}static extractCharacterText(e,n){return n.filter(i=>{var a;return((a=e[i])==null?void 0:a.element_type)==="character"}).map(i=>{var r;const a=e[i];return`${a.base_description}
Consistency Rules: ${(r=a.consistency_rules)==null?void 0:r.join("; ")}`}).join(`

`)}static extractPropsText(e,n){return n.filter(i=>{var a;return((a=e[i])==null?void 0:a.element_type)==="prop"}).map(i=>{var r;const a=e[i];return`${a.base_description}
Consistency Rules: ${(r=a.consistency_rules)==null?void 0:r.join("; ")}`}).join(`

`)}static generateActionsText(e,n){var s;return((s=n.elements_present)==null?void 0:s.map(i=>{var o;const a=e[i],r=(o=a==null?void 0:a.variants_by_scene)==null?void 0:o[`scene_${n.scene_id}`];return r?`${i}: ${r.action} at ${r.position}`:`${i}: positioned in scene`}).join(`

`))||""}static generateInteractionsText(e){return e.map(n=>n.description).join(`
`)||""}static formatElementName(e){return e.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}static mapElementType(e){switch(e){case"character":return"character";case"location":return"location";case"prop":return"prop";case"atmosphere":return"atmosphere";default:return"prop"}}static calculateConsistencyScore(e,n){return e>=8&&n>=3?"excellent":e>=4&&n>=2?"good":"review"}static getElementIcon(e,n){if(n.includes("samantha")||n.includes("character"))return"👤";if(n.includes("children")||n.includes("group"))return"👶";if(n.includes("library")||n.includes("entrance"))return"🏛️";if(n.includes("hologram")||n.includes("display"))return"🔮";if(n.includes("backpack")||n.includes("book"))return"🎒";if(n.includes("lighting")||n.includes("atmosphere"))return"💡";switch(e){case"character":return"👤";case"location":return"🏛️";case"prop":return"📦";case"atmosphere":return"💡";default:return"📦"}}static getElementColor(e){switch(e){case"character":return"#3b82f6";case"location":return"#10b981";case"prop":return"#f59e0b";case"atmosphere":return"#8b5cf6";default:return"#6b7280"}}}class $n{static updateField(e,n,s){const i={...e},a=n.split(".");let r=i;for(let l=0;l<a.length-1;l++){const c=a[l];r[c]?r[c]={...r[c]}:r[c]={},r=r[c]}const o=a[a.length-1];return r[o]=s,i}static getField(e,n){const s=n.split(".");let i=e;for(const a of s){if(!i||typeof i!="object")return;i=i[a]}return i}static validateField(e,n){return n.includes("title")&&typeof e=="string"?e.trim().length>0:n.includes("duration")||n.includes("camera_type")||n.includes("mood")?!0:e!=null}static createEditHandler(e,n){return(s,i)=>{try{if(!$n.validateField(i,n))return console.warn(`Invalid value for field ${n}:`,i),!1;const r=($n.getField(s,n)||"").toString().trim(),o=(i||"").toString().trim();if(r===o)return!0;const l=$n.updateField(s,n,i);return e(l),!0}catch(a){return console.error(`Error editing field ${n}:`,a),!1}}}}const af=(t,e,n)=>{const s=$n.getField(t,e)||"",i=$n.createEditHandler(n,e);return{currentValue:s,updateValue:a=>i(t,a.trim())}},eR=(t,e,n,s)=>{const i=$n.getField(t,e)||n[0],a=$n.createEditHandler(s,e);return{currentValue:i,validOptions:n,updateValue:r=>n.includes(r)?a(t,r):!1}},xg="/assets/16-9placeholder-CY_xecX8.png";function tR({scene:t,elements:e,onSelect:n,isSelected:s,onElementHover:i,hoveredElement:a,masterJson:r,onSceneEdit:o}){var j;const[l,c]=w.useState({description:!1,elements:!1,primaryFocus:!1,composition:!1}),[u,d]=w.useState(null),[h,m]=w.useState({}),v=e.filter(x=>{var E;return(E=t.elements_present)==null?void 0:E.includes(x.id)}),_=(x,E,A)=>!r||!o?null:E==="select"&&A?eR(r,x,A,o):af(r,x,o),b={title:`scenes.scene_${t.scene_id}.title`,camera_type:`scenes.scene_${t.scene_id}.camera_type`,mood:`scenes.scene_${t.scene_id}.mood`,dialogue:`scenes.scene_${t.scene_id}.dialogue`,natural_description:`scenes.scene_${t.scene_id}.natural_description`,primary_focus:`scenes.scene_${t.scene_id}.primary_focus`,scene_frame_prompt:`scenes.scene_${t.scene_id}.scene_frame_prompt`,composition_approach:`scenes.scene_${t.scene_id}.composition_approach`},p=(x,E,A,C="text",N)=>{const U=u===A,P=b[A],V=_(P,C==="select"?"select":"text",N);return!V||!r||!o?f.jsxs("div",{className:"scene-field-row",children:[f.jsxs("strong",{className:"scene-field-label",children:[E,":"]}),f.jsx("div",{className:"scene-field-value-area",children:x||`No ${E.toLowerCase()}`})]}):f.jsxs("div",{className:"scene-field-row",children:[f.jsxs("strong",{className:"scene-field-label",children:[E,":"]}),f.jsx("div",{className:"scene-field-value-area",children:U?f.jsx("div",{className:"scene-field-edit-container",children:C==="textarea"?f.jsx("textarea",{value:h[A]??V.currentValue,onChange:B=>{const R=B.target.value;m(M=>({...M,[A]:R}))},onBlur:()=>{const B=h[A]??V.currentValue;V.updateValue(B),d(null)},onKeyDown:B=>{B.key==="Escape"&&(m(R=>{const{[A]:M,...D}=R;return D}),d(null))},className:"scene-field-textarea",autoFocus:!0,rows:3}):f.jsx("input",{type:"text",value:h[A]??V.currentValue,onChange:B=>{const R=B.target.value;m(M=>({...M,[A]:R}))},onBlur:()=>{const B=h[A]??V.currentValue;V.updateValue(B),d(null)},onKeyDown:B=>{if(B.key==="Enter"){const R=h[A]??V.currentValue;V.updateValue(R),d(null)}B.key==="Escape"&&(m(R=>{const{[A]:M,...D}=R;return D}),d(null))},className:"scene-field-input",autoFocus:!0})}):f.jsx("div",{className:"scene-field-value-display editable-field",onClick:B=>{B.stopPropagation(),d(A),m(R=>({...R,[A]:V.currentValue}))},title:`Click to edit ${E.toLowerCase()}`,children:x||`No ${E.toLowerCase()}`})})]})},g=(x,E)=>{const A=u==="title",C=b.title,N=_(C,"text");return!N||!r||!o?f.jsxs("div",{className:"scene-title-with-number",children:[f.jsxs("span",{className:"scene-number-part",children:["Scene ",E,":"]}),f.jsx("span",{className:"scene-title-part",children:x||"Untitled"})]}):f.jsxs("div",{className:"scene-title-with-number",children:[f.jsxs("span",{className:"scene-number-part",children:["Scene ",E,":"]}),A?f.jsx("input",{type:"text",value:h.title??x??"Untitled",onChange:U=>{const P=U.target.value;m(V=>({...V,title:P}))},onBlur:()=>{const U=h.title??x;U!==x&&N.updateValue(U),d(null),m(P=>{const{title:V,...B}=P;return B})},onKeyDown:U=>{if(U.key==="Enter"){const P=h.title??x;P!==x&&N.updateValue(P),d(null),m(V=>{const{title:B,...R}=V;return R})}U.key==="Escape"&&(m(P=>{const{title:V,...B}=P;return B}),d(null))},className:"scene-title-input",autoFocus:!0}):f.jsx("span",{className:"scene-title-part editable-field",onClick:U=>{U.stopPropagation(),d("title"),m(P=>({...P,title:x||"Untitled"}))},title:"Click to edit title",children:x||"Untitled"})]})},y=v.reduce((x,E)=>(x[E.type]||(x[E.type]=[]),x[E.type].push(E),x),{}),S={default:{scale:1,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",transition:{duration:.2}},hover:{scale:1.02,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:{duration:.2}},selected:{scale:1.02,boxShadow:"0 0 0 2px #3b82f6, 0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:{duration:.2}}},T={collapsed:{height:0,opacity:0},expanded:{height:"auto",opacity:1}};return f.jsxs(os.div,{variants:S,initial:"default",whileHover:"hover",animate:s?"selected":"default",className:"timeline-scene-card rounded-lg border overflow-hidden cursor-pointer",onClick:n,children:[f.jsxs("div",{className:"scene-top-row",children:[f.jsx("div",{className:"scene-title-container",children:g(r&&((j=_(b.title,"text"))==null?void 0:j.currentValue)||t.title||"",t.scene_id)}),f.jsx("span",{className:"scene-duration",children:t.duration})]}),f.jsxs("div",{className:"scene-card-three-columns",children:[f.jsxs("div",{className:"scene-column scene-column-config",children:[f.jsx("div",{className:"scene-column-header",children:f.jsx("h4",{className:"scene-column-title",children:"Configuration"})}),p(t.camera_type||"","Camera","camera_type"),p(t.mood||"","Mood","mood"),p(t.dialogue||"","Speech","dialogue"),f.jsxs("div",{className:"scene-expandable-sections",children:[f.jsxs("div",{children:[f.jsxs("button",{onClick:x=>{x.stopPropagation(),c(E=>({...E,description:!E.description}))},className:`scene-expand-button ${l.description?"expanded":""}`,children:[f.jsx("span",{children:"📝 Description"}),f.jsx("span",{children:l.description?"▼":"▶"})]}),f.jsx(Qr,{children:l.description&&f.jsx(os.div,{variants:T,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:p(t.natural_description||"","Description","natural_description","textarea")})})})]}),f.jsxs("div",{children:[f.jsxs("button",{onClick:x=>{x.stopPropagation(),c(E=>({...E,primaryFocus:!E.primaryFocus}))},className:`scene-expand-button ${l.primaryFocus?"expanded":""}`,children:[f.jsx("span",{children:"🎯 Primary Focus"}),f.jsx("span",{children:l.primaryFocus?"▼":"▶"})]}),f.jsx(Qr,{children:l.primaryFocus&&f.jsx(os.div,{variants:T,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:p(t.primary_focus||"","Primary Focus","primary_focus","textarea")})})})]}),f.jsxs("div",{children:[f.jsxs("button",{onClick:x=>{x.stopPropagation(),c(E=>({...E,composition:!E.composition}))},className:`scene-expand-button ${l.composition?"expanded":""}`,children:[f.jsx("span",{children:"📐 Composition"}),f.jsx("span",{children:l.composition?"▼":"▶"})]}),f.jsx(Qr,{children:l.composition&&f.jsx(os.div,{variants:T,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:p(t.composition_approach||"","Composition","composition_approach","textarea")})})})]}),f.jsxs("div",{children:[f.jsxs("button",{onClick:x=>{x.stopPropagation(),c(E=>({...E,elements:!E.elements}))},className:`scene-expand-button ${l.elements?"expanded":""}`,children:[f.jsxs("span",{children:["🎭 Elements (",v.length,")"]}),f.jsx("span",{children:l.elements?"▼":"▶"})]}),f.jsx(Qr,{children:l.elements&&f.jsx(os.div,{variants:T,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:f.jsx("div",{className:"scene-elements-list",children:Object.entries(y).map(([x,E])=>f.jsxs("div",{className:"scene-element-group",children:[f.jsxs("span",{className:"scene-element-type",children:[x,":"]}),f.jsx("div",{className:"scene-element-tags",children:E.map(A=>f.jsx(os.div,{whileHover:{scale:1.05},onMouseEnter:()=>i(A.id),onMouseLeave:()=>i(null),className:"scene-element-tag",style:{backgroundColor:a===A.id?A.color:`${A.color}20`,color:a===A.id?"white":A.color,borderColor:A.color},children:A.name},A.id))})]},x))})})})})]})]})]}),f.jsxs("div",{className:"scene-column scene-column-image",children:[f.jsx("div",{className:"scene-column-header",children:f.jsx("h4",{className:"scene-column-title",children:"Image Generation"})}),f.jsxs("div",{className:"scene-media-placeholder",children:[f.jsx("img",{src:t.scene_start_frame||xg,alt:t.scene_start_frame?`Generated frame for scene ${t.scene_id}`:"Scene placeholder",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--radius-sm)",border:t.scene_start_frame?"2px solid #10b981":"1px solid var(--color-border-default)"}}),t.scene_start_frame&&f.jsx("div",{className:"scene-image-badge",children:f.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981"},children:"✅ Generated"})})]}),f.jsxs("div",{className:"scene-prompt-container",children:[f.jsx("div",{className:"scene-prompt-header",children:f.jsx("label",{className:"scene-prompt-label",children:"Generated Prompt"})}),f.jsx("textarea",{className:"scene-prompt-textarea",placeholder:t.scene_frame_prompt?"Click to edit generated prompt...":"Generated image prompt will appear here...",value:u==="scene_frame_prompt"?h.scene_frame_prompt||"":t.scene_frame_prompt||"",rows:6,readOnly:u!=="scene_frame_prompt",onClick:x=>{x.stopPropagation(),u!=="scene_frame_prompt"&&(d("scene_frame_prompt"),m(E=>({...E,scene_frame_prompt:t.scene_frame_prompt||""})))},onChange:x=>{u==="scene_frame_prompt"&&m(E=>({...E,scene_frame_prompt:x.target.value}))},onBlur:()=>{if(u==="scene_frame_prompt"){const x=_(b.scene_frame_prompt,"text");x&&x.updateValue(h.scene_frame_prompt||""),d(null)}},onKeyDown:x=>{x.key==="Enter"&&x.ctrlKey&&x.currentTarget.blur(),x.key==="Escape"&&(d(null),m(E=>({...E,scene_frame_prompt:t.scene_frame_prompt||""})))},style:{cursor:u==="scene_frame_prompt"?"text":"pointer",backgroundColor:u==="scene_frame_prompt"?"var(--color-bg-tertiary)":"var(--color-bg-secondary)",border:u==="scene_frame_prompt"?"1px solid var(--color-border-focus)":"1px solid var(--color-border-default)"}})]}),f.jsxs("div",{className:"scene-generate-buttons",children:[f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Prompt"}),f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Image"})]})]}),f.jsxs("div",{className:"scene-column scene-column-video",children:[f.jsx("div",{className:"scene-column-header",children:f.jsx("h4",{className:"scene-column-title",children:"Video Generation"})}),f.jsx("div",{className:"scene-media-placeholder",children:f.jsx("img",{src:xg,alt:"Video placeholder",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--radius-sm)"}})}),f.jsx("textarea",{className:"scene-prompt-textarea",placeholder:"Video generation prompt will appear here...",rows:6,readOnly:!0}),f.jsxs("div",{className:"scene-generate-buttons",children:[f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Prompt"}),f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Video"})]})]})]})]})}function nR({content:t,projectId:e,projectName:n,phaseId:s,onContentUpdate:i}){var E;const[a,r]=w.useState(null),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,h]=w.useState(""),[m,v]=w.useState(!0),_=w.useMemo(()=>{if(!t||Object.keys(t).length===0)return{project_info:{title:"Loading...",client:"",schema_version:"1.0",production_workflow:""},global_style:{},scenes:[],elements:[],style_evolution:{color_evolution:[],mood_evolution:[],camera_progression:[]}};try{return WN.parsePhase1Content(t,n)}catch(A){return console.error("Error parsing timeline content:",A),{project_info:{title:"Parsing Error",client:"",schema_version:"1.0",production_workflow:""},global_style:{},scenes:[],elements:[],style_evolution:{color_evolution:[],mood_evolution:[],camera_progression:[]}}}},[t,n]),b=w.useMemo(()=>i?af(t,"project_metadata.title",i):null,[t,i]),p=()=>{if(!(b!=null&&b.currentValue)){console.error("Cannot edit title - title editor not available");return}h(b.currentValue),u(!0)},g=async()=>{if(!b||!d.trim()){u(!1);return}try{b.updateValue(d)&&u(!1)}catch(A){console.error("Error saving title:",A)}},y=()=>{h(""),u(!1)},S=w.useMemo(()=>{const A=_.scenes.reduce((P,V)=>{const B=V.duration||"3s",R=parseInt(B.replace(/[^\d]/g,""))||3;return P+R},0),C=Math.floor(A/60),N=A%60;return{totalDuration:C>0?`${C}m ${N}s`:`${A}s`,scenesCount:_.scenes.length,elementsCount:_.elements.length}},[_]),T=w.useMemo(()=>_.elements.map(N=>({...N,usage_percentage:Math.round(N.frequency/_.scenes.length*100)})).reduce((N,U)=>(N[U.type]||(N[U.type]=[]),N[U.type].push(U),N),{}),[_]),j=A=>{r(a===A?null:A)},x=A=>{l(A)};return _.scenes.length?f.jsxs("div",{className:"timeline-container",children:[f.jsx("div",{className:"timeline-header",style:{borderRadius:"var(--radius-md)"},children:f.jsxs("div",{className:"project-title-section",children:[c?f.jsxs("div",{className:"title-edit-container",children:[f.jsx("input",{type:"text",value:d,onChange:A=>h(A.target.value),onKeyDown:A=>{A.key==="Enter"&&g(),A.key==="Escape"&&y()},className:"title-edit-input",autoFocus:!0,onBlur:g}),f.jsxs("div",{className:"title-edit-buttons",children:[f.jsx("button",{onClick:g,className:"title-save-btn",children:"✓"}),f.jsx("button",{onClick:y,className:"title-cancel-btn",children:"✕"})]})]}):f.jsx("h1",{className:"project-title-display editable-title",onClick:p,title:"Click to edit project title",children:((E=_==null?void 0:_.project_info)==null?void 0:E.title)||"Untitled Project"}),f.jsxs("div",{className:"project-stats",children:[f.jsxs("span",{children:[f.jsx("strong",{children:S.scenesCount})," scenes"]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:[f.jsx("strong",{children:S.elementsCount})," elements"]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:[f.jsx("strong",{children:S.totalDuration})," total"]}),f.jsx("span",{children:"•"}),f.jsx("span",{children:f.jsx("strong",{children:_.project_info.client})})]})]})}),f.jsxs("div",{className:"elements-overview",children:[f.jsxs("div",{className:"elements-overview-header",style:{cursor:"pointer"},onClick:()=>v(!m),children:[f.jsxs("h3",{children:["Story Elements ",m?"▶":"▼"]}),f.jsxs("span",{className:"elements-count",children:[_.elements.length," total"]})]}),!m&&f.jsx("div",{className:"elements-horizontal",children:Object.entries(T).map(([A,C])=>f.jsxs("div",{className:"scene-element-group",children:[f.jsxs("span",{className:"scene-element-type",children:[A,"s:"]}),f.jsx("div",{className:"scene-element-tags",children:C.map(N=>f.jsxs(os.div,{whileHover:{scale:1.05},onMouseEnter:()=>x(N.id),onMouseLeave:()=>x(null),className:"scene-element-tag",style:{backgroundColor:o===N.id?N.color:`${N.color}20`,color:o===N.id?"white":N.color,borderColor:N.color},children:[N.name," (",N.usage_percentage,"%)"]},N.id))})]},A))})]}),f.jsx("div",{className:"timeline-scenes",children:f.jsx("div",{className:"timeline-scenes-responsive-grid",children:_.scenes.map(A=>f.jsx(tR,{scene:A,elements:_.elements,isSelected:a===A.scene_id,hoveredElement:o,onSelect:()=>j(A.scene_id),onElementHover:x,masterJson:t,onSceneEdit:i},A.scene_id))})})]}):f.jsx("div",{className:"timeline-container",children:f.jsxs("div",{className:"timeline-header",children:[f.jsx("h2",{children:"Timeline View"}),f.jsx("p",{children:"No scenes available. Complete Phase 1 to see timeline."})]})})}function sR({masterJson:t,onContentUpdate:e}){const[n,s]=w.useState(null),[i,a]=w.useState({}),r={primary:"global_style.color_palette.primary",secondary:"global_style.color_palette.secondary",accent:"global_style.color_palette.accent",character_tones:"global_style.color_palette.character_tones",level:"global_style.rendering_style.level",line_work:"global_style.rendering_style.line_work",shading:"global_style.rendering_style.shading",detail_level:"global_style.rendering_style.detail_level",framing:"global_style.composition.framing",depth:"global_style.composition.depth",camera_style:"global_style.composition.camera_style",aspect_ratio:"global_style.composition.aspect_ratio",overall_mood:"global_style.mood_style.overall_mood",lighting_description:"global_style.mood_style.lighting_description",atmosphere:"global_style.mood_style.atmosphere",tone:"global_style.mood_style.tone"},o=u=>!t||!e?null:af(t,u,e),l=(u,d,h)=>{const m=n===h,v=r[h],_=o(v);return!_||!t||!e?f.jsxs("div",{className:"style-field-container",children:[f.jsxs("strong",{className:"style-field-label",children:[d,":"]}),f.jsx("div",{className:"style-field-value",children:u||`No ${d.toLowerCase()}`})]}):f.jsxs("div",{className:"scene-field-row",children:[f.jsxs("strong",{className:"scene-field-label",children:[d,":"]}),f.jsx("div",{className:"scene-field-value-area",children:m?f.jsx("div",{className:"scene-field-edit-container",children:f.jsx("input",{type:"text",value:i[h]??_.currentValue,onChange:b=>{const p=b.target.value;a(g=>({...g,[h]:p}))},onBlur:()=>{const b=i[h]??_.currentValue;_.updateValue(b),s(null)},onKeyDown:b=>{if(b.key==="Enter"){const p=i[h]??_.currentValue;_.updateValue(p),s(null)}b.key==="Escape"&&(a(p=>{const{[h]:g,...y}=p;return y}),s(null))},className:"scene-field-input",autoFocus:!0})}):f.jsx("div",{className:"scene-field-value-display editable-field",onClick:()=>s(h),children:u||"Click to edit"})})]})},c=u=>{const h=r[u].split(".");let m=t;for(const v of h){if(!m||typeof m!="object")return"";m=m[v]}return m||""};return f.jsx("div",{className:"style-control-container",children:f.jsxs("div",{className:"style-cards-container",children:[f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Color Palette"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("primary"),"Primary","primary"),l(c("secondary"),"Secondary","secondary"),l(c("accent"),"Accent","accent"),l(c("character_tones"),"Character Tones","character_tones")]})]})}),f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Rendering Style"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("level"),"Level","level"),l(c("line_work"),"Line Work","line_work"),l(c("shading"),"Shading","shading"),l(c("detail_level"),"Detail Level","detail_level")]})]})}),f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Composition"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("framing"),"Framing","framing"),l(c("depth"),"Depth","depth"),l(c("camera_style"),"Camera Style","camera_style"),l(c("aspect_ratio"),"Aspect Ratio","aspect_ratio")]})]})}),f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Mood Style"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("overall_mood"),"Overall Mood","overall_mood"),l(c("lighting_description"),"Lighting","lighting_description"),l(c("atmosphere"),"Atmosphere","atmosphere"),l(c("tone"),"Tone","tone")]})]})})]})})}function ta({title:t,children:e,defaultOpen:n=!1,icon:s="📋"}){const i=`accordion-${t.replace(/\s+/g,"-").toLowerCase()}`,[a,r]=w.useState(()=>{const l=localStorage.getItem(i);return l!==null?JSON.parse(l):n}),o=()=>{const l=!a;r(l),localStorage.setItem(i,JSON.stringify(l))};return f.jsxs("div",{className:"accordion-section",children:[f.jsxs("button",{className:`accordion-header ${a?"open":""}`,onClick:o,children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:s}),f.jsx("span",{className:"accordion-label",children:t})]}),f.jsx("span",{className:"accordion-arrow",children:a?"▼":"▶"})]}),a&&f.jsx("div",{className:"accordion-content",children:f.jsx("div",{className:"accordion-inner",children:e})})]})}function iR(){var b,p,g,y,S;const[t,e]=w.useState({}),[n,s]=w.useState(""),[i,a]=w.useState(!1),[r,o]=w.useState(!1),[l,c]=w.useState(!0),[u,d]=w.useState("");w.useEffect(()=>{h()},[]);const h=async()=>{c(!0),d("");try{const T=await Ol();e(T),s(JSON.stringify(T,null,2)),a(!1)}catch(T){d("Failed to load configuration"),console.error("Load error:",T)}c(!1)},m=async()=>{o(!0),d("");try{const T=JSON.parse(n);await u0(T)?(e(T),a(!1),window.dispatchEvent(new CustomEvent("llm-config-updated",{detail:T})),await h(),console.log("✅ Configuration saved and reloaded successfully")):d("Failed to save configuration")}catch(T){d("Invalid JSON format"),console.error("Save error:",T)}o(!1)},v=T=>{s(T),a(!0),d("")},_=(T,j)=>{try{const x=JSON.parse(j),E={...t,[T]:x};e(E),s(JSON.stringify(E,null,2)),a(!0),d("")}catch{d(`Invalid JSON in ${T} section`)}};return l?f.jsx("div",{className:"config-tab",children:f.jsx("div",{className:"config-loading",children:"Loading configuration..."})}):f.jsxs("div",{className:"config-tab",children:[f.jsxs("div",{className:"config-header",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"⚙️ LLM Configuration"}),f.jsx("p",{className:"config-subtitle",children:"Manage AI providers, prompts, and generation settings"})]}),f.jsxs("div",{className:"config-actions",children:[f.jsx("button",{onClick:h,disabled:r,className:"btn btn-secondary",children:"🔄 Reload"}),f.jsx("button",{onClick:m,disabled:!i||r,className:`btn ${i?"btn-primary":"btn-secondary"}`,children:r?"💾 Saving...":i?"💾 Save Config":"✅ Saved"})]})]}),u&&f.jsxs("div",{className:"config-error",children:["⚠️ ",u]}),f.jsxs("div",{className:"config-accordion",children:[f.jsx(ta,{title:"Scene Frame Prompt Generation",icon:"✨",defaultOpen:!0,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"System and user prompts for scene start frame generation"}),f.jsxs("div",{className:"prompt-subsection",children:[f.jsx("h4",{className:"prompt-subsection-title",children:"🔧 System Prompt"}),f.jsx("p",{className:"prompt-subsection-desc",children:"Instructions for the AI model about how to generate scene prompts"}),f.jsx("textarea",{value:((b=t==null?void 0:t.start_frame_prompt_generation)==null?void 0:b.system_prompt)||"",onChange:T=>{const j={...t,start_frame_prompt_generation:{...t==null?void 0:t.start_frame_prompt_generation,system_prompt:T.target.value}};e(j),s(JSON.stringify(j,null,2)),a(!0),d("")},className:"section-textarea prompt-textarea",rows:8,placeholder:"Enter system prompt instructions..."}),f.jsx("div",{className:"prompt-preview",children:f.jsxs("details",{children:[f.jsx("summary",{className:"prompt-preview-toggle",children:"📋 Preview stored format"}),f.jsx("pre",{className:"prompt-preview-content",children:((p=t==null?void 0:t.start_frame_prompt_generation)==null?void 0:p.system_prompt)||"No content"})]})})]}),f.jsxs("div",{className:"prompt-subsection",children:[f.jsx("h4",{className:"prompt-subsection-title",children:"👤 User Prompt"}),f.jsx("p",{className:"prompt-subsection-desc",children:"Template for user input to generate scene descriptions"}),f.jsx("textarea",{value:((g=t==null?void 0:t.start_frame_prompt_generation)==null?void 0:g.user_prompt)||"",onChange:T=>{const j={...t,start_frame_prompt_generation:{...t==null?void 0:t.start_frame_prompt_generation,user_prompt:T.target.value}};e(j),s(JSON.stringify(j,null,2)),a(!0),d("")},className:"section-textarea prompt-textarea",rows:6,placeholder:"Enter user prompt template..."}),f.jsx("div",{className:"prompt-preview",children:f.jsxs("details",{children:[f.jsx("summary",{className:"prompt-preview-toggle",children:"📋 Preview stored format"}),f.jsx("pre",{className:"prompt-preview-content",children:((y=t==null?void 0:t.start_frame_prompt_generation)==null?void 0:y.user_prompt)||"No content"})]})})]})]})}),f.jsx(ta,{title:"LLM Providers",icon:"🤖",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Model configurations for different AI providers"}),f.jsx("textarea",{value:JSON.stringify((t==null?void 0:t.llm_providers)||{},null,2),onChange:T=>_("llm_providers",T.target.value),className:"section-textarea",rows:8})]})}),f.jsx(ta,{title:"Image Generation",icon:"🖼️",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Image generation API settings and parameters"}),f.jsx("textarea",{value:JSON.stringify((t==null?void 0:t.image_generation)||{},null,2),onChange:T=>_("image_generation",T.target.value),className:"section-textarea",rows:8})]})}),f.jsx(ta,{title:"Video Generation",icon:"🎥",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Video generation API settings and parameters"}),f.jsx("textarea",{value:JSON.stringify((t==null?void 0:t.video_generation)||{},null,2),onChange:T=>_("video_generation",T.target.value),className:"section-textarea",rows:8})]})}),f.jsx(ta,{title:"Raw JSON",icon:"📝",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Complete configuration JSON (advanced editing)"}),f.jsx("textarea",{value:n,onChange:T=>v(T.target.value),className:"section-textarea",rows:20})]})})]}),f.jsxs("div",{className:"config-status",children:[f.jsxs("span",{children:["Status: ",i?"⚠️ Unsaved changes":"✅ Saved"]}),f.jsxs("span",{children:["Version: ",((S=t==null?void 0:t.configuration_metadata)==null?void 0:S.version)||"Unknown"]})]})]})}function aR({modalState:t,onClose:e}){const{isVisible:n,content:s}=t;if(w.useEffect(()=>{const r=o=>{o.key==="Escape"&&n&&(s==null?void 0:s.type)!=="loading"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,s==null?void 0:s.type,e]),!n||!s)return null;const i=()=>{switch(s.type){case"loading":return"⏳";case"success":return"✅";case"error":return"❌";case"info":return"ℹ️";default:return"🤖"}},a=()=>{const r="app-modal-content",o=s.type?`app-modal-${s.type}`:"";return`${r} ${o}`.trim()};return f.jsx("div",{className:"app-modal-overlay",children:f.jsxs("div",{className:a(),children:[f.jsxs("div",{className:"app-modal-header",children:[f.jsxs("div",{className:"app-modal-title",children:[f.jsx("span",{className:"app-modal-icon",children:i()}),f.jsx("h3",{children:s.title})]}),s.type!=="loading"&&f.jsx("button",{className:"app-modal-close",onClick:e,title:"Close",children:"×"})]}),f.jsxs("div",{className:"app-modal-body",children:[f.jsx("p",{className:"app-modal-message",children:s.message}),s.progress&&f.jsxs("div",{className:"app-modal-progress",children:[f.jsx("div",{className:"app-modal-progress-bar",children:f.jsx("div",{className:"app-modal-progress-fill",style:{width:`${s.progress.percentage}%`}})}),f.jsxs("div",{className:"app-modal-progress-text",children:[s.progress.current,"/",s.progress.total," (",s.progress.percentage,"%)",s.progress.currentItem&&f.jsxs("span",{className:"app-modal-progress-item",children:["• ",s.progress.currentItem]})]})]}),s.details&&s.details.length>0&&f.jsx("div",{className:"app-modal-details",children:s.details.map((r,o)=>f.jsxs("p",{className:"app-modal-detail",children:["• ",r]},o))})]}),s.type==="loading"&&f.jsx("div",{className:"app-modal-spinner-container",children:f.jsx("div",{className:"app-modal-spinner"})})]})})}const tl=class tl{static saveBackup(e,n,s){try{const i={masterJSON:n,timestamp:new Date().toISOString(),projectId:e,version:s},a=this.BACKUP_PREFIX+e;localStorage.setItem(a,JSON.stringify(i)),console.log("✅ Backup saved for project:",e)}catch(i){console.warn("Failed to save backup to localStorage:",i)}}static checkForRestoration(e,n){try{const s=this.BACKUP_PREFIX+e,i=localStorage.getItem(s);if(!i)return null;const a=JSON.parse(i);if(a.projectId===e&&a.masterJSON){const r=new Date(a.timestamp).getTime();if(Date.now()-r<this.BACKUP_EXPIRY_DAYS*24*60*60*1e3)return console.log("🔄 Found potential backup for restoration:",{backupVersion:a.version,currentVersion:n,timestamp:a.timestamp}),a}return null}catch(s){return console.warn("Failed to check backup from localStorage:",s),null}}static clearBackup(e){try{const n=this.BACKUP_PREFIX+e;localStorage.removeItem(n),console.log("🗑️ Backup cleared for project:",e)}catch(n){console.warn("Failed to clear backup from localStorage:",n)}}static cleanupOldBackups(){try{const e=[],n=Date.now()-this.BACKUP_EXPIRY_DAYS*24*60*60*1e3;for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);if(i!=null&&i.startsWith(this.BACKUP_PREFIX)){const a=localStorage.getItem(i);if(a){const r=JSON.parse(a);new Date(r.timestamp).getTime()<n&&e.push(i)}}}e.forEach(s=>localStorage.removeItem(s)),e.length>0&&console.log(`🧹 Cleaned up ${e.length} old backups`)}catch(e){console.warn("Failed to cleanup old backups:",e)}}};tl.BACKUP_PREFIX="flow-studio-backup-",tl.BACKUP_EXPIRY_DAYS=7;let Xt=tl;function rR({user:t}){const{id:e}=xT(),n=Sl(),[s,i]=w.useState(null),[a,r]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState("timeline"),[d,h]=w.useState(!0),[m,v]=w.useState({}),[_,b]=w.useState(!1),[p,g]=w.useState([]),y=uj(),[S,T]=w.useState(!1);w.useEffect(()=>{dj(y)},[y]);const[j,x]=w.useState(!0),[E,A]=w.useState(""),[C,N]=w.useState(!1),[U,P]=w.useState(!1),[V,B]=w.useState(""),[R,M]=w.useState(!1),[D,L]=w.useState(null),[I,re]=w.useState({loaded:!1,version:0});w.useEffect(()=>{if(!e){n("/dashboard");return}Xt.cleanupOldBackups(),Tt()},[e,n]);const ut=w.useCallback(async()=>{if(e)try{const k=await r0(e);if(k){v(k),A(JSON.stringify(k,null,2));const X=await Ku(e);X&&re({loaded:!0,version:X.current_version,lastSaved:X.updated_at}),N(!1);const Dt=Xt.checkForRestoration(e,X.current_version);Dt&&(L(Dt),M(!0))}else re({loaded:!1,version:0,error:"Master JSON not found"})}catch(k){console.error("Error loading master JSON:",k),re({loaded:!1,version:0,error:"Failed to load master JSON"})}},[e]),Rt=w.useCallback(async()=>{if(!e)return;T(!0);const k=await o0(e);g(k),T(!1)},[e]),ne=w.useCallback(async k=>{if(!e)return;const X=await l0(e,k);X&&X.master_json&&(v(X.master_json),A(JSON.stringify(X.master_json,null,2)),N(!0),b(!1))},[e]),ue=w.useCallback(async()=>{if(!e||!E.trim()){B("No content to save");return}P(!0),B("");try{const k=JSON.parse(E);if(await Ko(e,k,"Master JSON updated")){v(k),N(!1),Xt.clearBackup(e);const Dt=a.find(qi=>qi.phase_name===o),Ul=k.scenes&&typeof k.scenes=="object"&&k.scenes!==null&&Object.keys(k.scenes).length>0;await ut();const Pl=await Xu(e);r(Pl);const Ll=Pl.find(qi=>qi.phase_index===2),Vl=Pl.find(qi=>qi.phase_index===3);Ul&&(!(Ll!=null&&Ll.can_proceed)||!(Vl!=null&&Vl.can_proceed))&&(console.warn("Phase unlock validation failed - phases not unlocked as expected"),B("Phases should have unlocked but didn't. Please refresh the page."))}else B("Failed to save master JSON to database")}catch(k){console.error("Error saving master JSON:",k),k instanceof SyntaxError?B("Invalid JSON format. Please check your syntax."):k.message.includes("database")||k.message.includes("supabase")?B("Database connection failed. Please check your internet connection and try again."):k.message.includes("project not found")?B("Project not found. Please refresh the page and try again."):k.message.includes("reload data")?B("Save succeeded but failed to reload. Please refresh the page to see changes."):B(`Save failed: ${k.message||"Unknown error occurred"}`)}finally{P(!1)}},[e,E]),Tt=async()=>{if(!e)return;h(!0);const[k,X]=await Promise.all([Ku(e),Xu(e)]);if(!k){n("/dashboard");return}i(k),r(X);const Dt=X.find(Ul=>Ul.can_proceed);Dt&&l(Dt.phase_name),await ut(),h(!1)},Er=k=>({script_interpretation:"Map Script",element_images:"Generate Elements",scene_generation:"Generate Scenes Frame",scene_videos:"Generate Scenes Clip",final_assembly:"Assembly"})[k]||k,of=k=>({script_interpretation:"📄",element_images:"🎨",scene_generation:"🎬",scene_videos:"🎥",final_assembly:"🎞️"})[k]||"📋",lf=k=>k.status==="completed"?"#00cc00":k.status==="processing"?"#ff9900":k.can_proceed?"#0066cc":"#666",cf=k=>k.status==="completed"?"Completed":k.status==="processing"?"Processing":k.can_proceed?"Available":"Locked",qb=k=>{!k.can_proceed&&k.status!=="completed"||l(k.phase_name)};w.useCallback(async k=>{console.log("loadPhaseContent called but deprecated - using master JSON")},[]);const kl=w.useCallback(k=>{A(k),N(!0)},[]);w.useCallback(async()=>{console.warn("handleSavePhase called - redirecting to handleSaveJSON"),await ue()},[ue]);const Ib=()=>{const k=a.find(X=>X.phase_name===o);if(!k||!s)return null;switch(c){case"json":return f.jsxs("div",{className:"view-content-container",children:[f.jsxs("div",{className:"view-content-header",children:[f.jsx("span",{className:"view-content-title",children:o==="script_interpretation"?`JSON Content (Phase ${k.phase_index})`:`Base Script Content (From Phase 1 → Phase ${k.phase_index})`}),f.jsx("span",{className:"view-content-subtitle",children:E||m?"Master JSON loaded":"No content - Complete Phase 1 first"})]}),f.jsx("div",{className:"json-editor",children:f.jsx("textarea",{value:E||(m?JSON.stringify(m,null,2):""),onChange:X=>kl(X.target.value),className:"json-textarea",style:{width:"100%",minHeight:"500px",fontFamily:"Monaco, Menlo, Consolas, monospace",fontSize:"0.875rem",padding:"1rem",border:"1px solid var(--color-border-default)",borderRadius:"4px",background:"var(--color-bg-secondary)",color:"var(--color-text-primary)",resize:"vertical"},placeholder:"No script interpretation content available - Please complete Phase 1 first to proceed with subsequent phases.",disabled:o!=="script_interpretation"})})]});case"timeline":if(m&&Object.keys(m).length>0){const X=m;return f.jsx(nR,{content:X,projectId:s.id,projectName:s.name,phaseId:k.id,onContentUpdate:Dt=>{v(Dt),A(JSON.stringify(Dt,null,2)),N(!0),Xt.saveBackup(e,Dt,I.version)}})}return f.jsxs("div",{className:"view-placeholder",children:[f.jsx("div",{className:"view-placeholder-icon",children:"📊"}),f.jsx("h3",{className:"view-placeholder-title",children:"Timeline View"}),f.jsxs("p",{children:["Story foundation for ",k.phase_name.replace("_"," ")]}),f.jsx("p",{children:f.jsx("em",{children:"Complete Phase 1 first to see the timeline foundation"})})]});case"elements":return f.jsxs("div",{className:"view-placeholder",children:[f.jsx("div",{className:"view-placeholder-icon",children:"🎭"}),f.jsx("h3",{className:"view-placeholder-title",children:"Elements View"}),f.jsx("p",{children:"Cross-scene element management (Phase 2+)"})]});case"style":return m&&Object.keys(m).length>0?f.jsx(sR,{masterJson:m,onContentUpdate:X=>{v(X),A(JSON.stringify(X,null,2)),N(!0),Xt.saveBackup(e,X,I.version)}}):f.jsxs("div",{className:"view-placeholder",children:[f.jsx("div",{className:"view-placeholder-icon",children:"🎨"}),f.jsx("h3",{className:"view-placeholder-title",children:"Style Control"}),f.jsx("p",{children:f.jsx("em",{children:"Complete Phase 1 first to access style controls"})})]});case"config":return f.jsx(iR,{});default:return null}},Fb=()=>{if(!s)return null;const k=s0.getCompletedPhases(m);return a.find(X=>X.phase_name===o),f.jsx("div",{className:"project-header-sticky",children:f.jsxs("div",{className:"flex justify-between items-center text-sm text-muted",children:[f.jsxs("div",{children:[f.jsxs("div",{style:{fontSize:"1.1rem",marginBottom:"0.25rem"},children:["Project: ",f.jsx("strong",{className:"text-primary",children:s.name})]}),f.jsxs("div",{children:["Progress: ",f.jsx("strong",{style:{color:k>0?"#00cc00":"#999"},children:k}),"/5 phases"]})]}),f.jsxs("div",{className:"header-actions",children:[C&&f.jsx("span",{className:"btn text-xs px-md py-xs",style:{border:"1px solid #ff6600",color:"#ff6600",backgroundColor:"transparent",cursor:"default"},children:"⚠️ Unsaved Changes"}),f.jsx("button",{onClick:ue,disabled:U||!C||!E.trim(),className:`btn text-xs px-md py-xs ${!C||!E.trim()||U?"btn-secondary":"btn-success"}`,children:U?"💾 Saving...":C?"💾 Save":"✅ Saved"}),I.version>0&&f.jsx("button",{onClick:()=>{Rt(),b(!0)},className:"btn text-xs px-md py-xs btn-secondary",children:"📋 History"})]})]})})},Yb=()=>{const k=a.find(X=>X.phase_name===o);return!k||!s?null:f.jsx("div",{className:"phase-content-container",children:o==="script_interpretation"?f.jsx(hj,{phase:k,projectId:s.id,projectName:s.name,onContentChange:Tt,jsonContent:E,hasUnsavedChanges:C,isSaving:U,error:V,databaseStatus:I,showVersionHistory:_,versionHistory:p,loadingVersions:S,onJsonChange:kl,onSavePhase:ue,onLoadPhaseContent:()=>{},onLoadVersionHistory:()=>Rt(),onLoadVersionContent:X=>ne(X),onShowVersionHistory:b,useProduction:j,onUseProductionChange:x}):o==="scene_generation"?f.jsx(vj,{phase:k,projectId:s.id,projectName:s.name,masterJSON:m,onContentUpdate:X=>{v(X),A(JSON.stringify(X,null,2)),N(!0),Xt.saveBackup(e,X,I.version)},hasUnsavedChanges:C,onJsonChange:kl}):f.jsxs("div",{className:"phase-content-container",children:[f.jsx("div",{className:"phase-content-header",children:f.jsxs("div",{children:[f.jsxs("h2",{className:"phase-content-title",children:[of(k.phase_name)," ",Er(k.phase_name)]}),f.jsxs("div",{className:"phase-content-meta",children:[f.jsxs("span",{children:["Phase ",k.phase_index," of 5"]}),f.jsx("span",{className:"phase-status",style:{background:lf(k)},children:cf(k)})]})]})}),f.jsx("div",{className:"phase-placeholder",children:f.jsxs("div",{className:"phase-placeholder-content",children:[f.jsx("div",{className:"phase-placeholder-icon",children:of(k.phase_name)}),f.jsxs("h3",{className:"phase-placeholder-title",children:[Er(k.phase_name)," Module"]}),f.jsxs("p",{className:"phase-placeholder-description",children:["This phase module will be implemented next. It will handle the ",k.phase_name.replace("_"," "),"workflow including n8n integration, content generation, and user approval interface."]}),k.can_proceed&&!k.user_saved&&f.jsx("div",{children:f.jsxs("button",{className:"phase-start-button",children:["Start ",Er(k.phase_name)]})})]})})]})})};return d?f.jsx("div",{className:"loading-container",children:"Loading project..."}):!s||!e?f.jsx("div",{className:"loading-container",children:"Project not found"}):f.jsxs("div",{className:"project-detail-container",children:[f.jsxs("div",{className:"project-detail-sidebar",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"var(--space-sm)"},children:f.jsx("img",{src:aj,alt:"Flow Studio",className:"logo-image"})}),f.jsx("div",{className:"phase-placeholder-section",children:f.jsx("button",{onClick:()=>n("/dashboard"),className:"phase-button-container",children:f.jsxs("div",{className:"phase-button-row",children:[f.jsx("div",{className:"phase-number-column",children:f.jsx("span",{className:"phase-number",children:"📁"})}),f.jsxs("div",{className:"phase-info-column",children:[f.jsx("div",{className:"phase-name",children:"Projects"}),f.jsx("div",{className:"phase-status-text",children:"Dashboard"})]}),f.jsx("div",{className:"phase-status-dot",style:{background:"#0066cc"}})]})})}),f.jsxs("div",{className:"phase-placeholder-section",children:[f.jsx("h3",{className:"phases-section-title",children:"Project Phases"}),f.jsx("div",{className:"phases-list",children:a.map(k=>f.jsx("button",{onClick:()=>qb(k),disabled:!k.can_proceed&&!k.user_saved,className:`phase-button-container ${o===k.phase_name?"active":""}`,children:f.jsxs("div",{className:"phase-button-row",children:[f.jsx("div",{className:"phase-number-column",children:f.jsx("span",{className:"phase-number",children:k.phase_index})}),f.jsxs("div",{className:"phase-info-column",children:[f.jsx("div",{className:"phase-name",children:Er(k.phase_name)}),f.jsx("div",{className:"phase-status-text",children:cf(k)})]}),f.jsx("div",{className:"phase-status-dot",style:{background:lf(k)}})]})},k.id))})]})]}),f.jsxs("div",{className:"project-main-content",children:[Fb(),c!=="config"&&f.jsx("div",{style:{borderRadius:"var(--radius-md)",margin:"var(--space-md)",backgroundColor:"#000000",border:"1px solid var(--color-border-default)"},children:Yb()}),f.jsx("div",{className:"project-nav-sticky",style:{marginTop:"var(--space-md)",marginBottom:"var(--space-sm)"},children:f.jsx(_j,{activeView:c,onViewChange:u,masterJSON:m})}),f.jsx("div",{style:{margin:"var(--space-md)"},children:Ib()})]}),R&&D&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content modal-width-500",children:[f.jsx("h2",{className:"text-primary text-2xl mb-xl flex items-center gap-md mb-0",children:"💾 Restore Unsaved Changes?"}),f.jsxs("div",{className:"bg-warning border border-light p-xl rounded-md mb-2xl",children:[f.jsx("p",{className:"text-secondary mb-md mb-0",children:"We found unsaved changes from your previous session."}),f.jsxs("p",{className:"text-sm text-muted mb-0",children:["Backup saved: ",new Date(D.timestamp).toLocaleString()]})]}),f.jsx("div",{className:"db-status db-status-info mb-2xl",children:f.jsx("p",{className:"text-sm mb-0",children:"✨ Your changes will be restored and you can continue editing where you left off."})}),f.jsxs("div",{className:"flex gap-xl justify-end",children:[f.jsx("button",{onClick:()=>{M(!1),L(null),Xt.clearBackup(e)},className:"btn btn-secondary",children:"Discard Changes"}),f.jsx("button",{onClick:()=>{v(D.masterJSON),A(JSON.stringify(D.masterJSON,null,2)),N(!0),M(!1),L(null)},className:"btn btn-primary",children:"🔄 Restore Changes"})]})]})}),f.jsx(aR,{modalState:y.modalState,onClose:y.hideModal})]})}function oR(){const[t,e]=w.useState(null),[n,s]=w.useState(!0);return w.useEffect(()=>{W.auth.getSession().then(({data:{session:a}})=>{e((a==null?void 0:a.user)??null),s(!1)});const{data:{subscription:i}}=W.auth.onAuthStateChange((a,r)=>{e((r==null?void 0:r.user)??null)});return()=>i.unsubscribe()},[]),n?f.jsx("div",{className:"app-loading",children:"Loading..."}):f.jsxs(BT,{children:[f.jsx(ra,{path:"/login",element:t?f.jsx($r,{to:"/dashboard",replace:!0}):f.jsx(nj,{})}),f.jsx(ra,{path:"/dashboard",element:t?f.jsx(ij,{user:t}):f.jsx($r,{to:"/login",replace:!0})}),f.jsx(ra,{path:"/project/:id",element:t?f.jsx(rR,{user:t}):f.jsx($r,{to:"/login",replace:!0})}),f.jsx(ra,{path:"/",element:f.jsx($r,{to:t?"/dashboard":"/login",replace:!0})})]})}Kx.createRoot(document.getElementById("root")).render(f.jsx(w.StrictMode,{children:f.jsx(GT,{children:f.jsx(oR,{})})}));export{St as c,Qb as g};
