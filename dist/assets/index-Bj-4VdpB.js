function Qb(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var Cg={exports:{}},rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb=Symbol.for("react.transitional.element"),eS=Symbol.for("react.fragment");function Og(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:Wb,type:t,key:s,ref:e!==void 0?e:null,props:n}}rl.Fragment=eS;rl.jsx=Og;rl.jsxs=Og;Cg.exports=rl;var f=Cg.exports,Rg={exports:{}},G={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed=Symbol.for("react.transitional.element"),tS=Symbol.for("react.portal"),nS=Symbol.for("react.fragment"),sS=Symbol.for("react.strict_mode"),iS=Symbol.for("react.profiler"),aS=Symbol.for("react.consumer"),rS=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),lS=Symbol.for("react.suspense"),cS=Symbol.for("react.memo"),Ng=Symbol.for("react.lazy"),mf=Symbol.iterator;function uS(t){return t===null||typeof t!="object"?null:(t=mf&&t[mf]||t["@@iterator"],typeof t=="function"?t:null)}var Dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kg=Object.assign,Mg={};function Di(t,e,n){this.props=t,this.context=e,this.refs=Mg,this.updater=n||Dg}Di.prototype.isReactComponent={};Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ug(){}Ug.prototype=Di.prototype;function jd(t,e,n){this.props=t,this.context=e,this.refs=Mg,this.updater=n||Dg}var Ad=jd.prototype=new Ug;Ad.constructor=jd;kg(Ad,Di.prototype);Ad.isPureReactComponent=!0;var pf=Array.isArray,fe={H:null,A:null,T:null,S:null,V:null},Lg=Object.prototype.hasOwnProperty;function Cd(t,e,n,s,i,a){return n=a.ref,{$$typeof:Ed,type:t,key:e,ref:n!==void 0?n:null,props:a}}function dS(t,e){return Cd(t.type,e,void 0,void 0,void 0,t.props)}function Od(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ed}function hS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gf=/\/+/g;function Fl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hS(""+t.key):e.toString(36)}function yf(){}function fS(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(yf,yf):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Bs(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Ed:case tS:r=!0;break;case Ng:return r=t._init,Bs(r(t._payload),e,n,s,i)}}if(r)return i=i(t),r=s===""?"."+Fl(t,0):s,pf(i)?(n="",r!=null&&(n=r.replace(gf,"$&/")+"/"),Bs(i,e,n,"",function(c){return c})):i!=null&&(Od(i)&&(i=dS(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(gf,"$&/")+"/")+r)),e.push(i)),1;r=0;var o=s===""?".":s+":";if(pf(t))for(var l=0;l<t.length;l++)s=t[l],a=o+Fl(s,l),r+=Bs(s,e,n,a,i);else if(l=uS(t),typeof l=="function")for(t=l.call(t),l=0;!(s=t.next()).done;)s=s.value,a=o+Fl(s,l++),r+=Bs(s,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return Bs(fS(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function Or(t,e,n){if(t==null)return t;var s=[],i=0;return Bs(t,s,"","",function(a){return e.call(n,a,i++)}),s}function mS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vf=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function pS(){}G.Children={map:Or,forEach:function(t,e,n){Or(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Or(t,function(){e++}),e},toArray:function(t){return Or(t,function(e){return e})||[]},only:function(t){if(!Od(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=Di;G.Fragment=nS;G.Profiler=iS;G.PureComponent=jd;G.StrictMode=sS;G.Suspense=lS;G.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe;G.__COMPILER_RUNTIME={__proto__:null,c:function(t){return fe.H.useMemoCache(t)}};G.cache=function(t){return function(){return t.apply(null,arguments)}};G.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=kg({},t.props),i=t.key,a=void 0;if(e!=null)for(r in e.ref!==void 0&&(a=void 0),e.key!==void 0&&(i=""+e.key),e)!Lg.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];s.children=o}return Cd(t.type,i,void 0,void 0,a,s)};G.createContext=function(t){return t={$$typeof:rS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:aS,_context:t},t};G.createElement=function(t,e,n){var s,i={},a=null;if(e!=null)for(s in e.key!==void 0&&(a=""+e.key),e)Lg.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(s in r=t.defaultProps,r)i[s]===void 0&&(i[s]=r[s]);return Cd(t,a,void 0,void 0,null,i)};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:oS,render:t}};G.isValidElement=Od;G.lazy=function(t){return{$$typeof:Ng,_payload:{_status:-1,_result:t},_init:mS}};G.memo=function(t,e){return{$$typeof:cS,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=fe.T,n={};fe.T=n;try{var s=t(),i=fe.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(pS,vf)}catch(a){vf(a)}finally{fe.T=e}};G.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()};G.use=function(t){return fe.H.use(t)};G.useActionState=function(t,e,n){return fe.H.useActionState(t,e,n)};G.useCallback=function(t,e){return fe.H.useCallback(t,e)};G.useContext=function(t){return fe.H.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t,e){return fe.H.useDeferredValue(t,e)};G.useEffect=function(t,e,n){var s=fe.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(t,e)};G.useId=function(){return fe.H.useId()};G.useImperativeHandle=function(t,e,n){return fe.H.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return fe.H.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return fe.H.useLayoutEffect(t,e)};G.useMemo=function(t,e){return fe.H.useMemo(t,e)};G.useOptimistic=function(t,e){return fe.H.useOptimistic(t,e)};G.useReducer=function(t,e,n){return fe.H.useReducer(t,e,n)};G.useRef=function(t){return fe.H.useRef(t)};G.useState=function(t){return fe.H.useState(t)};G.useSyncExternalStore=function(t,e,n){return fe.H.useSyncExternalStore(t,e,n)};G.useTransition=function(){return fe.H.useTransition()};G.version="19.1.0";Rg.exports=G;var x=Rg.exports;const gS=Zb(x),yS=Qb({__proto__:null,default:gS},[x]);var Pg={exports:{}},ol={},Vg={exports:{}},Bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,D){var M=A.length;A.push(D);e:for(;0<M;){var K=M-1>>>1,q=A[K];if(0<i(q,D))A[K]=D,A[M]=q,M=K;else break e}}function n(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var D=A[0],M=A.pop();if(M!==D){A[0]=M;e:for(var K=0,q=A.length,de=q>>>1;K<de;){var Q=2*(K+1)-1,te=A[Q],De=Q+1,Ce=A[De];if(0>i(te,M))De<q&&0>i(Ce,te)?(A[K]=Ce,A[De]=M,K=De):(A[K]=te,A[Q]=M,K=Q);else if(De<q&&0>i(Ce,M))A[K]=Ce,A[De]=M,K=De;else break e}}return D}function i(A,D){var M=A.sortIndex-D.sortIndex;return M!==0?M:A.id-D.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var r=Date,o=r.now();t.unstable_now=function(){return r.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,b=!1,_=!1,y=!1,p=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function w(A){for(var D=n(c);D!==null;){if(D.callback===null)s(c);else if(D.startTime<=A)s(c),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(c)}}function E(A){if(_=!1,w(A),!b)if(n(l)!==null)b=!0,C||(C=!0,P());else{var D=n(c);D!==null&&N(E,D.startTime-A)}}var C=!1,S=-1,T=5,j=-1;function R(){return y?!0:!(t.unstable_now()-j<T)}function U(){if(y=!1,C){var A=t.unstable_now();j=A;var D=!0;try{e:{b=!1,_&&(_=!1,g(S),S=-1),m=!0;var M=h;try{t:{for(w(A),d=n(l);d!==null&&!(d.expirationTime>A&&R());){var K=d.callback;if(typeof K=="function"){d.callback=null,h=d.priorityLevel;var q=K(d.expirationTime<=A);if(A=t.unstable_now(),typeof q=="function"){d.callback=q,w(A),D=!0;break t}d===n(l)&&s(l),w(A)}else s(l);d=n(l)}if(d!==null)D=!0;else{var de=n(c);de!==null&&N(E,de.startTime-A),D=!1}}break e}finally{d=null,h=M,m=!1}D=void 0}}finally{D?P():C=!1}}}var P;if(typeof v=="function")P=function(){v(U)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,V=L.port2;L.port1.onmessage=U,P=function(){V.postMessage(null)}}else P=function(){p(U,0)};function N(A,D){S=p(function(){A(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var M=h;h=D;try{return A()}finally{h=M}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var M=h;h=A;try{return D()}finally{h=M}},t.unstable_scheduleCallback=function(A,D,M){var K=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?K+M:K):M=K,A){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=M+q,A={id:u++,callback:D,priorityLevel:A,startTime:M,expirationTime:q,sortIndex:-1},M>K?(A.sortIndex=M,e(c,A),n(l)===null&&A===n(c)&&(_?(g(S),S=-1):_=!0,N(E,M-K))):(A.sortIndex=q,e(l,A),b||m||(b=!0,C||(C=!0,P()))),A},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(A){var D=h;return function(){var M=h;h=D;try{return A.apply(this,arguments)}finally{h=M}}}})(Bg);Vg.exports=Bg;var vS=Vg.exports,zg={exports:{}},Xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _S=x;function $g(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pn(){}var Ye={d:{f:pn,r:function(){throw Error($g(522))},D:pn,C:pn,L:pn,m:pn,X:pn,S:pn,M:pn},p:0,findDOMNode:null},bS=Symbol.for("react.portal");function SS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bS,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var ha=_S.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ll(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ye;Xe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error($g(299));return SS(t,e,null,n)};Xe.flushSync=function(t){var e=ha.T,n=Ye.p;try{if(ha.T=null,Ye.p=2,t)return t()}finally{ha.T=e,Ye.p=n,Ye.d.f()}};Xe.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ye.d.C(t,e))};Xe.prefetchDNS=function(t){typeof t=="string"&&Ye.d.D(t)};Xe.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=ll(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ye.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:a}):n==="script"&&Ye.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Xe.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=ll(e.as,e.crossOrigin);Ye.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ye.d.M(t)};Xe.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=ll(n,e.crossOrigin);Ye.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Xe.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=ll(e.as,e.crossOrigin);Ye.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ye.d.m(t)};Xe.requestFormReset=function(t){Ye.d.r(t)};Xe.unstable_batchedUpdates=function(t,e){return t(e)};Xe.useFormState=function(t,e,n){return ha.H.useFormState(t,e,n)};Xe.useFormStatus=function(){return ha.H.useHostTransitionStatus()};Xe.version="19.1.0";function Gg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gg)}catch(t){console.error(t)}}Gg(),zg.exports=Xe;var wS=zg.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ne=vS,Hg=x,xS=wS;function O(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ir(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ig(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _f(t){if(ir(t)!==t)throw Error(O(188))}function TS(t){var e=t.alternate;if(!e){if(e=ir(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return _f(i),t;if(a===s)return _f(i),e;a=a.sibling}throw Error(O(188))}if(n.return!==s.return)n=i,s=a;else{for(var r=!1,o=i.child;o;){if(o===n){r=!0,n=i,s=a;break}if(o===s){r=!0,s=i,n=a;break}o=o.sibling}if(!r){for(o=a.child;o;){if(o===n){r=!0,n=a,s=i;break}if(o===s){r=!0,s=a,n=i;break}o=o.sibling}if(!r)throw Error(O(189))}}if(n.alternate!==s)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Fg(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Fg(t),e!==null)return e;t=t.sibling}return null}var ue=Object.assign,ES=Symbol.for("react.element"),Rr=Symbol.for("react.transitional.element"),aa=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),Yg=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),jS=Symbol.for("react.provider"),Kg=Symbol.for("react.consumer"),Jt=Symbol.for("react.context"),Rd=Symbol.for("react.forward_ref"),Qc=Symbol.for("react.suspense"),Zc=Symbol.for("react.suspense_list"),Nd=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),Jc=Symbol.for("react.activity"),AS=Symbol.for("react.memo_cache_sentinel"),bf=Symbol.iterator;function Ki(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var CS=Symbol.for("react.client.reference");function Wc(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===CS?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case Xc:return"Profiler";case Yg:return"StrictMode";case Qc:return"Suspense";case Zc:return"SuspenseList";case Jc:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case aa:return"Portal";case Jt:return(t.displayName||"Context")+".Provider";case Kg:return(t._context.displayName||"Context")+".Consumer";case Rd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nd:return e=t.displayName||null,e!==null?e:Wc(t.type)||"Memo";case wn:e=t._payload,t=t._init;try{return Wc(t(e))}catch{}}return null}var ra=Array.isArray,z=Hg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=xS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,hs={pending:!1,data:null,method:null,action:null},eu=[],Fs=-1;function Ht(t){return{current:t}}function Pe(t){0>Fs||(t.current=eu[Fs],eu[Fs]=null,Fs--)}function me(t,e){Fs++,eu[Fs]=t.current,t.current=e}var Pt=Ht(null),Ma=Ht(null),Un=Ht(null),bo=Ht(null);function So(t,e){switch(me(Un,e),me(Ma,t),me(Pt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Em(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Em(e),t=d_(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Pe(Pt),me(Pt,t)}function vi(){Pe(Pt),Pe(Ma),Pe(Un)}function tu(t){t.memoizedState!==null&&me(bo,t);var e=Pt.current,n=d_(e,t.type);e!==n&&(me(Ma,t),me(Pt,n))}function wo(t){Ma.current===t&&(Pe(Pt),Pe(Ma)),bo.current===t&&(Pe(bo),qa._currentValue=hs)}var nu=Object.prototype.hasOwnProperty,Dd=Ne.unstable_scheduleCallback,Yl=Ne.unstable_cancelCallback,OS=Ne.unstable_shouldYield,RS=Ne.unstable_requestPaint,Vt=Ne.unstable_now,NS=Ne.unstable_getCurrentPriorityLevel,Xg=Ne.unstable_ImmediatePriority,Qg=Ne.unstable_UserBlockingPriority,xo=Ne.unstable_NormalPriority,DS=Ne.unstable_LowPriority,Zg=Ne.unstable_IdlePriority,kS=Ne.log,MS=Ne.unstable_setDisableYieldValue,ar=null,ct=null;function Rn(t){if(typeof kS=="function"&&MS(t),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(ar,t)}catch{}}var ut=Math.clz32?Math.clz32:PS,US=Math.log,LS=Math.LN2;function PS(t){return t>>>=0,t===0?32:31-(US(t)/LS|0)|0}var Nr=256,Dr=4194304;function ss(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function cl(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,a=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~a,s!==0?i=ss(s):(r&=o,r!==0?i=ss(r):n||(n=o&~t,n!==0&&(i=ss(n))))):(o=s&~a,o!==0?i=ss(o):r!==0?i=ss(r):n||(n=s&~t,n!==0&&(i=ss(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function rr(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function VS(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jg(){var t=Nr;return Nr<<=1,!(Nr&4194048)&&(Nr=256),t}function Wg(){var t=Dr;return Dr<<=1,!(Dr&62914560)&&(Dr=4194304),t}function Kl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function or(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function BS(t,e,n,s,i,a){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=r&~n;0<n;){var u=31-ut(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(h!==null)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];m!==null&&(m.lane&=-536870913)}n&=~d}s!==0&&ey(t,s,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(r&~e))}function ey(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-ut(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&4194090}function ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-ut(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function kd(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Md(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function ny(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:S_(t.type))}function zS(t,e){var n=ee.p;try{return ee.p=t,e()}finally{ee.p=n}}var Kn=Math.random().toString(36).slice(2),He="__reactFiber$"+Kn,nt="__reactProps$"+Kn,ki="__reactContainer$"+Kn,su="__reactEvents$"+Kn,$S="__reactListeners$"+Kn,GS="__reactHandles$"+Kn,Sf="__reactResources$"+Kn,lr="__reactMarker$"+Kn;function Ud(t){delete t[He],delete t[nt],delete t[su],delete t[$S],delete t[GS]}function Ys(t){var e=t[He];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[He]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cm(t);t!==null;){if(n=t[He])return n;t=Cm(t)}return e}t=n,n=t.parentNode}return null}function Mi(t){if(t=t[He]||t[ki]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function oa(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(O(33))}function ui(t){var e=t[Sf];return e||(e=t[Sf]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ue(t){t[lr]=!0}var sy=new Set,iy={};function js(t,e){_i(t,e),_i(t+"Capture",e)}function _i(t,e){for(iy[t]=e,t=0;t<e.length;t++)sy.add(e[t])}var HS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wf={},xf={};function qS(t){return nu.call(xf,t)?!0:nu.call(wf,t)?!1:HS.test(t)?xf[t]=!0:(wf[t]=!0,!1)}function to(t,e,n){if(qS(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function kr(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function It(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}var Xl,Tf;function zs(t){if(Xl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xl=e&&e[1]||"",Tf=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xl+t+Tf}var Ql=!1;function Zl(t,e){if(!t||Ql)return"";Ql=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var h=m}Reflect.construct(t,[],d)}else{try{d.call()}catch(m){h=m}t.call(d.prototype)}}else{try{throw Error()}catch(m){h=m}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=s.DetermineComponentFrameRoot(),r=a[0],o=a[1];if(r&&o){var l=r.split(`
`),c=o.split(`
`);for(i=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(s===l.length||i===c.length)for(s=l.length-1,i=c.length-1;1<=s&&0<=i&&l[s]!==c[i];)i--;for(;1<=s&&0<=i;s--,i--)if(l[s]!==c[i]){if(s!==1||i!==1)do if(s--,i--,0>i||l[s]!==c[i]){var u=`
`+l[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=i);break}}}finally{Ql=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?zs(n):""}function IS(t){switch(t.tag){case 26:case 27:case 5:return zs(t.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 15:return Zl(t.type,!1);case 11:return Zl(t.type.render,!1);case 1:return Zl(t.type,!0);case 31:return zs("Activity");default:return""}}function Ef(t){try{var e="";do e+=IS(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function yt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ay(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FS(t){var e=ay(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(r){s=""+r,a.call(this,r)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(r){s=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function To(t){t._valueTracker||(t._valueTracker=FS(t))}function ry(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=ay(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Eo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var YS=/[\n"\\]/g;function bt(t){return t.replace(YS,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function iu(t,e,n,s,i,a,r,o){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yt(e)):t.value!==""+yt(e)&&(t.value=""+yt(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?au(t,r,yt(e)):n!=null?au(t,r,yt(n)):s!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+yt(o):t.removeAttribute("name")}function oy(t,e,n,s,i,a,r,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null))return;n=n!=null?""+yt(n):"",e=e!=null?""+yt(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r)}function au(t,e,n){e==="number"&&Eo(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function di(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+yt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ly(t,e,n){if(e!=null&&(e=""+yt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yt(n):""}function cy(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(O(92));if(ra(s)){if(1<s.length)throw Error(O(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=yt(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s)}function bi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var KS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jf(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||KS.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function uy(t,e,n){if(e!=null&&typeof e!="object")throw Error(O(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&jf(t,i,s)}else for(var a in e)e.hasOwnProperty(a)&&jf(t,a,e[a])}function Ld(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),QS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(t){return QS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ru=null;function Pd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ks=null,hi=null;function Af(t){var e=Mi(t);if(e&&(t=e.stateNode)){var n=t[nt]||null;e:switch(t=e.stateNode,e.type){case"input":if(iu(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[nt]||null;if(!i)throw Error(O(90));iu(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&ry(s)}break e;case"textarea":ly(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&di(t,!!n.multiple,e,!1)}}}var Jl=!1;function dy(t,e,n){if(Jl)return t(e,n);Jl=!0;try{var s=t(e);return s}finally{if(Jl=!1,(Ks!==null||hi!==null)&&(_l(),Ks&&(e=Ks,t=hi,hi=Ks=null,Af(e),t)))for(e=0;e<t.length;e++)Af(t[e])}}function Ua(t,e){var n=t.stateNode;if(n===null)return null;var s=n[nt]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(on)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){ou=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{ou=!1}var Nn=null,Vd=null,so=null;function hy(){if(so)return so;var t,e=Vd,n=e.length,s,i="value"in Nn?Nn.value:Nn.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var r=n-t;for(s=1;s<=r&&e[n-s]===i[a-s];s++);return so=i.slice(t,1<s?1-s:void 0)}function io(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mr(){return!0}function Cf(){return!1}function st(t){function e(n,s,i,a,r){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mr:Cf,this.isPropagationStopped=Cf,this}return ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),e}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=st(As),cr=ue({},As,{view:0,detail:0}),ZS=st(cr),Wl,ec,Qi,dl=ue({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(Wl=t.screenX-Qi.screenX,ec=t.screenY-Qi.screenY):ec=Wl=0,Qi=t),Wl)},movementY:function(t){return"movementY"in t?t.movementY:ec}}),Of=st(dl),JS=ue({},dl,{dataTransfer:0}),WS=st(JS),ew=ue({},cr,{relatedTarget:0}),tc=st(ew),tw=ue({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),nw=st(tw),sw=ue({},As,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iw=st(sw),aw=ue({},As,{data:0}),Rf=st(aw),rw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ow={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lw[t])?!!e[t]:!1}function Bd(){return cw}var uw=ue({},cr,{key:function(t){if(t.key){var e=rw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=io(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ow[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bd,charCode:function(t){return t.type==="keypress"?io(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?io(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dw=st(uw),hw=ue({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=st(hw),fw=ue({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bd}),mw=st(fw),pw=ue({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),gw=st(pw),yw=ue({},dl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vw=st(yw),_w=ue({},As,{newState:0,oldState:0}),bw=st(_w),Sw=[9,13,27,32],zd=on&&"CompositionEvent"in window,fa=null;on&&"documentMode"in document&&(fa=document.documentMode);var ww=on&&"TextEvent"in window&&!fa,fy=on&&(!zd||fa&&8<fa&&11>=fa),Df=" ",kf=!1;function my(t,e){switch(t){case"keyup":return Sw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function py(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function xw(t,e){switch(t){case"compositionend":return py(e);case"keypress":return e.which!==32?null:(kf=!0,Df);case"textInput":return t=e.data,t===Df&&kf?null:t;default:return null}}function Tw(t,e){if(Xs)return t==="compositionend"||!zd&&my(t,e)?(t=hy(),so=Vd=Nn=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fy&&e.locale!=="ko"?null:e.data;default:return null}}var Ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ew[t.type]:e==="textarea"}function gy(t,e,n,s){Ks?hi?hi.push(s):hi=[s]:Ks=s,e=Ho(e,"onChange"),0<e.length&&(n=new ul("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ma=null,La=null;function jw(t){l_(t,0)}function hl(t){var e=oa(t);if(ry(e))return t}function Uf(t,e){if(t==="change")return e}var yy=!1;if(on){var nc;if(on){var sc="oninput"in document;if(!sc){var Lf=document.createElement("div");Lf.setAttribute("oninput","return;"),sc=typeof Lf.oninput=="function"}nc=sc}else nc=!1;yy=nc&&(!document.documentMode||9<document.documentMode)}function Pf(){ma&&(ma.detachEvent("onpropertychange",vy),La=ma=null)}function vy(t){if(t.propertyName==="value"&&hl(La)){var e=[];gy(e,La,t,Pd(t)),dy(jw,e)}}function Aw(t,e,n){t==="focusin"?(Pf(),ma=e,La=n,ma.attachEvent("onpropertychange",vy)):t==="focusout"&&Pf()}function Cw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hl(La)}function Ow(t,e){if(t==="click")return hl(e)}function Rw(t,e){if(t==="input"||t==="change")return hl(e)}function Nw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ft=typeof Object.is=="function"?Object.is:Nw;function Pa(t,e){if(ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!nu.call(e,i)||!ft(t[i],e[i]))return!1}return!0}function Vf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bf(t,e){var n=Vf(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vf(n)}}function _y(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_y(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function by(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Eo(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Eo(t.document)}return e}function $d(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Dw=on&&"documentMode"in document&&11>=document.documentMode,Qs=null,lu=null,pa=null,cu=!1;function zf(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cu||Qs==null||Qs!==Eo(s)||(s=Qs,"selectionStart"in s&&$d(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),pa&&Pa(pa,s)||(pa=s,s=Ho(lu,"onSelect"),0<s.length&&(e=new ul("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Qs)))}function Wn(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionrun:Wn("Transition","TransitionRun"),transitionstart:Wn("Transition","TransitionStart"),transitioncancel:Wn("Transition","TransitionCancel"),transitionend:Wn("Transition","TransitionEnd")},ic={},Sy={};on&&(Sy=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function Cs(t){if(ic[t])return ic[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sy)return ic[t]=e[n];return t}var wy=Cs("animationend"),xy=Cs("animationiteration"),Ty=Cs("animationstart"),kw=Cs("transitionrun"),Mw=Cs("transitionstart"),Uw=Cs("transitioncancel"),Ey=Cs("transitionend"),jy=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function Dt(t,e){jy.set(t,e),js(e,[t])}var $f=new WeakMap;function St(t,e){if(typeof t=="object"&&t!==null){var n=$f.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ef(e)},$f.set(t,e),e)}return{value:t,source:e,stack:Ef(e)}}var gt=[],Js=0,Gd=0;function fl(){for(var t=Js,e=Gd=Js=0;e<t;){var n=gt[e];gt[e++]=null;var s=gt[e];gt[e++]=null;var i=gt[e];gt[e++]=null;var a=gt[e];if(gt[e++]=null,s!==null&&i!==null){var r=s.pending;r===null?i.next=i:(i.next=r.next,r.next=i),s.pending=i}a!==0&&Ay(n,i,a)}}function ml(t,e,n,s){gt[Js++]=t,gt[Js++]=e,gt[Js++]=n,gt[Js++]=s,Gd|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Hd(t,e,n,s){return ml(t,e,n,s),jo(t)}function Ui(t,e){return ml(t,null,null,e),jo(t)}function Ay(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,s=a.alternate,s!==null&&(s.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-ut(n),t=a.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),a):null}function jo(t){if(50<Ea)throw Ea=0,Nu=null,Error(O(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ws={};function Lw(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(t,e,n,s){return new Lw(t,e,n,s)}function qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function an(t,e){var n=t.alternate;return n===null?(n=lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Cy(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ao(t,e,n,s,i,a){var r=0;if(s=t,typeof t=="function")qd(t)&&(r=1);else if(typeof t=="string")r=Vx(t,n,Pt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Jc:return t=lt(31,n,e,i),t.elementType=Jc,t.lanes=a,t;case Is:return fs(n.children,i,a,e);case Yg:r=8,i|=24;break;case Xc:return t=lt(12,n,e,i|2),t.elementType=Xc,t.lanes=a,t;case Qc:return t=lt(13,n,e,i),t.elementType=Qc,t.lanes=a,t;case Zc:return t=lt(19,n,e,i),t.elementType=Zc,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jS:case Jt:r=10;break e;case Kg:r=9;break e;case Rd:r=11;break e;case Nd:r=14;break e;case wn:r=16,s=null;break e}r=29,n=Error(O(130,t===null?"null":typeof t,"")),s=null}return e=lt(r,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function fs(t,e,n,s){return t=lt(7,t,s,e),t.lanes=n,t}function ac(t,e,n){return t=lt(6,t,null,e),t.lanes=n,t}function rc(t,e,n){return e=lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var ei=[],ti=0,Ao=null,Co=0,vt=[],_t=0,ms=null,Wt=1,en="";function is(t,e){ei[ti++]=Co,ei[ti++]=Ao,Ao=t,Co=e}function Oy(t,e,n){vt[_t++]=Wt,vt[_t++]=en,vt[_t++]=ms,ms=t;var s=Wt;t=en;var i=32-ut(s)-1;s&=~(1<<i),n+=1;var a=32-ut(e)+i;if(30<a){var r=i-i%5;a=(s&(1<<r)-1).toString(32),s>>=r,i-=r,Wt=1<<32-ut(e)+i|n<<i|s,en=a+t}else Wt=1<<a|n<<i|s,en=t}function Id(t){t.return!==null&&(is(t,1),Oy(t,1,0))}function Fd(t){for(;t===Ao;)Ao=ei[--ti],ei[ti]=null,Co=ei[--ti],ei[ti]=null;for(;t===ms;)ms=vt[--_t],vt[_t]=null,en=vt[--_t],vt[_t]=null,Wt=vt[--_t],vt[_t]=null}var Fe=null,_e=null,W=!1,ps=null,Ut=!1,du=Error(O(519));function ws(t){var e=Error(O(418,""));throw Va(St(e,t)),du}function Gf(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[He]=t,e[nt]=s,n){case"dialog":F("cancel",e),F("close",e);break;case"iframe":case"object":case"embed":F("load",e);break;case"video":case"audio":for(n=0;n<$a.length;n++)F($a[n],e);break;case"source":F("error",e);break;case"img":case"image":case"link":F("error",e),F("load",e);break;case"details":F("toggle",e);break;case"input":F("invalid",e),oy(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),To(e);break;case"select":F("invalid",e);break;case"textarea":F("invalid",e),cy(e,s.value,s.defaultValue,s.children),To(e)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||u_(e.textContent,n)?(s.popover!=null&&(F("beforetoggle",e),F("toggle",e)),s.onScroll!=null&&F("scroll",e),s.onScrollEnd!=null&&F("scrollend",e),s.onClick!=null&&(e.onclick=wl),e=!0):e=!1,e||ws(t)}function Hf(t){for(Fe=t.return;Fe;)switch(Fe.tag){case 5:case 13:Ut=!1;return;case 27:case 3:Ut=!0;return;default:Fe=Fe.return}}function Zi(t){if(t!==Fe)return!1;if(!W)return Hf(t),W=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Pu(t.type,t.memoizedProps)),n=!n),n&&_e&&ws(t),Hf(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){_e=Nt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}_e=null}}else e===27?(e=_e,Xn(t.type)?(t=zu,zu=null,_e=t):_e=e):_e=Fe?Nt(t.stateNode.nextSibling):null;return!0}function ur(){_e=Fe=null,W=!1}function qf(){var t=ps;return t!==null&&(We===null?We=t:We.push.apply(We,t),ps=null),t}function Va(t){ps===null?ps=[t]:ps.push(t)}var hu=Ht(null),Os=null,tn=null;function En(t,e,n){me(hu,e._currentValue),e._currentValue=n}function rn(t){t._currentValue=hu.current,Pe(hu)}function fu(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function mu(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var r=i.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),fu(a.return,n,t),s||(r=null);break e}a=o.next}}else if(i.tag===18){if(r=i.return,r===null)throw Error(O(341));r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),fu(r,n,t),r=null}else r=i.child;if(r!==null)r.return=i;else for(r=i;r!==null;){if(r===t){r=null;break}if(i=r.sibling,i!==null){i.return=r.return,r=i;break}r=r.return}i=r}}function dr(t,e,n,s){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var r=i.alternate;if(r===null)throw Error(O(387));if(r=r.memoizedProps,r!==null){var o=i.type;ft(i.pendingProps.value,r.value)||(t!==null?t.push(o):t=[o])}}else if(i===bo.current){if(r=i.alternate,r===null)throw Error(O(387));r.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(qa):t=[qa])}i=i.return}t!==null&&mu(e,t,n,s),e.flags|=262144}function Oo(t){for(t=t.firstContext;t!==null;){if(!ft(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xs(t){Os=t,tn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qe(t){return Ry(Os,t)}function Ur(t,e){return Os===null&&xs(t),Ry(t,e)}function Ry(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},tn===null){if(t===null)throw Error(O(308));tn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else tn=tn.next=e;return n}var Pw=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Vw=Ne.unstable_scheduleCallback,Bw=Ne.unstable_NormalPriority,Oe={$$typeof:Jt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new Pw,data:new Map,refCount:0}}function hr(t){t.refCount--,t.refCount===0&&Vw(Bw,function(){t.controller.abort()})}var ga=null,pu=0,Si=0,fi=null;function zw(t,e){if(ga===null){var n=ga=[];pu=0,Si=gh(),fi={status:"pending",value:void 0,then:function(s){n.push(s)}}}return pu++,e.then(If,If),e}function If(){if(--pu===0&&ga!==null){fi!==null&&(fi.status="fulfilled");var t=ga;ga=null,Si=0,fi=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function $w(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var Ff=z.S;z.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&zw(t,e),Ff!==null&&Ff(t,e)};var gs=Ht(null);function Kd(){var t=gs.current;return t!==null?t:ce.pooledCache}function ro(t,e){e===null?me(gs,gs.current):me(gs,e.pool)}function Ny(){var t=Kd();return t===null?null:{parent:Oe._currentValue,pool:t}}var fr=Error(O(460)),Dy=Error(O(474)),pl=Error(O(542)),gu={then:function(){}};function Yf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Lr(){}function ky(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Lr,Lr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Xf(t),t;default:if(typeof e.status=="string")e.then(Lr,Lr);else{if(t=ce,t!==null&&100<t.shellSuspendCounter)throw Error(O(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Xf(t),t}throw ya=e,fr}}var ya=null;function Kf(){if(ya===null)throw Error(O(459));var t=ya;return ya=null,t}function Xf(t){if(t===fr||t===pl)throw Error(O(483))}var xn=!1;function Xd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yu(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ln(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,se&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=jo(t),Ay(t,null,n),e}return ml(t,s,e,n),jo(t)}function va(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,ty(t,n)}}function oc(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=r:a=a.next=r,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var vu=!1;function _a(){if(vu){var t=fi;if(t!==null)throw t}}function ba(t,e,n,s){vu=!1;var i=t.updateQueue;xn=!1;var a=i.firstBaseUpdate,r=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,r===null?a=c:r.next=c,r=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==r&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;r=0,u=c=l=null,o=a;do{var h=o.lane&-536870913,m=h!==o.lane;if(m?(Z&h)===h:(s&h)===h){h!==0&&h===Si&&(vu=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var b=t,_=o;h=e;var y=n;switch(_.tag){case 1:if(b=_.payload,typeof b=="function"){d=b.call(y,d,h);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,h=typeof b=="function"?b.call(y,d,h):b,h==null)break e;d=ue({},d,h);break e;case 2:xn=!0}}h=o.callback,h!==null&&(t.flags|=64,m&&(t.flags|=8192),m=i.callbacks,m===null?i.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,r|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),In|=r,t.lanes=r,t.memoizedState=d}}function My(t,e){if(typeof t!="function")throw Error(O(191,t));t.call(e)}function Uy(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)My(n[t],e)}var wi=Ht(null),Ro=Ht(0);function Qf(t,e){t=un,me(Ro,t),me(wi,e),un=t|e.baseLanes}function _u(){me(Ro,un),me(wi,wi.current)}function Qd(){un=Ro.current,Pe(wi),Pe(Ro)}var Hn=0,H=null,re=null,Ee=null,No=!1,mi=!1,Ts=!1,Do=0,Ba=0,pi=null,Gw=0;function Se(){throw Error(O(321))}function Zd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ft(t[n],e[n]))return!1;return!0}function Jd(t,e,n,s,i,a){return Hn=a,H=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,z.H=t===null||t.memoizedState===null?hv:fv,Ts=!1,a=n(s,i),Ts=!1,mi&&(a=Py(e,n,s,i)),Ly(t),a}function Ly(t){z.H=ko;var e=re!==null&&re.next!==null;if(Hn=0,Ee=re=H=null,No=!1,Ba=0,pi=null,e)throw Error(O(300));t===null||Le||(t=t.dependencies,t!==null&&Oo(t)&&(Le=!0))}function Py(t,e,n,s){H=t;var i=0;do{if(mi&&(pi=null),Ba=0,mi=!1,25<=i)throw Error(O(301));if(i+=1,Ee=re=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}z.H=Xw,a=e(n,s)}while(mi);return a}function Hw(){var t=z.H,e=t.useState()[0];return e=typeof e.then=="function"?mr(e):e,t=t.useState()[0],(re!==null?re.memoizedState:null)!==t&&(H.flags|=1024),e}function Wd(){var t=Do!==0;return Do=0,t}function eh(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function th(t){if(No){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}No=!1}Hn=0,Ee=re=H=null,mi=!1,Ba=Do=0,pi=null}function Ze(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?H.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function je(){if(re===null){var t=H.alternate;t=t!==null?t.memoizedState:null}else t=re.next;var e=Ee===null?H.memoizedState:Ee.next;if(e!==null)Ee=e,re=t;else{if(t===null)throw H.alternate===null?Error(O(467)):Error(O(310));re=t,t={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Ee===null?H.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mr(t){var e=Ba;return Ba+=1,pi===null&&(pi=[]),t=ky(pi,t,e),e=H,(Ee===null?e.memoizedState:Ee.next)===null&&(e=e.alternate,z.H=e===null||e.memoizedState===null?hv:fv),t}function gl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return mr(t);if(t.$$typeof===Jt)return qe(t)}throw Error(O(438,String(t)))}function sh(t){var e=null,n=H.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=H.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=nh(),H.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=AS;return e.index++,n}function ln(t,e){return typeof e=="function"?e(t):e}function oo(t){var e=je();return ih(e,re,t)}function ih(t,e,n){var s=t.queue;if(s===null)throw Error(O(311));s.lastRenderedReducer=n;var i=t.baseQueue,a=s.pending;if(a!==null){if(i!==null){var r=i.next;i.next=a.next,a.next=r}e.baseQueue=i=a,s.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var o=r=null,l=null,c=e,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(Z&d)===d:(Hn&d)===d){var h=c.revertLane;if(h===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Si&&(u=!0);else if((Hn&h)===h){c=c.next,h===Si&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,r=a):l=l.next=d,H.lanes|=h,In|=h;d=c.action,Ts&&n(a,d),a=c.hasEagerState?c.eagerState:n(a,d)}else h={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,r=a):l=l.next=h,H.lanes|=d,In|=d;c=c.next}while(c!==null&&c!==e);if(l===null?r=a:l.next=o,!ft(a,t.memoizedState)&&(Le=!0,u&&(n=fi,n!==null)))throw n;t.memoizedState=a,t.baseState=r,t.baseQueue=l,s.lastRenderedState=a}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function lc(t){var e=je(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var r=i=i.next;do a=t(a,r.action),r=r.next;while(r!==i);ft(a,e.memoizedState)||(Le=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function Vy(t,e,n){var s=H,i=je(),a=W;if(a){if(n===void 0)throw Error(O(407));n=n()}else n=e();var r=!ft((re||i).memoizedState,n);r&&(i.memoizedState=n,Le=!0),i=i.queue;var o=$y.bind(null,s,i,t);if(pr(2048,8,o,[t]),i.getSnapshot!==e||r||Ee!==null&&Ee.memoizedState.tag&1){if(s.flags|=2048,xi(9,yl(),zy.bind(null,s,i,n,e),null),ce===null)throw Error(O(349));a||Hn&124||By(s,e,n)}return n}function By(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=H.updateQueue,e===null?(e=nh(),H.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zy(t,e,n,s){e.value=n,e.getSnapshot=s,Gy(e)&&Hy(t)}function $y(t,e,n){return n(function(){Gy(e)&&Hy(t)})}function Gy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ft(t,n)}catch{return!0}}function Hy(t){var e=Ui(t,2);e!==null&&ht(e,t,2)}function bu(t){var e=Ze();if(typeof t=="function"){var n=t;if(t=n(),Ts){Rn(!0);try{n()}finally{Rn(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:t},e}function qy(t,e,n,s){return t.baseState=n,ih(t,re,typeof s=="function"?s:ln)}function qw(t,e,n,s,i){if(vl(t))throw Error(O(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};z.T!==null?n(!0):a.isTransition=!1,s(a),n=e.pending,n===null?(a.next=e.pending=a,Iy(e,a)):(a.next=n.next,e.pending=n.next=a)}}function Iy(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var a=z.T,r={};z.T=r;try{var o=n(i,s),l=z.S;l!==null&&l(r,o),Zf(t,e,o)}catch(c){Su(t,e,c)}finally{z.T=a}}else try{a=n(i,s),Zf(t,e,a)}catch(c){Su(t,e,c)}}function Zf(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Jf(t,e,s)},function(s){return Su(t,e,s)}):Jf(t,e,n)}function Jf(t,e,n){e.status="fulfilled",e.value=n,Fy(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Iy(t,n)))}function Su(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,Fy(e),e=e.next;while(e!==s)}t.action=null}function Fy(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Yy(t,e){return e}function Wf(t,e){if(W){var n=ce.formState;if(n!==null){e:{var s=H;if(W){if(_e){t:{for(var i=_e,a=Ut;i.nodeType!==8;){if(!a){i=null;break t}if(i=Nt(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){_e=Nt(i.nextSibling),s=i.data==="F!";break e}}ws(s)}s=!1}s&&(e=n[0])}}return n=Ze(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yy,lastRenderedState:e},n.queue=s,n=cv.bind(null,H,s),s.dispatch=n,s=bu(!1),a=lh.bind(null,H,!1,s.queue),s=Ze(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=qw.bind(null,H,i,a,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function em(t){var e=je();return Ky(e,re,t)}function Ky(t,e,n){if(e=ih(t,e,Yy)[0],t=oo(ln)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=mr(e)}catch(r){throw r===fr?pl:r}else s=e;e=je();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(H.flags|=2048,xi(9,yl(),Iw.bind(null,i,n),null)),[s,a,t]}function Iw(t,e){t.action=e}function tm(t){var e=je(),n=re;if(n!==null)return Ky(e,n,t);je(),e=e.memoizedState,n=je();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function xi(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=H.updateQueue,e===null&&(e=nh(),H.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function yl(){return{destroy:void 0,resource:void 0}}function Xy(){return je().memoizedState}function lo(t,e,n,s){var i=Ze();s=s===void 0?null:s,H.flags|=t,i.memoizedState=xi(1|e,yl(),n,s)}function pr(t,e,n,s){var i=je();s=s===void 0?null:s;var a=i.memoizedState.inst;re!==null&&s!==null&&Zd(s,re.memoizedState.deps)?i.memoizedState=xi(e,a,n,s):(H.flags|=t,i.memoizedState=xi(1|e,a,n,s))}function nm(t,e){lo(8390656,8,t,e)}function Qy(t,e){pr(2048,8,t,e)}function Zy(t,e){return pr(4,2,t,e)}function Jy(t,e){return pr(4,4,t,e)}function Wy(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ev(t,e,n){n=n!=null?n.concat([t]):null,pr(4,4,Wy.bind(null,e,t),n)}function ah(){}function tv(t,e){var n=je();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&Zd(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function nv(t,e){var n=je();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&Zd(e,s[1]))return s[0];if(s=t(),Ts){Rn(!0);try{t()}finally{Rn(!1)}}return n.memoizedState=[s,e],s}function rh(t,e,n){return n===void 0||Hn&1073741824?t.memoizedState=e:(t.memoizedState=n,t=Fv(),H.lanes|=t,In|=t,n)}function sv(t,e,n,s){return ft(n,e)?n:wi.current!==null?(t=rh(t,n,s),ft(t,e)||(Le=!0),t):Hn&42?(t=Fv(),H.lanes|=t,In|=t,e):(Le=!0,t.memoizedState=n)}function iv(t,e,n,s,i){var a=ee.p;ee.p=a!==0&&8>a?a:8;var r=z.T,o={};z.T=o,lh(t,!1,e,n);try{var l=i(),c=z.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=$w(l,s);Sa(t,e,u,dt(t))}else Sa(t,e,s,dt(t))}catch(d){Sa(t,e,{then:function(){},status:"rejected",reason:d},dt())}finally{ee.p=a,z.T=r}}function Fw(){}function wu(t,e,n,s){if(t.tag!==5)throw Error(O(476));var i=av(t).queue;iv(t,i,e,hs,n===null?Fw:function(){return rv(t),n(s)})}function av(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:hs,baseState:hs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:hs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function rv(t){var e=av(t).next.queue;Sa(t,e,{},dt())}function oh(){return qe(qa)}function ov(){return je().memoizedState}function lv(){return je().memoizedState}function Yw(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=dt();t=Ln(n);var s=Pn(e,t,n);s!==null&&(ht(s,e,n),va(s,e,n)),e={cache:Yd()},t.payload=e;return}e=e.return}}function Kw(t,e,n){var s=dt();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},vl(t)?uv(e,n):(n=Hd(t,e,n,s),n!==null&&(ht(n,t,s),dv(n,e,s)))}function cv(t,e,n){var s=dt();Sa(t,e,n,s)}function Sa(t,e,n,s){var i={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(vl(t))uv(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var r=e.lastRenderedState,o=a(r,n);if(i.hasEagerState=!0,i.eagerState=o,ft(o,r))return ml(t,e,i,0),ce===null&&fl(),!1}catch{}finally{}if(n=Hd(t,e,i,s),n!==null)return ht(n,t,s),dv(n,e,s),!0}return!1}function lh(t,e,n,s){if(s={lane:2,revertLane:gh(),action:s,hasEagerState:!1,eagerState:null,next:null},vl(t)){if(e)throw Error(O(479))}else e=Hd(t,n,s,2),e!==null&&ht(e,t,2)}function vl(t){var e=t.alternate;return t===H||e!==null&&e===H}function uv(t,e){mi=No=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dv(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,ty(t,n)}}var ko={readContext:qe,use:gl,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se,useHostTransitionStatus:Se,useFormState:Se,useActionState:Se,useOptimistic:Se,useMemoCache:Se,useCacheRefresh:Se},hv={readContext:qe,use:gl,useCallback:function(t,e){return Ze().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:nm,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,lo(4194308,4,Wy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lo(4194308,4,t,e)},useInsertionEffect:function(t,e){lo(4,2,t,e)},useMemo:function(t,e){var n=Ze();e=e===void 0?null:e;var s=t();if(Ts){Rn(!0);try{t()}finally{Rn(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Ze();if(n!==void 0){var i=n(e);if(Ts){Rn(!0);try{n(e)}finally{Rn(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=Kw.bind(null,H,t),[s.memoizedState,t]},useRef:function(t){var e=Ze();return t={current:t},e.memoizedState=t},useState:function(t){t=bu(t);var e=t.queue,n=cv.bind(null,H,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ah,useDeferredValue:function(t,e){var n=Ze();return rh(n,t,e)},useTransition:function(){var t=bu(!1);return t=iv.bind(null,H,t.queue,!0,!1),Ze().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=H,i=Ze();if(W){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),ce===null)throw Error(O(349));Z&124||By(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,nm($y.bind(null,s,a,t),[t]),s.flags|=2048,xi(9,yl(),zy.bind(null,s,a,n,e),null),n},useId:function(){var t=Ze(),e=ce.identifierPrefix;if(W){var n=en,s=Wt;n=(s&~(1<<32-ut(s)-1)).toString(32)+n,e="«"+e+"R"+n,n=Do++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=Gw++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:oh,useFormState:Wf,useActionState:Wf,useOptimistic:function(t){var e=Ze();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=lh.bind(null,H,!0,n),n.dispatch=e,[t,e]},useMemoCache:sh,useCacheRefresh:function(){return Ze().memoizedState=Yw.bind(null,H)}},fv={readContext:qe,use:gl,useCallback:tv,useContext:qe,useEffect:Qy,useImperativeHandle:ev,useInsertionEffect:Zy,useLayoutEffect:Jy,useMemo:nv,useReducer:oo,useRef:Xy,useState:function(){return oo(ln)},useDebugValue:ah,useDeferredValue:function(t,e){var n=je();return sv(n,re.memoizedState,t,e)},useTransition:function(){var t=oo(ln)[0],e=je().memoizedState;return[typeof t=="boolean"?t:mr(t),e]},useSyncExternalStore:Vy,useId:ov,useHostTransitionStatus:oh,useFormState:em,useActionState:em,useOptimistic:function(t,e){var n=je();return qy(n,re,t,e)},useMemoCache:sh,useCacheRefresh:lv},Xw={readContext:qe,use:gl,useCallback:tv,useContext:qe,useEffect:Qy,useImperativeHandle:ev,useInsertionEffect:Zy,useLayoutEffect:Jy,useMemo:nv,useReducer:lc,useRef:Xy,useState:function(){return lc(ln)},useDebugValue:ah,useDeferredValue:function(t,e){var n=je();return re===null?rh(n,t,e):sv(n,re.memoizedState,t,e)},useTransition:function(){var t=lc(ln)[0],e=je().memoizedState;return[typeof t=="boolean"?t:mr(t),e]},useSyncExternalStore:Vy,useId:ov,useHostTransitionStatus:oh,useFormState:tm,useActionState:tm,useOptimistic:function(t,e){var n=je();return re!==null?qy(n,re,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:sh,useCacheRefresh:lv},gi=null,za=0;function Pr(t){var e=za;return za+=1,gi===null&&(gi=[]),ky(gi,t,e)}function Ji(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Vr(t,e){throw e.$$typeof===ES?Error(O(525)):(t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function sm(t){var e=t._init;return e(t._payload)}function mv(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function s(p){for(var g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(p,g){return p=an(p,g),p.index=0,p.sibling=null,p}function a(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=67108866,g):v):(p.flags|=67108866,g)):(p.flags|=1048576,g)}function r(p){return t&&p.alternate===null&&(p.flags|=67108866),p}function o(p,g,v,w){return g===null||g.tag!==6?(g=ac(v,p.mode,w),g.return=p,g):(g=i(g,v),g.return=p,g)}function l(p,g,v,w){var E=v.type;return E===Is?u(p,g,v.props.children,w,v.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===wn&&sm(E)===g.type)?(g=i(g,v.props),Ji(g,v),g.return=p,g):(g=ao(v.type,v.key,v.props,null,p.mode,w),Ji(g,v),g.return=p,g)}function c(p,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=rc(v,p.mode,w),g.return=p,g):(g=i(g,v.children||[]),g.return=p,g)}function u(p,g,v,w,E){return g===null||g.tag!==7?(g=fs(v,p.mode,w,E),g.return=p,g):(g=i(g,v),g.return=p,g)}function d(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=ac(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Rr:return v=ao(g.type,g.key,g.props,null,p.mode,v),Ji(v,g),v.return=p,v;case aa:return g=rc(g,p.mode,v),g.return=p,g;case wn:var w=g._init;return g=w(g._payload),d(p,g,v)}if(ra(g)||Ki(g))return g=fs(g,p.mode,v,null),g.return=p,g;if(typeof g.then=="function")return d(p,Pr(g),v);if(g.$$typeof===Jt)return d(p,Ur(p,g),v);Vr(p,g)}return null}function h(p,g,v,w){var E=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return E!==null?null:o(p,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Rr:return v.key===E?l(p,g,v,w):null;case aa:return v.key===E?c(p,g,v,w):null;case wn:return E=v._init,v=E(v._payload),h(p,g,v,w)}if(ra(v)||Ki(v))return E!==null?null:u(p,g,v,w,null);if(typeof v.then=="function")return h(p,g,Pr(v),w);if(v.$$typeof===Jt)return h(p,g,Ur(p,v),w);Vr(p,v)}return null}function m(p,g,v,w,E){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return p=p.get(v)||null,o(g,p,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rr:return p=p.get(w.key===null?v:w.key)||null,l(g,p,w,E);case aa:return p=p.get(w.key===null?v:w.key)||null,c(g,p,w,E);case wn:var C=w._init;return w=C(w._payload),m(p,g,v,w,E)}if(ra(w)||Ki(w))return p=p.get(v)||null,u(g,p,w,E,null);if(typeof w.then=="function")return m(p,g,v,Pr(w),E);if(w.$$typeof===Jt)return m(p,g,v,Ur(g,w),E);Vr(g,w)}return null}function b(p,g,v,w){for(var E=null,C=null,S=g,T=g=0,j=null;S!==null&&T<v.length;T++){S.index>T?(j=S,S=null):j=S.sibling;var R=h(p,S,v[T],w);if(R===null){S===null&&(S=j);break}t&&S&&R.alternate===null&&e(p,S),g=a(R,g,T),C===null?E=R:C.sibling=R,C=R,S=j}if(T===v.length)return n(p,S),W&&is(p,T),E;if(S===null){for(;T<v.length;T++)S=d(p,v[T],w),S!==null&&(g=a(S,g,T),C===null?E=S:C.sibling=S,C=S);return W&&is(p,T),E}for(S=s(S);T<v.length;T++)j=m(S,p,T,v[T],w),j!==null&&(t&&j.alternate!==null&&S.delete(j.key===null?T:j.key),g=a(j,g,T),C===null?E=j:C.sibling=j,C=j);return t&&S.forEach(function(U){return e(p,U)}),W&&is(p,T),E}function _(p,g,v,w){if(v==null)throw Error(O(151));for(var E=null,C=null,S=g,T=g=0,j=null,R=v.next();S!==null&&!R.done;T++,R=v.next()){S.index>T?(j=S,S=null):j=S.sibling;var U=h(p,S,R.value,w);if(U===null){S===null&&(S=j);break}t&&S&&U.alternate===null&&e(p,S),g=a(U,g,T),C===null?E=U:C.sibling=U,C=U,S=j}if(R.done)return n(p,S),W&&is(p,T),E;if(S===null){for(;!R.done;T++,R=v.next())R=d(p,R.value,w),R!==null&&(g=a(R,g,T),C===null?E=R:C.sibling=R,C=R);return W&&is(p,T),E}for(S=s(S);!R.done;T++,R=v.next())R=m(S,p,T,R.value,w),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?T:R.key),g=a(R,g,T),C===null?E=R:C.sibling=R,C=R);return t&&S.forEach(function(P){return e(p,P)}),W&&is(p,T),E}function y(p,g,v,w){if(typeof v=="object"&&v!==null&&v.type===Is&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Rr:e:{for(var E=v.key;g!==null;){if(g.key===E){if(E=v.type,E===Is){if(g.tag===7){n(p,g.sibling),w=i(g,v.props.children),w.return=p,p=w;break e}}else if(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===wn&&sm(E)===g.type){n(p,g.sibling),w=i(g,v.props),Ji(w,v),w.return=p,p=w;break e}n(p,g);break}else e(p,g);g=g.sibling}v.type===Is?(w=fs(v.props.children,p.mode,w,v.key),w.return=p,p=w):(w=ao(v.type,v.key,v.props,null,p.mode,w),Ji(w,v),w.return=p,p=w)}return r(p);case aa:e:{for(E=v.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(p,g.sibling),w=i(g,v.children||[]),w.return=p,p=w;break e}else{n(p,g);break}else e(p,g);g=g.sibling}w=rc(v,p.mode,w),w.return=p,p=w}return r(p);case wn:return E=v._init,v=E(v._payload),y(p,g,v,w)}if(ra(v))return b(p,g,v,w);if(Ki(v)){if(E=Ki(v),typeof E!="function")throw Error(O(150));return v=E.call(v),_(p,g,v,w)}if(typeof v.then=="function")return y(p,g,Pr(v),w);if(v.$$typeof===Jt)return y(p,g,Ur(p,v),w);Vr(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,g!==null&&g.tag===6?(n(p,g.sibling),w=i(g,v),w.return=p,p=w):(n(p,g),w=ac(v,p.mode,w),w.return=p,p=w),r(p)):n(p,g)}return function(p,g,v,w){try{za=0;var E=y(p,g,v,w);return gi=null,E}catch(S){if(S===fr||S===pl)throw S;var C=lt(29,S,null,p.mode);return C.lanes=w,C.return=p,C}finally{}}}var Ti=mv(!0),pv=mv(!1),Et=Ht(null),Bt=null;function jn(t){var e=t.alternate;me(Re,Re.current&1),me(Et,t),Bt===null&&(e===null||wi.current!==null||e.memoizedState!==null)&&(Bt=t)}function gv(t){if(t.tag===22){if(me(Re,Re.current),me(Et,t),Bt===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Bt=t)}}else An()}function An(){me(Re,Re.current),me(Et,Et.current)}function nn(t){Pe(Et),Bt===t&&(Bt=null),Pe(Re)}var Re=Ht(0);function Mo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Bu(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function cc(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xu={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=dt(),i=Ln(s);i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,s),e!==null&&(ht(e,t,s),va(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=dt(),i=Ln(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,s),e!==null&&(ht(e,t,s),va(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),s=Ln(n);s.tag=2,e!=null&&(s.callback=e),e=Pn(t,s,n),e!==null&&(ht(e,t,n),va(e,t,n))}};function im(t,e,n,s,i,a,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,r):e.prototype&&e.prototype.isPureReactComponent?!Pa(n,s)||!Pa(i,a):!0}function am(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&xu.enqueueReplaceState(e,e.state,null)}function Es(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=ue({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var Uo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function yv(t){Uo(t)}function vv(t){console.error(t)}function _v(t){Uo(t)}function Lo(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function rm(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Tu(t,e,n){return n=Ln(n),n.tag=3,n.payload={element:null},n.callback=function(){Lo(t,e)},n}function bv(t){return t=Ln(t),t.tag=3,t}function Sv(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=s.value;t.payload=function(){return i(a)},t.callback=function(){rm(e,n,s)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){rm(e,n,s),typeof i!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function Qw(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&dr(e,n,i,!0),n=Et.current,n!==null){switch(n.tag){case 13:return Bt===null?Du():n.alternate===null&&be===0&&(be=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===gu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),bc(t,s,i)),!1;case 22:return n.flags|=65536,s===gu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),bc(t,s,i)),!1}throw Error(O(435,n.tag))}return bc(t,s,i),Du(),!1}if(W)return e=Et.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==du&&(t=Error(O(422),{cause:s}),Va(St(t,n)))):(s!==du&&(e=Error(O(423),{cause:s}),Va(St(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=St(s,n),i=Tu(t.stateNode,s,i),oc(t,i),be!==4&&(be=2)),!1;var a=Error(O(520),{cause:s});if(a=St(a,n),Ta===null?Ta=[a]:Ta.push(a),be!==4&&(be=2),e===null)return!0;s=St(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Tu(n.stateNode,s,t),oc(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Vn===null||!Vn.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=bv(i),Sv(i,t,n,s),oc(n,i),!1}n=n.return}while(n!==null);return!1}var wv=Error(O(461)),Le=!1;function Be(t,e,n,s){e.child=t===null?pv(e,null,n,s):Ti(e,t.child,n,s)}function om(t,e,n,s,i){n=n.render;var a=e.ref;if("ref"in s){var r={};for(var o in s)o!=="ref"&&(r[o]=s[o])}else r=s;return xs(e),s=Jd(t,e,n,r,a,i),o=Wd(),t!==null&&!Le?(eh(t,e,i),cn(t,e,i)):(W&&o&&Id(e),e.flags|=1,Be(t,e,s,i),e.child)}function lm(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!qd(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,xv(t,e,a,s,i)):(t=ao(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!ch(t,i)){var r=a.memoizedProps;if(n=n.compare,n=n!==null?n:Pa,n(r,s)&&t.ref===e.ref)return cn(t,e,i)}return e.flags|=1,t=an(a,s),t.ref=e.ref,t.return=e,e.child=t}function xv(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(Pa(a,s)&&t.ref===e.ref)if(Le=!1,e.pendingProps=s=a,ch(t,i))t.flags&131072&&(Le=!0);else return e.lanes=t.lanes,cn(t,e,i)}return Eu(t,e,n,s,i)}function Tv(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden"){if(e.flags&128){if(s=a!==null?a.baseLanes|n:n,t!==null){for(i=e.child=t.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;e.childLanes=a&~s}else e.childLanes=0,e.child=null;return cm(t,e,s,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&ro(e,a!==null?a.cachePool:null),a!==null?Qf(e,a):_u(),gv(e);else return e.lanes=e.childLanes=536870912,cm(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(ro(e,a.cachePool),Qf(e,a),An(),e.memoizedState=null):(t!==null&&ro(e,null),_u(),An());return Be(t,e,i,n),e.child}function cm(t,e,n,s){var i=Kd();return i=i===null?null:{parent:Oe._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&ro(e,null),_u(),gv(e),t!==null&&dr(t,e,s,!0),null}function co(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(O(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Eu(t,e,n,s,i){return xs(e),n=Jd(t,e,n,s,void 0,i),s=Wd(),t!==null&&!Le?(eh(t,e,i),cn(t,e,i)):(W&&s&&Id(e),e.flags|=1,Be(t,e,n,i),e.child)}function um(t,e,n,s,i,a){return xs(e),e.updateQueue=null,n=Py(e,s,n,i),Ly(t),s=Wd(),t!==null&&!Le?(eh(t,e,a),cn(t,e,a)):(W&&s&&Id(e),e.flags|=1,Be(t,e,n,a),e.child)}function dm(t,e,n,s,i){if(xs(e),e.stateNode===null){var a=Ws,r=n.contextType;typeof r=="object"&&r!==null&&(a=qe(r)),a=new n(s,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=xu,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=s,a.state=e.memoizedState,a.refs={},Xd(e),r=n.contextType,a.context=typeof r=="object"&&r!==null?qe(r):Ws,a.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(cc(e,n,r,s),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&xu.enqueueReplaceState(a,a.state,null),ba(e,s,a,i),_a(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=Es(n,o);a.props=l;var c=a.context,u=n.contextType;r=Ws,typeof u=="object"&&u!==null&&(r=qe(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==r)&&am(e,a,s,r),xn=!1;var h=e.memoizedState;a.state=h,ba(e,s,a,i),_a(),c=e.memoizedState,o||h!==c||xn?(typeof d=="function"&&(cc(e,n,d,s),c=e.memoizedState),(l=xn||im(e,n,l,s,h,c,r))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=r,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,yu(t,e),r=e.memoizedProps,u=Es(n,r),a.props=u,d=e.pendingProps,h=a.context,c=n.contextType,l=Ws,typeof c=="object"&&c!==null&&(l=qe(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==d||h!==l)&&am(e,a,s,l),xn=!1,h=e.memoizedState,a.state=h,ba(e,s,a,i),_a();var m=e.memoizedState;r!==d||h!==m||xn||t!==null&&t.dependencies!==null&&Oo(t.dependencies)?(typeof o=="function"&&(cc(e,n,o,s),m=e.memoizedState),(u=xn||im(e,n,u,s,h,m,l)||t!==null&&t.dependencies!==null&&Oo(t.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),a.props=s,a.state=m,a.context=l,s=u):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return a=s,co(t,e),s=(e.flags&128)!==0,a||s?(a=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&s?(e.child=Ti(e,t.child,null,i),e.child=Ti(e,null,n,i)):Be(t,e,n,i),e.memoizedState=a.state,t=e.child):t=cn(t,e,i),t}function hm(t,e,n,s){return ur(),e.flags|=256,Be(t,e,n,s),e.child}var uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dc(t){return{baseLanes:t,cachePool:Ny()}}function hc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=wt),t}function Ev(t,e,n){var s=e.pendingProps,i=!1,a=(e.flags&128)!==0,r;if((r=a)||(r=t!==null&&t.memoizedState===null?!1:(Re.current&2)!==0),r&&(i=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(W){if(i?jn(e):An(),W){var o=_e,l;if(l=o){e:{for(l=o,o=Ut;l.nodeType!==8;){if(!o){o=null;break e}if(l=Nt(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:ms!==null?{id:Wt,overflow:en}:null,retryLane:536870912,hydrationErrors:null},l=lt(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Fe=e,_e=null,l=!0):l=!1}l||ws(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return Bu(o)?e.lanes=32:e.lanes=536870912,null;nn(e)}return o=s.children,s=s.fallback,i?(An(),i=e.mode,o=Po({mode:"hidden",children:o},i),s=fs(s,i,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,i=e.child,i.memoizedState=dc(n),i.childLanes=hc(t,r,n),e.memoizedState=uc,s):(jn(e),ju(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(jn(e),e.flags&=-257,e=fc(t,e,n)):e.memoizedState!==null?(An(),e.child=t.child,e.flags|=128,e=null):(An(),i=s.fallback,o=e.mode,s=Po({mode:"visible",children:s.children},o),i=fs(i,o,n,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,Ti(e,t.child,null,n),s=e.child,s.memoizedState=dc(n),s.childLanes=hc(t,r,n),e.memoizedState=uc,e=i);else if(jn(e),Bu(o)){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;r=c,s=Error(O(419)),s.stack="",s.digest=r,Va({value:s,source:null,stack:null}),e=fc(t,e,n)}else if(Le||dr(t,e,n,!1),r=(n&t.childLanes)!==0,Le||r){if(r=ce,r!==null&&(s=n&-n,s=s&42?1:kd(s),s=s&(r.suspendedLanes|n)?0:s,s!==0&&s!==l.retryLane))throw l.retryLane=s,Ui(t,s),ht(r,t,s),wv;o.data==="$?"||Du(),e=fc(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,_e=Nt(o.nextSibling),Fe=e,W=!0,ps=null,Ut=!1,t!==null&&(vt[_t++]=Wt,vt[_t++]=en,vt[_t++]=ms,Wt=t.id,en=t.overflow,ms=e),e=ju(e,s.children),e.flags|=4096);return e}return i?(An(),i=s.fallback,o=e.mode,l=t.child,c=l.sibling,s=an(l,{mode:"hidden",children:s.children}),s.subtreeFlags=l.subtreeFlags&65011712,c!==null?i=an(c,i):(i=fs(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o===null?o=dc(n):(l=o.cachePool,l!==null?(c=Oe._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Ny(),o={baseLanes:o.baseLanes|n,cachePool:l}),i.memoizedState=o,i.childLanes=hc(t,r,n),e.memoizedState=uc,s):(jn(e),n=t.child,t=n.sibling,n=an(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function ju(t,e){return e=Po({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Po(t,e){return t=lt(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function fc(t,e,n){return Ti(e,t.child,null,n),t=ju(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fm(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),fu(t.return,e,n)}function mc(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function jv(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(Be(t,e,s.children,n),s=Re.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fm(t,n,e);else if(t.tag===19)fm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(me(Re,s),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mc(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mc(e,!0,n,null,a);break;case"together":mc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),In|=e.lanes,!(n&e.childLanes))if(t!==null){if(dr(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=an(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=an(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ch(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Oo(t)))}function Zw(t,e,n){switch(e.tag){case 3:So(e,e.stateNode.containerInfo),En(e,Oe,t.memoizedState.cache),ur();break;case 27:case 5:tu(e);break;case 4:So(e,e.stateNode.containerInfo);break;case 10:En(e,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(jn(e),e.flags|=128,null):n&e.child.childLanes?Ev(t,e,n):(jn(e),t=cn(t,e,n),t!==null?t.sibling:null);jn(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(dr(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return jv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Re,Re.current),s)break;return null;case 22:case 23:return e.lanes=0,Tv(t,e,n);case 24:En(e,Oe,t.memoizedState.cache)}return cn(t,e,n)}function Av(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Le=!0;else{if(!ch(t,n)&&!(e.flags&128))return Le=!1,Zw(t,e,n);Le=!!(t.flags&131072)}else Le=!1,W&&e.flags&1048576&&Oy(e,Co,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var s=e.elementType,i=s._init;if(s=i(s._payload),e.type=s,typeof s=="function")qd(s)?(t=Es(s,t),e.tag=1,e=dm(null,e,s,t,n)):(e.tag=0,e=Eu(null,e,s,t,n));else{if(s!=null){if(i=s.$$typeof,i===Rd){e.tag=11,e=om(null,e,s,t,n);break e}else if(i===Nd){e.tag=14,e=lm(null,e,s,t,n);break e}}throw e=Wc(s)||s,Error(O(306,e,""))}}return e;case 0:return Eu(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Es(s,e.pendingProps),dm(t,e,s,i,n);case 3:e:{if(So(e,e.stateNode.containerInfo),t===null)throw Error(O(387));s=e.pendingProps;var a=e.memoizedState;i=a.element,yu(t,e),ba(e,s,null,n);var r=e.memoizedState;if(s=r.cache,En(e,Oe,s),s!==a.cache&&mu(e,[Oe],n,!0),_a(),s=r.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=hm(t,e,s,n);break e}else if(s!==i){i=St(Error(O(424)),e),Va(i),e=hm(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_e=Nt(t.firstChild),Fe=e,W=!0,ps=null,Ut=!0,n=pv(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ur(),s===i){e=cn(t,e,n);break e}Be(t,e,s,n)}e=e.child}return e;case 26:return co(t,e),t===null?(n=Rm(e.type,null,e.pendingProps,null))?e.memoizedState=n:W||(n=e.type,t=e.pendingProps,s=qo(Un.current).createElement(n),s[He]=e,s[nt]=t,$e(s,n,t),Ue(s),e.stateNode=s):e.memoizedState=Rm(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return tu(e),t===null&&W&&(s=e.stateNode=f_(e.type,e.pendingProps,Un.current),Fe=e,Ut=!0,i=_e,Xn(e.type)?(zu=i,_e=Nt(s.firstChild)):_e=i),Be(t,e,e.pendingProps.children,n),co(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&W&&((i=s=_e)&&(s=Ex(s,e.type,e.pendingProps,Ut),s!==null?(e.stateNode=s,Fe=e,_e=Nt(s.firstChild),Ut=!1,i=!0):i=!1),i||ws(e)),tu(e),i=e.type,a=e.pendingProps,r=t!==null?t.memoizedProps:null,s=a.children,Pu(i,a)?s=null:r!==null&&Pu(i,r)&&(e.flags|=32),e.memoizedState!==null&&(i=Jd(t,e,Hw,null,null,n),qa._currentValue=i),co(t,e),Be(t,e,s,n),e.child;case 6:return t===null&&W&&((t=n=_e)&&(n=jx(n,e.pendingProps,Ut),n!==null?(e.stateNode=n,Fe=e,_e=null,t=!0):t=!1),t||ws(e)),null;case 13:return Ev(t,e,n);case 4:return So(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ti(e,null,s,n):Be(t,e,s,n),e.child;case 11:return om(t,e,e.type,e.pendingProps,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,En(e,e.type,s.value),Be(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,xs(e),i=qe(i),s=s(i),e.flags|=1,Be(t,e,s,n),e.child;case 14:return lm(t,e,e.type,e.pendingProps,n);case 15:return xv(t,e,e.type,e.pendingProps,n);case 19:return jv(t,e,n);case 31:return s=e.pendingProps,n=e.mode,s={mode:s.mode,children:s.children},t===null?(n=Po(s,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=an(t.child,s),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return Tv(t,e,n);case 24:return xs(e),s=qe(Oe),t===null?(i=Kd(),i===null&&(i=ce,a=Yd(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:s,cache:i},Xd(e),En(e,Oe,i)):(t.lanes&n&&(yu(t,e),ba(e,null,null,n),_a()),i=t.memoizedState,a=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),En(e,Oe,s)):(s=a.cache,En(e,Oe,s),s!==i.cache&&mu(e,[Oe],n,!0))),Be(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(O(156,e.tag))}function Ft(t){t.flags|=4}function mm(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!g_(e)){if(e=Et.current,e!==null&&((Z&4194048)===Z?Bt!==null:(Z&62914560)!==Z&&!(Z&536870912)||e!==Bt))throw ya=gu,Dy;t.flags|=8192}}function Br(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Wg():536870912,t.lanes|=e,Ei|=e)}function Wi(t,e){if(!W)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Jw(t,e,n){var s=e.pendingProps;switch(Fd(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(e),null;case 1:return ge(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),rn(Oe),vi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Zi(e)?Ft(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qf())),ge(e),null;case 26:return n=e.memoizedState,t===null?(Ft(e),n!==null?(ge(e),mm(e,n)):(ge(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Ft(e),ge(e),mm(e,n)):(ge(e),e.flags&=-16777217):(t.memoizedProps!==s&&Ft(e),ge(e),e.flags&=-16777217),null;case 27:wo(e),n=Un.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Ft(e);else{if(!s){if(e.stateNode===null)throw Error(O(166));return ge(e),null}t=Pt.current,Zi(e)?Gf(e):(t=f_(i,s,n),e.stateNode=t,Ft(e))}return ge(e),null;case 5:if(wo(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Ft(e);else{if(!s){if(e.stateNode===null)throw Error(O(166));return ge(e),null}if(t=Pt.current,Zi(e))Gf(e);else{switch(i=qo(Un.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?i.createElement("select",{is:s.is}):i.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?i.createElement(n,{is:s.is}):i.createElement(n)}}t[He]=e,t[nt]=s;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch($e(t,n,s),n){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ft(e)}}return ge(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Ft(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(O(166));if(t=Un.current,Zi(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=Fe,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[He]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||u_(t.nodeValue,n)),t||ws(e)}else t=qo(t).createTextNode(s),t[He]=e,e.stateNode=t}return ge(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Zi(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[He]=e}else ur(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ge(e),i=!1}else i=qf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(nn(e),e):(nn(e),null)}if(nn(e),e.flags&128)return e.lanes=n,e;if(n=s!==null,t=t!==null&&t.memoizedState!==null,n){s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool);var a=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==i&&(s.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Br(e,e.updateQueue),ge(e),null;case 4:return vi(),t===null&&yh(e.stateNode.containerInfo),ge(e),null;case 10:return rn(e.type),ge(e),null;case 19:if(Pe(Re),i=e.memoizedState,i===null)return ge(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)Wi(i,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Mo(t),a!==null){for(e.flags|=128,Wi(i,!1),t=a.updateQueue,e.updateQueue=t,Br(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Cy(n,t),n=n.sibling;return me(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Vt()>Bo&&(e.flags|=128,s=!0,Wi(i,!1),e.lanes=4194304)}else{if(!s)if(t=Mo(a),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Br(e,t),Wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!W)return ge(e),null}else 2*Vt()-i.renderingStartTime>Bo&&n!==536870912&&(e.flags|=128,s=!0,Wi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Vt(),e.sibling=null,t=Re.current,me(Re,s?t&1|2:t&1),e):(ge(e),null);case 22:case 23:return nn(e),Qd(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(ge(e),e.subtreeFlags&6&&(e.flags|=8192)):ge(e),n=e.updateQueue,n!==null&&Br(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Pe(gs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),rn(Oe),ge(e),null;case 25:return null;case 30:return null}throw Error(O(156,e.tag))}function Ww(t,e){switch(Fd(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rn(Oe),vi(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return wo(e),null;case 13:if(nn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));ur()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Re),null;case 4:return vi(),null;case 10:return rn(e.type),null;case 22:case 23:return nn(e),Qd(),t!==null&&Pe(gs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return rn(Oe),null;case 25:return null;default:return null}}function Cv(t,e){switch(Fd(e),e.tag){case 3:rn(Oe),vi();break;case 26:case 27:case 5:wo(e);break;case 4:vi();break;case 13:nn(e);break;case 19:Pe(Re);break;case 10:rn(e.type);break;case 22:case 23:nn(e),Qd(),t!==null&&Pe(gs);break;case 24:rn(Oe)}}function gr(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var a=n.create,r=n.inst;s=a(),r.destroy=s}n=n.next}while(n!==i)}}catch(o){oe(e,e.return,o)}}function qn(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var a=i.next;s=a;do{if((s.tag&t)===t){var r=s.inst,o=r.destroy;if(o!==void 0){r.destroy=void 0,i=e;var l=n,c=o;try{c()}catch(u){oe(i,l,u)}}}s=s.next}while(s!==a)}}catch(u){oe(e,e.return,u)}}function Ov(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Uy(e,n)}catch(s){oe(t,t.return,s)}}}function Rv(t,e,n){n.props=Es(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){oe(t,e,s)}}function wa(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){oe(t,e,i)}}function Lt(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){oe(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){oe(t,e,i)}else n.current=null}function Nv(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){oe(t,t.return,i)}}function pc(t,e,n){try{var s=t.stateNode;bx(s,t.type,n,e),s[nt]=e}catch(i){oe(t,t.return,i)}}function Dv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xn(t.type)||t.tag===4}function gc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Au(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wl));else if(s!==4&&(s===27&&Xn(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Au(t,e,n),t=t.sibling;t!==null;)Au(t,e,n),t=t.sibling}function Vo(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Xn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Vo(t,e,n),t=t.sibling;t!==null;)Vo(t,e,n),t=t.sibling}function kv(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);$e(e,s,n),e[He]=t,e[nt]=n}catch(a){oe(t,t.return,a)}}var Zt=!1,xe=!1,yc=!1,pm=typeof WeakSet=="function"?WeakSet:Set,Me=null;function ex(t,e){if(t=t.containerInfo,Uu=Ko,t=by(t),$d(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var r=0,o=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=r+i),d!==a||s!==0&&d.nodeType!==3||(l=r+s),d.nodeType===3&&(r+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++c===i&&(o=r),h===a&&++u===s&&(l=r),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lu={focusedElem:t,selectionRange:n},Ko=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){switch(e=Me,a=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,s=n.stateNode;try{var b=Es(n.type,i,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(b,a),s.__reactInternalSnapshotBeforeUpdate=t}catch(_){oe(n,n.return,_)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Vu(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(O(163))}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}}function Mv(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:gn(t,n),s&4&&gr(5,n);break;case 1:if(gn(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){oe(n,n.return,r)}else{var i=Es(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){oe(n,n.return,r)}}s&64&&Ov(n),s&512&&wa(n,n.return);break;case 3:if(gn(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Uy(t,e)}catch(r){oe(n,n.return,r)}}break;case 27:e===null&&s&4&&kv(n);case 26:case 5:gn(t,n),e===null&&s&4&&Nv(n),s&512&&wa(n,n.return);break;case 12:gn(t,n);break;case 13:gn(t,n),s&4&&Pv(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=cx.bind(null,n),Ax(t,n))));break;case 22:if(s=n.memoizedState!==null||Zt,!s){e=e!==null&&e.memoizedState!==null||xe,i=Zt;var a=xe;Zt=s,(xe=e)&&!a?_n(t,n,(n.subtreeFlags&8772)!==0):gn(t,n),Zt=i,xe=a}break;case 30:break;default:gn(t,n)}}function Uv(t){var e=t.alternate;e!==null&&(t.alternate=null,Uv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Ud(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var he=null,Je=!1;function Yt(t,e,n){for(n=n.child;n!==null;)Lv(t,e,n),n=n.sibling}function Lv(t,e,n){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(ar,n)}catch{}switch(n.tag){case 26:xe||Lt(n,e),Yt(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:xe||Lt(n,e);var s=he,i=Je;Xn(n.type)&&(he=n.stateNode,Je=!1),Yt(t,e,n),ja(n.stateNode),he=s,Je=i;break;case 5:xe||Lt(n,e);case 6:if(s=he,i=Je,he=null,Yt(t,e,n),he=s,Je=i,he!==null)if(Je)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(n.stateNode)}catch(a){oe(n,e,a)}else try{he.removeChild(n.stateNode)}catch(a){oe(n,e,a)}break;case 18:he!==null&&(Je?(t=he,Am(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ya(t)):Am(he,n.stateNode));break;case 4:s=he,i=Je,he=n.stateNode.containerInfo,Je=!0,Yt(t,e,n),he=s,Je=i;break;case 0:case 11:case 14:case 15:xe||qn(2,n,e),xe||qn(4,n,e),Yt(t,e,n);break;case 1:xe||(Lt(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&Rv(n,e,s)),Yt(t,e,n);break;case 21:Yt(t,e,n);break;case 22:xe=(s=xe)||n.memoizedState!==null,Yt(t,e,n),xe=s;break;default:Yt(t,e,n)}}function Pv(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ya(t)}catch(n){oe(e,e.return,n)}}function tx(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new pm),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new pm),e;default:throw Error(O(435,t.tag))}}function vc(t,e){var n=tx(t);e.forEach(function(s){var i=ux.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}function at(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],a=t,r=e,o=r;e:for(;o!==null;){switch(o.tag){case 27:if(Xn(o.type)){he=o.stateNode,Je=!1;break e}break;case 5:he=o.stateNode,Je=!1;break e;case 3:case 4:he=o.stateNode.containerInfo,Je=!0;break e}o=o.return}if(he===null)throw Error(O(160));Lv(a,r,i),he=null,Je=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Vv(e,t),e=e.sibling}var Ot=null;function Vv(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:at(e,t),rt(t),s&4&&(qn(3,t,t.return),gr(3,t),qn(5,t,t.return));break;case 1:at(e,t),rt(t),s&512&&(xe||n===null||Lt(n,n.return)),s&64&&Zt&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=Ot;if(at(e,t),rt(t),s&512&&(xe||n===null||Lt(n,n.return)),s&4){var a=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":a=i.getElementsByTagName("title")[0],(!a||a[lr]||a[He]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(s),i.head.insertBefore(a,i.querySelector("head > title"))),$e(a,s,n),a[He]=t,Ue(a),s=a;break e;case"link":var r=Dm("link","href",i).get(s+(n.href||""));if(r){for(var o=0;o<r.length;o++)if(a=r[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(o,1);break t}}a=i.createElement(s),$e(a,s,n),i.head.appendChild(a);break;case"meta":if(r=Dm("meta","content",i).get(s+(n.content||""))){for(o=0;o<r.length;o++)if(a=r[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(o,1);break t}}a=i.createElement(s),$e(a,s,n),i.head.appendChild(a);break;default:throw Error(O(468,s))}a[He]=t,Ue(a),s=a}t.stateNode=s}else km(i,t.type,t.stateNode);else t.stateNode=Nm(i,s,t.memoizedProps);else a!==s?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,s===null?km(i,t.type,t.stateNode):Nm(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&pc(t,t.memoizedProps,n.memoizedProps)}break;case 27:at(e,t),rt(t),s&512&&(xe||n===null||Lt(n,n.return)),n!==null&&s&4&&pc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(at(e,t),rt(t),s&512&&(xe||n===null||Lt(n,n.return)),t.flags&32){i=t.stateNode;try{bi(i,"")}catch(m){oe(t,t.return,m)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,pc(t,i,n!==null?n.memoizedProps:i)),s&1024&&(yc=!0);break;case 6:if(at(e,t),rt(t),s&4){if(t.stateNode===null)throw Error(O(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(m){oe(t,t.return,m)}}break;case 3:if(fo=null,i=Ot,Ot=Io(e.containerInfo),at(e,t),Ot=i,rt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(e.containerInfo)}catch(m){oe(t,t.return,m)}yc&&(yc=!1,Bv(t));break;case 4:s=Ot,Ot=Io(t.stateNode.containerInfo),at(e,t),rt(t),Ot=s;break;case 12:at(e,t),rt(t);break;case 13:at(e,t),rt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(mh=Vt()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,vc(t,s)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Zt,u=xe;if(Zt=c||i,xe=u||l,at(e,t),xe=u,Zt=c,rt(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||Zt||xe||as(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(a=l.stateNode,i)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,h=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){oe(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(m){oe(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,vc(t,n))));break;case 19:at(e,t),rt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,vc(t,s)));break;case 30:break;case 21:break;default:at(e,t),rt(t)}}function rt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(Dv(s)){n=s;break}s=s.return}if(n==null)throw Error(O(160));switch(n.tag){case 27:var i=n.stateNode,a=gc(t);Vo(t,a,i);break;case 5:var r=n.stateNode;n.flags&32&&(bi(r,""),n.flags&=-33);var o=gc(t);Vo(t,o,r);break;case 3:case 4:var l=n.stateNode.containerInfo,c=gc(t);Au(t,c,l);break;default:throw Error(O(161))}}catch(u){oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Bv(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function gn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Mv(t,e.alternate,e),e=e.sibling}function as(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:qn(4,e,e.return),as(e);break;case 1:Lt(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Rv(e,e.return,n),as(e);break;case 27:ja(e.stateNode);case 26:case 5:Lt(e,e.return),as(e);break;case 22:e.memoizedState===null&&as(e);break;case 30:as(e);break;default:as(e)}t=t.sibling}}function _n(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,a=e,r=a.flags;switch(a.tag){case 0:case 11:case 15:_n(i,a,n),gr(4,a);break;case 1:if(_n(i,a,n),s=a,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){oe(s,s.return,c)}if(s=a,i=s.updateQueue,i!==null){var o=s.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)My(l[i],o)}catch(c){oe(s,s.return,c)}}n&&r&64&&Ov(a),wa(a,a.return);break;case 27:kv(a);case 26:case 5:_n(i,a,n),n&&s===null&&r&4&&Nv(a),wa(a,a.return);break;case 12:_n(i,a,n);break;case 13:_n(i,a,n),n&&r&4&&Pv(i,a);break;case 22:a.memoizedState===null&&_n(i,a,n),wa(a,a.return);break;case 30:break;default:_n(i,a,n)}e=e.sibling}}function uh(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&hr(n))}function dh(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&hr(t))}function Mt(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zv(t,e,n,s),e=e.sibling}function zv(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Mt(t,e,n,s),i&2048&&gr(9,e);break;case 1:Mt(t,e,n,s);break;case 3:Mt(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&hr(t)));break;case 12:if(i&2048){Mt(t,e,n,s),t=e.stateNode;try{var a=e.memoizedProps,r=a.id,o=a.onPostCommit;typeof o=="function"&&o(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){oe(e,e.return,l)}}else Mt(t,e,n,s);break;case 13:Mt(t,e,n,s);break;case 23:break;case 22:a=e.stateNode,r=e.alternate,e.memoizedState!==null?a._visibility&2?Mt(t,e,n,s):xa(t,e):a._visibility&2?Mt(t,e,n,s):(a._visibility|=2,$s(t,e,n,s,(e.subtreeFlags&10256)!==0)),i&2048&&uh(r,e);break;case 24:Mt(t,e,n,s),i&2048&&dh(e.alternate,e);break;default:Mt(t,e,n,s)}}function $s(t,e,n,s,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var a=t,r=e,o=n,l=s,c=r.flags;switch(r.tag){case 0:case 11:case 15:$s(a,r,o,l,i),gr(8,r);break;case 23:break;case 22:var u=r.stateNode;r.memoizedState!==null?u._visibility&2?$s(a,r,o,l,i):xa(a,r):(u._visibility|=2,$s(a,r,o,l,i)),i&&c&2048&&uh(r.alternate,r);break;case 24:$s(a,r,o,l,i),i&&c&2048&&dh(r.alternate,r);break;default:$s(a,r,o,l,i)}e=e.sibling}}function xa(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:xa(n,s),i&2048&&uh(s.alternate,s);break;case 24:xa(n,s),i&2048&&dh(s.alternate,s);break;default:xa(n,s)}e=e.sibling}}var la=8192;function Ns(t){if(t.subtreeFlags&la)for(t=t.child;t!==null;)$v(t),t=t.sibling}function $v(t){switch(t.tag){case 26:Ns(t),t.flags&la&&t.memoizedState!==null&&zx(Ot,t.memoizedState,t.memoizedProps);break;case 5:Ns(t);break;case 3:case 4:var e=Ot;Ot=Io(t.stateNode.containerInfo),Ns(t),Ot=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=la,la=16777216,Ns(t),la=e):Ns(t));break;default:Ns(t)}}function Gv(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function ea(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Me=s,qv(s,t)}Gv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hv(t),t=t.sibling}function Hv(t){switch(t.tag){case 0:case 11:case 15:ea(t),t.flags&2048&&qn(9,t,t.return);break;case 3:ea(t);break;case 12:ea(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,uo(t)):ea(t);break;default:ea(t)}}function uo(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Me=s,qv(s,t)}Gv(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:qn(8,e,e.return),uo(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,uo(e));break;default:uo(e)}t=t.sibling}}function qv(t,e){for(;Me!==null;){var n=Me;switch(n.tag){case 0:case 11:case 15:qn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:hr(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Me=s;else e:for(n=t;Me!==null;){s=Me;var i=s.sibling,a=s.return;if(Uv(s),s===n){Me=null;break e}if(i!==null){i.return=a,Me=i;break e}Me=a}}}var nx={getCacheForType:function(t){var e=qe(Oe),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},sx=typeof WeakMap=="function"?WeakMap:Map,se=0,ce=null,Y=null,Z=0,ne=0,ot=null,Dn=!1,Li=!1,hh=!1,un=0,be=0,In=0,ys=0,fh=0,wt=0,Ei=0,Ta=null,We=null,Cu=!1,mh=0,Bo=1/0,zo=null,Vn=null,ze=0,Bn=null,ji=null,yi=0,Ou=0,Ru=null,Iv=null,Ea=0,Nu=null;function dt(){if(se&2&&Z!==0)return Z&-Z;if(z.T!==null){var t=Si;return t!==0?t:gh()}return ny()}function Fv(){wt===0&&(wt=!(Z&536870912)||W?Jg():536870912);var t=Et.current;return t!==null&&(t.flags|=32),wt}function ht(t,e,n){(t===ce&&(ne===2||ne===9)||t.cancelPendingCommit!==null)&&(Ai(t,0),kn(t,Z,wt,!1)),or(t,n),(!(se&2)||t!==ce)&&(t===ce&&(!(se&2)&&(ys|=n),be===4&&kn(t,Z,wt,!1)),qt(t))}function Yv(t,e,n){if(se&6)throw Error(O(327));var s=!n&&(e&124)===0&&(e&t.expiredLanes)===0||rr(t,e),i=s?rx(t,e):_c(t,e,!0),a=s;do{if(i===0){Li&&!s&&kn(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!ix(n)){i=_c(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var o=t;i=Ta;var l=o.current.memoizedState.isDehydrated;if(l&&(Ai(o,r).flags|=256),r=_c(o,r,!1),r!==2){if(hh&&!l){o.errorRecoveryDisabledLanes|=a,ys|=a,i=4;break e}a=We,We=i,a!==null&&(We===null?We=a:We.push.apply(We,a))}i=r}if(a=!1,i!==2)continue}}if(i===1){Ai(t,0),kn(t,e,0,!0);break}e:{switch(s=t,a=i,a){case 0:case 1:throw Error(O(345));case 4:if((e&4194048)!==e)break;case 6:kn(s,e,wt,!Dn);break e;case 2:We=null;break;case 3:case 5:break;default:throw Error(O(329))}if((e&62914560)===e&&(i=mh+300-Vt(),10<i)){if(kn(s,e,wt,!Dn),cl(s,0,!0)!==0)break e;s.timeoutHandle=h_(gm.bind(null,s,n,We,zo,Cu,e,wt,ys,Ei,Dn,a,2,-0,0),i);break e}gm(s,n,We,zo,Cu,e,wt,ys,Ei,Dn,a,0,-0,0)}}break}while(!0);qt(t)}function gm(t,e,n,s,i,a,r,o,l,c,u,d,h,m){if(t.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(Ha={stylesheets:null,count:0,unsuspend:Bx},$v(e),d=$x(),d!==null)){t.cancelPendingCommit=d(vm.bind(null,t,e,a,n,s,i,r,o,l,u,1,h,m)),kn(t,a,r,!c);return}vm(t,e,a,n,s,i,r,o,l)}function ix(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!ft(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kn(t,e,n,s){e&=~fh,e&=~ys,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var a=31-ut(i),r=1<<a;s[a]=-1,i&=~r}n!==0&&ey(t,n,e)}function _l(){return se&6?!0:(yr(0),!1)}function ph(){if(Y!==null){if(ne===0)var t=Y.return;else t=Y,tn=Os=null,th(t),gi=null,za=0,t=Y;for(;t!==null;)Cv(t.alternate,t),t=t.return;Y=null}}function Ai(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,wx(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ph(),ce=t,Y=n=an(t.current,null),Z=e,ne=0,ot=null,Dn=!1,Li=rr(t,e),hh=!1,Ei=wt=fh=ys=In=be=0,We=Ta=null,Cu=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-ut(s),a=1<<i;e|=t[i],s&=~a}return un=e,fl(),n}function Kv(t,e){H=null,z.H=ko,e===fr||e===pl?(e=Kf(),ne=3):e===Dy?(e=Kf(),ne=4):ne=e===wv?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ot=e,Y===null&&(be=1,Lo(t,St(e,t.current)))}function Xv(){var t=z.H;return z.H=ko,t===null?ko:t}function Qv(){var t=z.A;return z.A=nx,t}function Du(){be=4,Dn||(Z&4194048)!==Z&&Et.current!==null||(Li=!0),!(In&134217727)&&!(ys&134217727)||ce===null||kn(ce,Z,wt,!1)}function _c(t,e,n){var s=se;se|=2;var i=Xv(),a=Qv();(ce!==t||Z!==e)&&(zo=null,Ai(t,e)),e=!1;var r=be;e:do try{if(ne!==0&&Y!==null){var o=Y,l=ot;switch(ne){case 8:ph(),r=6;break e;case 3:case 2:case 9:case 6:Et.current===null&&(e=!0);var c=ne;if(ne=0,ot=null,ni(t,o,l,c),n&&Li){r=0;break e}break;default:c=ne,ne=0,ot=null,ni(t,o,l,c)}}ax(),r=be;break}catch(u){Kv(t,u)}while(!0);return e&&t.shellSuspendCounter++,tn=Os=null,se=s,z.H=i,z.A=a,Y===null&&(ce=null,Z=0,fl()),r}function ax(){for(;Y!==null;)Zv(Y)}function rx(t,e){var n=se;se|=2;var s=Xv(),i=Qv();ce!==t||Z!==e?(zo=null,Bo=Vt()+500,Ai(t,e)):Li=rr(t,e);e:do try{if(ne!==0&&Y!==null){e=Y;var a=ot;t:switch(ne){case 1:ne=0,ot=null,ni(t,e,a,1);break;case 2:case 9:if(Yf(a)){ne=0,ot=null,ym(e);break}e=function(){ne!==2&&ne!==9||ce!==t||(ne=7),qt(t)},a.then(e,e);break e;case 3:ne=7;break e;case 4:ne=5;break e;case 7:Yf(a)?(ne=0,ot=null,ym(e)):(ne=0,ot=null,ni(t,e,a,7));break;case 5:var r=null;switch(Y.tag){case 26:r=Y.memoizedState;case 5:case 27:var o=Y;if(!r||g_(r)){ne=0,ot=null;var l=o.sibling;if(l!==null)Y=l;else{var c=o.return;c!==null?(Y=c,bl(c)):Y=null}break t}}ne=0,ot=null,ni(t,e,a,5);break;case 6:ne=0,ot=null,ni(t,e,a,6);break;case 8:ph(),be=6;break e;default:throw Error(O(462))}}ox();break}catch(u){Kv(t,u)}while(!0);return tn=Os=null,z.H=s,z.A=i,se=n,Y!==null?0:(ce=null,Z=0,fl(),be)}function ox(){for(;Y!==null&&!OS();)Zv(Y)}function Zv(t){var e=Av(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?bl(t):Y=e}function ym(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=um(n,e,e.pendingProps,e.type,void 0,Z);break;case 11:e=um(n,e,e.pendingProps,e.type.render,e.ref,Z);break;case 5:th(e);default:Cv(n,e),e=Y=Cy(e,un),e=Av(n,e,un)}t.memoizedProps=t.pendingProps,e===null?bl(t):Y=e}function ni(t,e,n,s){tn=Os=null,th(e),gi=null,za=0;var i=e.return;try{if(Qw(t,i,e,n,Z)){be=1,Lo(t,St(n,t.current)),Y=null;return}}catch(a){if(i!==null)throw Y=i,a;be=1,Lo(t,St(n,t.current)),Y=null;return}e.flags&32768?(W||s===1?t=!0:Li||Z&536870912?t=!1:(Dn=t=!0,(s===2||s===9||s===3||s===6)&&(s=Et.current,s!==null&&s.tag===13&&(s.flags|=16384))),Jv(e,t)):bl(e)}function bl(t){var e=t;do{if(e.flags&32768){Jv(e,Dn);return}t=e.return;var n=Jw(e.alternate,e,un);if(n!==null){Y=n;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=t}while(e!==null);be===0&&(be=5)}function Jv(t,e){do{var n=Ww(t.alternate,t);if(n!==null){n.flags&=32767,Y=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Y=t;return}Y=t=n}while(t!==null);be=6,Y=null}function vm(t,e,n,s,i,a,r,o,l){t.cancelPendingCommit=null;do Sl();while(ze!==0);if(se&6)throw Error(O(327));if(e!==null){if(e===t.current)throw Error(O(177));if(a=e.lanes|e.childLanes,a|=Gd,BS(t,n,a,r,o,l),t===ce&&(Y=ce=null,Z=0),ji=e,Bn=t,yi=n,Ou=a,Ru=i,Iv=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,dx(xo,function(){return s_(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=z.T,z.T=null,i=ee.p,ee.p=2,r=se,se|=4;try{ex(t,e,n)}finally{se=r,ee.p=i,z.T=s}}ze=1,Wv(),e_(),t_()}}function Wv(){if(ze===1){ze=0;var t=Bn,e=ji,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=z.T,z.T=null;var s=ee.p;ee.p=2;var i=se;se|=4;try{Vv(e,t);var a=Lu,r=by(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(r!==o&&o&&o.ownerDocument&&_y(o.ownerDocument.documentElement,o)){if(l!==null&&$d(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),b=o.textContent.length,_=Math.min(l.start,b),y=l.end===void 0?_:Math.min(l.end,b);!m.extend&&_>y&&(r=y,y=_,_=r);var p=Bf(o,_),g=Bf(o,y);if(p&&g&&(m.rangeCount!==1||m.anchorNode!==p.node||m.anchorOffset!==p.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var v=d.createRange();v.setStart(p.node,p.offset),m.removeAllRanges(),_>y?(m.addRange(v),m.extend(g.node,g.offset)):(v.setEnd(g.node,g.offset),m.addRange(v))}}}}for(d=[],m=o;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Ko=!!Uu,Lu=Uu=null}finally{se=i,ee.p=s,z.T=n}}t.current=e,ze=2}}function e_(){if(ze===2){ze=0;var t=Bn,e=ji,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=z.T,z.T=null;var s=ee.p;ee.p=2;var i=se;se|=4;try{Mv(t,e.alternate,e)}finally{se=i,ee.p=s,z.T=n}}ze=3}}function t_(){if(ze===4||ze===3){ze=0,RS();var t=Bn,e=ji,n=yi,s=Iv;e.subtreeFlags&10256||e.flags&10256?ze=5:(ze=0,ji=Bn=null,n_(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Vn=null),Md(n),e=e.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(ar,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=z.T,i=ee.p,ee.p=2,z.T=null;try{for(var a=t.onRecoverableError,r=0;r<s.length;r++){var o=s[r];a(o.value,{componentStack:o.stack})}}finally{z.T=e,ee.p=i}}yi&3&&Sl(),qt(t),i=t.pendingLanes,n&4194090&&i&42?t===Nu?Ea++:(Ea=0,Nu=t):Ea=0,yr(0)}}function n_(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,hr(e)))}function Sl(t){return Wv(),e_(),t_(),s_()}function s_(){if(ze!==5)return!1;var t=Bn,e=Ou;Ou=0;var n=Md(yi),s=z.T,i=ee.p;try{ee.p=32>n?32:n,z.T=null,n=Ru,Ru=null;var a=Bn,r=yi;if(ze=0,ji=Bn=null,yi=0,se&6)throw Error(O(331));var o=se;if(se|=4,Hv(a.current),zv(a,a.current,r,n),se=o,yr(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(ar,a)}catch{}return!0}finally{ee.p=i,z.T=s,n_(t,e)}}function _m(t,e,n){e=St(n,e),e=Tu(t.stateNode,e,2),t=Pn(t,e,2),t!==null&&(or(t,2),qt(t))}function oe(t,e,n){if(t.tag===3)_m(t,t,n);else for(;e!==null;){if(e.tag===3){_m(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Vn===null||!Vn.has(s))){t=St(n,t),n=bv(2),s=Pn(e,n,2),s!==null&&(Sv(n,s,e,t),or(s,2),qt(s));break}}e=e.return}}function bc(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new sx;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(hh=!0,i.add(n),t=lx.bind(null,t,e,n),e.then(t,t))}function lx(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ce===t&&(Z&n)===n&&(be===4||be===3&&(Z&62914560)===Z&&300>Vt()-mh?!(se&2)&&Ai(t,0):fh|=n,Ei===Z&&(Ei=0)),qt(t)}function i_(t,e){e===0&&(e=Wg()),t=Ui(t,e),t!==null&&(or(t,e),qt(t))}function cx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),i_(t,n)}function ux(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(O(314))}s!==null&&s.delete(e),i_(t,n)}function dx(t,e){return Dd(t,e)}var $o=null,Gs=null,ku=!1,Go=!1,Sc=!1,vs=0;function qt(t){t!==Gs&&t.next===null&&(Gs===null?$o=Gs=t:Gs=Gs.next=t),Go=!0,ku||(ku=!0,fx())}function yr(t,e){if(!Sc&&Go){Sc=!0;do for(var n=!1,s=$o;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var a=0;else{var r=s.suspendedLanes,o=s.pingedLanes;a=(1<<31-ut(42|t)+1)-1,a&=i&~(r&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,bm(s,a))}else a=Z,a=cl(s,s===ce?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(a&3)||rr(s,a)||(n=!0,bm(s,a));s=s.next}while(n);Sc=!1}}function hx(){a_()}function a_(){Go=ku=!1;var t=0;vs!==0&&(Sx()&&(t=vs),vs=0);for(var e=Vt(),n=null,s=$o;s!==null;){var i=s.next,a=r_(s,e);a===0?(s.next=null,n===null?$o=i:n.next=i,i===null&&(Gs=n)):(n=s,(t!==0||a&3)&&(Go=!0)),s=i}yr(t)}function r_(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var r=31-ut(a),o=1<<r,l=i[r];l===-1?(!(o&n)||o&s)&&(i[r]=VS(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=ce,n=Z,n=cl(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(ne===2||ne===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Yl(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||rr(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Yl(s),Md(n)){case 2:case 8:n=Qg;break;case 32:n=xo;break;case 268435456:n=Zg;break;default:n=xo}return s=o_.bind(null,t),n=Dd(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Yl(s),t.callbackPriority=2,t.callbackNode=null,2}function o_(t,e){if(ze!==0&&ze!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Sl()&&t.callbackNode!==n)return null;var s=Z;return s=cl(t,t===ce?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(Yv(t,s,e),r_(t,Vt()),t.callbackNode!=null&&t.callbackNode===n?o_.bind(null,t):null)}function bm(t,e){if(Sl())return null;Yv(t,e,!0)}function fx(){xx(function(){se&6?Dd(Xg,hx):a_()})}function gh(){return vs===0&&(vs=Jg()),vs}function Sm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:no(""+t)}function wm(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function mx(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var a=Sm((i[nt]||null).action),r=s.submitter;r&&(e=(e=r[nt]||null)?Sm(e.formAction):r.getAttribute("formAction"),e!==null&&(a=e,r=null));var o=new ul("action","action",null,s,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(vs!==0){var l=r?wm(i,r):new FormData(i);wu(n,{pending:!0,data:l,method:i.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=r?wm(i,r):new FormData(i),wu(n,{pending:!0,data:l,method:i.method,action:a},a,l))},currentTarget:i}]})}}for(var wc=0;wc<uu.length;wc++){var xc=uu[wc],px=xc.toLowerCase(),gx=xc[0].toUpperCase()+xc.slice(1);Dt(px,"on"+gx)}Dt(wy,"onAnimationEnd");Dt(xy,"onAnimationIteration");Dt(Ty,"onAnimationStart");Dt("dblclick","onDoubleClick");Dt("focusin","onFocus");Dt("focusout","onBlur");Dt(kw,"onTransitionRun");Dt(Mw,"onTransitionStart");Dt(Uw,"onTransitionCancel");Dt(Ey,"onTransitionEnd");_i("onMouseEnter",["mouseout","mouseover"]);_i("onMouseLeave",["mouseout","mouseover"]);_i("onPointerEnter",["pointerout","pointerover"]);_i("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function l_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var r=s.length-1;0<=r;r--){var o=s[r],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Uo(u)}i.currentTarget=null,a=l}else for(r=0;r<s.length;r++){if(o=s[r],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Uo(u)}i.currentTarget=null,a=l}}}}function F(t,e){var n=e[su];n===void 0&&(n=e[su]=new Set);var s=t+"__bubble";n.has(s)||(c_(e,t,2,!1),n.add(s))}function Tc(t,e,n){var s=0;e&&(s|=4),c_(n,t,s,e)}var zr="_reactListening"+Math.random().toString(36).slice(2);function yh(t){if(!t[zr]){t[zr]=!0,sy.forEach(function(n){n!=="selectionchange"&&(yx.has(n)||Tc(n,!1,t),Tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zr]||(e[zr]=!0,Tc("selectionchange",!1,e))}}function c_(t,e,n,s){switch(S_(e)){case 2:var i=qx;break;case 8:i=Ix;break;default:i=Sh}n=i.bind(null,e,n,t),i=void 0,!ou||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ec(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var r=s.tag;if(r===3||r===4){var o=s.stateNode.containerInfo;if(o===i)break;if(r===4)for(r=s.return;r!==null;){var l=r.tag;if((l===3||l===4)&&r.stateNode.containerInfo===i)return;r=r.return}for(;o!==null;){if(r=Ys(o),r===null)return;if(l=r.tag,l===5||l===6||l===26||l===27){s=a=r;continue e}o=o.parentNode}}s=s.return}dy(function(){var c=a,u=Pd(n),d=[];e:{var h=jy.get(t);if(h!==void 0){var m=ul,b=t;switch(t){case"keypress":if(io(n)===0)break e;case"keydown":case"keyup":m=dw;break;case"focusin":b="focus",m=tc;break;case"focusout":b="blur",m=tc;break;case"beforeblur":case"afterblur":m=tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=WS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=mw;break;case wy:case xy:case Ty:m=nw;break;case Ey:m=gw;break;case"scroll":case"scrollend":m=ZS;break;case"wheel":m=vw;break;case"copy":case"cut":case"paste":m=iw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Nf;break;case"toggle":case"beforetoggle":m=bw}var _=(e&4)!==0,y=!_&&(t==="scroll"||t==="scrollend"),p=_?h!==null?h+"Capture":null:h;_=[];for(var g=c,v;g!==null;){var w=g;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||p===null||(w=Ua(g,p),w!=null&&_.push(Ga(g,w,v))),y)break;g=g.return}0<_.length&&(h=new m(h,b,null,n,u),d.push({event:h,listeners:_}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==ru&&(b=n.relatedTarget||n.fromElement)&&(Ys(b)||b[ki]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=c,b=b?Ys(b):null,b!==null&&(y=ir(b),_=b.tag,b!==y||_!==5&&_!==27&&_!==6)&&(b=null)):(m=null,b=c),m!==b)){if(_=Of,w="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(_=Nf,w="onPointerLeave",p="onPointerEnter",g="pointer"),y=m==null?h:oa(m),v=b==null?h:oa(b),h=new _(w,g+"leave",m,n,u),h.target=y,h.relatedTarget=v,w=null,Ys(u)===c&&(_=new _(p,g+"enter",b,n,u),_.target=v,_.relatedTarget=y,w=_),y=w,m&&b)t:{for(_=m,p=b,g=0,v=_;v;v=Ds(v))g++;for(v=0,w=p;w;w=Ds(w))v++;for(;0<g-v;)_=Ds(_),g--;for(;0<v-g;)p=Ds(p),v--;for(;g--;){if(_===p||p!==null&&_===p.alternate)break t;_=Ds(_),p=Ds(p)}_=null}else _=null;m!==null&&xm(d,h,m,_,!1),b!==null&&y!==null&&xm(d,y,b,_,!0)}}e:{if(h=c?oa(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var E=Uf;else if(Mf(h))if(yy)E=Rw;else{E=Cw;var C=Aw}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&Ld(c.elementType)&&(E=Uf):E=Ow;if(E&&(E=E(t,c))){gy(d,E,n,u);break e}C&&C(t,h,c),t==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&au(h,"number",h.value)}switch(C=c?oa(c):window,t){case"focusin":(Mf(C)||C.contentEditable==="true")&&(Qs=C,lu=c,pa=null);break;case"focusout":pa=lu=Qs=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,zf(d,n,u);break;case"selectionchange":if(Dw)break;case"keydown":case"keyup":zf(d,n,u)}var S;if(zd)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Xs?my(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(fy&&n.locale!=="ko"&&(Xs||T!=="onCompositionStart"?T==="onCompositionEnd"&&Xs&&(S=hy()):(Nn=u,Vd="value"in Nn?Nn.value:Nn.textContent,Xs=!0)),C=Ho(c,T),0<C.length&&(T=new Rf(T,t,null,n,u),d.push({event:T,listeners:C}),S?T.data=S:(S=py(n),S!==null&&(T.data=S)))),(S=ww?xw(t,n):Tw(t,n))&&(T=Ho(c,"onBeforeInput"),0<T.length&&(C=new Rf("onBeforeInput","beforeinput",null,n,u),d.push({event:C,listeners:T}),C.data=S)),mx(d,t,c,n,u)}l_(d,e)})}function Ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ho(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Ua(t,n),i!=null&&s.unshift(Ga(t,i,a)),i=Ua(t,e),i!=null&&s.push(Ga(t,i,a))),t.tag===3)return s;t=t.return}return[]}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function xm(t,e,n,s,i){for(var a=e._reactName,r=[];n!==null&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===s)break;o!==5&&o!==26&&o!==27||c===null||(l=c,i?(c=Ua(n,a),c!=null&&r.unshift(Ga(n,c,l))):i||(c=Ua(n,a),c!=null&&r.push(Ga(n,c,l)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var vx=/\r\n?/g,_x=/\u0000|\uFFFD/g;function Tm(t){return(typeof t=="string"?t:""+t).replace(vx,`
`).replace(_x,"")}function u_(t,e){return e=Tm(e),Tm(t)===e}function wl(){}function ae(t,e,n,s,i,a){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||bi(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&bi(t,""+s);break;case"className":kr(t,"class",s);break;case"tabIndex":kr(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(t,n,s);break;case"style":uy(t,s,a);break;case"data":if(e!=="object"){kr(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=no(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&ae(t,e,"name",i.name,i,null),ae(t,e,"formEncType",i.formEncType,i,null),ae(t,e,"formMethod",i.formMethod,i,null),ae(t,e,"formTarget",i.formTarget,i,null)):(ae(t,e,"encType",i.encType,i,null),ae(t,e,"method",i.method,i,null),ae(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=no(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=wl);break;case"onScroll":s!=null&&F("scroll",t);break;case"onScrollEnd":s!=null&&F("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(O(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(O(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=no(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":F("beforetoggle",t),F("toggle",t),to(t,"popover",s);break;case"xlinkActuate":It(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":It(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":It(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":It(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":It(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":It(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":It(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":It(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":It(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":to(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=XS.get(n)||n,to(t,n,s))}}function Mu(t,e,n,s,i,a){switch(n){case"style":uy(t,s,a);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(O(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(O(60));t.innerHTML=n}}break;case"children":typeof s=="string"?bi(t,s):(typeof s=="number"||typeof s=="bigint")&&bi(t,""+s);break;case"onScroll":s!=null&&F("scroll",t);break;case"onScrollEnd":s!=null&&F("scrollend",t);break;case"onClick":s!=null&&(t.onclick=wl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iy.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[nt]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof s=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):to(t,n,s)}}}function $e(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":F("error",t),F("load",t);var s=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var r=n[a];if(r!=null)switch(a){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(O(137,e));default:ae(t,e,a,r,n,null)}}i&&ae(t,e,"srcSet",n.srcSet,n,null),s&&ae(t,e,"src",n.src,n,null);return;case"input":F("invalid",t);var o=a=r=i=null,l=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(u!=null)switch(s){case"name":i=u;break;case"type":r=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(O(137,e));break;default:ae(t,e,s,u,n,null)}}oy(t,a,o,l,c,r,i,!1),To(t);return;case"select":F("invalid",t),s=r=a=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":r=o;break;case"multiple":s=o;default:ae(t,e,i,o,n,null)}e=a,n=r,t.multiple=!!s,e!=null?di(t,!!s,e,!1):n!=null&&di(t,!!s,n,!0);return;case"textarea":F("invalid",t),a=i=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(O(91));break;default:ae(t,e,r,o,n,null)}cy(t,s,i,a),To(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(s=n[l],s!=null))switch(l){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ae(t,e,l,s,n,null)}return;case"dialog":F("beforetoggle",t),F("toggle",t),F("cancel",t),F("close",t);break;case"iframe":case"object":F("load",t);break;case"video":case"audio":for(s=0;s<$a.length;s++)F($a[s],t);break;case"image":F("error",t),F("load",t);break;case"details":F("toggle",t);break;case"embed":case"source":case"link":F("error",t),F("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(O(137,e));default:ae(t,e,c,s,n,null)}return;default:if(Ld(e)){for(u in n)n.hasOwnProperty(u)&&(s=n[u],s!==void 0&&Mu(t,e,u,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&ae(t,e,o,s,n,null))}function bx(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,r=null,o=null,l=null,c=null,u=null;for(m in n){var d=n[m];if(n.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":l=d;default:s.hasOwnProperty(m)||ae(t,e,m,null,s,d)}}for(var h in s){var m=s[h];if(d=n[h],s.hasOwnProperty(h)&&(m!=null||d!=null))switch(h){case"type":a=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":u=m;break;case"value":r=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(O(137,e));break;default:m!==d&&ae(t,e,h,m,s,d)}}iu(t,r,o,l,c,u,a,i);return;case"select":m=r=o=h=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":m=l;default:s.hasOwnProperty(a)||ae(t,e,a,null,s,l)}for(i in s)if(a=s[i],l=n[i],s.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case"value":h=a;break;case"defaultValue":o=a;break;case"multiple":r=a;default:a!==l&&ae(t,e,i,a,s,l)}e=o,n=r,s=m,h!=null?di(t,!!n,h,!1):!!s!=!!n&&(e!=null?di(t,!!n,e,!0):di(t,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:ae(t,e,o,null,s,i)}for(r in s)if(i=s[r],a=n[r],s.hasOwnProperty(r)&&(i!=null||a!=null))switch(r){case"value":h=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(O(91));break;default:i!==a&&ae(t,e,r,i,s,a)}ly(t,h,m);return;case"option":for(var b in n)if(h=n[b],n.hasOwnProperty(b)&&h!=null&&!s.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:ae(t,e,b,null,s,h)}for(l in s)if(h=s[l],m=n[l],s.hasOwnProperty(l)&&h!==m&&(h!=null||m!=null))switch(l){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ae(t,e,l,h,s,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _ in n)h=n[_],n.hasOwnProperty(_)&&h!=null&&!s.hasOwnProperty(_)&&ae(t,e,_,null,s,h);for(c in s)if(h=s[c],m=n[c],s.hasOwnProperty(c)&&h!==m&&(h!=null||m!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(O(137,e));break;default:ae(t,e,c,h,s,m)}return;default:if(Ld(e)){for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!==void 0&&!s.hasOwnProperty(y)&&Mu(t,e,y,void 0,s,h);for(u in s)h=s[u],m=n[u],!s.hasOwnProperty(u)||h===m||h===void 0&&m===void 0||Mu(t,e,u,h,s,m);return}}for(var p in n)h=n[p],n.hasOwnProperty(p)&&h!=null&&!s.hasOwnProperty(p)&&ae(t,e,p,null,s,h);for(d in s)h=s[d],m=n[d],!s.hasOwnProperty(d)||h===m||h==null&&m==null||ae(t,e,d,h,s,m)}var Uu=null,Lu=null;function qo(t){return t.nodeType===9?t:t.ownerDocument}function Em(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d_(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Pu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jc=null;function Sx(){var t=window.event;return t&&t.type==="popstate"?t===jc?!1:(jc=t,!0):(jc=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,wx=typeof clearTimeout=="function"?clearTimeout:void 0,jm=typeof Promise=="function"?Promise:void 0,xx=typeof queueMicrotask=="function"?queueMicrotask:typeof jm<"u"?function(t){return jm.resolve(null).then(t).catch(Tx)}:h_;function Tx(t){setTimeout(function(){throw t})}function Xn(t){return t==="head"}function Am(t,e){var n=e,s=0,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<s&&8>s){n=s;var r=t.ownerDocument;if(n&1&&ja(r.documentElement),n&2&&ja(r.body),n&4)for(n=r.head,ja(n),r=n.firstChild;r;){var o=r.nextSibling,l=r.nodeName;r[lr]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=o}}if(i===0){t.removeChild(a),Ya(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:s=n.charCodeAt(0)-48;else s=0;n=a}while(n);Ya(e)}function Vu(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Vu(n),Ud(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Ex(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[lr])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=Nt(t.nextSibling),t===null)break}return null}function jx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Nt(t.nextSibling),t===null))return null;return t}function Bu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Ax(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Nt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var zu=null;function Cm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function f_(t,e,n){switch(e=qo(n),t){case"html":if(t=e.documentElement,!t)throw Error(O(452));return t;case"head":if(t=e.head,!t)throw Error(O(453));return t;case"body":if(t=e.body,!t)throw Error(O(454));return t;default:throw Error(O(451))}}function ja(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Ud(t)}var jt=new Map,Om=new Set;function Io(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fn=ee.d;ee.d={f:Cx,r:Ox,D:Rx,C:Nx,L:Dx,m:kx,X:Ux,S:Mx,M:Lx};function Cx(){var t=fn.f(),e=_l();return t||e}function Ox(t){var e=Mi(t);e!==null&&e.tag===5&&e.type==="form"?rv(e):fn.r(t)}var Pi=typeof document>"u"?null:document;function m_(t,e,n){var s=Pi;if(s&&typeof e=="string"&&e){var i=bt(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Om.has(i)||(Om.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),$e(e,"link",t),Ue(e),s.head.appendChild(e)))}}function Rx(t){fn.D(t),m_("dns-prefetch",t,null)}function Nx(t,e){fn.C(t,e),m_("preconnect",t,e)}function Dx(t,e,n){fn.L(t,e,n);var s=Pi;if(s&&t&&e){var i='link[rel="preload"][as="'+bt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+bt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+bt(n.imageSizes)+'"]')):i+='[href="'+bt(t)+'"]';var a=i;switch(e){case"style":a=Ci(t);break;case"script":a=Vi(t)}jt.has(a)||(t=ue({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),jt.set(a,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(vr(a))||e==="script"&&s.querySelector(_r(a))||(e=s.createElement("link"),$e(e,"link",t),Ue(e),s.head.appendChild(e)))}}function kx(t,e){fn.m(t,e);var n=Pi;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+bt(s)+'"][href="'+bt(t)+'"]',a=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Vi(t)}if(!jt.has(a)&&(t=ue({rel:"modulepreload",href:t},e),jt.set(a,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(_r(a)))return}s=n.createElement("link"),$e(s,"link",t),Ue(s),n.head.appendChild(s)}}}function Mx(t,e,n){fn.S(t,e,n);var s=Pi;if(s&&t){var i=ui(s).hoistableStyles,a=Ci(t);e=e||"default";var r=i.get(a);if(!r){var o={loading:0,preload:null};if(r=s.querySelector(vr(a)))o.loading=5;else{t=ue({rel:"stylesheet",href:t,"data-precedence":e},n),(n=jt.get(a))&&vh(t,n);var l=r=s.createElement("link");Ue(l),$e(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,ho(r,e,s)}r={type:"stylesheet",instance:r,count:1,state:o},i.set(a,r)}}}function Ux(t,e){fn.X(t,e);var n=Pi;if(n&&t){var s=ui(n).hoistableScripts,i=Vi(t),a=s.get(i);a||(a=n.querySelector(_r(i)),a||(t=ue({src:t,async:!0},e),(e=jt.get(i))&&_h(t,e),a=n.createElement("script"),Ue(a),$e(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function Lx(t,e){fn.M(t,e);var n=Pi;if(n&&t){var s=ui(n).hoistableScripts,i=Vi(t),a=s.get(i);a||(a=n.querySelector(_r(i)),a||(t=ue({src:t,async:!0,type:"module"},e),(e=jt.get(i))&&_h(t,e),a=n.createElement("script"),Ue(a),$e(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function Rm(t,e,n,s){var i=(i=Un.current)?Io(i):null;if(!i)throw Error(O(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ci(n.href),n=ui(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ci(n.href);var a=ui(i).hoistableStyles,r=a.get(t);if(r||(i=i.ownerDocument||i,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,r),(a=i.querySelector(vr(t)))&&!a._p&&(r.instance=a,r.state.loading=5),jt.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},jt.set(t,n),a||Px(i,t,n,r.state))),e&&s===null)throw Error(O(528,""));return r}if(e&&s!==null)throw Error(O(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Vi(n),n=ui(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(O(444,t))}}function Ci(t){return'href="'+bt(t)+'"'}function vr(t){return'link[rel="stylesheet"]['+t+"]"}function p_(t){return ue({},t,{"data-precedence":t.precedence,precedence:null})}function Px(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),$e(e,"link",n),Ue(e),t.head.appendChild(e))}function Vi(t){return'[src="'+bt(t)+'"]'}function _r(t){return"script[async]"+t}function Nm(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+bt(n.href)+'"]');if(s)return e.instance=s,Ue(s),s;var i=ue({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Ue(s),$e(s,"style",i),ho(s,n.precedence,t),e.instance=s;case"stylesheet":i=Ci(n.href);var a=t.querySelector(vr(i));if(a)return e.state.loading|=4,e.instance=a,Ue(a),a;s=p_(n),(i=jt.get(i))&&vh(s,i),a=(t.ownerDocument||t).createElement("link"),Ue(a);var r=a;return r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),$e(a,"link",s),e.state.loading|=4,ho(a,n.precedence,t),e.instance=a;case"script":return a=Vi(n.src),(i=t.querySelector(_r(a)))?(e.instance=i,Ue(i),i):(s=n,(i=jt.get(a))&&(s=ue({},n),_h(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),Ue(i),$e(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(O(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,ho(s,n.precedence,t));return e.instance}function ho(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,a=i,r=0;r<s.length;r++){var o=s[r];if(o.dataset.precedence===e)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function vh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function _h(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var fo=null;function Dm(t,e,n){if(fo===null){var s=new Map,i=fo=new Map;i.set(n,s)}else i=fo,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[lr]||a[He]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(e)||"";r=t+r;var o=s.get(r);o?o.push(a):s.set(r,[a])}}return s}function km(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Vx(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function g_(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Ha=null;function Bx(){}function zx(t,e,n){if(Ha===null)throw Error(O(475));var s=Ha;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=Ci(n.href),a=t.querySelector(vr(i));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=Fo.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=a,Ue(a);return}a=t.ownerDocument||t,n=p_(n),(i=jt.get(i))&&vh(n,i),a=a.createElement("link"),Ue(a);var r=a;r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),$e(a,"link",n),e.instance=a}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(s.count++,e=Fo.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}function $x(){if(Ha===null)throw Error(O(475));var t=Ha;return t.stylesheets&&t.count===0&&$u(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&$u(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Fo(){if(this.count--,this.count===0){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yo=null;function $u(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yo=new Map,e.forEach(Gx,t),Yo=null,Fo.call(t))}function Gx(t,e){if(!(e.state.loading&4)){var n=Yo.get(t);if(n)var s=n.get(null);else{n=new Map,Yo.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var r=i[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),s=r)}s&&n.set(null,s)}i=e.instance,r=i.getAttribute("data-precedence"),a=n.get(r)||s,a===s&&n.set(null,i),n.set(r,i),this.count++,s=Fo.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var qa={$$typeof:Jt,Provider:null,Consumer:null,_currentValue:hs,_currentValue2:hs,_threadCount:0};function Hx(t,e,n,s,i,a,r,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.hiddenUpdates=Kl(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function y_(t,e,n,s,i,a,r,o,l,c,u,d){return t=new Hx(t,e,n,r,o,l,c,d),e=1,a===!0&&(e|=24),a=lt(3,null,null,e),t.current=a,a.stateNode=t,e=Yd(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:s,isDehydrated:n,cache:e},Xd(a),t}function v_(t){return t?(t=Ws,t):Ws}function __(t,e,n,s,i,a){i=v_(i),s.context===null?s.context=i:s.pendingContext=i,s=Ln(e),s.payload={element:n},a=a===void 0?null:a,a!==null&&(s.callback=a),n=Pn(t,s,e),n!==null&&(ht(n,t,e),va(n,t,e))}function Mm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bh(t,e){Mm(t,e),(t=t.alternate)&&Mm(t,e)}function b_(t){if(t.tag===13){var e=Ui(t,67108864);e!==null&&ht(e,t,67108864),bh(t,67108864)}}var Ko=!0;function qx(t,e,n,s){var i=z.T;z.T=null;var a=ee.p;try{ee.p=2,Sh(t,e,n,s)}finally{ee.p=a,z.T=i}}function Ix(t,e,n,s){var i=z.T;z.T=null;var a=ee.p;try{ee.p=8,Sh(t,e,n,s)}finally{ee.p=a,z.T=i}}function Sh(t,e,n,s){if(Ko){var i=Gu(s);if(i===null)Ec(t,e,s,Xo,n),Um(t,s);else if(Yx(i,t,e,n,s))s.stopPropagation();else if(Um(t,s),e&4&&-1<Fx.indexOf(t)){for(;i!==null;){var a=Mi(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=ss(a.pendingLanes);if(r!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;r;){var l=1<<31-ut(r);o.entanglements[1]|=l,r&=~l}qt(a),!(se&6)&&(Bo=Vt()+500,yr(0))}}break;case 13:o=Ui(a,2),o!==null&&ht(o,a,2),_l(),bh(a,2)}if(a=Gu(s),a===null&&Ec(t,e,s,Xo,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else Ec(t,e,s,null,n)}}function Gu(t){return t=Pd(t),wh(t)}var Xo=null;function wh(t){if(Xo=null,t=Ys(t),t!==null){var e=ir(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Ig(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Xo=t,null}function S_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(NS()){case Xg:return 2;case Qg:return 8;case xo:case DS:return 32;case Zg:return 268435456;default:return 32}default:return 32}}var Hu=!1,zn=null,$n=null,Gn=null,Ia=new Map,Fa=new Map,Cn=[],Fx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Um(t,e){switch(t){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(e.pointerId)}}function ta(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Mi(e),e!==null&&b_(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Yx(t,e,n,s,i){switch(e){case"focusin":return zn=ta(zn,t,e,n,s,i),!0;case"dragenter":return $n=ta($n,t,e,n,s,i),!0;case"mouseover":return Gn=ta(Gn,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Ia.set(a,ta(Ia.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Fa.set(a,ta(Fa.get(a)||null,t,e,n,s,i)),!0}return!1}function w_(t){var e=Ys(t.target);if(e!==null){var n=ir(e);if(n!==null){if(e=n.tag,e===13){if(e=Ig(n),e!==null){t.blockedOn=e,zS(t.priority,function(){if(n.tag===13){var s=dt();s=kd(s);var i=Ui(n,s);i!==null&&ht(i,n,s),bh(n,s)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gu(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);ru=s,n.target.dispatchEvent(s),ru=null}else return e=Mi(n),e!==null&&b_(e),t.blockedOn=n,!1;e.shift()}return!0}function Lm(t,e,n){mo(t)&&n.delete(e)}function Kx(){Hu=!1,zn!==null&&mo(zn)&&(zn=null),$n!==null&&mo($n)&&($n=null),Gn!==null&&mo(Gn)&&(Gn=null),Ia.forEach(Lm),Fa.forEach(Lm)}function $r(t,e){t.blockedOn===e&&(t.blockedOn=null,Hu||(Hu=!0,Ne.unstable_scheduleCallback(Ne.unstable_NormalPriority,Kx)))}var Gr=null;function Pm(t){Gr!==t&&(Gr=t,Ne.unstable_scheduleCallback(Ne.unstable_NormalPriority,function(){Gr===t&&(Gr=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(wh(s||n)===null)continue;break}var a=Mi(n);a!==null&&(t.splice(e,3),e-=3,wu(a,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function Ya(t){function e(l){return $r(l,t)}zn!==null&&$r(zn,t),$n!==null&&$r($n,t),Gn!==null&&$r(Gn,t),Ia.forEach(e),Fa.forEach(e);for(var n=0;n<Cn.length;n++){var s=Cn[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)w_(n),n.blockedOn===null&&Cn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],a=n[s+1],r=i[nt]||null;if(typeof a=="function")r||Pm(n);else if(r){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,r=a[nt]||null)o=r.formAction;else if(wh(i)!==null)continue}else o=r.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),Pm(n)}}}function xh(t){this._internalRoot=t}xl.prototype.render=xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));var n=e.current,s=dt();__(n,s,t,e,null,null)};xl.prototype.unmount=xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;__(t.current,2,null,t,null,null),_l(),e[ki]=null}};function xl(t){this._internalRoot=t}xl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ny();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cn.length&&e!==0&&e<Cn[n].priority;n++);Cn.splice(n,0,t),n===0&&w_(t)}};var Vm=Hg.version;if(Vm!=="19.1.0")throw Error(O(527,Vm,"19.1.0"));ee.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=TS(e),t=t!==null?Fg(t):null,t=t===null?null:t.stateNode,t};var Xx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hr.isDisabled&&Hr.supportsFiber)try{ar=Hr.inject(Xx),ct=Hr}catch{}}ol.createRoot=function(t,e){if(!qg(t))throw Error(O(299));var n=!1,s="",i=yv,a=vv,r=_v,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=y_(t,1,!1,null,null,n,s,i,a,r,o,null),t[ki]=e.current,yh(t),new xh(e)};ol.hydrateRoot=function(t,e,n){if(!qg(t))throw Error(O(299));var s=!1,i="",a=yv,r=vv,o=_v,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),e=y_(t,1,!0,e,n??null,s,i,a,r,o,l,c),e.context=v_(null),n=e.current,s=dt(),s=kd(s),i=Ln(s),i.callback=null,Pn(n,i,s),n=s,e.current.lanes=n,or(e,n),qt(e),t[ki]=e.current,yh(t),new xl(e)};ol.version="19.1.0";function x_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x_)}catch(t){console.error(t)}}x_(),Pg.exports=ol;var Qx=Pg.exports;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ka.apply(this,arguments)}var Mn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mn||(Mn={}));const Bm="popstate";function Zx(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:r,hash:o}=s.location;return qu("",{pathname:a,search:r,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:E_(i)}return Wx(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function T_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jx(){return Math.random().toString(36).substr(2,8)}function zm(t,e){return{usr:t.state,key:t.key,idx:e}}function qu(t,e,n,s){return n===void 0&&(n=null),Ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bi(e):e,{state:n,key:e&&e.key||s||Jx()})}function E_(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Bi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Wx(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,r=i.history,o=Mn.Pop,l=null,c=u();c==null&&(c=0,r.replaceState(Ka({},r.state,{idx:c}),""));function u(){return(r.state||{idx:null}).idx}function d(){o=Mn.Pop;let y=u(),p=y==null?null:y-c;c=y,l&&l({action:o,location:_.location,delta:p})}function h(y,p){o=Mn.Push;let g=qu(_.location,y,p);c=u()+1;let v=zm(g,c),w=_.createHref(g);try{r.pushState(v,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}a&&l&&l({action:o,location:_.location,delta:1})}function m(y,p){o=Mn.Replace;let g=qu(_.location,y,p);c=u();let v=zm(g,c),w=_.createHref(g);r.replaceState(v,"",w),a&&l&&l({action:o,location:_.location,delta:0})}function b(y){let p=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof y=="string"?y:E_(y);return g=g.replace(/ $/,"%20"),Ae(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let _={get action(){return o},get location(){return t(i,r)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Bm,d),l=y,()=>{i.removeEventListener(Bm,d),l=null}},createHref(y){return e(i,y)},createURL:b,encodeLocation(y){let p=b(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:m,go(y){return r.go(y)}};return _}var $m;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($m||($m={}));function eT(t,e,n){return n===void 0&&(n="/"),tT(t,e,n)}function tT(t,e,n,s){let i=typeof e=="string"?Bi(e):e,a=C_(i.pathname||"/",n);if(a==null)return null;let r=j_(t);nT(r);let o=null;for(let l=0;o==null&&l<r.length;++l){let c=mT(a);o=dT(r[l],c)}return o}function j_(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,r,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:r,route:a};l.relativePath.startsWith("/")&&(Ae(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let c=_s([s,l.relativePath]),u=n.concat(l);a.children&&a.children.length>0&&(Ae(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),j_(a.children,e,u,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:cT(c,a.index),routesMeta:u})};return t.forEach((a,r)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,r);else for(let l of A_(a.path))i(a,r,l)}),e}function A_(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let r=A_(s.join("/")),o=[];return o.push(...r.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...r),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function nT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uT(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const sT=/^:[\w-]+$/,iT=3,aT=2,rT=1,oT=10,lT=-2,Gm=t=>t==="*";function cT(t,e){let n=t.split("/"),s=n.length;return n.some(Gm)&&(s+=lT),e&&(s+=aT),n.filter(i=>!Gm(i)).reduce((i,a)=>i+(sT.test(a)?iT:a===""?rT:oT),s)}function uT(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function dT(t,e,n){let{routesMeta:s}=t,i={},a="/",r=[];for(let o=0;o<s.length;++o){let l=s[o],c=o===s.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=hT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(i,d.params),r.push({params:i,pathname:_s([a,d.pathname]),pathnameBase:vT(_s([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=_s([a,d.pathnameBase]))}return r}function hT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=fT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],r=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((c,u,d)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let _=o[d]||"";r=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=o[d];return m&&!b?c[h]=void 0:c[h]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:r,pattern:t}}function fT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),T_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,o,l)=>(s.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function mT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return T_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function C_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function pT(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?Bi(t):t;return{pathname:n?n.startsWith("/")?n:gT(n,e):e,search:_T(s),hash:bT(i)}}function gT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ac(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function O_(t,e){let n=yT(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function R_(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=Bi(t):(i=Ka({},t),Ae(!i.pathname||!i.pathname.includes("?"),Ac("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),Ac("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),Ac("#","search","hash",i)));let a=t===""||i.pathname==="",r=a?"/":i.pathname,o;if(r==null)o=n;else{let d=e.length-1;if(!s&&r.startsWith("..")){let h=r.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=pT(i,o),c=r&&r!=="/"&&r.endsWith("/"),u=(a||r===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const _s=t=>t.join("/").replace(/\/\/+/g,"/"),vT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_T=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ST(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const N_=["post","put","patch","delete"];new Set(N_);const wT=["get",...N_];new Set(wT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Xa.apply(this,arguments)}const Th=x.createContext(null),xT=x.createContext(null),br=x.createContext(null),Tl=x.createContext(null),Qn=x.createContext({outlet:null,matches:[],isDataRoute:!1}),D_=x.createContext(null);function Sr(){return x.useContext(Tl)!=null}function Eh(){return Sr()||Ae(!1),x.useContext(Tl).location}function k_(t){x.useContext(br).static||x.useLayoutEffect(t)}function El(){let{isDataRoute:t}=x.useContext(Qn);return t?PT():TT()}function TT(){Sr()||Ae(!1);let t=x.useContext(Th),{basename:e,future:n,navigator:s}=x.useContext(br),{matches:i}=x.useContext(Qn),{pathname:a}=Eh(),r=JSON.stringify(O_(i,n.v7_relativeSplatPath)),o=x.useRef(!1);return k_(()=>{o.current=!0}),x.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){s.go(c);return}let d=R_(c,JSON.parse(r),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:_s([e,d.pathname])),(u.replace?s.replace:s.push)(d,u.state,u)},[e,s,r,a,t])}function ET(){let{matches:t}=x.useContext(Qn),e=t[t.length-1];return e?e.params:{}}function jT(t,e){return AT(t,e)}function AT(t,e,n,s){Sr()||Ae(!1);let{navigator:i}=x.useContext(br),{matches:a}=x.useContext(Qn),r=a[a.length-1],o=r?r.params:{};r&&r.pathname;let l=r?r.pathnameBase:"/";r&&r.route;let c=Eh(),u;if(e){var d;let y=typeof e=="string"?Bi(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||Ae(!1),u=y}else u=c;let h=u.pathname||"/",m=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=eT(t,{pathname:m}),_=DT(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:_s([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:_s([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,s);return e&&_?x.createElement(Tl.Provider,{value:{location:Xa({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Mn.Pop}},_):_}function CT(){let t=LT(),e=ST(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const OT=x.createElement(CT,null);class RT extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Qn.Provider,{value:this.props.routeContext},x.createElement(D_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NT(t){let{routeContext:e,match:n,children:s}=t,i=x.useContext(Th);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Qn.Provider,{value:e},s)}function DT(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let u=r.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Ae(!1),r=r.slice(0,Math.min(r.length,u+1))}let l=!1,c=-1;if(n&&s&&s.v7_partialHydration)for(let u=0;u<r.length;u++){let d=r[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:m}=n,b=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||b){l=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((u,d,h)=>{let m,b=!1,_=null,y=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,_=d.route.errorElement||OT,l&&(c<0&&h===0?(VT("route-fallback"),b=!0,y=null):c===h&&(b=!0,y=d.route.hydrateFallbackElement||null)));let p=e.concat(r.slice(0,h+1)),g=()=>{let v;return m?v=_:b?v=y:d.route.Component?v=x.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,x.createElement(NT,{match:d,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?x.createElement(RT,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var M_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(M_||{}),U_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(U_||{});function kT(t){let e=x.useContext(Th);return e||Ae(!1),e}function MT(t){let e=x.useContext(xT);return e||Ae(!1),e}function UT(t){let e=x.useContext(Qn);return e||Ae(!1),e}function L_(t){let e=UT(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function LT(){var t;let e=x.useContext(D_),n=MT(),s=L_();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function PT(){let{router:t}=kT(M_.UseNavigateStable),e=L_(U_.UseNavigateStable),n=x.useRef(!1);return k_(()=>{n.current=!0}),x.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Xa({fromRouteId:e},a)))},[t,e])}const Hm={};function VT(t,e,n){Hm[t]||(Hm[t]=!0)}function BT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qr(t){let{to:e,replace:n,state:s,relative:i}=t;Sr()||Ae(!1);let{future:a,static:r}=x.useContext(br),{matches:o}=x.useContext(Qn),{pathname:l}=Eh(),c=El(),u=R_(e,O_(o,a.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return x.useEffect(()=>c(JSON.parse(d),{replace:n,state:s,relative:i}),[c,d,i,n,s]),null}function ca(t){Ae(!1)}function zT(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Mn.Pop,navigator:a,static:r=!1,future:o}=t;Sr()&&Ae(!1);let l=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:a,static:r,future:Xa({v7_relativeSplatPath:!1},o)}),[l,o,a,r]);typeof s=="string"&&(s=Bi(s));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:b="default"}=s,_=x.useMemo(()=>{let y=C_(u,l);return y==null?null:{location:{pathname:y,search:d,hash:h,state:m,key:b},navigationType:i}},[l,u,d,h,m,b,i]);return _==null?null:x.createElement(br.Provider,{value:c},x.createElement(Tl.Provider,{children:n,value:_}))}function $T(t){let{children:e,location:n}=t;return jT(Iu(e),n)}new Promise(()=>{});function Iu(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(s,i)=>{if(!x.isValidElement(s))return;let a=[...e,i];if(s.type===x.Fragment){n.push.apply(n,Iu(s.props.children,a));return}s.type!==ca&&Ae(!1),!s.props.index||!s.props.children||Ae(!1);let r={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(r.children=Iu(s.props.children,a)),n.push(r)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const GT="6";try{window.__reactRouterVersion=GT}catch{}const HT="startTransition",qm=yS[HT];function qT(t){let{basename:e,children:n,future:s,window:i}=t,a=x.useRef();a.current==null&&(a.current=Zx({window:i,v5Compat:!0}));let r=a.current,[o,l]=x.useState({action:r.action,location:r.location}),{v7_startTransition:c}=s||{},u=x.useCallback(d=>{c&&qm?qm(()=>l(d)):l(d)},[l,c]);return x.useLayoutEffect(()=>r.listen(u),[r,u]),x.useEffect(()=>BT(s),[s]),x.createElement(zT,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:r,future:s})}var Im;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Im||(Im={}));var Fm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fm||(Fm={}));const IT="modulepreload",FT=function(t){return"/"+t},Ym={},mn=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=FT(l),l in Ym)return;Ym[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":IT,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(r){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r}return i.then(r=>{for(const o of r||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},YT=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>mn(async()=>{const{default:s}=await Promise.resolve().then(()=>zi);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class jh extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class KT extends jh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Km extends jh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xm extends jh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fu||(Fu={}));var XT=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};class QT{constructor(e,{headers:n={},customFetch:s,region:i=Fu.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=YT(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return XT(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:r}=n;let o={},{region:l}=n;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=r):typeof r=="string"?(o["Content-Type"]="text/plain",u=r):typeof FormData<"u"&&r instanceof FormData?u=r:(o["Content-Type"]="application/json",u=JSON.stringify(r)));const d=yield this.fetch(c.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:u}).catch(_=>{throw new KT(_)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Km(d);if(!d.ok)throw new Xm(d);let m=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return m==="application/json"?b=yield d.json():m==="application/octet-stream"?b=yield d.blob():m==="text/event-stream"?b=d:m==="multipart/form-data"?b=yield d.formData():b=yield d.text(),{data:b,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Xm||i instanceof Km?i.context:void 0}}})}}var et={},Ah={},jl={},wr={},Al={},Cl={},ZT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oi=ZT();const JT=Oi.fetch,P_=Oi.fetch.bind(Oi),V_=Oi.Headers,WT=Oi.Request,eE=Oi.Response,zi=Object.freeze(Object.defineProperty({__proto__:null,Headers:V_,Request:WT,Response:eE,default:P_,fetch:JT},Symbol.toStringTag,{value:"Module"})),tE=Jb(zi);var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});let nE=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ol.default=nE;var B_=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cl,"__esModule",{value:!0});const sE=B_(tE),iE=B_(Ol);let aE=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=sE.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var r,o,l;let c=null,u=null,d=null,h=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const p=await a.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const _=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),y=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");_&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const _=await a.text();try{c=JSON.parse(_),Array.isArray(c)&&a.status===404&&(u=[],c=null,h=200,m="OK")}catch{a.status===404&&_===""?(h=204,m="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,m="OK"),c&&this.shouldThrowOnError)throw new iE.default(c)}return{error:c,data:u,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var r,o,l;return{error:{message:`${(r=a==null?void 0:a.name)!==null&&r!==void 0?r:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Cl.default=aE;var rE=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Al,"__esModule",{value:!0});const oE=rE(Cl);let lE=class extends oE.default{select(e){let n=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:s,foreignTable:i,referencedTable:a=i}={}){const r=a?`${a}.order`:"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"offset":`${i}.offset`,r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(r,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:s=!1,buffers:i=!1,wal:a=!1,format:r="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,s?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${c}"; options=${l};`,r==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Al.default=lE;var cE=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});const uE=cE(Al);let dE=class extends uE.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const s=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:s,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const r=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${r}.${n}`),this}match(e){return Object.entries(e).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(e,n,s){return this.url.searchParams.append(e,`not.${n}.${s}`),this}or(e,{foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,s){return this.url.searchParams.append(e,`${n}.${s}`),this}};wr.default=dE;var hE=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jl,"__esModule",{value:!0});const na=hE(wr);let fE=class{constructor(e,{headers:n={},schema:s,fetch:i}){this.url=e,this.headers=n,this.schema=s,this.fetch=i}select(e,{head:n=!1,count:s}={}){const i=n?"HEAD":"GET";let a=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",r),s&&(this.headers.Prefer=`count=${s}`),new na.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:s=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const r=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(r.length>0){const o=[...new Set(r)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new na.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:s=!1,count:i,defaultToNull:a=!0}={}){const r="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new na.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const s="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new na.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new na.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};jl.default=fE;var Rl={},Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.version=void 0;Nl.version="0.0.0-automated";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.DEFAULT_HEADERS=void 0;const mE=Nl;Rl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${mE.version}`};var z_=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ah,"__esModule",{value:!0});const pE=z_(jl),gE=z_(wr),yE=Rl;let vE=class $_{constructor(e,{headers:n={},schema:s,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},yE.DEFAULT_HEADERS),n),this.schemaName=s,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new pE.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $_(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:i=!1,count:a}={}){let r;const o=new URL(`${this.url}/rpc/${e}`);let l;s||i?(r=s?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{o.searchParams.append(u,d)})):(r="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new gE.default({method:r,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Ah.default=vE;var $i=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(et,"__esModule",{value:!0});et.PostgrestError=et.PostgrestBuilder=et.PostgrestTransformBuilder=et.PostgrestFilterBuilder=et.PostgrestQueryBuilder=et.PostgrestClient=void 0;const G_=$i(Ah);et.PostgrestClient=G_.default;const H_=$i(jl);et.PostgrestQueryBuilder=H_.default;const q_=$i(wr);et.PostgrestFilterBuilder=q_.default;const I_=$i(Al);et.PostgrestTransformBuilder=I_.default;const F_=$i(Cl);et.PostgrestBuilder=F_.default;const Y_=$i(Ol);et.PostgrestError=Y_.default;var _E=et.default={PostgrestClient:G_.default,PostgrestQueryBuilder:H_.default,PostgrestFilterBuilder:q_.default,PostgrestTransformBuilder:I_.default,PostgrestBuilder:F_.default,PostgrestError:Y_.default};const{PostgrestClient:bE,PostgrestQueryBuilder:pN,PostgrestFilterBuilder:gN,PostgrestTransformBuilder:yN,PostgrestBuilder:vN,PostgrestError:_N}=_E;function SE(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const wE=SE(),xE="2.11.15",TE=`realtime-js/${xE}`,EE="1.0.0",K_=1e4,jE=1e3;var Aa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Aa||(Aa={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var Rt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Rt||(Rt={}));var Yu;(function(t){t.websocket="websocket"})(Yu||(Yu={}));var cs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(cs||(cs={}));class AE{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const i=n.getUint8(1),a=n.getUint8(2);let r=this.HEADER_LENGTH+2;const o=s.decode(e.slice(r,r+i));r=r+i;const l=s.decode(e.slice(r,r+a));r=r+a;const c=JSON.parse(s.decode(e.slice(r,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class X_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(le||(le={}));const Qm=(t,e,n={})=>{var s;const i=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,r)=>(a[r]=CE(r,t,e,i),a),{})},CE=(t,e,n,s)=>{const i=e.find(o=>o.name===t),a=i==null?void 0:i.type,r=n[t];return a&&!s.includes(a)?Q_(a,r):Ku(r)},Q_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return DE(e,n)}switch(t){case le.bool:return OE(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return RE(e);case le.json:case le.jsonb:return NE(e);case le.timestamp:return kE(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return Ku(e);default:return Ku(e)}},Ku=t=>t,OE=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},RE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},NE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},DE=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let a;const r=t.slice(1,n);try{a=JSON.parse("["+r+"]")}catch{a=r?r.split(","):[]}return a.map(o=>Q_(e,o))}return t},kE=t=>typeof t=="string"?t.replace(" ","T"):t,Z_=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Cc{constructor(e,n,s={},i=K_){this.channel=e,this.event=n,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Zm||(Zm={}));class Ca{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:r,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ca.syncState(this.state,i,a,r),this.pendingDiffs.forEach(l=>{this.state=Ca.syncDiff(this.state,l,a,r)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:r,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ca.syncDiff(this.state,i,a,r),o())}),this.onJoin((i,a,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:r})}),this.onLeave((i,a,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,i){const a=this.cloneDeep(e),r=this.transformState(n),o={},l={};return this.map(a,(c,u)=>{r[c]||(l[c]=u)}),this.map(r,(c,u)=>{const d=a[c];if(d){const h=u.map(y=>y.presence_ref),m=d.map(y=>y.presence_ref),b=u.filter(y=>m.indexOf(y.presence_ref)<0),_=d.filter(y=>h.indexOf(y.presence_ref)<0);b.length>0&&(o[c]=b),_.length>0&&(l[c]=_)}else o[c]=u}),this.syncDiff(a,{joins:o,leaves:l},s,i)}static syncDiff(e,n,s,i){const{joins:a,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const d=e[o].map(m=>m.presence_ref),h=u.filter(m=>d.indexOf(m.presence_ref)<0);e[o].unshift(...h)}s(o,u,l)}),this.map(r,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=c,i(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const i=e[s];return"metas"in i?n[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[s]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jm||(Jm={}));var Wm;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wm||(Wm={}));var Xt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Xt||(Xt={}));class Ch{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Cc(this,Rt.join,this.params,this.timeout),this.rejoinTimer=new X_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rt.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Ca(this),this.broadcastEndpointURL=Z_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:a,presence:r,private:o}}=this.params;this._onError(u=>e==null?void 0:e(Xt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Xt.CLOSED));const l={},c={broadcast:a,presence:r,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Xt.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,b=[];for(let _=0;_<m;_++){const y=h[_],{filter:{event:p,schema:g,table:v,filter:w}}=y,E=u&&u[_];if(E&&E.event===p&&E.schema===g&&E.table===v&&E.filter===w)b.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=Ge.errored,e==null||e(Xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Xt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Ge.errored,e==null||e(Xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:r}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var r,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(r=this.params)===null||r===void 0?void 0:r.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Cc(this,Rt.leave,{},e),s.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),r=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),r}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Cc(this,e,n,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var i,a;const r=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=Rt;if(s&&[o,l,c,u].indexOf(r)>=0&&s!==this._joinRef())return;let h=this._onMessage(r,n,s);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var b,_,y;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((y=(_=m.filter)===null||_===void 0?void 0:_.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===r}).map(m=>m.callback(h,s)):(a=this.bindings[r])===null||a===void 0||a.filter(m=>{var b,_,y,p,g,v;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in m){const w=m.id,E=(b=m.filter)===null||b===void 0?void 0:b.event;return w&&((_=n.ids)===null||_===void 0?void 0:_.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const w=(g=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===r}).map(m=>{if(typeof h=="object"&&"ids"in h){const b=h.data,{schema:_,table:y,commit_timestamp:p,type:g,errors:v}=b;h=Object.assign(Object.assign({},{schema:_,table:y,commit_timestamp:p,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(b))}m.callback(h,s)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Ch.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Rt.close,{},e)}_onError(e){this._on(Rt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Qm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Qm(e.columns,e.old_record)),n}}const ep=()=>{},ME=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class UE{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=K_,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ep,this.ref=0,this.logger=ep,this.conn=null,this.sendBuffer=[],this.serializer=new AE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let r;return a?r=a:typeof fetch>"u"?r=(...o)=>mn(async()=>{const{default:l}=await Promise.resolve().then(()=>zi);return{default:l}},void 0).then(({default:l})=>l(...o)):r=fetch,(...o)=>r(...o)},this.endPoint=`${e}/${Yu.websocket}`,this.httpEndpoint=Z_(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,r)=>r(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new X_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=wE),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:EE}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Aa.connecting:return cs.Connecting;case Aa.open:return cs.Open;case Aa.closing:return cs.Closing;default:return cs.Closed}}isConnected(){return this.connectionState()===cs.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new Ch(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:s,payload:i,ref:a}=e,r=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${s} (${a})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:TE};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Rt.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(jE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:i,payload:a,ref:r}=n;s==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${i} ${r&&"("+r+")"||""}`,a),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(i,a,r)),this.stateChangeCallbacks.message.forEach(o=>o(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Rt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${s}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([ME],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class Oh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class LE extends Oh{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Xu extends Oh{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var PE=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const J_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>mn(async()=>{const{default:s}=await Promise.resolve().then(()=>zi);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},VE=()=>PE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield mn(()=>Promise.resolve().then(()=>zi),void 0)).Response:Response}),Qu=t=>{if(Array.isArray(t))return t.map(n=>Qu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Qu(s)}),e};var Rs=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const Oc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BE=(t,e,n)=>Rs(void 0,void 0,void 0,function*(){const s=yield VE();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new LE(Oc(i),t.status||500))}).catch(i=>{e(new Xu(Oc(i),i))}):e(new Xu(Oc(t),t))}),zE=(t,e,n,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),n))};function xr(t,e,n,s,i,a){return Rs(this,void 0,void 0,function*(){return new Promise((r,o)=>{t(n,zE(e,s,i,a)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>BE(l,o,s))})})}function Qo(t,e,n,s){return Rs(this,void 0,void 0,function*(){return xr(t,"GET",e,n,s)})}function Tn(t,e,n,s,i){return Rs(this,void 0,void 0,function*(){return xr(t,"POST",e,s,i,n)})}function $E(t,e,n,s,i){return Rs(this,void 0,void 0,function*(){return xr(t,"PUT",e,s,i,n)})}function GE(t,e,n,s){return Rs(this,void 0,void 0,function*(){return xr(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function W_(t,e,n,s,i){return Rs(this,void 0,void 0,function*(){return xr(t,"DELETE",e,s,i,n)})}var Qe=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const HE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qE{constructor(e,n={},s,i){this.url=e,this.headers=n,this.bucketId=s,this.fetch=J_(i)}uploadOrUpdate(e,n,s,i){return Qe(this,void 0,void 0,function*(){try{let a;const r=Object.assign(Object.assign({},tp),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",r.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",r.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=s,o["cache-control"]=`max-age=${r.cacheControl}`,o["content-type"]=r.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:o},r!=null&&r.duplex?{duplex:r.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(ke(a))return{data:null,error:a};throw a}})}upload(e,n,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,i){return Qe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),r=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${r}`);o.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:tp.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Qe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield Tn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),r=new URL(this.url+a.url),o=r.searchParams.get("token");if(!o)throw new Oh("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:o},error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}update(e,n,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Qe(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ke(i))return{data:null,error:i};throw i}})}copy(e,n,s){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield Tn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ke(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,s){return Qe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Tn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const r=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${r}`)},{data:a,error:null}}catch(i){if(ke(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,s){return Qe(this,void 0,void 0,function*(){try{const i=yield Tn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${a}`):null})),error:null}}catch(i){if(ke(i))return{data:null,error:i};throw i}})}download(e,n){return Qe(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),r=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Qo(this.fetch,`${this.url}/${i}/${o}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ke(o))return{data:null,error:o};throw o}})}info(e){return Qe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Qo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Qu(s),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}exists(e){return Qe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield GE(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ke(s)&&s instanceof Xu){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield W_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}list(e,n,s){return Qe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},HE),n),{prefix:e||""});return{data:yield Tn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(ke(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const IE="2.7.1",FE={"X-Client-Info":`storage-js/${IE}`};var ks=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};class YE{constructor(e,n={},s){this.url=e,this.headers=Object.assign(Object.assign({},FE),n),this.fetch=J_(s)}listBuckets(){return ks(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ke(e))return{data:null,error:e};throw e}})}getBucket(e){return ks(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ks(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return ks(this,void 0,void 0,function*(){try{return{data:yield $E(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ks(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ks(this,void 0,void 0,function*(){try{return{data:yield W_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}}class KE extends YE{constructor(e,n={},s){super(e,n,s)}from(e){return new qE(this.url,this.headers,e,this.fetch)}}const XE="2.52.0";let ua="";typeof Deno<"u"?ua="deno":typeof document<"u"?ua="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ua="react-native":ua="node";const QE={"X-Client-Info":`supabase-js-${ua}/${XE}`},ZE={headers:QE},JE={schema:"public"},WE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e1={};var t1=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const n1=t=>{let e;return t?e=t:typeof fetch>"u"?e=P_:e=fetch,(...n)=>e(...n)},s1=()=>typeof Headers>"u"?V_:Headers,i1=(t,e,n)=>{const s=n1(n),i=s1();return(a,r)=>t1(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(a,Object.assign(Object.assign({},r),{headers:c}))})};var a1=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};function r1(t){return t.endsWith("/")?t:t+"/"}function o1(t,e){var n,s;const{db:i,auth:a,realtime:r,global:o}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),r),global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>a1(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const e0="2.71.1",Hs=30*1e3,Zu=3,Rc=Zu*Hs,l1="http://localhost:9999",c1="supabase.auth.token",u1={"X-Client-Info":`gotrue-js/${e0}`},Ju="X-Supabase-Api-Version",t0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},d1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,h1=10*60*1e3;class Rh extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function $(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class f1 extends Rh{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function m1(t){return $(t)&&t.name==="AuthApiError"}class n0 extends Rh{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zn extends Rh{constructor(e,n,s,i){super(e,s,i),this.name=n,this.status=s}}class bn extends Zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function p1(t){return $(t)&&t.name==="AuthSessionMissingError"}class Ir extends Zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fr extends Zn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yr extends Zn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function g1(t){return $(t)&&t.name==="AuthImplicitGrantRedirectError"}class np extends Zn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wu extends Zn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Nc(t){return $(t)&&t.name==="AuthRetryableFetchError"}class sp extends Zn{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class ed extends Zn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ip=` 	
\r=`.split(""),y1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ip.length;e+=1)t[ip[e].charCodeAt(0)]=-2;for(let e=0;e<Zo.length;e+=1)t[Zo[e].charCodeAt(0)]=e;return t})();function ap(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Zo[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Zo[s]),e.queuedBits-=6}}function s0(t,e,n){const s=y1[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rp(t){const e=[],n=r=>{e.push(String.fromCodePoint(r))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=r=>{b1(r,s,n)};for(let r=0;r<t.length;r+=1)s0(t.charCodeAt(r),i,a);return e.join("")}function v1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _1(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}v1(s,e)}}function b1(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function S1(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)s0(t.charCodeAt(i),n,s);return new Uint8Array(e)}function w1(t){const e=[];return _1(t,n=>e.push(n)),new Uint8Array(e)}function x1(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};return t.forEach(i=>ap(i,n,s)),ap(null,n,s),e.join("")}function T1(t){return Math.round(Date.now()/1e3)+t}function E1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const At=()=>typeof window<"u"&&typeof document<"u",es={tested:!1,writable:!1},i0=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(es.tested)return es.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),es.tested=!0,es.writable=!0}catch{es.tested=!0,es.writable=!1}return es.writable};function j1(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((s,i)=>{e[i]=s}),e}const a0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>mn(async()=>{const{default:s}=await Promise.resolve().then(()=>zi);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},A1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ts=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},yn=async(t,e)=>{await t.removeItem(e)};class Dl{constructor(){this.promise=new Dl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Dl.promiseConstructor=Promise;function Dc(t){const e=t.split(".");if(e.length!==3)throw new ed("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!d1.test(e[s]))throw new ed("JWT not in base64url format");return{header:JSON.parse(rp(e[0])),payload:JSON.parse(rp(e[1])),signature:S1(e[2]),raw:{header:e[0],payload:e[1]}}}async function C1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function O1(t,e){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const r=await t(a);if(!e(a,null,r)){s(r);return}}catch(r){if(!e(a,r)){i(r);return}}})()})}function R1(t){return("0"+t.toString(16)).substr(-2)}function N1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,R1).join("")}async function D1(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function k1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await D1(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ms(t,e,n=!1){const s=N1();let i=s;n&&(i+="/PASSWORD_RECOVERY"),await qs(t,`${e}-code-verifier`,i);const a=await k1(s);return[a,s===a?"plain":"s256"]}const M1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U1(t){const e=t.headers.get(Ju);if(!e||!e.match(M1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function L1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function P1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const V1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Us(t){if(!V1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function op(t){return JSON.parse(JSON.stringify(t))}var B1=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n};const rs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),z1=[502,503,504];async function lp(t){var e;if(!A1(t))throw new Wu(rs(t),0);if(z1.includes(t.status))throw new Wu(rs(t),t.status);let n;try{n=await t.json()}catch(a){throw new n0(rs(a),a)}let s;const i=U1(t);if(i&&i.getTime()>=t0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new sp(rs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new bn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,r)=>a&&typeof r=="string",!0))throw new sp(rs(n),t.status,n.weak_password.reasons);throw new f1(rs(n),t.status||500,s)}const $1=(t,e,n,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),n))};async function I(t,e,n,s){var i;const a=Object.assign({},s==null?void 0:s.headers);a[Ju]||(a[Ju]=t0["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const r=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(r.redirect_to=s.redirectTo);const o=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await G1(t,e,n+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function G1(t,e,n,s,i,a){const r=$1(e,s,i,a);let o;try{o=await t(n,Object.assign({},r))}catch(l){throw console.error(l),new Wu(rs(l),0)}if(o.ok||await lp(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(l){await lp(l)}}function Kt(t){var e;let n=null;F1(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=T1(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function cp(t){const e=Kt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function On(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function H1(t){return{data:t,error:null}}function q1(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a}=t,r=B1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a},l=Object.assign({},r);return{data:{properties:o,user:l},error:null}}function I1(t){return t}function F1(t){return t.access_token&&t.refresh_token&&t.expires_in}const Mc=["global","local","others"];var Y1=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n};class K1{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=a0(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Mc[0]){if(Mc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mc.join(", ")}`);try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:On})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Y1(e,["options"]),i=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:q1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:On})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,i,a,r,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:I1});if(u.error)throw u.error;const d=await u.json(),h=(r=u.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);c[`${y}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if($(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Us(e);try{return await I(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:On})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Us(e);try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:On})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Us(e);try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:On})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Us(e.userId);try{const{data:n,error:s}=await I(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:s}}catch(n){if($(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Us(e.userId),Us(e.id);try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}}function up(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function X1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ls={debug:!!(globalThis&&i0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class r0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Q1 extends r0{}async function Z1(t,e,n){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Q1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ls.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}X1();const J1={url:l1,storageKey:c1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:u1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function dp(t,e,n){return await n()}const Ps={};class Qa{constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qa.nextInstanceID,Qa.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},J1),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new K1({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=a0(i.fetch),this.lock=i.lock||dp,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:At()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Z1:this.lock=dp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:i0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=up(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=up(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Ps[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ps[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${e0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=j1(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),At()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),g1(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:r,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",o),await this._saveSession(r),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $(n)?{error:n}:{error:new n0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,i;try{const a=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Kt}),{data:r,error:o}=a;if(o||!r)return{data:{user:null,session:null},error:o};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if($(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,s,i;try{let a;if("email"in e){const{email:u,password:d,options:h}=e;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await Ms(this.storage,this.storageKey)),a=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:b},xform:Kt})}else if("phone"in e){const{phone:u,password:d,options:h}=e;a=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Kt})}else throw new Fr("You must provide either an email or phone number and a password");const{data:r,error:o}=a;if(o||!r)return{data:{user:null,session:null},error:o};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if($(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:r,options:o}=e;n=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:cp})}else if("phone"in e){const{phone:a,password:r,options:o}=e;n=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:cp})}else throw new Fr("You must provide either an email or phone number and a password");const{data:s,error:i}=n;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ir}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,i,a,r,o,l,c,u,d,h,m;let b,_;if("message"in e)b=e.message,_=e.signature;else{const{chain:y,wallet:p,statement:g,options:v}=e;let w;if(At())if(typeof p=="object")w=p;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))w=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const E=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const C=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)b=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),_=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${E.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((r=v==null?void 0:v.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await w.signMessage(new TextEncoder().encode(b),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=C}}try{const{data:y,error:p}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:x1(_)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Kt});if(p)throw p;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ir}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:p})}catch(y){if($(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await ts(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(n??"").split("/");try{const{data:a,error:r}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Kt});if(await yn(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ir}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:r})}catch(a){if($(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:s,token:i,access_token:a,nonce:r}=e,o=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Kt}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ir}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,i,a,r;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ms(this.storage,this.storageKey));const{error:d}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(r=l==null?void 0:l.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Fr("You must provide either an email or phone number.")}catch(o){if($(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,s;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:r,error:o}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Kt});if(o)throw o;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if($(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,s,i;try{let a=null,r=null;return this.flowType==="pkce"&&([a,r]=await Ms(this.storage,this.storageKey)),await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:r}),headers:this.headers,xform:H1})}catch(a){if($(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new bn;const{error:i}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if($(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:a}=e,{error:r}=await I(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in e){const{phone:s,type:i,options:a}=e,{data:r,error:o}=await I(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:o}}throw new Fr("You must provide either an email or phone number and a type")}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Rc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const r=await ts(this.userStorage,this.storageKey+"-user");r!=null&&r.user?e.user=r.user:e.user=kc()}if(this.storage.isServer&&e.user){let r=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:On}):await this._useSession(async n=>{var s,i,a;const{data:r,error:o}=n;if(o)throw o;return!(!((s=r.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bn}:await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:On})})}catch(n){if($(n))return p1(n)&&(await this._removeSession(),await yn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new bn;const r=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Ms(this.storage,this.storageKey));const{data:c,error:u}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:r.access_token,xform:On});if(u)throw u;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bn;const n=Date.now()/1e3;let s=n,i=!0,a=null;const{payload:r}=Dc(e.access_token);if(r.exp&&(s=r.exp,i=s<=n),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if($(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:r,error:o}=n;if(o)throw o;e=(s=r.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new bn;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!At())throw new Yr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new np("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new np("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:r,expires_in:o,expires_at:l,token_type:c}=e;if(!a||!o||!r||!c)throw new Yr("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let h=u+d;l&&(h=parseInt(l));const m=h-u;m*1e3<=Hs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const b=h-d;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,h,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,h,u);const{data:_,error:y}=await this._getUser(a);if(y)throw y;const p={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:h,refresh_token:r,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if($(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ts(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{error:a};const r=(s=i.session)===null||s===void 0?void 0:s.access_token;if(r){const{error:o}=await this.admin.signOut(r,e);if(o&&!(m1(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await yn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=E1(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,i;try{const{data:{session:a},error:r}=n;if(r)throw r;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Ms(this.storage,this.storageKey,!0));try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if($(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:i}=await this._useSession(async a=>{var r,o,l,c,u;const{data:d,error:h}=a;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await I(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return At()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if($(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:r}=n;if(r)throw r;return await I(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await O1(async i=>(i>0&&await C1(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kt})),(i,a)=>{const r=200*Math.pow(2,i);return a&&Nc(a)&&Date.now()+r-s<Hs})}catch(s){if(this._debug(n,"error",s),$(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),At()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await ts(this.storage,this.storageKey);if(i&&this.userStorage){let r=await ts(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:i.user},await qs(this.userStorage,this.storageKey+"-user",r)),i.user=(e=r==null?void 0:r.user)!==null&&e!==void 0?e:kc()}else if(i&&!i.user&&!i.user){const r=await ts(this.storage,this.storageKey+"-user");r&&(r!=null&&r.user)?(i.user=r.user,await yn(this.storage,this.storageKey+"-user"),await qs(this.storage,this.storageKey,i)):i.user=kc()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Rc;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${Rc}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:r}=await this._callRefreshToken(i.refresh_token);r&&(console.error(r),Nc(r)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:o}=await this._getUser(i.access_token);!o&&(r!=null&&r.user)?(i.user=r.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Dl;const{data:a,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!a.session)throw new bn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),$(a)){const r={session:null,error:a};return Nc(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(r),r}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],r=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){a.push(l)}});if(await Promise.all(r),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await qs(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=op(i);await qs(this.storage,this.storageKey,a)}else{const i=op(n);await qs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await yn(this.storage,this.storageKey),await yn(this.storage,this.storageKey+"-code-verifier"),await yn(this.storage,this.storageKey+"-user"),this.userStorage&&await yn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&At()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/Hs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Hs}ms, refresh threshold is ${Zu} ticks`),i<=Zu&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof r0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const i=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,r]=await Ms(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;return a?{data:null,error:a}:await I(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:r}=n;if(r)return{data:null,error:r};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await I(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const{data:r,error:o}=await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:o})})}catch(n){if($(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;return a?{data:null,error:a}:await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if($(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],i=s.filter(r=>r.factor_type==="totp"&&r.status==="verified"),a=s.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:s,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Dc(i.access_token);let o=null;r.aal&&(o=r.aal);let l=o;((s=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(o=>o.kid===e);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+h1>i)return s;const{data:a,error:r}=await I(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,s=a.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:m,error:b}=await this.getSession();if(b||!m.session)return{data:null,error:b};s=m.session.access_token}const{header:i,payload:a,signature:r,raw:{header:o,payload:l}}=Dc(s);n!=null&&n.allowExpired||L1(a.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:a,header:i,signature:r},error:null}}const u=P1(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,r,w1(`${o}.${l}`)))throw new ed("Invalid JWT signature");return{data:{claims:a,header:i,signature:r},error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}}Qa.nextInstanceID=0;const W1=Qa;class ej extends W1{constructor(e){super(e)}}var tj=function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function o(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};class nj{constructor(e,n,s){var i,a,r;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=r1(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:JE,realtime:e1,auth:Object.assign(Object.assign({},WE),{storageKey:c}),global:ZE},d=o1(s??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=i1(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new bE(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new QT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new KE(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return tj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,storageKey:a,flowType:r,lock:o,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ej({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,flowType:r,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new UE(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sj=(t,e,n)=>new nj(t,e,n),J=sj("https://ssxxaztyibwkcrowyarw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzeHhhenR5aWJ3a2Nyb3d5YXJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxNzE1MjYsImV4cCI6MjA2ODc0NzUyNn0.5wfjQfBzyQyxQT2X-03uzjsz54xN79mbShjdiQFfiXY");function ij(){const[t,e]=x.useState(""),[n,s]=x.useState(""),[i,a]=x.useState(!1),[r,o]=x.useState(""),l=El(),c=async d=>{d.preventDefault(),a(!0),o("");const{data:h,error:m}=await J.auth.signInWithPassword({email:t,password:n});m?o(m.message):h.user&&l("/dashboard"),a(!1)},u=async()=>{a(!0),o("");const{error:d}=await J.auth.signUp({email:t,password:n});o(d?d.message:"Check your email for confirmation link"),a(!1)};return f.jsx("div",{className:"login-container",children:f.jsxs("div",{className:"login-card",children:[f.jsx("h1",{className:"login-title",children:"Login"}),f.jsxs("form",{onSubmit:c,className:"login-form",children:[f.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:d=>e(d.target.value),className:"form-input",required:!0}),f.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:d=>s(d.target.value),className:"form-input",required:!0}),f.jsx("button",{type:"submit",disabled:i,className:"login-button",children:i?"Loading...":"Sign In"})]}),f.jsx("button",{onClick:u,disabled:i,className:"signup-button",children:"Create Account"}),r&&f.jsx("div",{className:"login-error",children:r})]})})}class po{static getCompletedPhases(e){let n=0;return e!=null&&e.scenes&&typeof e.scenes=="object"&&Object.keys(e.scenes).length>0&&n++,e!=null&&e.scenes&&this.hasGeneratedFrames(e)&&n++,n}static getPhaseProgress(e){const n=this.getCompletedPhases(e);let s=null;return n===0?s="script_interpretation":n===1?s="element_images":n===2?s="scene_generation":n===3?s="scene_videos":n===4&&(s="final_assembly"),{completed_phases:n,total_phases:5,current_phase:s}}static isPhaseCompleted(e,n){return this.getCompletedPhases(e)>=n}static canPhaseProceeed(e,n){return n===1?!0:n===2||n===3?this.isPhaseCompleted(e,1):n===4?this.isPhaseCompleted(e,3):n===5?this.isPhaseCompleted(e,4):!1}static hasGeneratedFrames(e){if(!e.scenes||typeof e.scenes!="object")return!1;const n=Object.keys(e.scenes);return n.length===0?!1:n.every(s=>{const i=e.scenes[s];return(i==null?void 0:i.scene_frame_prompt)&&(i==null?void 0:i.scene_start_frame)})}}const hp={scenes:{},elements:{},project_metadata:{title:"New Project",client:"Client Name",schema_version:"3.0",production_workflow:"animatic_to_video_scalable"}};async function o0(t){try{const{data:e}=await J.from("project_assets").select("asset_filename").eq("project_id",t),{error:n}=await J.from("projects").delete().eq("id",t);if(n)return console.error("Error deleting project:",n),!1;console.log(`🧹 Starting comprehensive storage cleanup for project: ${t}`);let s=0,i=[];console.log(`📂 STRATEGY 1: Scanning projects/${t}/scenes/`);const{data:a,error:r}=await J.storage.from("scene-images").list(`projects/${t}/scenes`);if(r)console.error("❌ Failed to list scenes directory:",r),i.push(`Scenes list error: ${r.message}`);else if(a&&a.length>0){console.log(`📋 Found ${a.length} files in scenes directory`);const c=a.map(d=>`projects/${t}/scenes/${d.name}`),{error:u}=await J.storage.from("scene-images").remove(c);u?(console.error("❌ Failed to remove scene files:",u),i.push(`Scene removal error: ${u.message}`)):(s+=a.length,console.log(`✅ STRATEGY 1 SUCCESS: Removed ${a.length} scene files`))}else console.log("📋 No files found in scenes directory");console.log(`📂 STRATEGY 2: Scanning projects/${t}/`);const{data:o,error:l}=await J.storage.from("scene-images").list(`projects/${t}`,{limit:100});if(l)console.error("❌ Failed to list project directory:",l),i.push(`Project list error: ${l.message}`);else if(o&&o.length>0){console.log(`📋 Found ${o.length} items in project directory`);const c=o.filter(u=>u.name&&!u.name.endsWith("/"));if(c.length>0){const u=c.map(h=>`projects/${t}/${h.name}`),{error:d}=await J.storage.from("scene-images").remove(u);d?(console.error("❌ Failed to remove project files:",d),i.push(`Project removal error: ${d.message}`)):(s+=c.length,console.log(`✅ STRATEGY 2 SUCCESS: Removed ${c.length} additional files`))}else console.log("📋 No additional files found in project root")}else console.log("📋 Project directory is empty or doesn't exist");return i.length>0?(console.error(`⚠️ Storage cleanup completed with ${i.length} errors:`),i.forEach((c,u)=>console.error(`   ${u+1}. ${c}`)),console.log(`📊 Files successfully removed: ${s}`),console.log("🔄 Project deletion continues despite storage cleanup errors")):(console.log("🎉 COMPLETE SUCCESS: Storage cleanup finished perfectly"),console.log(`📊 Total files removed: ${s}`),console.log(`🗂️ Project ${t} storage completely cleaned`)),!0}catch(e){return console.error("Error in deleteProject:",e),!1}}async function l0(t,e){try{const n={...hp,project_metadata:{...hp.project_metadata,title:t}},s=await Ul(),{data:i,error:a}=await J.from("projects").insert({name:t,user_id:e,status:"active",master_json:n,configuration_data:s,current_version:0}).select().single();if(a||!i)return console.error("Error creating project:",a),null;console.log(`✅ Project "${t}" created with automatic configuration injection`);const{data:r,error:o}=await J.from("project_phases").select("*").eq("project_id",i.id).order("phase_index");return o||!r?(console.error("Error fetching phases:",o),{project:i,phases:[]}):{project:i,phases:r}}catch(n){return console.error("Error in createProject:",n),null}}async function c0(t){try{const{data:e,error:n}=await J.from("projects").select("master_json").eq("id",t).single();return n||!e?(console.error("Error fetching master JSON:",n),null):e.master_json}catch(e){return console.error("Error in getMasterJSON:",e),null}}async function Jo(t,e,n="Master JSON updated"){try{const{data:s,error:i}=await J.from("projects").select("current_version").eq("id",t).single();if(i||!s)return console.error("Error fetching project for version:",i),!1;const a=s.current_version+1,{error:r}=await J.from("projects").update({master_json:e,current_version:a,updated_at:new Date().toISOString()}).eq("id",t);return r?(console.error("Error updating master JSON:",r),!1):!0}catch(s){return console.error("Error in saveMasterJSONFromObject:",s),!1}}async function u0(t){try{const{data:e,error:n}=await J.from("project_versions").select("*").eq("project_id",t).order("version_number",{ascending:!1});return n||!e?(console.error("Error fetching project versions:",n),[]):e}catch(e){return console.error("Error in getProjectVersions:",e),[]}}async function d0(t,e){try{const{data:n,error:s}=await J.from("project_versions").select("*").eq("project_id",t).eq("version_number",e).single();return s||!n?(console.error("Error fetching project version:",s),null):n}catch(n){return console.error("Error in getProjectVersion:",n),null}}async function h0(t){try{const{data:e,error:n}=await J.from("projects").select(`
        id,
        name,
        status,
        created_at,
        master_json,
        project_phases(
          phase_index,
          status,
          phase_name,
          can_proceed,
          completed_at
        )
      `).eq("user_id",t).order("created_at",{ascending:!1});return n||!e?(console.error("Error fetching projects:",n),[]):e.map(s=>{const i=po.getPhaseProgress(s.master_json);return{id:s.id,name:s.name,status:s.status,created_at:s.created_at,phase_progress:i}})}catch(e){return console.error("Error in getUserProjects:",e),[]}}async function td(t){try{const{data:e,error:n}=await J.from("projects").select("*").eq("id",t).single();return n||!e?(console.error("Error fetching project:",n),null):e}catch(e){return console.error("Error in getProject:",e),null}}async function nd(t){try{const[e,n]=await Promise.all([J.from("project_phases").select("*").eq("project_id",t).order("phase_index",{ascending:!0}),J.from("projects").select("master_json").eq("id",t).single()]);if(e.error||!e.data)return console.error("Error fetching phases:",e.error),[];if(n.error||!n.data)return console.error("Error fetching project:",n.error),e.data.map(r=>({...r,can_proceed:r.phase_index===1}));const s=e.data,i=n.data.master_json;return s.map(r=>{let o=!1;return r.phase_index===1?o=!0:(r.phase_index===2||r.phase_index===3)&&(o=i&&i.scenes&&Object.keys(i.scenes).length>0),{...r,can_proceed:o}})}catch(e){return console.error("Error in getProjectPhases:",e),[]}}async function kl(t){try{const{data:e,error:n}=await J.from("projects").select("configuration_data").eq("id",t).single();if(n)return console.error("Error loading project configuration:",n),{};if(!(e!=null&&e.configuration_data)){console.log("No configuration found for project, loading default template");const s=await Ul();return s&&Object.keys(s).length>0?(await Ml(t,s),s):{}}return e.configuration_data||{}}catch(e){return console.error("Error loading project configuration:",e),{}}}async function Ml(t,e){try{const{error:n}=await J.from("projects").update({configuration_data:e,updated_at:new Date().toISOString()}).eq("id",t);return n?(console.error("Error saving project configuration:",n),!1):(console.log("✅ Project configuration saved successfully"),!0)}catch(n){return console.error("Error saving project configuration:",n),!1}}async function Ul(){try{const{data:t,error:e}=await J.from("project_configuration_templates").select("template_data").eq("name","default").single();return e||!t?(console.error("Error loading default configuration template:",e),{}):t.template_data||{}}catch(t){return console.error("Error loading default configuration template:",t),{}}}async function f0(t,e){try{const n=await Ul();if(!n||Object.keys(n).length===0)return console.error("No default template found"),!1;let s=n;return e||console.log("🔄 Resetting entire configuration to default"),await Ml(t,s)}catch(n){return console.error("Error resetting project configuration to default:",n),!1}}const aj=Object.freeze(Object.defineProperty({__proto__:null,createProject:l0,deleteProject:o0,getDefaultConfigurationTemplate:Ul,getMasterJSON:c0,getProject:td,getProjectConfiguration:kl,getProjectPhases:nd,getProjectVersion:d0,getProjectVersions:u0,getUserProjects:h0,resetProjectConfigurationToDefault:f0,saveMasterJSONFromObject:Jo,saveProjectConfiguration:Ml},Symbol.toStringTag,{value:"Module"}));function rj({user:t}){const e=El(),[n,s]=x.useState([]),[i,a]=x.useState(!0),[r,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(""),[h,m]=x.useState(null),[b,_]=x.useState(!1);x.useEffect(()=>{y()},[t]);const y=async()=>{if(!t)return;a(!0);const S=await h0(t.id);s(S),a(!1)},p=async()=>{await J.auth.signOut(),e("/login")},g=async()=>{if(!u.trim()||!t||l)return;c(!0),await l0(u.trim(),t.id)?(o(!1),d(""),await y()):alert("Error creating project. Please try again."),c(!1)},v=S=>{e(`/project/${S}`)},w=async S=>{if(!S||b)return;_(!0),await o0(S)?(m(null),await y()):alert("Error deleting project. Please try again."),_(!1)},E=S=>new Date(S).toLocaleDateString(),C=S=>{switch(S){case"active":return"#00cc00";case"completed":return"#0066cc";case"archived":return"#666";default:return"#ccc"}};return f.jsx("div",{className:"min-h-screen bg-primary p-2xl",children:f.jsxs("div",{className:"dashboard-container",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2xl",children:[f.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects"}),f.jsxs("div",{className:"flex gap-xl items-center",children:[f.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"New Project"}),f.jsx("button",{onClick:p,className:"btn btn-logout",children:"Logout"})]})]}),i?f.jsx("div",{className:"text-center text-secondary p-2xl",children:"Loading projects..."}):n.length===0?f.jsxs("div",{className:"bg-secondary p-4xl rounded-lg text-center",children:[f.jsx("h2",{className:"text-primary mb-xl",children:"No projects yet"}),f.jsx("p",{className:"text-secondary mb-2xl",children:"Create your first FLOW.STUDIO project to get started with AI-powered animatic generation"}),f.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"Create Your First Project"})]}):f.jsx("div",{className:"grid grid-auto-fit gap-2xl",children:n.map(S=>f.jsxs("div",{onClick:()=>v(S.id),className:"project-card cursor-pointer",children:[f.jsxs("div",{className:"flex justify-between items-start mb-xl",children:[f.jsx("h3",{className:"text-primary text-xl flex-1 mb-0",children:S.name}),f.jsxs("div",{className:"flex items-center gap-md",children:[f.jsx("button",{onClick:T=>{T.stopPropagation(),m(S.id)},className:"btn-delete",children:"🗑️"}),f.jsx("span",{className:"status-badge",style:{background:C(S.status)},children:S.status})]})]}),f.jsxs("div",{className:"project-progress",children:[f.jsxs("div",{className:"flex justify-between text-secondary text-sm mb-sm",children:[f.jsx("span",{children:"Progress"}),f.jsxs("span",{children:[S.phase_progress.completed_phases,"/5 phases"]})]}),f.jsx("div",{className:"progress-bar",children:f.jsx("div",{className:"progress-fill",style:{width:`${S.phase_progress.completed_phases/5*100}%`}})})]}),f.jsxs("div",{className:"project-info",children:[f.jsxs("span",{children:["Created ",E(S.created_at)]}),S.phase_progress.current_phase&&f.jsxs("span",{className:"current-phase",children:["Active: ",S.phase_progress.current_phase.replace("_"," ")]})]})]},S.id))}),r&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content modal-width-400",children:[f.jsx("h2",{className:"modal-header",children:"Create New Project"}),f.jsxs("div",{className:"mb-xl",children:[f.jsx("label",{className:"form-label",children:"Project Name"}),f.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),placeholder:"e.g. UN CONSIGLIO STELLARE",className:"form-input",onKeyPress:S=>S.key==="Enter"&&g(),autoFocus:!0})]}),f.jsx("div",{className:"modal-info",children:f.jsx("p",{children:"This will create a new project with 5 phases: Script Interpretation, Element Images, Scene Generation, Scene Videos, and Final Assembly. Based on the Italian campaign template."})}),f.jsxs("div",{className:"modal-actions",children:[f.jsx("button",{onClick:()=>{o(!1),d("")},disabled:l,className:"btn btn-secondary",children:"Cancel"}),f.jsx("button",{onClick:g,disabled:!u.trim()||l,className:"btn btn-primary",children:l?"Creating...":"Create Project"})]})]})}),h&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content delete-modal modal-width-400",children:[f.jsx("h2",{className:"delete-header",children:"⚠️ Delete Project?"}),f.jsxs("div",{className:"delete-warning",children:[f.jsx("p",{children:"This will permanently delete:"}),f.jsxs("ul",{children:[f.jsx("li",{children:"All project data and phases"}),f.jsx("li",{children:"All generated content and versions"}),f.jsx("li",{children:"All n8n job history"})]}),f.jsx("p",{className:"warning-final",children:"This action cannot be undone!"})]}),f.jsxs("div",{className:"modal-actions",children:[f.jsx("button",{onClick:()=>m(null),disabled:b,className:"btn btn-secondary btn-padding-lg",children:"Cancel"}),f.jsx("button",{onClick:()=>w(h),disabled:b,className:"btn btn-danger btn-padding-lg",children:b?"🗑️ Deleting...":"🗑️ Delete Forever"})]})]})})]})})}const oj="/assets/goood_ideas_logo_600x600_white_trans-DU0S--7E.png",lj=[{timestamp:"07_26_2025_16_08",image_engine:"FLUX DEV",max_prompt_length:800,aspect_ratio:"16:9",model_endpoint:"fal-ai/flux/dev",base_url:"https://queue.fal.run",project_dest_folder:"UN CONSIGLIO STELLARE_07_26_2025_16_08",project_metadata:{title:"UN CONSIGLIO STELLARE",client:"Ministero della Salute",extraction_date:"2025-01-23",schema_version:"1.0",production_workflow:"animatic_to_video_scalable"},global_style:{color_palette:{primary:"Deep blue backgrounds (library, tech elements)",secondary:"Warm amber/golden lighting",accent:"Bright cyan/blue (holograms, tech effects)",character_tones:"Natural skin tones, blue uniforms"},rendering_style:{level:"simplified illustration transitioning to cinematic realism",line_work:"clean vector-style outlines",shading:"minimal, flat color zones with depth",detail_level:"stylized but scalable to photorealistic"},composition:{framing:"cinematic storyboard frames",depth:"clear foreground/background separation",camera_style:"traditional film language (wide/medium/close-up)",aspect_ratio:"16:9"},mood_style:{overall_mood:"educational, inspiring, warm",lighting_description:"soft, natural library lighting with holographic tech elements",atmosphere:"technological wonder, protective, educational",tone:"professional, accessible, reassuring"}},elements:{samantha:{element_type:"character",element_subtype:"primary",frequency:10,scenes_present:[1,2,3,5,6,7,8,9,10,12],base_description:"Samantha Cristoforetti, 47 years old, short brown hair, confident expression, blue ESA astronaut uniform with patches",consistency_rules:["Identical facial features and hair across all scenes","Blue ESA uniform must be consistent in color and design","Confident, authoritative expression maintained","Professional astronaut posture and demeanor"],variants_by_scene:{scene_1:{action:"standing confidently at entrance, welcoming gesture toward children",position:"foreground center, facing children group",expression:"warm, welcoming, confident",props_interaction:"none",dialogue_state:"introducing, setting context"},scene_2:{action:"pointing at space imagery, explaining with gestures",position:"beside display area, angled toward children",expression:"focused, educational, protective",props_interaction:"gesturing toward space_imagery_displays",dialogue_state:"teaching, explaining dangers"},scene_3:{action:"interacting with astronaut hologram, demonstrating",position:"at library table, engaging with hologram",expression:"knowledgeable, demonstrative",props_interaction:"activating/pointing to astronaut_hologram",dialogue_state:"demonstrating, showing equipment"},scene_5:{action:"guiding children along circular walkway",position:"leading group on circular balcony",expression:"engaging, storytelling",props_interaction:"gesturing toward earth_hologram",dialogue_state:"narrative continuation"},scene_6:{action:"explaining Earth hologram with pointing gestures",position:"beside Earth hologram, facing children",expression:"educational, protective",props_interaction:"demonstrating earth_hologram features",dialogue_state:"explaining Earth protection"},scene_7:{action:"determined guidance, reassuring children",position:"with children, facing hologram displays",expression:"determined, reassuring",props_interaction:"guiding attention to red indicators",dialogue_state:"responding to children's curiosity"},scene_8:{action:"explaining disease threats and protection",position:"pointing at Italy map with red indicators",expression:"serious, educational, protective",props_interaction:"demonstrating earth_hologram Italy focus",dialogue_state:"explaining vaccine protection"},scene_9:{action:"listening to children's questions",position:"attentive pose facing children",expression:"listening, thoughtful",props_interaction:"none",dialogue_state:"receiving children's questions"},scene_10:{action:"providing clear, simple explanation",position:"educational stance, addressing children",expression:"clear, reassuring, knowledgeable",props_interaction:"none",dialogue_state:"explaining vaccine analogy"},scene_12:{action:"direct camera address, final message",position:"facing camera, confident stance",expression:"reassuring, authoritative, trustworthy",props_interaction:"none",dialogue_state:"delivering final message"}}},children_group:{element_type:"character",element_subtype:"group",frequency:8,scenes_present:[1,2,4,5,7,9,11,12],base_description:"5 diverse children aged 6-7, small stature, mixed gender, curious expressions, casual school clothes",consistency_rules:["Same 5 children throughout (consistent faces and diversity)","Age range 6-7 maintained across all scenes","Casual school clothing consistent per child","Curious, engaged expressions as baseline"],variants_by_scene:{scene_1:{action:"grouped together, looking around with wonder",position:"clustered near entrance, facing library interior",expression:"wonder, anticipation, slight awe",props_interaction:"carrying children_backpacks",dialogue_state:"listening, absorbing introduction"},scene_2:{action:"attentively watching Samantha's explanation",position:"semicircle facing Samantha and displays",expression:"focused attention, learning engagement",props_interaction:"some still holding children_backpacks",dialogue_state:"engaged learning, processing information"},scene_4:{action:"watching space imagery with amazement",position:"gathered around viewing area",expression:"eyes full of wonder, amazed",props_interaction:"some with children_backpacks set aside",dialogue_state:"absorbing space content"},scene_5:{action:"following Samantha along circular walkway",position:"walking behind Samantha on balcony",expression:"increasingly fascinated",props_interaction:"carrying children_backpacks",dialogue_state:"engaged in Samantha's story"},scene_7:{action:"looking with curious but fearful expressions",position:"clustered together, observing displays",expression:"curious but slightly apprehensive",props_interaction:"holding children_backpacks closer",dialogue_state:"questioning, seeking understanding"},scene_9:{action:"asking questions, seeking more understanding",position:"engaged group facing Samantha",expression:"inquisitive, learning-focused",props_interaction:"children_backpacks at sides",dialogue_state:"actively questioning"},scene_11:{action:"appearing in final campaign message",position:"arranged with Samantha for group shot",expression:"confident, understanding achieved",props_interaction:"none",dialogue_state:"part of collective message"},scene_12:{action:"standing with Samantha in unity",position:"beside Samantha, showing solidarity",expression:"reassured, confident, protected",props_interaction:"none",dialogue_state:"united in health message"}}},circular_library:{element_type:"location",element_subtype:"primary",frequency:13,scenes_present:[1,2,3,4,5,6,7,8,9,10,11,12,13],base_description:"magnificent circular library with multiple levels, warm ambient lighting, wood and modern architectural elements, balcony overlooks",consistency_rules:["Circular architecture always prominent","Warm ambient lighting consistent throughout","Wood and modern elements balance maintained","Multi-level structure visible when relevant"],variants_by_scene:{scene_1:{view_angle:"wide establishing shot from entrance",focus_area:"full architectural magnificence, circular grandeur",lighting_state:"welcoming warm entrance lighting",architectural_details:"entrance perspective, full space visibility",camera_position:"entrance level, looking into main space"},scene_2:{view_angle:"medium shot focusing on display area",focus_area:"educational zone with space imagery capability",lighting_state:"focused lighting on display area",architectural_details:"space imagery integration, teaching zone",camera_position:"interior, focusing on interaction area"},scene_3:{view_angle:"close-up on library table area",focus_area:"table with holographic projection capability",lighting_state:"tech-enhanced lighting, hologram ambiance",architectural_details:"holographic technology integration",camera_position:"table level, intimate technology focus"},scene_4:{view_angle:"wide view showing space imagery displays",focus_area:"large projection area with space content",lighting_state:"dramatic lighting for space imagery",architectural_details:"technology integration, display capabilities",camera_position:"optimized for space content viewing"},scene_5:{view_angle:"circular walkway perspective",focus_area:"balcony overlooking central hologram area",lighting_state:"ambient walkway lighting",architectural_details:"circular balcony, multi-level architecture",camera_position:"balcony level, showing circulation"},scene_6:{view_angle:"central space focusing on Earth hologram",focus_area:"main floor with Earth hologram prominence",lighting_state:"hologram-enhanced lighting, blue glow",architectural_details:"central projection capabilities",camera_position:"central space, hologram-focused"},scene_7:{view_angle:"close view of group with hologram",focus_area:"intimate space around Earth display",lighting_state:"focused lighting on group and hologram",architectural_details:"technology integration seamless",camera_position:"close to group and display"},scene_8:{view_angle:"close-up on Italy hologram display",focus_area:"detailed Earth projection with Italy focus",lighting_state:"intense hologram lighting, red indicators",architectural_details:"advanced projection technology",camera_position:"optimal for Italy map detail"},scene_9:{view_angle:"medium shot of group interaction",focus_area:"conversation area within library",lighting_state:"warm conversational lighting",architectural_details:"library setting supporting dialogue",camera_position:"conversational distance"},scene_10:{view_angle:"close shot for explanation scene",focus_area:"intimate educational setting",lighting_state:"focused lighting on Samantha",architectural_details:"library background supporting explanation",camera_position:"close for clear explanation delivery"},scene_11:{view_angle:"neutral background for campaign message",focus_area:"clean background for text overlay",lighting_state:"even lighting for text readability",architectural_details:"minimal library elements visible",camera_position:"optimized for text and message"},scene_12:{view_angle:"group shot within library setting",focus_area:"Samantha and children in library environment",lighting_state:"warm, inclusive lighting",architectural_details:"library setting supporting unity message",camera_position:"group shot positioning"},scene_13:{view_angle:"neutral institutional background",focus_area:"clean background for institutional logo",lighting_state:"professional lighting for branding",architectural_details:"minimal, supporting institutional message",camera_position:"optimal for logo presentation"}}},space_imagery_displays:{element_type:"prop",element_subtype:"technological",frequency:2,scenes_present:[2,4],base_description:"educational space imagery and astronomical displays showing space operations, astronauts, and cosmic scenes",consistency_rules:["Educational content focus maintained","Professional space imagery quality","Integrated into library technology seamlessly","Blue-dominant color scheme for space content"],variants_by_scene:{scene_2:{state:"active, displaying space dangers and beauty",interaction_mode:"samantha pointing and explaining",visibility:"clearly visible, prominent in scene",technical_specs:"wall-mounted displays, clear resolution",position_relative:"background to teaching moment, supporting"},scene_4:{state:"showing astronauts and space operations",interaction_mode:"children_group watching with wonder",visibility:"prominent, central to scene",technical_specs:"large displays, detailed space content",position_relative:"focal point for children's amazement"}}},earth_hologram:{element_type:"prop",element_subtype:"holographic",frequency:4,scenes_present:[5,6,7,8],base_description:"realistic Earth hologram with glowing red indicator points concentrated on Italy, interactive and detailed",consistency_rules:["Realistic Earth appearance maintained","Red indicator points specifically on Italy","Holographic blue glow effect consistent","Interactive capability demonstrated"],variants_by_scene:{scene_5:{state:"approaching activation, becoming visible",interaction_mode:"children_group approaching with fascination",visibility:"emerging prominence, drawing attention",technical_specs:"holographic projection system activating",position_relative:"central space, becoming focal point"},scene_6:{state:"fully active, Italy focus clearly visible",interaction_mode:"samantha explaining and pointing",visibility:"primary focus, red points on Italy prominent",technical_specs:"full holographic detail, interactive capability",position_relative:"central display, primary educational tool"},scene_7:{state:"showing red indicators clearly",interaction_mode:"children_group observing with concern",visibility:"prominent, concerning indicators visible",technical_specs:"detailed Italia mapping with red points",position_relative:"central focus, generating questions"},scene_8:{state:"zoomed on Italy with disease indicators",interaction_mode:"samantha demonstrating threat points",visibility:"maximum detail, red points with emoji symbols",technical_specs:"close-up projection, detailed mapping",position_relative:"primary educational tool showing threats"}}},astronaut_hologram:{element_type:"prop",element_subtype:"holographic",frequency:1,scenes_present:[3],base_description:"full-body astronaut in complete spacesuit, holographic projection, realistic detail showing space protection equipment",consistency_rules:["Complete spacesuit with all details","Holographic blue glow effect","Realistic proportions and appearance"],variants_by_scene:{scene_3:{state:"fully active, demonstration mode",interaction_mode:"samantha demonstrating and explaining",visibility:"prominent, clear detail of spacesuit",technical_specs:"full holographic projection, interactive demonstration",position_relative:"library table, central demonstration focus"}}},children_backpacks:{element_type:"prop",element_subtype:"physical",frequency:7,scenes_present:[1,2,4,5,7,9,12],base_description:"casual school backpacks and books carried by children, age-appropriate school equipment",consistency_rules:["Age-appropriate school equipment","Casual, not uniform appearance","Proportional to children's size"],variants_by_scene:{scene_1:{state:"carried and held, arrival configuration",interaction_mode:"children_group naturally carrying",visibility:"clearly visible, establishing school context",technical_specs:"standard school backpacks and books",position_relative:"with children_group, natural school appearance"},scene_2:{state:"mixed - some set aside, some still carried",interaction_mode:"transitioning to learning mode",visibility:"partially visible, learning focus emerging",technical_specs:"standard school equipment",position_relative:"secondary to learning interaction"},scene_4:{state:"some set aside for better viewing",interaction_mode:"children_group focusing on displays",visibility:"partially visible, not distracting",technical_specs:"standard school equipment",position_relative:"secondary to space imagery focus"},scene_5:{state:"carried during walkway tour",interaction_mode:"children_group maintaining school context",visibility:"visible, maintaining student identity",technical_specs:"standard school backpacks",position_relative:"with children during movement"},scene_7:{state:"held closer due to apprehension",interaction_mode:"children_group seeking comfort",visibility:"more prominent due to emotional state",technical_specs:"standard school equipment",position_relative:"closer to children, comfort objects"},scene_9:{state:"set aside for focused conversation",interaction_mode:"children_group in learning dialogue",visibility:"minimally visible, not distracting",technical_specs:"standard school equipment",position_relative:"secondary to educational conversation"},scene_12:{state:"not present, formal message delivery",interaction_mode:"none",visibility:"not visible, clean final message",technical_specs:"not applicable",position_relative:"not present for formal conclusion"}}},warm_library_lighting:{element_type:"atmosphere",element_subtype:"lighting",frequency:13,scenes_present:[1,2,3,4,5,6,7,8,9,10,11,12,13],base_description:"soft, warm ambient lighting creating educational and welcoming atmosphere throughout library",consistency_rules:["Warm color temperature maintained","Soft, diffused quality consistent","Educational ambiance preserved"],variants_by_scene:{scene_1:{intensity:"welcoming, establishing mood",color_temperature:"warm amber, inviting",mood_contribution:"wonder and anticipation",effect_type:"ambient, architectural enhancement",coverage_area:"full library space, entrance emphasis"},scene_2:{intensity:"focused on educational interaction",color_temperature:"warm amber with display enhancement",mood_contribution:"educational, protective",effect_type:"focused ambient with display lighting",coverage_area:"display area emphasis"},scene_3:{intensity:"enhanced for technology demonstration",color_temperature:"warm amber with holographic blue accents",mood_contribution:"technological wonder",effect_type:"ambient with tech enhancement",coverage_area:"table area, hologram enhancement"},scene_4:{intensity:"dramatic for space imagery",color_temperature:"warm with cooler space display lighting",mood_contribution:"wonder and amazement",effect_type:"ambient with display enhancement",coverage_area:"space imagery viewing area"},scene_5:{intensity:"gentle walkway lighting",color_temperature:"warm amber, circulation-friendly",mood_contribution:"engaging narrative flow",effect_type:"ambient circulation lighting",coverage_area:"circular walkway and central space"},scene_6:{intensity:"enhanced for Earth hologram",color_temperature:"warm amber with blue holographic accents",mood_contribution:"educational wonder",effect_type:"ambient with hologram enhancement",coverage_area:"central space, Earth hologram focus"},scene_7:{intensity:"focused on group and hologram",color_temperature:"warm amber with concern undertones",mood_contribution:"curious apprehension",effect_type:"focused ambient with hologram",coverage_area:"group area with Earth display"},scene_8:{intensity:"enhanced for detailed mapping",color_temperature:"warm amber with red indicator accents",mood_contribution:"serious educational concern",effect_type:"ambient with detailed projection lighting",coverage_area:"Italy mapping detail area"},scene_9:{intensity:"conversational, supportive",color_temperature:"warm amber, encouraging",mood_contribution:"supportive learning dialogue",effect_type:"ambient conversational lighting",coverage_area:"conversation area"},scene_10:{intensity:"focused on explanation delivery",color_temperature:"warm amber, clear and reassuring",mood_contribution:"clarity and reassurance",effect_type:"focused ambient for explanation",coverage_area:"Samantha-focused with background"},scene_11:{intensity:"even for text presentation",color_temperature:"neutral warm for text readability",mood_contribution:"professional campaign message",effect_type:"even ambient for text overlay",coverage_area:"full frame for text presentation"},scene_12:{intensity:"warm, inclusive for group message",color_temperature:"warm amber, unifying",mood_contribution:"unity and reassurance",effect_type:"ambient group lighting",coverage_area:"group area for final message"},scene_13:{intensity:"professional for institutional branding",color_temperature:"neutral professional",mood_contribution:"official, trustworthy",effect_type:"professional institutional lighting",coverage_area:"institutional logo presentation"}}}},scenes:{scene_1:{scene_id:1,duration:"3 seconds",camera_type:"wide establishing shot",mood:"wonder and anticipation",natural_description:"The spot opens in a magnificent circular environment: it's the hall of the great library of the Monte Porzio Catone Astronomical Observatory. We immediately notice a group of children with a very special guide...",dialogue:"LO SPAZIO È UN LUOGO INOSPITALE E PERICOLOSO...",action_summary:"Introduction of the setting and characters",elements_present:["samantha","children_group","circular_library","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"children_group",interaction_type:"welcoming_introduction",description:"Samantha welcomes children to library space"},{primary_element:"children_group",secondary_element:"circular_library",interaction_type:"discovery_wonder",description:"Children discovering magnificent library architecture"},{primary_element:"warm_library_lighting",secondary_element:"circular_library",interaction_type:"atmosphere_enhancement",description:"Lighting enhances architectural grandeur"}],primary_focus:"establishing magnificent circular library architecture with character introduction",lighting_approach:"warm welcoming library lighting, architectural grandeur emphasis",composition_approach:"wide shot showing full space, character positioning for introduction"},scene_2:{scene_id:2,duration:"3 seconds",camera_type:"medium shot",mood:"educational, protective",natural_description:"Samantha, in the company of some small guests, shows them the beauty of space while explaining at the same time that it is a dangerous environment: it must be faced with the right protections.",dialogue:"MA C'È LA SCIENZA CHE PENSA A NOI.",action_summary:"Samantha explains space dangers and protection needs",elements_present:["samantha","children_group","circular_library","space_imagery_displays","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"space_imagery_displays",interaction_type:"educational_demonstration",description:"Samantha pointing to and explaining space imagery"},{primary_element:"children_group",secondary_element:"space_imagery_displays",interaction_type:"focused_observation",description:"Children attentively watching space imagery"},{primary_element:"samantha",secondary_element:"children_group",interaction_type:"teaching_protection",description:"Samantha educating children about space dangers"}],primary_focus:"Samantha teaching children about space dangers using imagery displays",lighting_approach:"focused lighting on display area, educational ambiance",composition_approach:"medium shot emphasizing teaching interaction and space displays"},scene_3:{scene_id:3,duration:"1.5 seconds",camera_type:"close-up on hologram interaction",mood:"technological wonder",natural_description:"Samantha interacts with the hologram of an astronaut, in his typical suit, which she knows very well.",dialogue:"VEDETE LE NOSTRE TUTE?",action_summary:"Holographic demonstration of space protection equipment",elements_present:["samantha","circular_library","astronaut_hologram","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"astronaut_hologram",interaction_type:"technology_demonstration",description:"Samantha demonstrating and explaining holographic astronaut equipment"},{primary_element:"astronaut_hologram",secondary_element:"circular_library",interaction_type:"technology_integration",description:"Hologram seamlessly integrated into library environment"}],primary_focus:"close-up interaction between Samantha and astronaut hologram demonstration",lighting_approach:"tech-enhanced lighting, hologram blue glow effects",composition_approach:"close-up framing, technological demonstration focus",special_notes:"children not present in this scene, focus on technology demonstration"},scene_4:{scene_id:4,duration:"2 seconds",camera_type:"wide shot",mood:"wonder and amazement",natural_description:"Children look at space images with eyes full of wonder: astronauts and space operations follow one another. At the same time on the large table in the library we see a projection of an astronaut on a mission.",dialogue:"CI TENGONO AL SICURO.",action_summary:"Children amazed by space imagery and astronaut projections",elements_present:["children_group","circular_library","space_imagery_displays","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"space_imagery_displays",interaction_type:"wonder_observation",description:"Children watching space operations with amazement"},{primary_element:"space_imagery_displays",secondary_element:"circular_library",interaction_type:"content_integration",description:"Space imagery seamlessly integrated into library environment"}],primary_focus:"children's wonder at space imagery and astronaut operations",lighting_approach:"dramatic lighting for space imagery, wonder enhancement",composition_approach:"wide shot capturing children's amazement and space content"},scene_5:{scene_id:5,duration:"2 seconds",camera_type:"medium shot",mood:"engaging narrative flow",natural_description:"Children follow Samantha's story with increasing fascination. Walking along the circular walkway, they arrive very close to the large hologram of Earth in the central space...",dialogue:"LA SCIENZA...",action_summary:"Children following Samantha's narrative along circular walkway",elements_present:["samantha","children_group","circular_library","earth_hologram","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"samantha",interaction_type:"narrative_following",description:"Children increasingly fascinated by Samantha's story"},{primary_element:"children_group",secondary_element:"earth_hologram",interaction_type:"approaching_discovery",description:"Children approaching large Earth hologram with fascination"},{primary_element:"samantha",secondary_element:"earth_hologram",interaction_type:"narrative_guidance",description:"Samantha guiding attention toward Earth hologram"}],primary_focus:"narrative progression as group approaches Earth hologram",lighting_approach:"gentle walkway lighting, Earth hologram becoming prominent",composition_approach:"medium shot showing movement and hologram approach"},scene_6:{scene_id:6,duration:"3 seconds",camera_type:"close-up on Earth hologram",mood:"educational majesty",natural_description:"...It's majestic. While Samantha continues her explanation, we see red dots particularly dense on our nation.",dialogue:"...CI PROTEGGE ANCHE QUI SULLA TERRA.",action_summary:"Earth hologram reveals red indicators concentrated on Italy",elements_present:["samantha","circular_library","earth_hologram","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"earth_hologram",interaction_type:"explanation_demonstration",description:"Samantha explaining Earth protection while pointing to hologram"},{primary_element:"earth_hologram",secondary_element:"circular_library",interaction_type:"focal_display",description:"Earth hologram as central educational focus"}],primary_focus:"majestic Earth hologram with red indicators on Italy",lighting_approach:"hologram-enhanced lighting, blue glow with red indicators",composition_approach:"close-up framing emphasizing Earth detail and Italy focus"},scene_7:{scene_id:7,duration:"1.5 seconds",camera_type:"medium shot",mood:"curious apprehension",natural_description:"Children look with curious but fearful air: what is it about? Samantha, determined, accompanies them to discover it...",dialogue:"- (bambino) DA COSA, SAMANTHA?",action_summary:"Children showing concern while Samantha prepares to explain",elements_present:["samantha","children_group","circular_library","earth_hologram","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"earth_hologram",interaction_type:"concerned_observation",description:"Children observing red indicators with curiosity and apprehension"},{primary_element:"samantha",secondary_element:"children_group",interaction_type:"reassuring_guidance",description:"Samantha providing determined, reassuring guidance"}],primary_focus:"children's concerned curiosity and Samantha's reassuring presence",lighting_approach:"focused lighting on group with hologram, concern undertones",composition_approach:"medium shot capturing emotional interaction and hologram context"},scene_8:{scene_id:8,duration:"4 seconds",camera_type:"close-up on Italy mapping",mood:"serious educational concern",natural_description:"The camera quickly approaches Europe, we recognize Italy. The camera gets even closer and we see some red dots flashing on the territory of our country. Inside we see a sort of emoji representing a sick person.",dialogue:"DA MALATTIE PERICOLOSE, COME IL MORBILLO. CI PROTEGGE GRAZIE AI VACCINI.",action_summary:"Detailed view of Italy showing disease threat indicators",elements_present:["samantha","circular_library","earth_hologram","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"earth_hologram",interaction_type:"threat_explanation",description:"Samantha explaining disease threats shown on Italy mapping"},{primary_element:"earth_hologram",secondary_element:"circular_library",interaction_type:"detailed_mapping",description:"Earth hologram showing detailed Italy mapping with threat indicators"}],primary_focus:"detailed Italy mapping with red indicators showing disease threats",lighting_approach:"enhanced lighting for detailed mapping with red indicator accents",composition_approach:"close-up framing for maximum Italy detail and threat visualization"},scene_9:{scene_id:9,duration:"2 seconds",camera_type:"medium shot",mood:"inquisitive learning",natural_description:"The small visitors try to understand more, making use of what has already been explained by their guide.",dialogue:"- (bambino) COME LA TUA TUTA DA ASTRONAUTA?",action_summary:"Children asking questions to understand vaccine protection analogy",elements_present:["samantha","children_group","circular_library","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"children_group",secondary_element:"samantha",interaction_type:"inquisitive_questioning",description:"Children asking questions to understand protection analogy"},{primary_element:"samantha",secondary_element:"children_group",interaction_type:"receptive_listening",description:"Samantha listening attentively to children's questions"}],primary_focus:"children's learning process and question formation",lighting_approach:"supportive conversational lighting, encouraging dialogue",composition_approach:"medium shot capturing interactive learning dialogue"},scene_10:{scene_id:10,duration:"2 seconds",camera_type:"close-up on Samantha",mood:"clear explanation",natural_description:"... Samantha, once again, manages to explain in a simple and clear way what science makes available to us.",dialogue:"ESATTO, COME LA MIA TUTA.",action_summary:"Samantha providing clear vaccine analogy explanation",elements_present:["samantha","circular_library","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"circular_library",interaction_type:"clear_explanation",description:"Samantha delivering clear, simple explanation in library setting"}],primary_focus:"Samantha's clear and reassuring explanation delivery",lighting_approach:"focused lighting on Samantha for clear explanation delivery",composition_approach:"close-up framing emphasizing explanation clarity and reassurance"},scene_11:{scene_id:11,duration:"2 seconds",camera_type:"full screen text overlay",mood:"campaign message",natural_description:"Sign: Let's team up for our health #ivaccinifunzionano",dialogue:"",action_summary:"Campaign message presentation with hashtag",elements_present:["children_group","circular_library","warm_library_lighting"],element_interactions:[],primary_focus:"campaign message and hashtag presentation",lighting_approach:"even lighting for optimal text readability",composition_approach:"full screen text overlay with clean background"},scene_12:{scene_id:12,duration:"2 seconds",camera_type:"medium shot group",mood:"unity and reassurance",natural_description:"Samantha looks towards the camera, reassuring, to give us her message:",dialogue:"I VACCINI FUNZIONANO.",action_summary:"Final message delivery with group unity",elements_present:["samantha","children_group","circular_library","children_backpacks","warm_library_lighting"],element_interactions:[{primary_element:"samantha",secondary_element:"children_group",interaction_type:"unified_message",description:"Samantha and children presenting unified health message"},{primary_element:"samantha",secondary_element:"circular_library",interaction_type:"authoritative_delivery",description:"Samantha delivering authoritative message in educational setting"}],primary_focus:"unified final message with Samantha's authoritative reassurance",lighting_approach:"warm, inclusive lighting for group unity message",composition_approach:"medium group shot emphasizing unity and final message delivery"},scene_13:{scene_id:13,duration:"2 seconds",camera_type:"full screen institutional",mood:"official institutional",natural_description:"Institutional sign",dialogue:"INFO SU SALUTE.GOV.IT",action_summary:"Institutional branding and information presentation",elements_present:["circular_library","warm_library_lighting"],element_interactions:[],primary_focus:"Ministero della Salute institutional branding",lighting_approach:"professional institutional lighting for branding",composition_approach:"full screen institutional logo and information presentation"}}}];async function cj(t="Script_STELLARE+storyboard 0611_B.pdf",e="New Project"){await new Promise(n=>setTimeout(n,1e3));try{return{masterJSON:uj(lj,e,t),success:!0}}catch(n){return console.error("Error processing reference script:",n),{masterJSON:{},success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}function uj(t,e,n){var i,a;const s=Array.isArray(t)?t[0]:t;return{scenes:s.scenes||{},elements:s.elements||{},global_style:s.global_style||{color_palette:{primary:"Deep blue backgrounds",secondary:"Warm amber lighting",character_tones:"Natural skin tones"},rendering_style:{level:"simplified illustration transitioning to cinematic realism",line_work:"clean vector-style outlines",detail_level:"stylized but scalable to photorealistic"}},project_metadata:{title:((i=s.project_metadata)==null?void 0:i.title)||e,client:((a=s.project_metadata)==null?void 0:a.client)||"Client Name",schema_version:"3.0",production_workflow:"animatic_to_video_scalable",source_pdf:n,extraction_date:new Date().toISOString().split("T")[0],extraction_method:"reference_data_simulation"}}}function dj(){return["🔄 Analyzing PDF structure...","🤖 Extracting scenes with AI...","🎭 Identifying characters and elements...","🎨 Processing style guidelines...","✅ Script extraction complete!"]}function hj(){const[t,e]=x.useState({isVisible:!1,content:null}),n=x.useCallback(o=>{e({isVisible:!0,content:o})},[]),s=x.useCallback(o=>{e(l=>({...l,content:l.content?{...l.content,...o}:null}))},[]),i=x.useCallback(()=>{e({isVisible:!1,content:null})},[]),a=x.useCallback((o,l)=>{n({title:"🤖 Generating Prompts",message:`Processing ${l} scenes with ${o.toUpperCase()}...`,details:["Single batch call for efficiency","Cross-scene consistency optimization","Variable injection processing"],type:"loading"})},[n]),r=x.useCallback((o,l,c)=>{const u=l>0?Math.round(o/l*100):0;s({progress:{current:o,total:l,percentage:u,currentItem:c}})},[s]);return{modalState:t,showModal:n,updateModal:s,hideModal:i,showLLMLoading:a,updateLLMProgress:r}}let m0=null;const fj=t=>{m0=t},si=()=>m0;function mj({phase:t,projectId:e,projectName:n,onContentChange:s,jsonContent:i,hasUnsavedChanges:a,isSaving:r,error:o,databaseStatus:l,showVersionHistory:c,versionHistory:u,loadingVersions:d,onJsonChange:h,onSavePhase:m,onLoadPhaseContent:b,onLoadVersionHistory:_,onLoadVersionContent:y,onShowVersionHistory:p}){const[g,v]=x.useState(!1),[w,E]=x.useState(!1),[C,S]=x.useState(0);x.useEffect(()=>{b(t.id)},[t.id,b]);const T=async(j=!1)=>{if(l.version>0&&!j){v(!0);return}E(!0),v(!1),S(0);const R=si(),U=dj();try{R==null||R.showModal({title:"🔄 Processing PDF",content:U[0],type:"loading"});for(let L=0;L<U.length-1;L++)await new Promise(V=>setTimeout(V,200)),S(L+1),R==null||R.showModal({title:"🔄 Processing PDF",content:U[L+1],type:"loading"});const P=await cj("Script_STELLARE+storyboard 0611_B.pdf",n);if(P.success){const L=l.version===0;if(L){const{saveMasterJSONFromObject:V}=await mn(async()=>{const{saveMasterJSONFromObject:A}=await Promise.resolve().then(()=>aj);return{saveMasterJSONFromObject:A}},void 0);await V(e,P.masterJSON,"First revision auto-created from PDF processing")&&(s(),console.log("Auto-save successful - first revision created and UI updated"))}else{const V=JSON.stringify(P.masterJSON,null,2);h(V)}R==null||R.showModal({title:"✅ PDF Processed Successfully",content:L?"Script extracted and first revision created! Timeline is now ready.":"Script has been extracted and is ready for editing in the timeline.",type:"success"})}else throw new Error(P.error||"PDF processing failed")}catch(P){const L=P instanceof Error?P.message:"Unknown error occurred";console.error("PDF processing error:",P);const V=si();V==null||V.showModal({title:"❌ PDF Processing Failed",content:`Error: ${L}`,type:"error"})}finally{E(!1),S(0)}};return f.jsxs("div",{children:[f.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem",margin:0,marginBottom:"0.5rem"},children:"Upload your document to generate script mapping"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("button",{disabled:!0,className:"btn btn-secondary text-sm",style:{opacity:.5},children:"Select File"}),f.jsx("span",{style:{color:"#cccccc",fontSize:"0.875rem"},children:"Script_STELLARE+storyboard 0611_B.pdf"}),f.jsx("button",{onClick:()=>T(),disabled:w,className:`btn text-sm ${w?"btn-secondary":"btn-primary"}`,children:w?"Processing...":"Map Script"})]}),g&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content modal-width-500",children:[f.jsx("h2",{className:"text-primary text-2xl mb-xl flex items-center gap-md mb-0",children:"⚠️ Regenerate Content?"}),f.jsxs("div",{className:"bg-accent border border-light p-xl rounded-md mb-2xl",children:[f.jsxs("p",{className:"text-secondary mb-md mb-0",children:["You already have content saved (Version ",l.version,"). Regenerating will create new content that you'll need to save as a new version."]}),f.jsx("p",{className:"text-sm version-warning-text mb-0",children:"Current content will be preserved until you save the new version."})]}),f.jsx("div",{className:"db-status db-status-success mb-2xl",children:f.jsx("p",{className:"text-sm mb-0",children:"✨ This will preserve version history and allow you to compare results."})}),f.jsxs("div",{className:"flex gap-xl justify-end",children:[f.jsx("button",{onClick:()=>v(!1),className:"btn btn-secondary",children:"Cancel"}),f.jsx("button",{onClick:()=>T(!0),className:"btn script-regenerate-button",children:"Regenerate Script"})]})]})}),c&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content flex flex-col modal-version-history",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2xl",children:[f.jsx("h2",{className:"text-primary text-2xl mb-0",children:"📋 Version History"}),f.jsx("button",{onClick:()=>p(!1),className:"bg-transparent text-secondary border-none text-2xl cursor-pointer",children:"×"})]}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:d?f.jsx("div",{className:"text-center text-secondary p-2xl",children:"Loading versions..."}):u.length===0?f.jsx("div",{className:"text-center text-secondary p-2xl",children:"No version history available"}):f.jsx("div",{className:"flex flex-col gap-md",children:u.map(j=>f.jsxs("div",{className:`version-item ${j.version_number===l.version?"current":""}`,onClick:()=>y(j.version_number),children:[f.jsxs("div",{className:"version-header",children:[f.jsxs("span",{className:"version-title",children:["Version ",j.version_number,j.version_number===l.version&&f.jsx("span",{className:"version-current-badge",children:"(Current)"})]}),f.jsx("span",{className:"version-date",children:new Date(j.created_at).toLocaleString()})]}),f.jsx("div",{className:"version-description",children:j.change_description||"No description"})]},j.id))})}),f.jsx("div",{className:"version-tip",children:"💡 Click any version to load it into the editor. Remember to save after loading different content."})]})})]})}class Kr{static processTemplate(e,n){if(!e||typeof e!="string")return e;const s=/\{\{\$json\.([^}]+)\}\}/g;return e.replace(s,(i,a)=>{const r=this.getValueFromPath(a,n);return r!==void 0?String(r):i})}static getValueFromPath(e,n){const{masterJSON:s,sceneId:i,currentScene:a}=n;if(e==="scene_id"&&i)return i;if(a&&this.isSceneProperty(e)){const r=this.getNestedValue(a,e);if(r!==void 0)return r}if(this.isGlobalProperty(e))return this.getNestedValue(s,e);if(e.startsWith("project_metadata."))return this.getNestedValue(s,e);if(this.isTechnicalSpec(e)){const r=a?this.getNestedValue(a,e):void 0;if(r!==void 0)return r;const o=this.getNestedValue(s,`extraction_metadata.${e}`);return o!==void 0?o:this.getNestedValue(s,e)}return this.getNestedValue(s,e)}static isSceneProperty(e){return["action_summary","natural_description","locations_text","characters_text","props_text","actions_text","interactions_text","camera_type","composition_approach","overall_mood","color_primary","color_secondary","line_work","shading","framing","duration","mood","depth"].some(s=>e===s||e.includes(s))}static isTechnicalSpec(e){return["image_engine","max_prompt_length","aspect_ratio","base_url","model_endpoint","project_dest_folder"].includes(e)}static isGlobalProperty(e){return["global_style","elements","scenes"].some(s=>e.startsWith(s))}static getNestedValue(e,n){if(!(!e||!n))return n.split(".").reduce((s,i)=>s&&s[i]!==void 0?s[i]:void 0,e)}static getAvailableVariables(e){var r,o,l,c;const{masterJSON:n,sceneId:s,currentScene:i}=e,a={};if(n!=null&&n.project_metadata&&Object.keys(n.project_metadata).forEach(u=>{a[`project_metadata.${u}`]=n.project_metadata[u]}),s&&(a.scene_id=s),i&&Object.keys(i).forEach(u=>{a[u]=i[u]}),n!=null&&n.global_style){const u=(o=(r=n.global_style)==null?void 0:r.color_palette)==null?void 0:o.primary,d=(c=(l=n.global_style)==null?void 0:l.rendering_style)==null?void 0:c.level;console.log("🎨 STYLE INJECTION DEBUG:",{primaryColor:u,renderingLevel:d,fullGlobalStyle:n.global_style,availableStyleKeys:Object.keys(n.global_style)}),Object.keys(n.global_style).forEach(h=>{a[`global_style.${h}`]=n.global_style[h]})}else console.log("⚠️ STYLE INJECTION WARNING: No global_style found in masterJSON");return a}static validateTemplate(e,n){const s=/\{\{\$json\.([^}]+)\}\}/g,i=[];let a;for(;(a=s.exec(e))!==null;){const r=a[1];this.getValueFromPath(r,n)===void 0&&i.push(r)}return{isValid:i.length===0,missingVariables:i}}}class Xr{static formatForLLM(e){return!e||typeof e!="string"?e:e.replace(/\\n\\n/g,`

`).replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\t/g,"	").trim()}static formatForEditor(e){return!e||typeof e!="string"?e:e.replace(/\n\n/g,"\\n\\n").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/\t/g,"\\t")}static getProcessedConfig(e){if(!e)return e;const n={...e};if(n.start_frame_prompt_generation){const s=n.start_frame_prompt_generation;s.system_prompt&&(s.system_prompt=this.formatForLLM(s.system_prompt)),s.user_prompt&&(s.user_prompt=this.formatForLLM(s.user_prompt))}return n}static validatePromptFormat(e){const n=[];if(!e||typeof e!="string")return n.push("Prompt is empty or not a string"),{isValid:!1,issues:n};const s=e.includes("\\n"),i=e.includes(`
`)&&!e.includes("\\n");s&&i&&n.push("Mixed newline formatting detected (both \\n and actual newlines)");const r=e.split(/\n|\\n/).filter(o=>o.length>200);return r.length>0&&n.push(`${r.length} lines are very long (>200 chars) and might need formatting`),{isValid:n.length===0,issues:n}}}class fp{static transformSceneForPrompt(e,n,s){var d,h,m,b,_,y,p,g;const i=e.startsWith("scene_")?e:`scene_${e}`,a=(d=n.scenes)==null?void 0:d[i];if(!a)throw new Error(`Scene ${i} not found in master JSON`);const r=n.global_style||{},o=n.elements||{},l=n.project_metadata||{},c=a.elements_present||[];return{...this.extractTechnicalSpecs(s,l),scene_id:parseInt(e.replace("scene_","")),natural_description:a.natural_description||"",action_summary:a.action_summary||"",locations_text:this.buildLocationText(c,o,i),characters_text:this.buildCharacterText(c,o,i),props_text:this.buildPropsText(c,o,i),actions_text:this.buildActionsText(c,o,i),interactions_text:this.buildInteractionsText(a.element_interactions||[]),camera_type:a.camera_type||"",composition_approach:a.composition_approach||a.lighting_approach||"",color_primary:((h=r.color_palette)==null?void 0:h.primary)||"",color_secondary:((m=r.color_palette)==null?void 0:m.secondary)||"",line_work:((b=r.rendering_style)==null?void 0:b.line_work)||"",shading:((_=r.rendering_style)==null?void 0:_.shading)||"",framing:((y=r.composition)==null?void 0:y.framing)||"",depth:((p=r.composition)==null?void 0:p.depth)||"",overall_mood:((g=r.mood_style)==null?void 0:g.overall_mood)||a.mood||""}}static extractTechnicalSpecs(e,n){const s=new Date().toISOString().slice(0,19).replace(/[-:]/g,"_").replace("T","_");return{image_engine:(e==null?void 0:e.image_engine)||"FLUX DEV",base_url:(e==null?void 0:e.base_url)||"https://queue.fal.run",model_endpoint:(e==null?void 0:e.model_endpoint)||"fal-ai/flux/dev",project_dest_folder:(e==null?void 0:e.project_dest_folder)||`${n.title||"PROJECT"}_${s}`,max_prompt_length:(e==null?void 0:e.max_prompt_length)||800,aspect_ratio:(e==null?void 0:e.aspect_ratio)||"16:9"}}static buildLocationText(e,n,s){return e.filter(a=>{var r;return((r=n[a])==null?void 0:r.element_type)==="location"}).map(a=>{var d;const r=n[a],o=r.base_description||"",l=r.consistency_rules||[],c=(d=r.variants_by_scene)==null?void 0:d[s];let u=o;if(l.length>0&&(u+=`
Consistency Rules: ${l.join("; ")}`),c){const h=[c.view_angle,c.focus_area,c.lighting_state,c.architectural_details].filter(Boolean).join(", ");h&&(u+=`
Scene Context: ${h}`)}return u}).join(`

`)}static buildCharacterText(e,n,s){return e.filter(a=>{var r;return((r=n[a])==null?void 0:r.element_type)==="character"}).map(a=>{var d;const r=n[a],o=r.base_description||"",l=r.consistency_rules||[],c=(d=r.variants_by_scene)==null?void 0:d[s];let u=o;if(l.length>0&&(u+=`
Consistency Rules: ${l.join("; ")}`),c){const h=[c.action,c.position,c.expression].filter(Boolean).join(", ");h&&(u+=`
Scene Behavior: ${h}`)}return u}).join(`

`)}static buildPropsText(e,n,s){return e.filter(a=>{var r;return((r=n[a])==null?void 0:r.element_type)==="prop"}).map(a=>{var d;const r=n[a],o=r.base_description||"",l=r.consistency_rules||[],c=(d=r.variants_by_scene)==null?void 0:d[s];let u=o;if(l.length>0&&(u+=`
Consistency Rules: ${l.join("; ")}`),c){const h=[c.state,c.interaction_mode,c.visibility].filter(Boolean).join(", ");h&&(u+=`
Scene State: ${h}`)}return u}).join(`

`)}static buildActionsText(e,n,s){return e.map(i=>{var l;const a=n[i],r=(l=a.variants_by_scene)==null?void 0:l[s];if(!r)return`${i}: positioned at in scene`;let o=`${i}:`;return a.element_type==="character"?(o+=` ${r.action||"present"} at ${r.position||"in scene"}`,r.props_interaction&&(o+=`
Interacting with: ${r.props_interaction}`)):a.element_type==="location"?o+=` positioned at ${r.camera_position||"in scene"}`:a.element_type==="prop"?o+=` positioned at ${r.position_relative||"in scene"}`:o+=" positioned at in scene",o}).join(`

`)}static buildInteractionsText(e){return e.map(n=>n.description||`${n.primary_element} ${n.interaction_type} ${n.secondary_element}`).join(`
`)}}class p0{}class pj extends p0{constructor(){super(...arguments),this.name="openai"}async generatePrompt(e,n,s){var i,a,r,o;try{const{OpenAI:l}=await mn(async()=>{const{OpenAI:h}=await import("./index-DE0nlkNR.js");return{OpenAI:h}},[]),u=await new l({apiKey:"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",dangerouslyAllowBrowser:!0}).chat.completions.create({model:(s==null?void 0:s.model)||"gpt-4-turbo",messages:[{role:"system",content:e},{role:"user",content:n}],max_tokens:(s==null?void 0:s.max_tokens)||1e3,temperature:(s==null?void 0:s.temperature)||.7}),d=(a=(i=u.choices[0])==null?void 0:i.message)==null?void 0:a.content;if(!d)throw new Error("No content received from OpenAI");return{success:!0,content:d,usage:{promptTokens:((r=u.usage)==null?void 0:r.prompt_tokens)||0,completionTokens:((o=u.usage)==null?void 0:o.completion_tokens)||0},provider:"openai"}}catch(l){return{success:!1,content:"",error:`OpenAI Error: ${l.message}`,provider:"openai"}}}}class gj extends p0{constructor(){super(...arguments),this.name="claude"}async generatePrompt(e,n,s){try{const{Anthropic:i}=await mn(async()=>{const{Anthropic:l}=await import("./index-CauCVHbN.js");return{Anthropic:l}},[]),r=await new i({apiKey:"your_anthropic_api_key_here",dangerouslyAllowBrowser:!0}).messages.create({model:(s==null?void 0:s.model)||"claude-3-sonnet-20240229",max_tokens:(s==null?void 0:s.max_tokens)||1e3,temperature:(s==null?void 0:s.temperature)||.7,system:e,messages:[{role:"user",content:n}]}),o=r.content[0];if(!o||o.type!=="text")throw new Error("No text content received from Claude");return{success:!0,content:o.text,usage:{promptTokens:r.usage.input_tokens,completionTokens:r.usage.output_tokens},provider:"claude"}}catch(i){return{success:!1,content:"",error:`Claude Error: ${i.message}`,provider:"claude"}}}}const ff=class ff{static getProvider(e="openai"){const n=this.providers.get(e);if(!n)throw new Error(`Unknown LLM provider: ${e}`);return n}static getAvailableProviders(){return Array.from(this.providers.keys())}static async testProvider(e){try{return(await this.getProvider(e).generatePrompt("You are a test assistant.",'Say "test successful" in JSON format: {"status": "success"}',{model:e==="openai"?"gpt-3.5-turbo":"claude-3-haiku-20240307",max_tokens:50,temperature:0})).success}catch(n){return console.error(`Provider ${e} test failed:`,n),!1}}};ff.providers=new Map([["openai",new pj],["claude",new gj]]);let ii=ff;class sd{constructor(){this.defaultProvider="openai"}async initialize(e){try{const n=await this.getFreshConfig(e);if(!n||Object.keys(n).length===0)throw new Error(`No configuration found for project ${e} - please initialize project configuration`);if(!(n!=null&&n.start_frame_prompt_generation))throw new Error("LLM configuration incomplete - please configure prompts in Config tab");console.log(`✅ LLM Service initialized successfully for project ${e}`)}catch(n){throw console.error(`LLM Service initialization failed for project ${e}:`,n),n}}async getFreshConfig(e){var s,i,a,r;const n=await kl(e);return console.log("🔍 LLM Service Debug - Fresh project config loaded:",{projectId:e,configExists:!!n,configKeys:Object.keys(n||{}),hasStartFrame:!!(n!=null&&n.start_frame_prompt_generation),systemPromptLength:((i=(s=n==null?void 0:n.start_frame_prompt_generation)==null?void 0:s.system_prompt)==null?void 0:i.length)||0,userPromptLength:((r=(a=n==null?void 0:n.start_frame_prompt_generation)==null?void 0:a.user_prompt)==null?void 0:r.length)||0}),n}async generateSceneImagePrompt(e,n,s,i={}){var a,r,o,l,c,u,d,h,m,b;try{const _=await this.getFreshConfig(e);if(!(_!=null&&_.start_frame_prompt_generation))throw new Error("LLM configuration not found - please configure prompts in Config tab");const y=i.provider||this.defaultProvider;console.log(`Generating prompt for ${n} using ${y}...`);const p=fp.transformSceneForPrompt(n,s,i.extractionMetadata),g=_.start_frame_prompt_generation.system_prompt,v=_.start_frame_prompt_generation.user_prompt;if(!g||!v)throw new Error("System or user prompt not configured");const w=Xr.formatForLLM(g),E=Xr.formatForLLM(v),C={masterJSON:s,sceneId:n.startsWith("scene_")?n:`scene_${n}`,currentScene:p},S=(r=(a=s==null?void 0:s.global_style)==null?void 0:a.color_palette)==null?void 0:r.primary,T=(l=(o=s==null?void 0:s.global_style)==null?void 0:o.rendering_style)==null?void 0:l.level;console.log("🤖 LLM SERVICE STYLE DEBUG:",{sceneId:n,primaryColor:S,renderingLevel:T,hasGlobalStyle:!!(s!=null&&s.global_style),globalStyleKeys:s!=null&&s.global_style?Object.keys(s.global_style):"none"});const j=Kr.processTemplate(w,C),R=Kr.processTemplate(E,C),U=j.includes(S)||j.includes(T),P=R.includes(S)||R.includes(T);console.log("🎨 FINAL PROMPT STYLE CHECK:",{systemContainsStyle:U,userContainsStyle:P,systemPromptLength:j.length,userPromptLength:R.length});const L=ii.getProvider(y),V={model:((u=(c=_.llm_providers)==null?void 0:c[y])==null?void 0:u.model)||(y==="openai"?"gpt-4-turbo":"claude-3-sonnet-20240229"),max_tokens:((h=(d=_.llm_providers)==null?void 0:d[y])==null?void 0:h.max_tokens)||1e3,temperature:((b=(m=_.llm_providers)==null?void 0:m[y])==null?void 0:b.temperature)||.7};console.log("Calling LLM with:",{provider:y,model:V.model,systemPromptLength:j.length,userPromptLength:R.length});const N=await L.generatePrompt(j,R,V);if(!N.success)throw new Error(N.error||"LLM call failed");let A;try{A=JSON.parse(N.content)}catch{A={scene_id:parseInt(n.replace("scene_","")),prompt:N.content.trim(),character_count:N.content.length}}const D=A.prompt||A.content||N.content,M=A.character_count||D.length;return console.log(`✅ Generated prompt for ${n}:`,{provider:N.provider,promptLength:D.length,characterCount:M,usage:N.usage}),{success:!0,sceneId:n,generatedPrompt:D,characterCount:M,provider:N.provider,usage:N.usage}}catch(_){return console.error(`❌ Failed to generate prompt for ${n}:`,_),{success:!1,sceneId:n,error:_.message||"Unknown error occurred"}}}async generateAllScenePrompts(e,n,s={}){var r,o,l,c,u,d,h,m,b;const i=Object.keys(n.scenes||{}),a=s.sceneIds||i;console.log(`🚀 Starting BATCH prompt generation for ${a.length} scenes...`,{requestedScenes:s.sceneIds?`specific: [${a.join(", ")}]`:"all scenes",totalAvailable:i.length,processing:a.length,approach:"SINGLE BATCH CALL"});try{const _=await this.getFreshConfig(e);if(!(_!=null&&_.start_frame_prompt_generation))throw new Error("LLM configuration not found - please configure prompts in Config tab");const y=s.provider||this.defaultProvider;(r=s.onProgress)==null||r.call(s,0,a.length,"preparing batch");const p=a.map(L=>({sceneId:L,...fp.transformSceneForPrompt(L,n,s.extractionMetadata)})),g=_.start_frame_prompt_generation.system_prompt,v=_.start_frame_prompt_generation.user_prompt;if(!g||!v)throw new Error("System or user prompt not configured");const w={masterJSON:n,scenes:p,totalScenes:a.length},E=Xr.formatForLLM(g),C=Xr.formatForLLM(v),S=`
BATCH PROCESSING REQUEST: Generate prompts for ${a.length} scenes in single response.

${p.map(L=>`
--- SCENE ${L.sceneId} ---
${Kr.processTemplate(C,{masterJSON:n,sceneId:L.sceneId,currentScene:L})}
`).join(`
`)}

REQUIRED OUTPUT FORMAT:
{
  "scenes": [
    {"scene_id": 1, "prompt": "...", "character_count": number},
    {"scene_id": 2, "prompt": "...", "character_count": number},
    ...
  ]
}`,T=ii.getProvider(y),j={model:((l=(o=_.llm_providers)==null?void 0:o[y])==null?void 0:l.model)||(y==="openai"?"gpt-4-turbo":"claude-3-sonnet-20240229"),max_tokens:((u=(c=_.llm_providers)==null?void 0:c[y])==null?void 0:u.max_tokens)||4e3,temperature:((h=(d=_.llm_providers)==null?void 0:d[y])==null?void 0:h.temperature)||.7};console.log("🔥 BATCH LLM call:",{provider:y,model:j.model,systemPromptLength:E.length,batchUserPromptLength:S.length,scenesInBatch:a.length}),(m=s.onProgress)==null||m.call(s,1,a.length,"calling LLM");const R=await T.generatePrompt(Kr.processTemplate(E,w),S,j);if(!R.success)throw new Error(R.error||"Batch LLM call failed");let U;try{U=JSON.parse(R.content)}catch(L){throw new Error(`Failed to parse batch response: ${L}`)}if(!U.scenes||!Array.isArray(U.scenes))throw new Error("Invalid batch response format - missing scenes array");const P=U.scenes.map(L=>{var N,A;return{success:!0,sceneId:`scene_${L.scene_id}`,generatedPrompt:L.prompt,characterCount:L.character_count,provider:R.provider,usage:{promptTokens:Math.round((((N=R.usage)==null?void 0:N.promptTokens)||0)/a.length),completionTokens:Math.round((((A=R.usage)==null?void 0:A.completionTokens)||0)/a.length)}}});return(b=s.onProgress)==null||b.call(s,a.length,a.length,"complete"),console.log("✅ BATCH generation complete:",{totalScenes:a.length,successfulScenes:P.length,failedScenes:0,totalTokens:R.usage,approach:"SINGLE BATCH CALL"}),console.log("🎬 GENERATED PROMPTS PREVIEW:"),P.forEach(L=>{var V;console.log(`📝 ${L.sceneId}: "${(V=L.generatedPrompt)==null?void 0:V.substring(0,100)}..." (${L.characterCount} chars)`)}),{success:!0,totalScenes:a.length,successfulScenes:P.length,results:P,errors:[]}}catch(_){return console.error("💥 Batch generation failed:",_),{success:!1,totalScenes:a.length,successfulScenes:0,results:[],errors:[_.message]}}}static updateMasterJSONWithPrompts(e,n){const s={...e},i=[];return s.scenes||(s.scenes={}),n.forEach(a=>{if(a.success&&a.generatedPrompt){const r=a.sceneId.startsWith("scene_")?a.sceneId:`scene_${a.sceneId}`;s.scenes[r]||(s.scenes[r]={}),s.scenes[r].scene_frame_prompt=a.generatedPrompt,s.scenes[r].prompt_metadata={generated_at:new Date().toISOString(),provider:a.provider,character_count:a.characterCount,usage:a.usage},i.push(r)}}),console.log(`📝 Updated master JSON with prompts for ${i.length} scenes:`,i),{updatedJSON:s,updatedScenes:i}}async testProvider(e){try{return await ii.testProvider(e)}catch(n){return console.error(`Provider ${e} test failed:`,n),!1}}getAvailableProviders(){return ii.getAvailableProviders()}setDefaultProvider(e){this.defaultProvider=e}}const vn=new sd;function yj(t){const[e,n]=x.useState({isGenerating:!1,isInitializing:!1,progress:{completed:0,total:0,currentScene:"",percentage:0},lastResult:null,error:null,availableProviders:["openai","claude"],currentProvider:"openai"}),s=x.useCallback(async()=>{n(h=>({...h,isInitializing:!0,error:null}));try{await vn.initialize(t);const h=vn.getAvailableProviders();return n(m=>({...m,isInitializing:!1,availableProviders:h})),!0}catch(h){return n(m=>({...m,isInitializing:!1,error:`Initialization failed: ${h.message}`})),!1}},[t]),i=x.useCallback(async(h,m,b={})=>{var _;n(y=>({...y,isGenerating:!0,error:null,progress:{completed:0,total:1,currentScene:h,percentage:0}}));try{vn.getAvailableProviders||await s();const y=await vn.generateSceneImagePrompt(h,m,{provider:b.provider||e.currentProvider,extractionMetadata:b.extractionMetadata});if(y.success&&b.saveToDatabase!==!1){const{updatedJSON:p}=sd.updateMasterJSONWithPrompts(m,[y]);try{await Jo(((_=m.project_metadata)==null?void 0:_.id)||"unknown",p,`Generated image prompt for ${h}`),console.log(`✅ Saved prompt for ${h} to database`)}catch(g){console.error(`❌ Failed to save prompt for ${h}:`,g)}}return n(p=>({...p,isGenerating:!1,lastResult:y,progress:{completed:1,total:1,currentScene:h,percentage:100}})),y}catch(y){const p={success:!1,sceneId:h,error:y.message};return n(g=>({...g,isGenerating:!1,lastResult:p,error:y.message})),p}},[e.currentProvider,s]),a=x.useCallback(async(h,m={})=>{var b;n(_=>({..._,isGenerating:!0,error:null,progress:{completed:0,total:0,currentScene:"initializing",percentage:0}}));try{vn.getAvailableProviders||await s();const _=await vn.generateAllScenePrompts(t,h,{provider:m.provider||e.currentProvider,extractionMetadata:m.extractionMetadata,sceneIds:m.sceneIds,onProgress:(y,p,g)=>{const v=p>0?Math.round(y/p*100):0;n(w=>({...w,progress:{completed:y,total:p,currentScene:g,percentage:v}}))}});if(_.successfulScenes>0&&m.saveToDatabase!==!1){const{updatedJSON:y,updatedScenes:p}=sd.updateMasterJSONWithPrompts(h,_.results);try{await Jo(((b=h.project_metadata)==null?void 0:b.id)||"unknown",y,`Generated image prompts for ${_.successfulScenes} scenes`),console.log(`✅ Saved prompts for ${p.length} scenes to database`)}catch(g){console.error("❌ Failed to save prompts to database:",g)}}return n(y=>({...y,isGenerating:!1,lastResult:_,error:_.errors.length>0?`${_.errors.length} scenes failed`:null})),_}catch(_){const y={success:!1,totalScenes:0,successfulScenes:0,results:[],errors:[_.message]};return n(p=>({...p,isGenerating:!1,lastResult:y,error:_.message})),y}},[e.currentProvider,s]),r=x.useCallback(async h=>{try{return await vn.testProvider(h)}catch(m){return console.error(`Provider ${h} test failed:`,m),!1}},[]),o=x.useCallback(h=>{vn.setDefaultProvider(h),n(m=>({...m,currentProvider:h}))},[]),l=x.useCallback(()=>{n(h=>({...h,error:null}))},[]),c=x.useCallback(()=>{n(h=>({...h,lastResult:null}))},[]),u=x.useMemo(()=>!e.isInitializing&&!e.error,[e.isInitializing,e.error]),d=x.useMemo(()=>e.lastResult!==null,[e.lastResult]);return{...e,isReady:u,hasResults:d,initializeService:s,generateScenePrompt:i,generateAllPrompts:a,testProvider:r,setProvider:o,clearError:l,clearResult:c}}const il=class il{static async downloadAndStore(e,n){var i;const s=`🎨 [${n.sceneId}]`;console.log(`${s} 📥 STEP 1/4: Starting image download and storage process...`),console.log(`${s} 📋 Request details:`,{sceneId:n.sceneId,projectId:e,falUrl:n.falUrl,promptLength:((i=n.generationPrompt)==null?void 0:i.length)||0});try{console.log(`${s} 📡 STEP 1/4: Downloading from FAL.ai...`);const a=Date.now(),r=await this.downloadImage(n.falUrl),o=Date.now()-a;console.log(`${s} ✅ STEP 1/4: Download complete - ${r.byteLength} bytes in ${o}ms`),console.log(`${s} 📂 STEP 2/4: Generating storage path...`);const l=this.generateStoragePath(e,n.sceneId);console.log(`${s} ✅ STEP 2/4: Storage path: ${l}`),console.log(`${s} ☁️ STEP 3/4: Uploading to Supabase Storage...`);const c=Date.now(),u=await this.uploadToStorage(l,r),d=Date.now()-c;console.log(`${s} ✅ STEP 3/4: Upload complete in ${d}ms`),console.log(`${s} 🔗 Our permanent URL: ${u}`),console.log(`${s} 💾 STEP 4/4: Creating database record...`);const h=Date.now(),m=await this.createDatabaseRecord(e,n,{storagePath:l,storageUrl:u,fileSize:r.byteLength}),b=Date.now()-h;console.log(`${s} ✅ STEP 4/4: Database record created in ${b}ms`),console.log(`${s} 📊 Database record ID: ${m.id}`);const _=Date.now()-a;return console.log(`${s} 🎉 COMPLETE: Full storage process finished in ${_}ms`),console.log(`${s} 🏆 RESULT: FAL.ai URL → Our Database URL`),console.log(`${s} 📤 FROM: ${n.falUrl}`),console.log(`${s} 📥 TO:   ${u}`),{success:!0,sceneId:n.sceneId,ourImageUrl:u,storageRecord:m}}catch(a){return console.error(`${s} 💥 FAILED: Storage process error:`,a),console.error(`${s} 🔍 Error details:`,{name:a instanceof Error?a.name:"Unknown",message:a instanceof Error?a.message:String(a),stack:a instanceof Error?a.stack:void 0}),{success:!1,sceneId:n.sceneId,error:a instanceof Error?a.message:"Unknown storage error"}}}static async downloadImage(e){console.log(`📡 Downloading image from: ${e}`);const n=await fetch(e);if(!n.ok)throw new Error(`Failed to download image: ${n.status} ${n.statusText}`);const s=n.headers.get("content-type");if(!(s!=null&&s.startsWith("image/")))throw new Error(`Invalid content type: ${s}. Expected image.`);const i=await n.arrayBuffer();if(i.byteLength>this.MAX_FILE_SIZE)throw new Error(`Image too large: ${i.byteLength} bytes. Max: ${this.MAX_FILE_SIZE}`);return console.log(`✅ Downloaded image: ${i.byteLength} bytes, type: ${s}`),i}static generateStoragePath(e,n){const s=new Date().toISOString().replace(/[:.]/g,"-");return`projects/${e}/scenes/${n}_${s}.jpeg`}static async uploadToStorage(e,n){console.log(`☁️ Uploading to storage: ${e}`);const{data:s,error:i}=await J.storage.from(this.STORAGE_BUCKET).upload(e,n,{contentType:"image/jpeg",cacheControl:"3600",upsert:!1});if(i)throw new Error(`Storage upload failed: ${i.message}`);const{data:a}=J.storage.from(this.STORAGE_BUCKET).getPublicUrl(e);return console.log(`✅ Uploaded to storage: ${a.publicUrl}`),a.publicUrl}static async createDatabaseRecord(e,n,s){console.log(`💾 Creating database record for ${n.sceneId}...`),await J.from("project_assets").update({is_current:!1}).eq("project_id",e).eq("scene_id",n.sceneId).eq("asset_type","scene_image").eq("is_current",!0);const{data:i,error:a}=await J.from("project_assets").insert({project_id:e,scene_id:n.sceneId,asset_type:"scene_image",asset_url:s.storageUrl,asset_filename:s.storagePath.split("/").pop(),generation_prompt:n.generationPrompt,generation_model:"fal_ai_flux",generation_parameters:{...n.falMetadata,original_fal_url:n.falUrl,file_size:s.fileSize,content_type:"image/jpeg",storage_path:s.storagePath},version_number:1,is_current:!0}).select().single();if(a)throw new Error(`Database record creation failed: ${a.message}`);return console.log(`✅ Created database record for ${n.sceneId}`),i}static async ensureBucketExists(){const{data:e}=await J.storage.listBuckets();if(!(e==null?void 0:e.some(s=>s.name===this.STORAGE_BUCKET))){console.log(`🪣 Creating storage bucket: ${this.STORAGE_BUCKET}`);const{error:s}=await J.storage.createBucket(this.STORAGE_BUCKET,{public:!0,allowedMimeTypes:["image/jpeg","image/png","image/webp"],fileSizeLimit:this.MAX_FILE_SIZE});if(s)throw new Error(`Failed to create storage bucket: ${s.message}`)}}static async getCurrentImageUrl(e,n){const{data:s,error:i}=await J.from("project_assets").select("asset_url").eq("project_id",e).eq("scene_id",n).eq("asset_type","scene_image").eq("is_current",!0).single();return i||!s?null:s.asset_url}static async downloadAndStoreBulk(e,n){console.log(`📥 Bulk downloading and storing ${n.length} images...`);const s=[];for(const a of n){const r=await this.downloadAndStore(e,a);s.push(r),await new Promise(o=>setTimeout(o,500))}const i=s.filter(a=>a.success).length;return console.log(`✅ Bulk storage complete: ${i}/${n.length} successful`),s}static async cleanupOldVersions(e,n,s=3){console.log(`🧹 Cleanup for ${n} - keeping ${s} versions (future feature)`)}};il.STORAGE_BUCKET="scene-images",il.MAX_FILE_SIZE=10*1024*1024;let id=il;class vj{constructor(){this.config=null,this.serviceType=null,this.serviceConfig=null}async initialize(e){var n;try{if(this.config=await kl(e),!((n=this.config)!=null&&n.image_generation))throw new Error("Image generation configuration not found");const s=this.config.image_generation;if(s.fal_ai_flux)this.serviceType="fal_ai_flux",this.serviceConfig=s.fal_ai_flux,console.log("✅ ImageGenerationService: Detected FAL.ai FLUX configuration");else throw new Error("No supported image generation service found in configuration");console.log("🎨 ImageGenerationService initialized:",{serviceType:this.serviceType,endpoint:this.serviceConfig.endpoint,hasParameters:!!this.serviceConfig.parameters})}catch(s){throw console.error("ImageGenerationService initialization failed:",s),s}}async generateSceneImage(e){try{switch((!this.serviceType||!this.serviceConfig)&&await this.initialize(),console.log(`🎨 Generating image for ${e.sceneId} using ${this.serviceType}...`),this.serviceType){case"fal_ai_flux":return await this.generateWithFalAi(e);default:throw new Error(`Unsupported service type: ${this.serviceType}`)}}catch(n){return console.error(`❌ Failed to generate image for ${e.sceneId}:`,n),{success:!1,sceneId:e.sceneId,error:n.message||"Unknown error occurred",provider:this.serviceType||"unknown"}}}async generateAllSceneImages(e,n={}){var c,u,d;const s=[],i=[],a=[];let r;console.log(`🚀 Starting bulk image generation for ${e.length} scenes using ${this.serviceType}...`);for(let h=0;h<e.length;h++){const m=e[h],b={completed:h,total:e.length,currentScene:m.sceneId,currentSceneIndex:h+1,percentage:Math.round(h/e.length*100),provider:this.serviceType||"unknown",completedImages:[...a],latestImageUrl:r};(c=n.onProgress)==null||c.call(n,b);try{const _=await this.generateSceneImage(m);s.push(_),!_.success&&_.error&&i.push(`${m.sceneId}: ${_.error}`),_.success&&_.imageUrl&&(a.push({sceneId:m.sceneId,imageUrl:_.imageUrl,sceneIndex:h+1}),r=_.imageUrl);const y={completed:h+1,total:e.length,currentScene:m.sceneId,currentSceneIndex:h+1,percentage:Math.round((h+1)/e.length*100),provider:this.serviceType||"unknown",completedImages:[...a],latestImageUrl:r};(u=n.onProgress)==null||u.call(n,y)}catch(_){const y={success:!1,sceneId:m.sceneId,error:_.message,provider:this.serviceType||"unknown"};s.push(y),i.push(`${m.sceneId}: ${_.message}`)}h<e.length-1&&await new Promise(_=>setTimeout(_,1e3))}const o={completed:e.length,total:e.length,currentScene:"complete",currentSceneIndex:e.length,percentage:100,provider:this.serviceType||"unknown",completedImages:[...a],latestImageUrl:r};(d=n.onProgress)==null||d.call(n,o);const l=s.filter(h=>h.success).length;return console.log("✅ Bulk image generation complete:",{totalScenes:e.length,successfulScenes:l,failedScenes:e.length-l,errors:i.length,provider:this.serviceType}),{success:l===e.length,totalScenes:e.length,successfulScenes:l,results:s,errors:i,provider:this.serviceType||"unknown"}}async generateWithFalAi(e){var n,s,i;try{const{fal:a}=await mn(async()=>{const{fal:m}=await import("./index-RLP5PixC.js").then(b=>b.i);return{fal:m}},[]);a.config({credentials:"cc591b31-c323-4b0e-b978-32ffb34af24f:6462b409182255512edc46ec27d7c5a0"});const r={input:{prompt:e.prompt,image_size:((n=this.serviceConfig.parameters)==null?void 0:n.image_size)||{width:1024,height:768},num_inference_steps:((s=this.serviceConfig.parameters)==null?void 0:s.num_inference_steps)||28,guidance_scale:((i=this.serviceConfig.parameters)==null?void 0:i.guidance_scale)||3.5,num_images:1,enable_safety_checker:!0,output_format:"jpeg",acceleration:"none"},logs:!0};console.log("🔥 FAL.ai call:",{endpoint:this.serviceConfig.endpoint,promptLength:e.prompt.length,imageSize:r.input.image_size,sceneId:e.sceneId});const o=await a.subscribe(this.serviceConfig.endpoint,r);if(!o.data||!o.data.images||o.data.images.length===0)throw new Error("No images generated by FAL.ai");const l=o.data.images[0],c=`🖼️ [${e.sceneId}]`;console.log(`${c} ✅ FAL.ai GENERATION COMPLETE:`,{url:l.url,contentType:l.content_type,width:l.width,height:l.height,seed:o.data.seed,requestId:o.requestId,timings:o.data.timings}),console.log(`${c} 🔄 TRANSITIONING: FAL.ai → Our Database Storage...`),console.log(`${c} 🎯 NEXT PHASE: Download, Store, and Create Permanent URL...`);const u=Date.now(),d=await id.downloadAndStore(e.projectId,{sceneId:e.sceneId,falUrl:l.url,generationPrompt:e.prompt,falMetadata:{width:l.width,height:l.height,seed:o.data.seed,requestId:o.requestId,timings:o.data.timings,contentType:l.content_type}}),h=Date.now()-u;return d.success?(console.log(`${c} 🎉 STORAGE SUCCESS: Complete pipeline finished in ${h}ms`),console.log(`${c} 🏆 FINAL RESULT: Permanent database URL ready`),console.log(`${c} 📋 SUMMARY:`),console.log(`${c}   • FAL.ai generation: SUCCESS`),console.log(`${c}   • Download from FAL.ai: SUCCESS`),console.log(`${c}   • Upload to our storage: SUCCESS`),console.log(`${c}   • Database record: SUCCESS`),console.log(`${c}   • Final URL: ${d.ourImageUrl}`),{success:!0,sceneId:e.sceneId,imageUrl:d.ourImageUrl,contentType:l.content_type,width:l.width,height:l.height,seed:o.data.seed,provider:"fal_ai_flux",requestId:o.requestId,timings:o.data.timings,originalFalUrl:l.url,storageRecord:d.storageRecord}):(console.error(`${c} 💥 STORAGE FAILED: Falling back to FAL.ai URL`),console.error(`${c} 🔍 Storage error: ${d.error}`),console.error(`${c} ⚠️ FALLBACK ACTIVATED: Using temporary FAL.ai URL`),{success:!0,sceneId:e.sceneId,imageUrl:l.url,contentType:l.content_type,width:l.width,height:l.height,seed:o.data.seed,provider:"fal_ai_flux",requestId:o.requestId,timings:o.data.timings,storageError:d.error})}catch(a){return console.error(`💥 FAL.ai error for ${e.sceneId}:`,a),{success:!1,sceneId:e.sceneId,error:`FAL.ai Error: ${a.message}`,provider:"fal_ai_flux"}}}getAvailableProviders(){var n;if(!((n=this.config)!=null&&n.image_generation))return[];const e=[];return this.config.image_generation.fal_ai_flux&&e.push("fal_ai_flux"),e}getCurrentService(){return this.serviceType}async testService(){try{this.serviceType||await this.initialize();const e={sceneId:"test",prompt:"A simple test image"};return(await this.generateSceneImage(e)).success}catch(e){return console.error("Service test failed:",e),!1}}}const Vs=new vj;function _j(t){const[e,n]=x.useState({isGenerating:!1,isInitializing:!1,progress:null,lastResult:null,error:null,currentService:null,availableServices:[]}),s=x.useCallback(async()=>{n(d=>({...d,isInitializing:!0,error:null}));try{await Vs.initialize(t);const d=Vs.getCurrentService(),h=Vs.getAvailableProviders();return n(m=>({...m,isInitializing:!1,currentService:d,availableServices:h})),!0}catch(d){return n(h=>({...h,isInitializing:!1,error:`Service initialization failed: ${d.message}`})),!1}},[t]),i=x.useCallback(async(d,h)=>{n(m=>({...m,isGenerating:!0,error:null,progress:{completed:0,total:1,currentScene:d,currentSceneIndex:1,percentage:0,provider:m.currentService||"unknown"}}));try{e.currentService||await s();const m={sceneId:d,prompt:h},b=await Vs.generateSceneImage(m);return n(_=>({..._,isGenerating:!1,lastResult:b,progress:{completed:1,total:1,currentScene:d,currentSceneIndex:1,percentage:100,provider:b.provider||"unknown"}})),b}catch(m){const b={success:!1,sceneId:d,error:m.message,provider:e.currentService||"unknown"};return n(_=>({..._,isGenerating:!1,lastResult:b,error:m.message})),b}},[e.currentService,s]),a=x.useCallback(async d=>{n(h=>({...h,isGenerating:!0,error:null,progress:{completed:0,total:d.length,currentScene:"initializing",currentSceneIndex:0,percentage:0,provider:h.currentService||"unknown"}}));try{e.currentService||await s();const h=d.map((b,_)=>({sceneId:b.sceneId,prompt:b.prompt,projectId:b.projectId,sceneIndex:_})),m=await Vs.generateAllSceneImages(h,{onProgress:b=>{n(_=>({..._,progress:b}))}});return n(b=>({...b,isGenerating:!1,lastResult:m,error:m.errors.length>0?`${m.errors.length} scenes failed`:null})),m}catch(h){const m={success:!1,totalScenes:d.length,successfulScenes:0,results:[],errors:[h.message],provider:e.currentService||"unknown"};return n(b=>({...b,isGenerating:!1,lastResult:m,error:h.message})),m}},[e.currentService,s]),r=x.useCallback(async()=>{try{return await Vs.testService()}catch(d){return console.error("Service test failed:",d),!1}},[]),o=x.useCallback(()=>{n(d=>({...d,error:null}))},[]),l=x.useCallback(()=>{n(d=>({...d,lastResult:null}))},[]),c=!e.isInitializing&&!e.error&&!!e.currentService,u=e.lastResult!==null;return{...e,isReady:c,hasResults:u,initializeService:s,generateSceneImage:i,generateAllSceneImages:a,testService:r,clearError:o,clearResult:l}}function bj({phase:t,projectId:e,projectName:n,masterJSON:s,onContentUpdate:i,hasUnsavedChanges:a,onJsonChange:r}){var V;const{generateAllPrompts:o,isGenerating:l,isReady:c,error:u,currentProvider:d,initializeService:h}=yj(e),{generateAllSceneImages:m,isGenerating:b,isReady:_,progress:y,error:p,currentService:g,initializeService:v}=_j(e),[w,E]=x.useState(!1),[C,S]=x.useState({isVisible:!1,currentScene:1,totalScenes:3,sceneTitle:"Introduction Of The Setting And Characters",status:"Downloading from FAL.ai...",progress:33,currentImageUrl:void 0});x.useEffect(()=>{const N=A=>{(A.ctrlKey||A.metaKey)&&A.shiftKey&&A.key==="M"?(A.preventDefault(),console.log("🎯 Keyboard shortcut triggered: Toggling Phase 3 modal demo"),E(D=>!D)):A.key==="Escape"&&w&&(A.preventDefault(),console.log("🎯 ESC pressed: Closing Phase 3 modal demo"),E(!1))};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[w]),x.useEffect(()=>{e&&(console.log("🚀 ScenesFrameGenerationModule: Initializing services..."),h().then(N=>{console.log(`✅ LLM service initialization: ${N?"SUCCESS":"FAILED"}`)}),v().then(N=>{console.log(`✅ Image service initialization: ${N?"SUCCESS":"FAILED"}`)}))},[e,h,v]);const T=s!=null&&s.scenes?Object.keys(s.scenes):[];x.useEffect(()=>{y&&console.log("🔄 Image Progress Update:",y)},[y]),x.useEffect(()=>{C.isVisible&&!b&&(y==null?void 0:y.currentScene)==="complete"&&console.log("✅ Generation complete - showing success state in modal")},[C.isVisible,b,y==null?void 0:y.currentScene]);const j=T.length,R=T.filter(N=>{var A;return(A=s.scenes[N])==null?void 0:A.scene_frame_prompt}).length,U=T.filter(N=>{var A;return(A=s.scenes[N])==null?void 0:A.scene_start_frame}).length;console.log("📊 Scenes Frame Generation State:",{totalScenes:j,scenesWithPrompts:R,scenesWithImages:U,hasUnsavedChanges:a,isGeneratingPrompts:l,isGeneratingImages:b,isLLMReady:c,isImageServiceReady:_,currentProvider:d,currentService:g});const P=async()=>{console.log("🚀 Starting bulk prompt generation for all scenes..."),console.log("📊 Bulk generation context:",{totalScenes:j,scenes:T,masterJSONKeys:Object.keys(s||{}),provider:d});const N=si();if(N){const A=T.length<=5?T.join(", "):`${T.slice(0,3).join(", ")} ... +${T.length-3} more`;N.showModal({title:"🤖 Generating Scene Prompts",message:`Single batch call processing ${T.length} scenes with ${d.toUpperCase()}`,details:[`Processing scenes: ${A}`,`LLM Provider: ${d.toUpperCase()}`,"Call type: Single batch request",`Expected output: ${T.length} image generation prompts`,"Variable injection & cross-scene consistency optimization"],type:"loading"})}try{const A=await o(s,{provider:d,saveToDatabase:!1,sceneIds:T});if(console.log("📋 Bulk generation complete:",{success:A.success,totalScenes:A.totalScenes,successfulScenes:A.successfulScenes,failedScenes:A.totalScenes-A.successfulScenes,errors:A.errors}),A.successfulScenes>0){const D={...s};A.results.forEach(M=>{var K;if(M.success&&M.generatedPrompt){const q=M.sceneId.startsWith("scene_")?M.sceneId:`scene_${M.sceneId}`;D.scenes[q]||(D.scenes[q]={}),D.scenes[q].scene_frame_prompt=M.generatedPrompt,D.scenes[q].prompt_metadata={generated_at:new Date().toISOString(),provider:M.provider,character_count:M.characterCount,usage:M.usage},console.log(`✅ Updated scene ${q} with generated prompt (${(K=M.generatedPrompt)==null?void 0:K.length} chars)`)}}),console.log("🎉 Master JSON updated with all successful prompts"),i(D),r(JSON.stringify(D,null,2)),N&&(N.showModal({title:"✅ Prompts Generated Successfully",message:`Generated ${A.successfulScenes} prompts for ${j} scenes`,type:"success"}),setTimeout(()=>{N.hideModal()},3e3))}else N&&N.showModal({title:"❌ Generation Failed",message:"No prompts were generated successfully",type:"error"})}catch(A){console.error("💥 Exception during bulk generation:",A);const D=si();D&&D.showModal({title:"❌ Generation Error",message:`Error: ${A instanceof Error?A.message:"Unknown error occurred"}`,type:"error"})}},L=async()=>{var q;console.log("🎨 Starting bulk frame generation for all scenes...");const N=T.filter(de=>{var Q;return(Q=s.scenes[de])==null?void 0:Q.scene_frame_prompt});if(N.length===0){const de=si();de&&de.showModal({title:"⚠️ No Prompts Available",message:"Generate prompts first before creating frames",details:['Click "Generate Prompts" to create image prompts','Then use "Generate Frames" to create the actual images'],type:"error"});return}const A=!0,M=N.slice(0,3);console.log(`🧪 Testing mode: Processing ${M.length} of ${N.length} scenes`),console.log("📊 Bulk frame generation context:",{totalScenes:N.length,processScenes:M.length,testingMode:A,currentService:g,hasPrompts:!0});const K=M.map(de=>{const Q=s.scenes[de],te=de.replace("scene_",""),De=(Q==null?void 0:Q.title)||(Q==null?void 0:Q.action_summary)||`Scene ${te}`;return{id:de,number:parseInt(te),title:De.substring(0,35),fullTitle:De}});S({isVisible:!0,currentScene:1,totalScenes:M.length,sceneTitle:((q=K[0])==null?void 0:q.fullTitle)||"Loading scene",status:"Initializing...",progress:0});try{console.log("🚀 STARTING BULK FRAME GENERATION PROCESS"),console.log("📊 Session Context:",{testingMode:A,totalAvailableScenes:N.length,processingScenes:M.length,projectId:e,currentService:g});const de=M.map(te=>({sceneId:te,prompt:s.scenes[te].scene_frame_prompt,projectId:e}));console.log("🎬 SCENE PROCESSING QUEUE:",de.map(te=>{var De;return{sceneId:te.sceneId,promptLength:((De=te.prompt)==null?void 0:De.length)||0,hasPrompt:!!te.prompt}}));const Q=await m(de);if(console.log("🎊 BULK FRAME GENERATION PROCESS COMPLETE"),console.log("📋 Final Results Summary:",{success:Q.success,totalScenes:Q.totalScenes,successfulScenes:Q.successfulScenes,failedScenes:Q.totalScenes-Q.successfulScenes,errors:Q.errors,testingMode:A,processingTime:"Logged individually per scene"}),Q.results.forEach((te,De)=>{const Ce=`📊 [${te.sceneId}]`;te.success?(console.log(`${Ce} ✅ COMPLETE SUCCESS:`),console.log(`${Ce}   • FAL.ai generation: SUCCESS`),console.log(`${Ce}   • Database storage: SUCCESS`),console.log(`${Ce}   • Final URL: ${te.imageUrl}`),console.log(`${Ce}   • Original FAL.ai: ${te.originalFalUrl||"N/A"}`)):(console.log(`${Ce} ❌ FAILED:`),console.log(`${Ce}   • Error: ${te.error}`))}),Q.successfulScenes>0){const te={...s};Q.results.forEach(ie=>{if(ie.success&&ie.imageUrl){const it=ie.sceneId.startsWith("scene_")?ie.sceneId:`scene_${ie.sceneId}`;te.scenes[it]||(te.scenes[it]={}),te.scenes[it].scene_start_frame=ie.imageUrl,te.scenes[it].frame_metadata={generated_at:new Date().toISOString(),provider:ie.provider,width:ie.width,height:ie.height,content_type:ie.contentType,seed:ie.seed,request_id:ie.requestId},console.log(`✅ Updated scene ${it} with generated frame image`)}}),console.log("🎉 Master JSON updated with all successful frame images"),i(te),r(JSON.stringify(te,null,2));const De=T.every(ie=>{var it;return(it=s.scenes[ie])==null?void 0:it.scene_frame_prompt}),Ce=M.every(ie=>{var it;return(it=te.scenes[ie])==null?void 0:it.scene_start_frame}),zl=De&&Ce,Ii=A?` (${M.length}/${N.length} in testing mode)`:"";console.log("✅ Image generation complete, modal will show success state"),console.log(`📊 Final Results: ${Q.successfulScenes}/${Q.totalScenes} successful`);const Cr=Q.results.filter(ie=>ie.success),Fi=Q.results.filter(ie=>!ie.success);console.log("✅ Successful scenes:",Cr.map(ie=>ie.sceneId)),Fi.length>0&&console.log("❌ Failed scenes:",Fi.map(ie=>`${ie.sceneId}: ${ie.error}`))}else modal&&modal.showModal({title:"❌ Frame Generation Failed",message:"No frame images were generated successfully",type:"error"})}catch(de){console.error("💥 Exception during bulk frame generation:",de);const Q=si();Q&&Q.showModal({title:"❌ Frame Generation Error",message:`Error: ${de instanceof Error?de.message:"Unknown error occurred"}`,type:"error"})}};return f.jsxs("div",{style:{padding:"0.5rem"},children:[f.jsx("div",{style:{marginBottom:"0.75rem"},children:f.jsx("h3",{style:{color:"#ffffff",fontSize:"1.125rem",fontWeight:"bold",margin:0},children:"Generate scene frames prompts and images"})}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem",color:"#999",marginBottom:"0.75rem"},children:[f.jsxs("span",{children:["Phase 3: ",f.jsx("strong",{style:{color:"#66ccff"},children:"Scenes Frame Generation"})]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:["Status: ",f.jsx("strong",{className:t.status==="completed"?"script-status-completed":"script-status-progress",children:t.status==="completed"?"Completed":"Available"})]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:["Prompts: ",f.jsxs("strong",{className:"script-db-connected",children:[R,"/",j]})]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:["Frames: ",f.jsxs("strong",{className:"script-db-connected",children:[U,"/",j]})]})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem"},children:[f.jsx("span",{className:c?"text-success":"text-error",children:c?c?f.jsx(f.Fragment,{children:"✅ LLM Ready"}):f.jsx(f.Fragment,{children:"⏳ LLM Loading"}):f.jsx(f.Fragment,{children:"❌ LLM Error"})}),f.jsx("span",{className:_?"text-success":"text-error",children:_?_?f.jsx(f.Fragment,{children:"✅ Image Ready"}):f.jsx(f.Fragment,{children:"⏳ Image Loading"}):f.jsx(f.Fragment,{children:"❌ Image Error"})}),(u||p)&&f.jsxs("span",{className:"text-error",children:["❌ ",u||p]}),a&&f.jsx("span",{className:"text-warning",children:"⚠️ Unsaved changes"}),f.jsx("span",{className:d==="openai"?"text-success":"text-accent",children:d==="openai"?"🤖 OPENAI":"🧠 CLAUDE"}),g&&f.jsxs("span",{className:"text-accent",children:["🎨 ",g.toUpperCase().replace("_"," ")]}),(l||b)&&f.jsx("span",{className:"text-muted",style:{fontSize:"0.75rem"},children:l?"Generating prompts...":"Generating frames..."})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[f.jsx("button",{onClick:P,disabled:!c||l||b||j===0,className:`btn text-xs px-md py-xs ${l?"btn-secondary":"btn-primary"}`,children:l?"⏳ Generating...":"Generate Prompts"}),f.jsx("button",{onClick:L,disabled:!_||l||b||R===0,className:`btn text-xs px-md py-xs ${b?"btn-secondary":"btn-primary"}`,title:"Testing mode: Generates first 3 scenes only",children:b?"⏳ Generating...":"🧪 Generate Frames (Test: 3 scenes)"})]})]}),(w||C.isVisible)&&f.jsx("div",{className:"modal-overlay",style:{zIndex:9999},children:f.jsxs("div",{className:"modal-content",style:{width:"80vw",maxWidth:"1000px",aspectRatio:"16/9",display:"flex",flexDirection:"column"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 1rem",borderBottom:"1px solid #333",backgroundColor:(y==null?void 0:y.currentScene)==="complete"?"#002200":"transparent"},children:[f.jsx("h2",{style:{margin:0,color:(y==null?void 0:y.currentScene)==="complete"?"#00ff00":"#66ccff",fontSize:"1.125rem"},children:(y==null?void 0:y.currentScene)==="complete"?"✅ Generation Complete!":"Generating Scene Frames"}),(w||(y==null?void 0:y.currentScene)==="complete")&&f.jsx("button",{onClick:()=>{E(!1),S(N=>({...N,isVisible:!1}))},style:{background:"#333",border:"1px solid #666",color:"#fff",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",padding:"0.5rem 1rem",borderRadius:"0.25rem",minWidth:"80px"},children:"Close"})]}),f.jsxs("div",{style:{flex:1,display:"flex",gap:"0.75rem",padding:"0.75rem",overflow:"hidden"},children:[f.jsxs("div",{style:{flex:"0 0 40%",display:"flex",flexDirection:"column",gap:"0.75rem",height:"100%"},children:[f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#0a1a2a",borderRadius:"0.375rem",border:"1px solid #0066cc"},children:[f.jsxs("div",{style:{color:"#66ccff",fontSize:"0.875rem",fontWeight:"bold",marginBottom:"0.25rem"},children:["Progress: ",(y==null?void 0:y.completed)||0,"/",(y==null?void 0:y.total)||3," completed"]}),f.jsx("div",{style:{color:"#999",fontSize:"0.75rem"},children:"⏱️ ~2 minutes per scene"})]}),f.jsxs("div",{style:{flex:1,padding:"0.75rem",backgroundColor:"#0a1a2a",borderRadius:"0.375rem",border:"1px solid #0066cc",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:0},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#66ccff",fontSize:"0.875rem",fontWeight:"bold",marginBottom:"0.5rem"},children:(y==null?void 0:y.currentScene)==="complete"?"All Scenes Complete!":`Processing: Scene ${(y==null?void 0:y.currentSceneIndex)||1}`}),f.jsx("div",{style:{color:"#999",fontSize:"0.75rem",lineHeight:1.4},children:(y==null?void 0:y.currentScene)==="complete"?`Successfully generated ${((V=y==null?void 0:y.completedImages)==null?void 0:V.length)||0} images`:`${(y==null?void 0:y.currentScene)||"Loading scene"}...`})]}),f.jsx("div",{style:{color:(y==null?void 0:y.currentScene)==="complete"?"#00ff00":"#ff9900",fontSize:"0.75rem",fontWeight:"bold",padding:"0.5rem",backgroundColor:(y==null?void 0:y.currentScene)==="complete"?"#002200":"#332200",borderRadius:"0.25rem",textAlign:"center"},children:(y==null?void 0:y.currentScene)==="complete"?"✅ Generation Complete":(y==null?void 0:y.currentScene)==="initializing"?"🔄 Initializing...":`🔄 Generating ${(y==null?void 0:y.currentScene)||"scene"}...`})]})]}),f.jsxs("div",{style:{flex:"0 0 60%",display:"flex",flexDirection:"column",gap:"0.75rem",overflow:"hidden",minHeight:0,height:"100%"},children:[f.jsxs("div",{style:{aspectRatio:"16/9",width:"100%",backgroundColor:"#0a0a0a",borderRadius:"0.375rem",border:"2px dashed #444",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[y!=null&&y.latestImageUrl?f.jsx("img",{src:y.latestImageUrl,alt:`Generated scene ${y.currentSceneIndex}`,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"0.25rem"},onLoad:()=>console.log(`✅ Image loaded: Scene ${y.currentSceneIndex}`),onError:()=>console.log(`❌ Image failed to load: Scene ${y.currentSceneIndex}`)}):f.jsxs("div",{style:{textAlign:"center",color:"#666"},children:[f.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"🎬"}),f.jsxs("div",{style:{fontSize:"0.875rem"},children:["Scene ",(y==null?void 0:y.currentSceneIndex)||1," generating..."]}),f.jsx("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:"FAL.ai image will appear here first"})]}),b&&f.jsx("div",{style:{position:"absolute",top:"0.75rem",right:"0.75rem",color:"#ff9900",fontSize:"0.75rem",backgroundColor:"#332200",padding:"0.25rem 0.5rem",borderRadius:"0.25rem"},children:"🔄 Loading..."})]}),f.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#2a2a2a",borderRadius:"0.375rem",width:"100%",flex:"0 0 auto"},children:[f.jsx("div",{style:{color:"#66ccff",fontSize:"0.75rem",fontWeight:"bold",marginBottom:"0.375rem"},children:"Current Scene Prompt:"}),f.jsx("div",{style:{color:"#999",fontSize:"0.75rem",lineHeight:1.3,wordWrap:"break-word",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxHeight:"2.6rem"},children:(()=>{var D;if(w)return'"A stunning cinematic wide shot of a circular futuristic library with floating holographic books and ancient knowledge crystals..."';if(!(y!=null&&y.currentScene)||(y==null?void 0:y.currentScene)==="complete")return(y==null?void 0:y.currentScene)==="complete"?"All scene prompts processed successfully!":"Waiting for generation to start...";const N=(D=s==null?void 0:s.scenes)==null?void 0:D[y.currentScene],A=N==null?void 0:N.scene_frame_prompt;return A?`"${A}"`:"No prompt available for this scene"})()})]})]})]})]})})]})}function Sj({activeView:t,onViewChange:e,masterJSON:n}){const s=[{id:"json",label:"JSON",icon:"{ }",description:"Raw data view"},{id:"timeline",label:"Timeline",icon:"📊",description:"Visual timeline interface"},{id:"elements",label:"Elements",icon:"🎭",description:"Element management (Phase 2+)"},{id:"style",label:"Style",icon:"🎨",description:"Global style control"},{id:"config",label:"Config",icon:"⚙️",description:"LLM configuration (Admin)"}],i=(n==null?void 0:n.scenes)&&typeof n.scenes=="object"&&Object.keys(n.scenes).length>0,a=o=>o==="json"||o==="timeline"?!0:o==="style"?i:o!=="elements",r=o=>{var l;return o==="elements"?"Available in Phase 2+":o==="style"&&!i?"Complete Phase 1 JSON generation first":((l=s.find(c=>c.id===o))==null?void 0:l.description)||""};return f.jsx("div",{className:"project-view-navigation",children:f.jsx("div",{className:"flex gap-md p-md",children:s.map(o=>{const l=a(o.id);return f.jsx("button",{onClick:()=>l&&e(o.id),className:`
                flex-1 flex items-center justify-center transition-fast cursor-pointer
                border border-solid rounded-lg font-semibold
                ${t===o.id?"bg-accent border-focus text-primary shadow-md":"bg-secondary border-default text-secondary hover:text-primary hover:bg-accent hover:border-light"}
                ${l?"":"opacity-50 cursor-not-allowed"}
              `,style:{padding:"0.75rem 1.5rem",fontSize:"0.875rem",minHeight:"2.5rem"},disabled:!l,title:r(o.id),children:f.jsx("span",{className:"font-semibold",children:o.label.toUpperCase()})},o.id)})})})}const Nh=x.createContext({});function Dh(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const kh=typeof window<"u",g0=kh?x.useLayoutEffect:x.useEffect,Ll=x.createContext(null);function Mh(t,e){t.indexOf(e)===-1&&t.push(e)}function Uh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const dn=(t,e,n)=>n>e?e:n<t?t:n;let Lh=()=>{};const hn={},y0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function v0(t){return typeof t=="object"&&t!==null}const _0=t=>/^0[^.\s]+$/u.test(t);function Ph(t){let e;return()=>(e===void 0&&(e=t()),e)}const xt=t=>t,wj=(t,e)=>n=>e(t(n)),Tr=(...t)=>t.reduce(wj),Za=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Vh{constructor(){this.subscriptions=[]}add(e){return Mh(this.subscriptions,e),()=>Uh(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let a=0;a<i;a++){const r=this.subscriptions[a];r&&r(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zt=t=>t*1e3,$t=t=>t/1e3;function b0(t,e){return e?t*(1e3/e):0}const S0=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,xj=1e-7,Tj=12;function Ej(t,e,n,s,i){let a,r,o=0;do r=e+(n-e)/2,a=S0(r,s,i)-t,a>0?n=r:e=r;while(Math.abs(a)>xj&&++o<Tj);return r}function Er(t,e,n,s){if(t===e&&n===s)return xt;const i=a=>Ej(a,0,1,t,n);return a=>a===0||a===1?a:S0(i(a),e,s)}const w0=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,x0=t=>e=>1-t(1-e),T0=Er(.33,1.53,.69,.99),Bh=x0(T0),E0=w0(Bh),j0=t=>(t*=2)<1?.5*Bh(t):.5*(2-Math.pow(2,-10*(t-1))),zh=t=>1-Math.sin(Math.acos(t)),A0=x0(zh),C0=w0(zh),jj=Er(.42,0,1,1),Aj=Er(0,0,.58,1),O0=Er(.42,0,.58,1),Cj=t=>Array.isArray(t)&&typeof t[0]!="number",R0=t=>Array.isArray(t)&&typeof t[0]=="number",Oj={linear:xt,easeIn:jj,easeInOut:O0,easeOut:Aj,circIn:zh,circInOut:C0,circOut:A0,backIn:Bh,backInOut:E0,backOut:T0,anticipate:j0},Rj=t=>typeof t=="string",mp=t=>{if(R0(t)){Lh(t.length===4);const[e,n,s,i]=t;return Er(e,n,s,i)}else if(Rj(t))return Oj[t];return t},Qr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Nj(t,e){let n=new Set,s=new Set,i=!1,a=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){r.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,d=!1,h=!1)=>{const b=h&&i?n:s;return d&&r.add(u),b.has(u)||b.add(u),u},cancel:u=>{s.delete(u),r.delete(u)},process:u=>{if(o=u,i){a=!0;return}i=!0,[n,s]=[s,n],n.forEach(l),n.clear(),i=!1,a&&(a=!1,c.process(u))}};return c}const Dj=40;function N0(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,r=Qr.reduce((v,w)=>(v[w]=Nj(a),v),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:m,postRender:b}=r,_=()=>{const v=hn.useManualTiming?i.timestamp:performance.now();n=!1,hn.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(v-i.timestamp,Dj),1)),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),m.process(i),b.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(_))},y=()=>{n=!0,s=!0,i.isProcessing||t(_)};return{schedule:Qr.reduce((v,w)=>{const E=r[w];return v[w]=(C,S=!1,T=!1)=>(n||y(),E.schedule(C,S,T)),v},{}),cancel:v=>{for(let w=0;w<Qr.length;w++)r[Qr[w]].cancel(v)},state:i,steps:r}}const{schedule:pe,cancel:Fn,state:Ve,steps:Uc}=N0(typeof requestAnimationFrame<"u"?requestAnimationFrame:xt,!0);let go;function kj(){go=void 0}const tt={now:()=>(go===void 0&&tt.set(Ve.isProcessing||hn.useManualTiming?Ve.timestamp:performance.now()),go),set:t=>{go=t,queueMicrotask(kj)}},D0=t=>e=>typeof e=="string"&&e.startsWith(t),$h=D0("--"),Mj=D0("var(--"),Gh=t=>Mj(t)?Uj.test(t.split("/*")[0].trim()):!1,Uj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Gi={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ja={...Gi,transform:t=>dn(0,1,t)},Zr={...Gi,default:1},Oa=t=>Math.round(t*1e5)/1e5,Hh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Lj(t){return t==null}const Pj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qh=(t,e)=>n=>!!(typeof n=="string"&&Pj.test(n)&&n.startsWith(t)||e&&!Lj(n)&&Object.prototype.hasOwnProperty.call(n,e)),k0=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,a,r,o]=s.match(Hh);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(r),alpha:o!==void 0?parseFloat(o):1}},Vj=t=>dn(0,255,t),Lc={...Gi,transform:t=>Math.round(Vj(t))},us={test:qh("rgb","red"),parse:k0("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Lc.transform(t)+", "+Lc.transform(e)+", "+Lc.transform(n)+", "+Oa(Ja.transform(s))+")"};function Bj(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const ad={test:qh("#"),parse:Bj,transform:us.transform},jr=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sn=jr("deg"),Gt=jr("%"),B=jr("px"),zj=jr("vh"),$j=jr("vw"),pp={...Gt,parse:t=>Gt.parse(t)/100,transform:t=>Gt.transform(t*100)},ai={test:qh("hsl","hue"),parse:k0("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Gt.transform(Oa(e))+", "+Gt.transform(Oa(n))+", "+Oa(Ja.transform(s))+")"},Te={test:t=>us.test(t)||ad.test(t)||ai.test(t),parse:t=>us.test(t)?us.parse(t):ai.test(t)?ai.parse(t):ad.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?us.transform(t):ai.transform(t),getAnimatableNone:t=>{const e=Te.parse(t);return e.alpha=0,Te.transform(e)}},Gj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Hj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Hh))==null?void 0:e.length)||0)+(((n=t.match(Gj))==null?void 0:n.length)||0)>0}const M0="number",U0="color",qj="var",Ij="var(",gp="${}",Fj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wa(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Fj,l=>(Te.test(l)?(s.color.push(a),i.push(U0),n.push(Te.parse(l))):l.startsWith(Ij)?(s.var.push(a),i.push(qj),n.push(l)):(s.number.push(a),i.push(M0),n.push(parseFloat(l))),++a,gp)).split(gp);return{values:n,split:o,indexes:s,types:i}}function L0(t){return Wa(t).values}function P0(t){const{split:e,types:n}=Wa(t),s=e.length;return i=>{let a="";for(let r=0;r<s;r++)if(a+=e[r],i[r]!==void 0){const o=n[r];o===M0?a+=Oa(i[r]):o===U0?a+=Te.transform(i[r]):a+=i[r]}return a}}const Yj=t=>typeof t=="number"?0:Te.test(t)?Te.getAnimatableNone(t):t;function Kj(t){const e=L0(t);return P0(t)(e.map(Yj))}const Yn={test:Hj,parse:L0,createTransformer:P0,getAnimatableNone:Kj};function Pc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Xj({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,a=0,r=0;if(!e)i=a=r=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=Pc(l,o,t+1/3),a=Pc(l,o,t),r=Pc(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(r*255),alpha:s}}function Wo(t,e){return n=>n>0?e:t}const ye=(t,e,n)=>t+(e-t)*n,Vc=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},Qj=[ad,us,ai],Zj=t=>Qj.find(e=>e.test(t));function yp(t){const e=Zj(t);if(!e)return!1;let n=e.parse(t);return e===ai&&(n=Xj(n)),n}const vp=(t,e)=>{const n=yp(t),s=yp(e);if(!n||!s)return Wo(t,e);const i={...n};return a=>(i.red=Vc(n.red,s.red,a),i.green=Vc(n.green,s.green,a),i.blue=Vc(n.blue,s.blue,a),i.alpha=ye(n.alpha,s.alpha,a),us.transform(i))},rd=new Set(["none","hidden"]);function Jj(t,e){return rd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Wj(t,e){return n=>ye(t,e,n)}function Ih(t){return typeof t=="number"?Wj:typeof t=="string"?Gh(t)?Wo:Te.test(t)?vp:nA:Array.isArray(t)?V0:typeof t=="object"?Te.test(t)?vp:eA:Wo}function V0(t,e){const n=[...t],s=n.length,i=t.map((a,r)=>Ih(a)(a,e[r]));return a=>{for(let r=0;r<s;r++)n[r]=i[r](a);return n}}function eA(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=Ih(t[i])(t[i],e[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function tA(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],r=t.indexes[a][s[a]],o=t.values[r]??0;n[i]=o,s[a]++}return n}const nA=(t,e)=>{const n=Yn.createTransformer(e),s=Wa(t),i=Wa(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?rd.has(t)&&!i.values.length||rd.has(e)&&!s.values.length?Jj(t,e):Tr(V0(tA(s,i),i.values),n):Wo(t,e)};function B0(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ye(t,e,n):Ih(t)(t,e)}const sA=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>pe.update(e,n),stop:()=>Fn(e),now:()=>Ve.isProcessing?Ve.timestamp:tt.now()}},z0=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)s+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},el=2e4;function Fh(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<el;)e+=n,s=t.next(e);return e>=el?1/0:e}function iA(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(Fh(s),el);return{type:"keyframes",ease:a=>s.next(i*a).value/e,duration:$t(i)}}const aA=5;function $0(t,e,n){const s=Math.max(e-aA,0);return b0(n-t(s),e-s)}const ve={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bc=.001;function rA({duration:t=ve.duration,bounce:e=ve.bounce,velocity:n=ve.velocity,mass:s=ve.mass}){let i,a,r=1-e;r=dn(ve.minDamping,ve.maxDamping,r),t=dn(ve.minDuration,ve.maxDuration,$t(t)),r<1?(i=c=>{const u=c*r,d=u*t,h=u-n,m=od(c,r),b=Math.exp(-d);return Bc-h/m*b},a=c=>{const d=c*r*t,h=d*n+n,m=Math.pow(r,2)*Math.pow(c,2)*t,b=Math.exp(-d),_=od(Math.pow(c,2),r);return(-i(c)+Bc>0?-1:1)*((h-m)*b)/_}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Bc+u*d},a=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const o=5/t,l=lA(i,a,o);if(t=zt(t),isNaN(l))return{stiffness:ve.stiffness,damping:ve.damping,duration:t};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:r*2*Math.sqrt(s*c),duration:t}}}const oA=12;function lA(t,e,n){let s=n;for(let i=1;i<oA;i++)s=s-t(s)/e(s);return s}function od(t,e){return t*Math.sqrt(1-e*e)}const cA=["duration","bounce"],uA=["stiffness","damping","mass"];function _p(t,e){return e.some(n=>t[n]!==void 0)}function dA(t){let e={velocity:ve.velocity,stiffness:ve.stiffness,damping:ve.damping,mass:ve.mass,isResolvedFromDuration:!1,...t};if(!_p(t,uA)&&_p(t,cA))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,a=2*dn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ve.mass,stiffness:i,damping:a}}else{const n=rA(t);e={...e,...n,mass:ve.mass},e.isResolvedFromDuration=!0}return e}function tl(t=ve.visualDuration,e=ve.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const a=n.keyframes[0],r=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=dA({...n,velocity:-$t(n.velocity||0)}),b=h||0,_=c/(2*Math.sqrt(l*u)),y=r-a,p=$t(Math.sqrt(l/u)),g=Math.abs(y)<5;s||(s=g?ve.restSpeed.granular:ve.restSpeed.default),i||(i=g?ve.restDelta.granular:ve.restDelta.default);let v;if(_<1){const E=od(p,_);v=C=>{const S=Math.exp(-_*p*C);return r-S*((b+_*p*y)/E*Math.sin(E*C)+y*Math.cos(E*C))}}else if(_===1)v=E=>r-Math.exp(-p*E)*(y+(b+p*y)*E);else{const E=p*Math.sqrt(_*_-1);v=C=>{const S=Math.exp(-_*p*C),T=Math.min(E*C,300);return r-S*((b+_*p*y)*Math.sinh(T)+E*y*Math.cosh(T))/E}}const w={calculatedDuration:m&&d||null,next:E=>{const C=v(E);if(m)o.done=E>=d;else{let S=E===0?b:0;_<1&&(S=E===0?zt(b):$0(v,E,C));const T=Math.abs(S)<=s,j=Math.abs(r-C)<=i;o.done=T&&j}return o.value=o.done?r:C,o},toString:()=>{const E=Math.min(Fh(w),el),C=z0(S=>w.next(E*S).value,E,30);return E+"ms "+C},toTransition:()=>{}};return w}tl.applyToOptions=t=>{const e=iA(t,100,tl);return t.ease=e.ease,t.duration=zt(e.duration),t.type="keyframes",t};function ld({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:r,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},m=T=>o!==void 0&&T<o||l!==void 0&&T>l,b=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let _=n*e;const y=d+_,p=r===void 0?y:r(y);p!==y&&(_=p-d);const g=T=>-_*Math.exp(-T/s),v=T=>p+g(T),w=T=>{const j=g(T),R=v(T);h.done=Math.abs(j)<=c,h.value=h.done?p:R};let E,C;const S=T=>{m(h.value)&&(E=T,C=tl({keyframes:[h.value,b(h.value)],velocity:$0(v,T,h.value),damping:i,stiffness:a,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:T=>{let j=!1;return!C&&E===void 0&&(j=!0,w(T),S(T)),E!==void 0&&T>=E?C.next(T-E):(!j&&w(T),h)}}}function hA(t,e,n){const s=[],i=n||hn.mix||B0,a=t.length-1;for(let r=0;r<a;r++){let o=i(t[r],t[r+1]);if(e){const l=Array.isArray(e)?e[r]||xt:e;o=Tr(l,o)}s.push(o)}return s}function fA(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const a=t.length;if(Lh(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const r=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=hA(e,s,i),l=o.length,c=u=>{if(r&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=Za(t[d],t[d+1],u);return o[d](h)};return n?u=>c(dn(t[0],t[a-1],u)):c}function mA(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Za(0,e,s);t.push(ye(n,1,i))}}function pA(t){const e=[0];return mA(e,t.length-1),e}function gA(t,e){return t.map(n=>n*e)}function yA(t,e){return t.map(()=>e||O0).splice(0,t.length-1)}function Ra({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=Cj(s)?s.map(mp):mp(s),a={done:!1,value:e[0]},r=gA(n&&n.length===e.length?n:pA(e),t),o=fA(r,e,{ease:Array.isArray(i)?i:yA(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const vA=t=>t!==null;function Yh(t,{repeat:e,repeatType:n="loop"},s,i=1){const a=t.filter(vA),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const _A={decay:ld,inertia:ld,tween:Ra,keyframes:Ra,spring:tl};function G0(t){typeof t.type=="string"&&(t.type=_A[t.type])}class Kh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const bA=t=>t/100;class Xh extends Kh{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==tt.now()&&this.tick(tt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;G0(e);const{type:n=Ra,repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:r=0}=e;let{keyframes:o}=e;const l=n||Ra;l!==Ra&&typeof o[0]!="number"&&(this.mixKeyframes=Tr(bA,B0(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-r})),c.calculatedDuration===null&&(c.calculatedDuration=Fh(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:a,mirroredGenerator:r,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:m,type:b,onUpdate:_,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const p=this.currentTime-c*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?p<0:p>i;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,w=s;if(d){const T=Math.min(this.currentTime,i)/o;let j=Math.floor(T),R=T%1;!R&&T>=1&&(R=1),R===1&&j--,j=Math.min(j,d+1),!!(j%2)&&(h==="reverse"?(R=1-R,m&&(R-=m/o)):h==="mirror"&&(w=r)),v=dn(0,1,R)*o}const E=g?{done:!1,value:u[0]}:w.next(v);a&&(E.value=a(E.value));let{done:C}=E;!g&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return S&&b!==ld&&(E.value=Yh(u,this.options,y,this.speed)),_&&_(E.value),S&&this.finish(),E}then(e,n){return this.finished.then(e,n)}get duration(){return $t(this.calculatedDuration)}get time(){return $t(this.currentTime)}set time(e){var n;e=zt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=$t(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=sA,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),(a=(i=this.options).onPlay)==null||a.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function SA(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ds=t=>t*180/Math.PI,cd=t=>{const e=ds(Math.atan2(t[1],t[0]));return ud(e)},wA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:cd,rotateZ:cd,skewX:t=>ds(Math.atan(t[1])),skewY:t=>ds(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ud=t=>(t=t%360,t<0&&(t+=360),t),bp=cd,Sp=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wp=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),xA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Sp,scaleY:wp,scale:t=>(Sp(t)+wp(t))/2,rotateX:t=>ud(ds(Math.atan2(t[6],t[5]))),rotateY:t=>ud(ds(Math.atan2(-t[2],t[0]))),rotateZ:bp,rotate:bp,skewX:t=>ds(Math.atan(t[4])),skewY:t=>ds(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function dd(t){return t.includes("scale")?1:0}function hd(t,e){if(!t||t==="none")return dd(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=xA,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=wA,i=o}if(!i)return dd(e);const a=s[e],r=i[1].split(",").map(EA);return typeof a=="function"?a(r):r[a]}const TA=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return hd(n,e)};function EA(t){return parseFloat(t.trim())}const Hi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qi=new Set(Hi),xp=t=>t===Gi||t===B,jA=new Set(["x","y","z"]),AA=Hi.filter(t=>!jA.has(t));function CA(t){const e=[];return AA.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const bs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>hd(e,"x"),y:(t,{transform:e})=>hd(e,"y")};bs.translateX=bs.x;bs.translateY=bs.y;const Ss=new Set;let fd=!1,md=!1,pd=!1;function H0(){if(md){const t=Array.from(Ss).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=CA(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,r])=>{var o;(o=s.getValue(a))==null||o.set(r)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}md=!1,fd=!1,Ss.forEach(t=>t.complete(pd)),Ss.clear()}function q0(){Ss.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(md=!0)})}function OA(){pd=!0,q0(),H0(),pd=!1}class Qh{constructor(e,n,s,i,a,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(Ss.add(this),fd||(fd=!0,pe.read(q0),pe.resolveKeyframes(H0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),r=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&n){const o=s.readValue(n,r);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=r),i&&a===void 0&&i.set(e[0])}SA(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ss.delete(this)}cancel(){this.state==="scheduled"&&(Ss.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const RA=t=>t.startsWith("--");function NA(t,e,n){RA(e)?t.style.setProperty(e,n):t.style[e]=n}const DA=Ph(()=>window.ScrollTimeline!==void 0),kA={};function MA(t,e){const n=Ph(t);return()=>kA[e]??n()}const I0=MA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),da=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Tp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:da([0,.65,.55,1]),circOut:da([.55,0,1,.45]),backIn:da([.31,.01,.66,-.59]),backOut:da([.33,1.53,.69,.99])};function F0(t,e){if(t)return typeof t=="function"?I0()?z0(t,e):"ease-out":R0(t)?da(t):Array.isArray(t)?t.map(n=>F0(n,e)||Tp.easeOut):Tp[t]}function UA(t,e,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:r="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const d=F0(o,i);Array.isArray(d)&&(u.easing=d);const h={delay:s,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:r==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(u,h)}function Y0(t){return typeof t=="function"&&"applyToOptions"in t}function LA({type:t,...e}){return Y0(t)&&I0()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class PA extends Kh{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:a,allowFlatten:r=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=r,this.options=e,Lh(typeof e.type!="string");const c=LA(e);this.animation=UA(n,s,i,c,a),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const u=Yh(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):NA(n,s,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return $t(Number(e))}get time(){return $t(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=zt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&DA()?(this.animation.timeline=e,xt):n(this)}}const K0={anticipate:j0,backInOut:E0,circInOut:C0};function VA(t){return t in K0}function BA(t){typeof t.ease=="string"&&VA(t.ease)&&(t.ease=K0[t.ease])}const Ep=10;class zA extends PA{constructor(e){BA(e),G0(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:a,...r}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new Xh({...r,autoplay:!1}),l=zt(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-Ep).value,o.sample(l).value,Ep),o.stop()}}const jp=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Yn.test(t)||t==="0")&&!t.startsWith("url("));function $A(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function GA(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],r=jp(i,e),o=jp(a,e);return!r||!o?!1:$A(t)||(n==="spring"||Y0(n))&&s}const HA=new Set(["opacity","clipPath","filter","transform"]),qA=Ph(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function IA(t){var u;const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:a,type:r}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return qA()&&n&&HA.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&a!==0&&r!=="inertia"}const FA=40;class YA extends Kh{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:r="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var b;super(),this.stop=()=>{var _,y;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=tt.now();const h={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:r,name:l,motionValue:c,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||Qh;this.keyframeResolver=new m(o,(_,y,p)=>this.onKeyframesResolved(_,y,h,!p),l,c,u),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:a,type:r,velocity:o,delay:l,isHandoff:c,onUpdate:u}=s;this.resolvedAt=tt.now(),GA(e,a,r,o)||((hn.instantAnimations||!l)&&(u==null||u(Yh(e,s,n))),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>FA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},m=!c&&IA(h)?new zA({...h,element:h.motionValue.owner.current}):new Xh(h);m.finished.then(()=>this.notifyFinished()).catch(xt),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),OA()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const KA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XA(t){const e=KA.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function X0(t,e,n=1){const[s,i]=XA(t);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const r=a.trim();return y0(r)?parseFloat(r):r}return Gh(i)?X0(i,e,n+1):i}function Zh(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Q0=new Set(["width","height","top","left","right","bottom",...Hi]),QA={test:t=>t==="auto",parse:t=>t},Z0=t=>e=>e.test(t),J0=[Gi,B,Gt,Sn,$j,zj,QA],Ap=t=>J0.find(Z0(t));function ZA(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||_0(t):!0}const JA=new Set(["brightness","contrast","saturate","opacity"]);function WA(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(Hh)||[];if(!s)return t;const i=n.replace(s,"");let a=JA.has(e)?1:0;return s!==n&&(a*=100),e+"("+a+i+")"}const eC=/\b([a-z-]*)\(.*?\)/gu,gd={...Yn,getAnimatableNone:t=>{const e=t.match(eC);return e?e.map(WA).join(" "):t}},Cp={...Gi,transform:Math.round},tC={rotate:Sn,rotateX:Sn,rotateY:Sn,rotateZ:Sn,scale:Zr,scaleX:Zr,scaleY:Zr,scaleZ:Zr,skew:Sn,skewX:Sn,skewY:Sn,distance:B,translateX:B,translateY:B,translateZ:B,x:B,y:B,z:B,perspective:B,transformPerspective:B,opacity:Ja,originX:pp,originY:pp,originZ:B},Jh={borderWidth:B,borderTopWidth:B,borderRightWidth:B,borderBottomWidth:B,borderLeftWidth:B,borderRadius:B,radius:B,borderTopLeftRadius:B,borderTopRightRadius:B,borderBottomRightRadius:B,borderBottomLeftRadius:B,width:B,maxWidth:B,height:B,maxHeight:B,top:B,right:B,bottom:B,left:B,padding:B,paddingTop:B,paddingRight:B,paddingBottom:B,paddingLeft:B,margin:B,marginTop:B,marginRight:B,marginBottom:B,marginLeft:B,backgroundPositionX:B,backgroundPositionY:B,...tC,zIndex:Cp,fillOpacity:Ja,strokeOpacity:Ja,numOctaves:Cp},nC={...Jh,color:Te,backgroundColor:Te,outlineColor:Te,fill:Te,stroke:Te,borderColor:Te,borderTopColor:Te,borderRightColor:Te,borderBottomColor:Te,borderLeftColor:Te,filter:gd,WebkitFilter:gd},W0=t=>nC[t];function eb(t,e){let n=W0(t);return n!==gd&&(n=Yn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sC=new Set(["auto","none","0"]);function iC(t,e,n){let s=0,i;for(;s<t.length&&!i;){const a=t[s];typeof a=="string"&&!sC.has(a)&&Wa(a).values.length&&(i=t[s]),s++}if(i&&n)for(const a of e)t[a]=eb(n,i)}class aC extends Qh{constructor(e,n,s,i,a){super(e,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Gh(c))){const u=X0(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Q0.has(s)||e.length!==2)return;const[i,a]=e,r=Ap(i),o=Ap(a);if(r!==o)if(xp(r)&&xp(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else bs[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||ZA(e[i]))&&s.push(i);s.length&&iC(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bs[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,r=s[a];s[a]=bs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=r),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function rC(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=(n==null?void 0:n[t])??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const tb=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function nb(t){return v0(t)&&"offsetHeight"in t}const Op=30,oC=t=>!isNaN(parseFloat(t));class lC{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{var r,o;const a=tt.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=tt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=oC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Vh);const s=this.events[e].add(n);return e==="change"?()=>{s(),pe.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=tt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Op)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Op);return b0(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ri(t,e){return new lC(t,e)}const{schedule:Wh}=N0(queueMicrotask,!1),Ct={x:!1,y:!1};function sb(){return Ct.x||Ct.y}function cC(t){return t==="x"||t==="y"?Ct[t]?null:(Ct[t]=!0,()=>{Ct[t]=!1}):Ct.x||Ct.y?null:(Ct.x=Ct.y=!0,()=>{Ct.x=Ct.y=!1})}function ib(t,e){const n=rC(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function Rp(t){return!(t.pointerType==="touch"||sb())}function uC(t,e,n={}){const[s,i,a]=ib(t,n),r=o=>{if(!Rp(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const u=d=>{Rp(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return s.forEach(o=>{o.addEventListener("pointerenter",r,i)}),a}const ab=(t,e)=>e?t===e?!0:ab(t,e.parentElement):!1,ef=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,dC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hC(t){return dC.has(t.tagName)||t.tabIndex!==-1}const yo=new WeakSet;function Np(t){return e=>{e.key==="Enter"&&t(e)}}function zc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const fC=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Np(()=>{if(yo.has(n))return;zc(n,"down");const i=Np(()=>{zc(n,"up")}),a=()=>zc(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Dp(t){return ef(t)&&!sb()}function mC(t,e,n={}){const[s,i,a]=ib(t,n),r=o=>{const l=o.currentTarget;if(!Dp(o))return;yo.add(l);const c=e(l,o),u=(m,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),yo.has(l)&&yo.delete(l),Dp(m)&&typeof c=="function"&&c(m,{success:b})},d=m=>{u(m,l===window||l===document||n.useGlobalTarget||ab(l,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return s.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",r,i),nb(o)&&(o.addEventListener("focus",c=>fC(c,i)),!hC(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function rb(t){return v0(t)&&"ownerSVGElement"in t}function pC(t){return rb(t)&&t.tagName==="svg"}const Ie=t=>!!(t&&t.getVelocity),gC=[...J0,Te,Yn],yC=t=>gC.find(Z0(t)),tf=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class vC extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=nb(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _C({children:t,isPresent:e,anchorX:n,root:s}){const i=x.useId(),a=x.useRef(null),r=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=x.useContext(tf);return x.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:d,right:h}=r.current;if(e||!a.current||!l||!c)return;const m=n==="left"?`left: ${d}`:`right: ${h}`;a.current.dataset.motionPopId=i;const b=document.createElement("style");o&&(b.nonce=o);const _=s??document.head;return _.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{_.contains(b)&&_.removeChild(b)}},[e]),f.jsx(vC,{isPresent:e,childRef:a,sizeRef:r,children:x.cloneElement(t,{ref:a})})}const bC=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:r,anchorX:o,root:l})=>{const c=Dh(SC),u=x.useId();let d=!0,h=x.useMemo(()=>(d=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:m=>{c.set(m,!0);for(const b of c.values())if(!b)return;s&&s()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[n,c,s]);return a&&d&&(h={...h}),x.useMemo(()=>{c.forEach((m,b)=>c.set(b,!1))},[n]),x.useEffect(()=>{!n&&!c.size&&s&&s()},[n]),r==="popLayout"&&(t=f.jsx(_C,{isPresent:n,anchorX:o,root:l,children:t})),f.jsx(Ll.Provider,{value:h,children:t})};function SC(){return new Map}function ob(t=!0){const e=x.useContext(Ll);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,a=x.useId();x.useEffect(()=>{if(t)return i(a)},[t]);const r=x.useCallback(()=>t&&s&&s(a),[a,s,t]);return!n&&s?[!1,r]:[!0]}const Jr=t=>t.key||"";function kp(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const Wr=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync",propagate:r=!1,anchorX:o="left",root:l})=>{const[c,u]=ob(r),d=x.useMemo(()=>kp(t),[t]),h=r&&!c?[]:d.map(Jr),m=x.useRef(!0),b=x.useRef(d),_=Dh(()=>new Map),[y,p]=x.useState(d),[g,v]=x.useState(d);g0(()=>{m.current=!1,b.current=d;for(let C=0;C<g.length;C++){const S=Jr(g[C]);h.includes(S)?_.delete(S):_.get(S)!==!0&&_.set(S,!1)}},[g,h.length,h.join("-")]);const w=[];if(d!==y){let C=[...d];for(let S=0;S<g.length;S++){const T=g[S],j=Jr(T);h.includes(j)||(C.splice(S,0,T),w.push(T))}return a==="wait"&&w.length&&(C=w),v(kp(C)),p(d),null}const{forceRender:E}=x.useContext(Nh);return f.jsx(f.Fragment,{children:g.map(C=>{const S=Jr(C),T=r&&!c?!1:d===g||h.includes(S),j=()=>{if(_.has(S))_.set(S,!0);else return;let R=!0;_.forEach(U=>{U||(R=!1)}),R&&(E==null||E(),v(b.current),r&&(u==null||u()),s&&s())};return f.jsx(bC,{isPresent:T,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:l,onExitComplete:T?void 0:j,anchorX:o,children:C},S)})})},lb=x.createContext({strict:!1}),Mp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ni={};for(const t in Mp)Ni[t]={isEnabled:e=>Mp[t].some(n=>!!e[n])};function wC(t){for(const e in t)Ni[e]={...Ni[e],...t[e]}}const xC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||xC.has(t)}let cb=t=>!nl(t);function TC(t){typeof t=="function"&&(cb=e=>e.startsWith("on")?!nl(e):t(e))}try{TC(require("@emotion/is-prop-valid").default)}catch{}function EC(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(cb(i)||n===!0&&nl(i)||!e&&!nl(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Pl=x.createContext({});function Vl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function er(t){return typeof t=="string"||Array.isArray(t)}const nf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sf=["initial",...nf];function Bl(t){return Vl(t.animate)||sf.some(e=>er(t[e]))}function ub(t){return!!(Bl(t)||t.variants)}function jC(t,e){if(Bl(t)){const{initial:n,animate:s}=t;return{initial:n===!1||er(n)?n:void 0,animate:er(s)?s:void 0}}return t.inherit!==!1?e:{}}function AC(t){const{initial:e,animate:n}=jC(t,x.useContext(Pl));return x.useMemo(()=>({initial:e,animate:n}),[Up(e),Up(n)])}function Up(t){return Array.isArray(t)?t.join(" "):t}const tr={};function CC(t){for(const e in t)tr[e]=t[e],$h(e)&&(tr[e].isCSSVariable=!0)}function db(t,{layout:e,layoutId:n}){return qi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!tr[t]||t==="opacity")}const OC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},RC=Hi.length;function NC(t,e,n){let s="",i=!0;for(let a=0;a<RC;a++){const r=Hi[a],o=t[r];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(r.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=tb(o,Jh[r]);if(!l){i=!1;const u=OC[r]||r;s+=`${u}(${c}) `}n&&(e[r]=c)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function af(t,e,n){const{style:s,vars:i,transformOrigin:a}=t;let r=!1,o=!1;for(const l in e){const c=e[l];if(qi.has(l)){r=!0;continue}else if($h(l)){i[l]=c;continue}else{const u=tb(c,Jh[l]);l.startsWith("origin")?(o=!0,a[l]=u):s[l]=u}}if(e.transform||(r||n?s.transform=NC(e,t.transform,n):s.transform&&(s.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=a;s.transformOrigin=`${l} ${c} ${u}`}}const rf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hb(t,e,n){for(const s in e)!Ie(e[s])&&!db(s,n)&&(t[s]=e[s])}function DC({transformTemplate:t},e){return x.useMemo(()=>{const n=rf();return af(n,e,t),Object.assign({},n.vars,n.style)},[e])}function kC(t,e){const n=t.style||{},s={};return hb(s,n,t),Object.assign(s,DC(t,e)),s}function MC(t,e){const n={},s=kC(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const UC={offset:"stroke-dashoffset",array:"stroke-dasharray"},LC={offset:"strokeDashoffset",array:"strokeDasharray"};function PC(t,e,n=1,s=0,i=!0){t.pathLength=1;const a=i?UC:LC;t[a.offset]=B.transform(-s);const r=B.transform(e),o=B.transform(n);t[a.array]=`${r} ${o}`}function fb(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:a=1,pathOffset:r=0,...o},l,c,u){if(af(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),s!==void 0&&(d.scale=s),i!==void 0&&PC(d,i,a,r,!1)}const mb=()=>({...rf(),attrs:{}}),pb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function VC(t,e,n,s){const i=x.useMemo(()=>{const a=mb();return fb(a,e,pb(s),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};hb(a,t.style,t),i.style={...a,...i.style}}return i}const BC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function of(t){return typeof t!="string"||t.includes("-")?!1:!!(BC.indexOf(t)>-1||/[A-Z]/u.test(t))}function zC(t,e,n,{latestValues:s},i,a=!1){const o=(of(t)?VC:MC)(e,s,i,t),l=EC(e,typeof t=="string",a),c=t!==x.Fragment?{...l,...o,ref:n}:{},{children:u}=e,d=x.useMemo(()=>Ie(u)?u.get():u,[u]);return x.createElement(t,{...c,children:d})}function Lp(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function lf(t,e,n,s){if(typeof e=="function"){const[i,a]=Lp(s);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Lp(s);e=e(n!==void 0?n:t.custom,i,a)}return e}function vo(t){return Ie(t)?t.get():t}function $C({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:GC(n,s,i,t),renderState:e()}}function GC(t,e,n,s){const i={},a=s(t,{});for(const h in a)i[h]=vo(a[h]);let{initial:r,animate:o}=t;const l=Bl(t),c=ub(t);e&&c&&!l&&t.inherit!==!1&&(r===void 0&&(r=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||r===!1;const d=u?o:r;if(d&&typeof d!="boolean"&&!Vl(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const b=lf(t,h[m]);if(b){const{transitionEnd:_,transition:y,...p}=b;for(const g in p){let v=p[g];if(Array.isArray(v)){const w=u?v.length-1:0;v=v[w]}v!==null&&(i[g]=v)}for(const g in _)i[g]=_[g]}}}return i}const gb=t=>(e,n)=>{const s=x.useContext(Pl),i=x.useContext(Ll),a=()=>$C(t,e,s,i);return n?a():Dh(a)};function cf(t,e,n){var a;const{style:s}=t,i={};for(const r in s)(Ie(s[r])||e.style&&Ie(e.style[r])||db(r,t)||((a=n==null?void 0:n.getValue(r))==null?void 0:a.liveStyle)!==void 0)&&(i[r]=s[r]);return i}const HC=gb({scrapeMotionValuesFromProps:cf,createRenderState:rf});function yb(t,e,n){const s=cf(t,e,n);for(const i in t)if(Ie(t[i])||Ie(e[i])){const a=Hi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=t[i]}return s}const qC=gb({scrapeMotionValuesFromProps:yb,createRenderState:mb}),IC=Symbol.for("motionComponentSymbol");function ri(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function FC(t,e,n){return x.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):ri(n)&&(n.current=s))},[e])}const uf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YC="framerAppearId",vb="data-"+uf(YC),_b=x.createContext({});function KC(t,e,n,s,i){var _,y;const{visualElement:a}=x.useContext(Pl),r=x.useContext(lb),o=x.useContext(Ll),l=x.useContext(tf).reducedMotion,c=x.useRef(null);s=s||r.renderer,!c.current&&s&&(c.current=s(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=x.useContext(_b);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&XC(c.current,n,i,d);const h=x.useRef(!1);x.useInsertionEffect(()=>{u&&h.current&&u.update(n,o)});const m=n[vb],b=x.useRef(!!m&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,m))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,m)));return g0(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),b.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(!b.current&&u.animationState&&u.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)==null||p.call(window,m)}),b.current=!1))}),u}function XC(t,e,n,s){const{layoutId:i,layout:a,drag:r,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:bb(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!r||o&&ri(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:u,layoutScroll:l,layoutRoot:c})}function bb(t){if(t)return t.options.allowProjection!==!1?t.projection:bb(t.parent)}function $c(t,{forwardMotionProps:e=!1}={},n,s){n&&wC(n);const i=of(t)?qC:HC;function a(o,l){let c;const u={...x.useContext(tf),...o,layoutId:QC(o)},{isStatic:d}=u,h=AC(o),m=i(o,d);if(!d&&kh){ZC();const b=JC(u);c=b.MeasureLayout,h.visualElement=KC(t,m,u,s,b.ProjectionNode)}return f.jsxs(Pl.Provider,{value:h,children:[c&&h.visualElement?f.jsx(c,{visualElement:h.visualElement,...u}):null,zC(t,o,FC(m,h.visualElement,l),m,d,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const r=x.forwardRef(a);return r[IC]=t,r}function QC({layoutId:t}){const e=x.useContext(Nh).id;return e&&t!==void 0?e+"-"+t:t}function ZC(t,e){x.useContext(lb).strict}function JC(t){const{drag:e,layout:n}=Ni;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function WC(t,e){if(typeof Proxy>"u")return $c;const n=new Map,s=(a,r)=>$c(a,r,t,e),i=(a,r)=>s(a,r);return new Proxy(i,{get:(a,r)=>r==="create"?s:(n.has(r)||n.set(r,$c(r,void 0,t,e)),n.get(r))})}function Sb({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function eO({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tO(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Gc(t){return t===void 0||t===1}function yd({scale:t,scaleX:e,scaleY:n}){return!Gc(t)||!Gc(e)||!Gc(n)}function os(t){return yd(t)||wb(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wb(t){return Pp(t.x)||Pp(t.y)}function Pp(t){return t&&t!=="0%"}function sl(t,e,n){const s=t-n,i=e*s;return n+i}function Vp(t,e,n,s,i){return i!==void 0&&(t=sl(t,i,s)),sl(t,n,s)+e}function vd(t,e=0,n=1,s,i){t.min=Vp(t.min,e,n,s,i),t.max=Vp(t.max,e,n,s,i)}function xb(t,{x:e,y:n}){vd(t.x,e.translate,e.scale,e.originPoint),vd(t.y,n.translate,n.scale,n.originPoint)}const Bp=.999999999999,zp=1.0000000000001;function nO(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,r;for(let o=0;o<i;o++){a=n[o],r=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&li(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),r&&(e.x*=r.x.scale,e.y*=r.y.scale,xb(t,r)),s&&os(a.latestValues)&&li(t,a.latestValues))}e.x<zp&&e.x>Bp&&(e.x=1),e.y<zp&&e.y>Bp&&(e.y=1)}function oi(t,e){t.min=t.min+e,t.max=t.max+e}function $p(t,e,n,s,i=.5){const a=ye(t.min,t.max,i);vd(t,e,n,a,s)}function li(t,e){$p(t.x,e.x,e.scaleX,e.scale,e.originX),$p(t.y,e.y,e.scaleY,e.scale,e.originY)}function Tb(t,e){return Sb(tO(t.getBoundingClientRect(),e))}function sO(t,e,n){const s=Tb(t,n),{scroll:i}=e;return i&&(oi(s.x,i.offset.x),oi(s.y,i.offset.y)),s}const Gp=()=>({translate:0,scale:1,origin:0,originPoint:0}),ci=()=>({x:Gp(),y:Gp()}),Hp=()=>({min:0,max:0}),we=()=>({x:Hp(),y:Hp()}),_d={current:null},Eb={current:!1};function iO(){if(Eb.current=!0,!!kh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_d.current=t.matches;t.addEventListener("change",e),e()}else _d.current=!1}const aO=new WeakMap;function rO(t,e,n){for(const s in e){const i=e[s],a=n[s];if(Ie(i))t.addValue(s,i);else if(Ie(a))t.addValue(s,Ri(i,{owner:t}));else if(a!==i)if(t.hasValue(s)){const r=t.getValue(s);r.liveStyle===!0?r.jump(i):r.hasAnimated||r.set(i)}else{const r=t.getStaticValue(s);t.addValue(s,Ri(r!==void 0?r:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const qp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class oO{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=tt.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,pe.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=r;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Bl(n),this.isVariantNode=ub(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const m=d[h];l[h]!==void 0&&Ie(m)&&m.set(l[h],!1)}}mount(e){this.current=e,aO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Eb.current||iO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_d.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Fn(this.notifyUpdate),Fn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=qi.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&pe.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ni){const n=Ni[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):we()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<qp.length;s++){const i=qp[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,r=e[a];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=rO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Ri(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(y0(s)||_0(s))?s=parseFloat(s):!yC(s)&&Yn.test(n)&&(s=eb(e,n)),this.setBaseTarget(e,Ie(s)?s.get():s)),Ie(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const r=lf(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);r&&(s=r[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ie(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Vh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Wh.render(this.render)}}class jb extends oO{constructor(){super(...arguments),this.KeyframeResolver=aC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ie(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ab(t,{style:e,vars:n},s,i){const a=t.style;let r;for(r in e)a[r]=e[r];i==null||i.applyProjectionStyles(a,s);for(r in n)a.setProperty(r,n[r])}function lO(t){return window.getComputedStyle(t)}class cO extends jb{constructor(){super(...arguments),this.type="html",this.renderInstance=Ab}readValueFromInstance(e,n){var s;if(qi.has(n))return(s=this.projection)!=null&&s.isProjecting?dd(n):TA(e,n);{const i=lO(e),a=($h(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Tb(e,n)}build(e,n,s){af(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return cf(e,n,s)}}const Cb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uO(t,e,n,s){Ab(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(Cb.has(i)?i:uf(i),e.attrs[i])}class dO extends jb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=we}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(qi.has(n)){const s=W0(n);return s&&s.default||0}return n=Cb.has(n)?n:uf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return yb(e,n,s)}build(e,n,s){fb(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){uO(e,n,s,i)}mount(e){this.isSVGTag=pb(e.tagName),super.mount(e)}}const hO=(t,e)=>of(t)?new dO(e):new cO(e,{allowProjection:t!==x.Fragment});function nr(t,e,n){const s=t.getProps();return lf(s,e,n!==void 0?n:s.custom,t)}const bd=t=>Array.isArray(t);function fO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ri(n))}function mO(t){return bd(t)?t[t.length-1]||0:t}function pO(t,e){const n=nr(t,e);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const r in a){const o=mO(a[r]);fO(t,r,o)}}function gO(t){return!!(Ie(t)&&t.add)}function Sd(t,e){const n=t.getValue("willChange");if(gO(n))return n.add(e);if(!n&&hn.WillChange){const s=new hn.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Ob(t){return t.props[vb]}const yO=t=>t!==null;function vO(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(yO),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const _O={type:"spring",stiffness:500,damping:25,restSpeed:10},bO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SO={type:"keyframes",duration:.8},wO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xO=(t,{keyframes:e})=>e.length>2?SO:qi.has(t)?t.startsWith("scale")?bO(e[1]):_O:wO;function TO({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:r,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const df=(t,e,n,s={},i,a)=>r=>{const o=Zh(s,t)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c=c-zt(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{r(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};TO(o)||Object.assign(u,xO(t,u)),u.duration&&(u.duration=zt(u.duration)),u.repeatDelay&&(u.repeatDelay=zt(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),(hn.instantAnimations||hn.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!a&&e.get()!==void 0){const h=vO(u.keyframes,o);if(h!==void 0){pe.update(()=>{u.onUpdate(h),u.onComplete()});return}}return o.isSync?new Xh(u):new YA(u)};function EO({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Rb(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:r,...o}=e;s&&(a=s);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in o){const d=t.getValue(u,t.latestValues[u]??null),h=o[u];if(h===void 0||c&&EO(c,u))continue;const m={delay:n,...Zh(a||{},u)},b=d.get();if(b!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===b&&!m.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const p=Ob(t);if(p){const g=window.MotionHandoffAnimation(p,u,pe);g!==null&&(m.startTime=g,_=!0)}}Sd(t,u),d.start(df(u,d,h,t.shouldReduceMotion&&Q0.has(u)?{type:!1}:m,t,_));const y=d.animation;y&&l.push(y)}return r&&Promise.all(l).then(()=>{pe.update(()=>{r&&pO(t,r)})}),l}function wd(t,e,n={}){var l;const s=nr(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const a=s?()=>Promise.all(Rb(t,s,n)):()=>Promise.resolve(),r=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return jO(t,e,c,u,d,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,r]:[r,a];return c().then(()=>u())}else return Promise.all([a(),r(n.delay)])}function jO(t,e,n=0,s=0,i=0,a=1,r){const o=[],l=t.variantChildren.size,c=(l-1)*i,u=typeof s=="function",d=u?h=>s(h,l):a===1?(h=0)=>h*i:(h=0)=>c-h*i;return Array.from(t.variantChildren).sort(AO).forEach((h,m)=>{h.notify("AnimationStart",e),o.push(wd(h,e,{...r,delay:n+(u?0:s)+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function AO(t,e){return t.sortNodePosition(e)}function CO(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(a=>wd(t,a,n));s=Promise.all(i)}else if(typeof e=="string")s=wd(t,e,n);else{const i=typeof e=="function"?nr(t,e,n.custom):e;s=Promise.all(Rb(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Nb(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const OO=sf.length;function Db(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Db(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<OO;n++){const s=sf[n],i=t.props[s];(er(i)||i===!1)&&(e[s]=i)}return e}const RO=[...nf].reverse(),NO=nf.length;function DO(t){return e=>Promise.all(e.map(({animation:n,options:s})=>CO(t,n,s)))}function kO(t){let e=DO(t),n=Ip(),s=!0;const i=l=>(c,u)=>{var h;const d=nr(t,u,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:b,..._}=d;c={...c,..._,...b}}return c};function a(l){e=l(t)}function r(l){const{props:c}=t,u=Db(t.parent)||{},d=[],h=new Set;let m={},b=1/0;for(let y=0;y<NO;y++){const p=RO[y],g=n[p],v=c[p]!==void 0?c[p]:u[p],w=er(v),E=p===l?g.isActive:null;E===!1&&(b=y);let C=v===u[p]&&v!==c[p]&&w;if(C&&s&&t.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...m},!g.isActive&&E===null||!v&&!g.prevProp||Vl(v)||typeof v=="boolean")continue;const S=MO(g.prevProp,v);let T=S||p===l&&g.isActive&&!C&&w||y>b&&w,j=!1;const R=Array.isArray(v)?v:[v];let U=R.reduce(i(p),{});E===!1&&(U={});const{prevResolvedValues:P={}}=g,L={...P,...U},V=D=>{T=!0,h.has(D)&&(j=!0,h.delete(D)),g.needsAnimating[D]=!0;const M=t.getValue(D);M&&(M.liveStyle=!1)};for(const D in L){const M=U[D],K=P[D];if(m.hasOwnProperty(D))continue;let q=!1;bd(M)&&bd(K)?q=!Nb(M,K):q=M!==K,q?M!=null?V(D):h.add(D):M!==void 0&&h.has(D)?V(D):g.protectedKeys[D]=!0}g.prevProp=v,g.prevResolvedValues=U,g.isActive&&(m={...m,...U}),s&&t.blockInitialAnimation&&(T=!1),T&&(!(C&&S)||j)&&d.push(...R.map(D=>({animation:D,options:{type:p}})))}if(h.size){const y={};if(typeof c.initial!="boolean"){const p=nr(t,Array.isArray(c.initial)?c.initial[0]:c.initial);p&&p.transition&&(y.transition=p.transition)}h.forEach(p=>{const g=t.getBaseTarget(p),v=t.getValue(p);v&&(v.liveStyle=!0),y[p]=g??null}),d.push({animation:y})}let _=!!d.length;return s&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),s=!1,_?e(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const u=r(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:r,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Ip(),s=!0}}}function MO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Nb(e,t):!1}function ns(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ip(){return{animate:ns(!0),whileInView:ns(),whileHover:ns(),whileTap:ns(),whileDrag:ns(),whileFocus:ns(),exit:ns()}}class Jn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class UO extends Jn{constructor(e){super(e),e.animationState||(e.animationState=kO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let LO=0;class PO extends Jn{constructor(){super(...arguments),this.id=LO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const VO={animation:{Feature:UO},exit:{Feature:PO}};function sr(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Ar(t){return{point:{x:t.pageX,y:t.pageY}}}const BO=t=>e=>ef(e)&&t(e,Ar(e));function Na(t,e,n,s){return sr(t,e,BO(n),s)}const kb=1e-4,zO=1-kb,$O=1+kb,Mb=.01,GO=0-Mb,HO=0+Mb;function Ke(t){return t.max-t.min}function qO(t,e,n){return Math.abs(t-e)<=n}function Fp(t,e,n,s=.5){t.origin=s,t.originPoint=ye(e.min,e.max,t.origin),t.scale=Ke(n)/Ke(e),t.translate=ye(n.min,n.max,t.origin)-t.originPoint,(t.scale>=zO&&t.scale<=$O||isNaN(t.scale))&&(t.scale=1),(t.translate>=GO&&t.translate<=HO||isNaN(t.translate))&&(t.translate=0)}function Da(t,e,n,s){Fp(t.x,e.x,n.x,s?s.originX:void 0),Fp(t.y,e.y,n.y,s?s.originY:void 0)}function Yp(t,e,n){t.min=n.min+e.min,t.max=t.min+Ke(e)}function IO(t,e,n){Yp(t.x,e.x,n.x),Yp(t.y,e.y,n.y)}function Kp(t,e,n){t.min=e.min-n.min,t.max=t.min+Ke(e)}function ka(t,e,n){Kp(t.x,e.x,n.x),Kp(t.y,e.y,n.y)}function pt(t){return[t("x"),t("y")]}const Ub=({current:t})=>t?t.ownerDocument.defaultView:null,Xp=(t,e)=>Math.abs(t-e);function FO(t,e){const n=Xp(t.x,e.x),s=Xp(t.y,e.y);return Math.sqrt(n**2+s**2)}class Lb{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=qc(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,b=FO(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!b)return;const{point:_}=h,{timestamp:y}=Ve;this.history.push({..._,timestamp:y});const{onStart:p,onMove:g}=this.handlers;m||(p&&p(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Hc(m,this.transformPagePoint),pe.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:b,onSessionEnd:_,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=qc(h.type==="pointercancel"?this.lastMoveEventInfo:Hc(m,this.transformPagePoint),this.history);this.startEvent&&b&&b(h,p),_&&_(h,p)},!ef(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=i||window;const o=Ar(e),l=Hc(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ve;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,qc(l,this.history)),this.removeListeners=Tr(Na(this.contextWindow,"pointermove",this.handlePointerMove),Na(this.contextWindow,"pointerup",this.handlePointerUp),Na(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fn(this.updatePoint)}}function Hc(t,e){return e?{point:e(t.point)}:t}function Qp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qc({point:t},e){return{point:t,delta:Qp(t,Pb(e)),offset:Qp(t,YO(e)),velocity:KO(e,.1)}}function YO(t){return t[0]}function Pb(t){return t[t.length-1]}function KO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=Pb(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>zt(e)));)n--;if(!s)return{x:0,y:0};const a=$t(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const r={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function XO(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?ye(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?ye(n,t,s.max):Math.min(t,n)),t}function Zp(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function QO(t,{top:e,left:n,bottom:s,right:i}){return{x:Zp(t.x,n,i),y:Zp(t.y,e,s)}}function Jp(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function ZO(t,e){return{x:Jp(t.x,e.x),y:Jp(t.y,e.y)}}function JO(t,e){let n=.5;const s=Ke(t),i=Ke(e);return i>s?n=Za(e.min,e.max-s,t.min):s>i&&(n=Za(t.min,t.max-i,e.min)),dn(0,1,n)}function WO(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const xd=.35;function eR(t=xd){return t===!1?t=0:t===!0&&(t=xd),{x:Wp(t,"left","right"),y:Wp(t,"top","bottom")}}function Wp(t,e,n){return{min:eg(t,e),max:eg(t,n)}}function eg(t,e){return typeof t=="number"?t:t[e]||0}const tR=new WeakMap;class nR{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=we(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ar(d).point)},r=(d,h)=>{const{drag:m,dragPropagation:b,onDragStart:_}=this.getProps();if(m&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cC(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pt(p=>{let g=this.getAxisMotionValue(p).get()||0;if(Gt.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[p];w&&(g=Ke(w)*(parseFloat(g)/100))}}this.originPoint[p]=g}),_&&pe.postRender(()=>_(d,h)),Sd(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:b,onDirectionLock:_,onDrag:y}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:p}=h;if(b&&this.currentDirection===null){this.currentDirection=sR(p),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,p),this.updateAxis("y",h.point,p),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>pt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Lb(e,{onSessionStart:a,onStart:r,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:s,contextWindow:Ub(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!s)return;const{velocity:r}=i;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&pe.postRender(()=>o(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!eo(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let r=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(r=XO(r,this.constraints[e],this.elastic[e])),a.set(r)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&ri(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=QO(s.layoutBox,e):this.constraints=!1,this.elastic=eR(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&pt(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=WO(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ri(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=sO(s,i.root,this.visualElement.getTransformPagePoint());let r=ZO(i.layout.layoutBox,a);if(n){const o=n(eO(r));this.hasMutatedConstraints=!!o,o&&(r=Sb(o))}return r}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:r,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=pt(u=>{if(!eo(u,n,this.currentDirection))return;let d=l&&l[u]||{};r&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,b={type:"inertia",velocity:s?e[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(u,b)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Sd(this.visualElement,e),s.start(df(e,s,0,n,this.visualElement,!1))}stopAnimation(){pt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){pt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){pt(n=>{const{drag:s}=this.getProps();if(!eo(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:r,max:o}=i.layout.layoutBox[n];a.set(e[n]-ye(r,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!ri(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};pt(r=>{const o=this.getAxisMotionValue(r);if(o&&this.constraints!==!1){const l=o.get();i[r]=JO({min:l,max:l},this.constraints[r])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),pt(r=>{if(!eo(r,e,null))return;const o=this.getAxisMotionValue(r),{min:l,max:c}=this.constraints[r];o.set(ye(l,c,i[r]))})}addListeners(){if(!this.visualElement.current)return;tR.set(this.visualElement,this);const e=this.visualElement.current,n=Na(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();ri(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),pe.read(s);const r=sr(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(pt(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{r(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:r=xd,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:r,dragMomentum:o}}}function eo(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sR(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iR extends Jn{constructor(e){super(e),this.removeGroupControls=xt,this.removeListeners=xt,this.controls=new nR(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xt}unmount(){this.removeGroupControls(),this.removeListeners()}}const tg=t=>(e,n)=>{t&&pe.postRender(()=>t(e,n))};class aR extends Jn{constructor(){super(...arguments),this.removePointerDownListener=xt}onPointerDown(e){this.session=new Lb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ub(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:tg(e),onStart:tg(n),onMove:s,onEnd:(a,r)=>{delete this.session,i&&pe.postRender(()=>i(a,r))}}}mount(){this.removePointerDownListener=Na(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _o={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ng(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(B.test(t))t=parseFloat(t);else return t;const n=ng(t,e.target.x),s=ng(t,e.target.y);return`${n}% ${s}%`}},rR={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Yn.parse(t);if(i.length>5)return s;const a=Yn.createTransformer(t),r=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+r]/=o,i[1+r]/=l;const c=ye(o,l,.5);return typeof i[2+r]=="number"&&(i[2+r]/=c),typeof i[3+r]=="number"&&(i[3+r]/=c),a(i)}};let sg=!1;class oR extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=e;CC(lR),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),sg&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),_o.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,{projection:r}=s;return r&&(r.isPresent=a,sg=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?r.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?r.promote():r.relegate()||pe.postRender(()=>{const o=r.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Wh.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Vb(t){const[e,n]=ob(),s=x.useContext(Nh);return f.jsx(oR,{...t,layoutGroup:s,switchLayoutGroup:x.useContext(_b),isPresent:e,safeToRemove:n})}const lR={borderRadius:{...sa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sa,borderTopRightRadius:sa,borderBottomLeftRadius:sa,borderBottomRightRadius:sa,boxShadow:rR};function cR(t,e,n){const s=Ie(t)?t:Ri(t);return s.start(df("",s,e,n)),s.animation}const uR=(t,e)=>t.depth-e.depth;class dR{constructor(){this.children=[],this.isDirty=!1}add(e){Mh(this.children,e),this.isDirty=!0}remove(e){Uh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uR),this.isDirty=!1,this.children.forEach(e)}}function hR(t,e){const n=tt.now(),s=({timestamp:i})=>{const a=i-n;a>=e&&(Fn(s),t(a-e))};return pe.setup(s,!0),()=>Fn(s)}const Bb=["TopLeft","TopRight","BottomLeft","BottomRight"],fR=Bb.length,ig=t=>typeof t=="string"?parseFloat(t):t,ag=t=>typeof t=="number"||B.test(t);function mR(t,e,n,s,i,a){i?(t.opacity=ye(0,n.opacity??1,pR(s)),t.opacityExit=ye(e.opacity??1,0,gR(s))):a&&(t.opacity=ye(e.opacity??1,n.opacity??1,s));for(let r=0;r<fR;r++){const o=`border${Bb[r]}Radius`;let l=rg(e,o),c=rg(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||ag(l)===ag(c)?(t[o]=Math.max(ye(ig(l),ig(c),s),0),(Gt.test(c)||Gt.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=ye(e.rotate||0,n.rotate||0,s))}function rg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pR=zb(0,.5,A0),gR=zb(.5,.95,xt);function zb(t,e,n){return s=>s<t?0:s>e?1:n(Za(t,e,s))}function og(t,e){t.min=e.min,t.max=e.max}function mt(t,e){og(t.x,e.x),og(t.y,e.y)}function lg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function cg(t,e,n,s,i){return t-=e,t=sl(t,1/n,s),i!==void 0&&(t=sl(t,1/i,s)),t}function yR(t,e=0,n=1,s=.5,i,a=t,r=t){if(Gt.test(e)&&(e=parseFloat(e),e=ye(r.min,r.max,e/100)-r.min),typeof e!="number")return;let o=ye(a.min,a.max,s);t===a&&(o-=e),t.min=cg(t.min,e,n,o,i),t.max=cg(t.max,e,n,o,i)}function ug(t,e,[n,s,i],a,r){yR(t,e[n],e[s],e[i],e.scale,a,r)}const vR=["x","scaleX","originX"],_R=["y","scaleY","originY"];function dg(t,e,n,s){ug(t.x,e,vR,n?n.x:void 0,s?s.x:void 0),ug(t.y,e,_R,n?n.y:void 0,s?s.y:void 0)}function hg(t){return t.translate===0&&t.scale===1}function $b(t){return hg(t.x)&&hg(t.y)}function fg(t,e){return t.min===e.min&&t.max===e.max}function bR(t,e){return fg(t.x,e.x)&&fg(t.y,e.y)}function mg(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Gb(t,e){return mg(t.x,e.x)&&mg(t.y,e.y)}function pg(t){return Ke(t.x)/Ke(t.y)}function gg(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class SR{constructor(){this.members=[]}add(e){Mh(this.members,e),e.scheduleRender()}remove(e){if(Uh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wR(t,e,n){let s="";const i=t.x.translate/e.x,a=t.y.translate/e.y,r=(n==null?void 0:n.z)||0;if((i||a||r)&&(s=`translate3d(${i}px, ${a}px, ${r}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:b}=n;c&&(s=`perspective(${c}px) ${s}`),u&&(s+=`rotate(${u}deg) `),d&&(s+=`rotateX(${d}deg) `),h&&(s+=`rotateY(${h}deg) `),m&&(s+=`skewX(${m}deg) `),b&&(s+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const Ic=["","X","Y","Z"],xR=1e3;let TR=0;function Fc(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Hb(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Ob(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",pe,!(i||a))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Hb(s)}function qb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(r={},o=e==null?void 0:e()){this.id=TR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(AR),this.nodes.forEach(NR),this.nodes.forEach(DR),this.nodes.forEach(CR)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dR)}addEventListener(r,o){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new Vh),this.eventHandlers.get(r).add(o)}notifyListeners(r,...o){const l=this.eventHandlers.get(r);l&&l.notify(...o)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=rb(r)&&!pC(r),this.instance=r;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;pe.read(()=>{d=window.innerWidth}),t(r,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,u&&u(),u=hR(h,250),_o.hasAnimatedSinceResize&&(_o.hasAnimatedSinceResize=!1,this.nodes.forEach(_g)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||c.getDefaultTransition()||PR,{onLayoutAnimationStart:_,onLayoutAnimationComplete:y}=c.getProps(),p=!this.targetLayout||!Gb(this.targetLayout,m),g=!d&&h;if(this.options.layoutRoot||this.resumeFrom||g||d&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...Zh(b,"layout"),onPlay:_,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(u,g)}else d||_g(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kR),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Hb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(RR),this.nodes.forEach(ER),this.nodes.forEach(jR)):this.nodes.forEach(vg),this.clearAllSnapshots();const o=tt.now();Ve.delta=dn(0,1e3/60,o-Ve.timestamp),Ve.timestamp=o,Ve.isProcessing=!0,Uc.update.process(Ve),Uc.preRender.process(Ve),Uc.render.process(Ve),Ve.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OR),this.sharedNodes.forEach(MR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ke(this.snapshot.measuredBox.x)&&!Ke(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=we(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(o=!1),o&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!$b(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;r&&this.instance&&(o||os(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return r&&(l=this.removeTransform(l)),VR(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:r}=this.options;if(!r)return we();const o=r.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(BR))){const{scroll:u}=this.root;u&&(oi(o.x,u.offset.x),oi(o.y,u.offset.y))}return o}removeElementScroll(r){var l;const o=we();if(mt(o,r),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&mt(o,r),oi(o.x,d.offset.x),oi(o.y,d.offset.y))}return o}applyTransform(r,o=!1){const l=we();mt(l,r);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&li(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),os(u.latestValues)&&li(l,u.latestValues)}return os(this.latestValues)&&li(l,this.latestValues),l}removeTransform(r){const o=we();mt(o,r);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!os(c.latestValues))continue;yd(c.latestValues)&&c.updateSnapshot();const u=we(),d=c.measurePageBox();mt(u,d),dg(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return os(this.latestValues)&&dg(o,this.latestValues),o}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ve.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(r||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=Ve.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),ka(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),mt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=we(),this.targetWithTransforms=we()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mt(this.target,this.layout.layoutBox),xb(this.target,this.targetDelta)):mt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),ka(this.relativeTargetOrigin,this.target,m.target),mt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||yd(this.parent.latestValues)||wb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const r=this.getLead(),o=!!this.resumingFrom||this!==r;let l=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ve.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;mt(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;nO(this.layoutCorrected,this.treeScale,this.path,o),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=we());const{target:m}=r;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lg(this.prevProjectionDelta.x,this.projectionDelta.x),lg(this.prevProjectionDelta.y,this.projectionDelta.y)),Da(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!gg(this.projectionDelta.x,this.prevProjectionDelta.x)||!gg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),r){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ci(),this.projectionDelta=ci(),this.projectionDeltaWithTransform=ci()}setAnimationOrigin(r,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=ci();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=we(),m=l?l.source:void 0,b=this.layout?this.layout.source:void 0,_=m!==b,y=this.getStack(),p=!y||y.members.length<=1,g=!!(_&&!p&&this.options.crossfade===!0&&!this.path.some(LR));this.animationProgress=0;let v;this.mixTargetDelta=w=>{const E=w/1e3;bg(d.x,r.x,E),bg(d.y,r.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ka(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UR(this.relativeTarget,this.relativeTargetOrigin,h,E),v&&bR(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=we()),mt(v,this.relativeTarget)),_&&(this.animationValues=u,mR(u,c,this.latestValues,E,g,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Fn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pe.update(()=>{_o.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ri(0)),this.currentAnimation=cR(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),r.onUpdate&&r.onUpdate(u)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=r;if(!(!o||!l||!c)){if(this!==r&&this.layout&&c&&Ib(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||we();const d=Ke(this.layout.layoutBox.x);l.x.min=r.target.x.min,l.x.max=l.x.min+d;const h=Ke(this.layout.layoutBox.y);l.y.min=r.target.y.min,l.y.max=l.y.min+h}mt(o,l),li(o,u),Da(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(r,o){this.sharedNodes.has(r)||this.sharedNodes.set(r,new SR),this.sharedNodes.get(r).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){var o;const{layoutId:r}=this.options;return r?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:r}=this.options;return r?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),r&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let o=!1;const{latestValues:l}=r;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Fc("z",r,c,this.animationValues);for(let u=0;u<Ic.length;u++)Fc(`rotate${Ic[u]}`,r,c,this.animationValues),Fc(`skew${Ic[u]}`,r,c,this.animationValues);r.render();for(const u in c)r.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);r.scheduleRender()}applyProjectionStyles(r,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=vo(o==null?void 0:o.pointerEvents)||"",r.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=vo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!os(this.latestValues)&&(r.transform=l?l({},""):"none",this.hasProjected=!1);return}r.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=wR(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),r.transform=d;const{x:h,y:m}=this.projectionDelta;r.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,c.animationValues?r.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:r.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const b in tr){if(u[b]===void 0)continue;const{correct:_,applyTo:y,isCSSVariable:p}=tr[b],g=d==="none"?u[b]:_(u[b],c);if(y){const v=y.length;for(let w=0;w<v;w++)r[y[w]]=g}else p?this.options.visualElement.renderState.vars[b]=g:r[b]=g}this.options.layoutId&&(r.pointerEvents=c===this?vo(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>{var o;return(o=r.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(yg),this.root.sharedNodes.clear()}}}function ER(t){t.updateLayout()}function jR(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:a}=t.options,r=e.source!==t.layout.source;a==="size"?pt(d=>{const h=r?e.measuredBox[d]:e.layoutBox[d],m=Ke(h);h.min=s[d].min,h.max=h.min+m}):Ib(a,e.layoutBox,s)&&pt(d=>{const h=r?e.measuredBox[d]:e.layoutBox[d],m=Ke(s[d]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const o=ci();Da(o,s,e.layoutBox);const l=ci();r?Da(l,t.applyTransform(i,!0),e.measuredBox):Da(l,s,e.layoutBox);const c=!$b(o);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const b=we();ka(b,e.layoutBox,h.layoutBox);const _=we();ka(_,s,m.layoutBox),Gb(b,_)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function AR(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function CR(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function OR(t){t.clearSnapshot()}function yg(t){t.clearMeasurements()}function vg(t){t.isLayoutDirty=!1}function RR(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _g(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function NR(t){t.resolveTargetDelta()}function DR(t){t.calcProjection()}function kR(t){t.resetSkewAndRotation()}function MR(t){t.removeLeadSnapshot()}function bg(t,e,n){t.translate=ye(e.translate,0,n),t.scale=ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Sg(t,e,n,s){t.min=ye(e.min,n.min,s),t.max=ye(e.max,n.max,s)}function UR(t,e,n,s){Sg(t.x,e.x,n.x,s),Sg(t.y,e.y,n.y,s)}function LR(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const PR={duration:.45,ease:[.4,0,.1,1]},wg=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),xg=wg("applewebkit/")&&!wg("chrome/")?Math.round:xt;function Tg(t){t.min=xg(t.min),t.max=xg(t.max)}function VR(t){Tg(t.x),Tg(t.y)}function Ib(t,e,n){return t==="position"||t==="preserve-aspect"&&!qO(pg(e),pg(n),.2)}function BR(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const zR=qb({attachResizeListener:(t,e)=>sr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yc={current:void 0},Fb=qb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yc.current){const t=new zR({});t.mount(window),t.setOptions({layoutScroll:!0}),Yc.current=t}return Yc.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$R={pan:{Feature:aR},drag:{Feature:iR,ProjectionNode:Fb,MeasureLayout:Vb}};function Eg(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=s[i];a&&pe.postRender(()=>a(e,Ar(e)))}class GR extends Jn{mount(){const{current:e}=this.node;e&&(this.unmount=uC(e,(n,s)=>(Eg(this.node,s,"Start"),i=>Eg(this.node,i,"End"))))}unmount(){}}class HR extends Jn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tr(sr(this.node.current,"focus",()=>this.onFocus()),sr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jg(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=s[i];a&&pe.postRender(()=>a(e,Ar(e)))}class qR extends Jn{mount(){const{current:e}=this.node;e&&(this.unmount=mC(e,(n,s)=>(jg(this.node,s,"Start"),(i,{success:a})=>jg(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Td=new WeakMap,Kc=new WeakMap,IR=t=>{const e=Td.get(t.target);e&&e(t)},FR=t=>{t.forEach(IR)};function YR({root:t,...e}){const n=t||document;Kc.has(n)||Kc.set(n,{});const s=Kc.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(FR,{root:t,...e})),s[i]}function KR(t,e,n){const s=YR(e);return Td.set(t,n),s.observe(t),()=>{Td.delete(t),s.unobserve(t)}}const XR={some:0,all:1};class QR extends Jn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=e,r={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:XR[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return KR(this.node.current,r,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ZR(e,n))&&this.startObserver()}unmount(){}}function ZR({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const JR={inView:{Feature:QR},tap:{Feature:qR},focus:{Feature:HR},hover:{Feature:GR}},WR={layout:{ProjectionNode:Fb,MeasureLayout:Vb}},eN={...VO,...JR,...$R,...WR},ls=WC(eN,hO);class tN{static parsePhase1Content(e,n){const s=Array.isArray(e)?e[0]:e;return{project_info:this.extractProjectMetadata(s,n),global_style:this.extractGlobalStyle(s),scenes:this.extractTimelineScenes(s),elements:this.extractTimelineElements(s),style_evolution:this.extractStyleProgression(s)}}static extractProjectMetadata(e,n){var i,a,r,o,l,c;return{title:((i=e.project_metadata)==null?void 0:i.title)||e.title||e.project_title||((a=e.extraction_metadata)==null?void 0:a.project_title)||n||"Untitled Project",client:((r=e.project_metadata)==null?void 0:r.client)||e.client||"Unknown Client",schema_version:((o=e.project_metadata)==null?void 0:o.schema_version)||"1.0",production_workflow:((l=e.project_metadata)==null?void 0:l.production_workflow)||"animatic_to_video",extraction_date:(c=e.project_metadata)==null?void 0:c.extraction_date}}static extractGlobalStyle(e){var n,s,i,a,r,o,l,c,u,d,h,m,b,_,y,p,g,v,w,E,C,S,T,j,R,U,P,L,V,N,A,D;return{color_palette:{primary:((s=(n=e.global_style)==null?void 0:n.color_palette)==null?void 0:s.primary)||"Deep blue backgrounds",secondary:((a=(i=e.global_style)==null?void 0:i.color_palette)==null?void 0:a.secondary)||"Warm amber lighting",accent:(o=(r=e.global_style)==null?void 0:r.color_palette)==null?void 0:o.accent,character_tones:((c=(l=e.global_style)==null?void 0:l.color_palette)==null?void 0:c.character_tones)||"Natural skin tones"},rendering_style:{level:((d=(u=e.global_style)==null?void 0:u.rendering_style)==null?void 0:d.level)||"cinematic realism",line_work:((m=(h=e.global_style)==null?void 0:h.rendering_style)==null?void 0:m.line_work)||"clean vector-style",shading:((_=(b=e.global_style)==null?void 0:b.rendering_style)==null?void 0:_.shading)||"minimal, flat color zones",detail_level:((p=(y=e.global_style)==null?void 0:y.rendering_style)==null?void 0:p.detail_level)||"photorealistic"},composition:{framing:((v=(g=e.global_style)==null?void 0:g.composition)==null?void 0:v.framing)||"cinematic storyboard frames",depth:((E=(w=e.global_style)==null?void 0:w.composition)==null?void 0:E.depth)||"clear foreground/background separation",camera_style:((S=(C=e.global_style)==null?void 0:C.composition)==null?void 0:S.camera_style)||"traditional film language",aspect_ratio:((j=(T=e.global_style)==null?void 0:T.composition)==null?void 0:j.aspect_ratio)||"16:9"},mood_style:{overall_mood:((U=(R=e.global_style)==null?void 0:R.mood_style)==null?void 0:U.overall_mood)||"educational, inspiring",lighting_description:((L=(P=e.global_style)==null?void 0:P.mood_style)==null?void 0:L.lighting_description)||"natural library lighting",atmosphere:((N=(V=e.global_style)==null?void 0:V.mood_style)==null?void 0:N.atmosphere)||"technological wonder",tone:((D=(A=e.global_style)==null?void 0:A.mood_style)==null?void 0:D.tone)||"professional, accessible"}}}static extractTimelineScenes(e){const n=e.scenes||{};return Object.entries(n).map(([s,i])=>{var a,r,o,l,c,u,d,h,m,b,_,y,p,g;return{scene_id:i.scene_id||parseInt(s.replace("scene_",""))||0,title:this.generateSceneTitle(i.action_summary,i.scene_id),duration:i.duration||"3 seconds",camera_type:i.camera_type||"medium shot",mood:i.mood||"neutral",natural_description:i.natural_description||"",dialogue:i.dialogue,action_summary:i.action_summary||"Scene action",elements_present:i.elements_present||[],element_interactions:i.element_interactions||[],primary_focus:i.primary_focus||"",lighting_approach:i.lighting_approach||"",composition_approach:i.composition_approach||"",scene_frame_prompt:i.scene_frame_prompt,scene_start_frame:i.scene_start_frame,expandable_content:{locations_text:this.extractLocationText(e.elements,i.elements_present),characters_text:this.extractCharacterText(e.elements,i.elements_present),props_text:this.extractPropsText(e.elements,i.elements_present),actions_text:this.generateActionsText(e.elements,i),interactions_text:this.generateInteractionsText(i.element_interactions),color_primary:((r=(a=e.global_style)==null?void 0:a.color_palette)==null?void 0:r.primary)||"Deep blue backgrounds",color_secondary:((l=(o=e.global_style)==null?void 0:o.color_palette)==null?void 0:l.secondary)||"Warm amber lighting",line_work:((u=(c=e.global_style)==null?void 0:c.rendering_style)==null?void 0:u.line_work)||"clean vector-style",shading:((h=(d=e.global_style)==null?void 0:d.rendering_style)==null?void 0:h.shading)||"minimal, flat color zones",framing:((b=(m=e.global_style)==null?void 0:m.composition)==null?void 0:b.framing)||"cinematic storyboard frames",depth:((y=(_=e.global_style)==null?void 0:_.composition)==null?void 0:y.depth)||"clear foreground/background separation",overall_mood:((g=(p=e.global_style)==null?void 0:p.mood_style)==null?void 0:g.overall_mood)||"educational, inspiring"}}}).sort((s,i)=>s.scene_id-i.scene_id)}static extractTimelineElements(e){const n=e.elements||{};return Object.entries(n).map(([s,i])=>{var a;return{id:s,name:this.formatElementName(s),type:this.mapElementType(i.element_type),subtype:i.element_subtype||"secondary",frequency:i.frequency||0,scenes_present:i.scenes_present||[],base_description:i.base_description||"",consistency_rules:i.consistency_rules||[],consistency_score:this.calculateConsistencyScore(i.frequency,(a=i.consistency_rules)==null?void 0:a.length),icon:this.getElementIcon(i.element_type,s),color:this.getElementColor(i.element_type)}})}static extractStyleProgression(e){const n=e.scenes||{},s=Object.entries(n).sort(([,i],[,a])=>i.scene_id-a.scene_id);return{color_evolution:s.map(([,i])=>{var a,r,o,l;return{scene_id:i.scene_id,primary:((r=(a=e.global_style)==null?void 0:a.color_palette)==null?void 0:r.primary)||"Deep blue",secondary:((l=(o=e.global_style)==null?void 0:o.color_palette)==null?void 0:l.secondary)||"Warm amber"}}),mood_evolution:s.map(([,i])=>({scene_id:i.scene_id,mood:i.mood||"neutral",lighting:i.lighting_approach||"natural"})),camera_progression:s.map(([,i])=>({scene_id:i.scene_id,camera_type:i.camera_type||"medium shot",composition:i.composition_approach||"standard framing"}))}}static generateSceneTitle(e,n){return e?e.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):`Scene ${n}`}static extractLocationText(e,n){return n.filter(i=>{var a;return((a=e[i])==null?void 0:a.element_type)==="location"}).map(i=>{var r;const a=e[i];return`${a.base_description}
Consistency Rules: ${(r=a.consistency_rules)==null?void 0:r.join("; ")}`}).join(`

`)}static extractCharacterText(e,n){return n.filter(i=>{var a;return((a=e[i])==null?void 0:a.element_type)==="character"}).map(i=>{var r;const a=e[i];return`${a.base_description}
Consistency Rules: ${(r=a.consistency_rules)==null?void 0:r.join("; ")}`}).join(`

`)}static extractPropsText(e,n){return n.filter(i=>{var a;return((a=e[i])==null?void 0:a.element_type)==="prop"}).map(i=>{var r;const a=e[i];return`${a.base_description}
Consistency Rules: ${(r=a.consistency_rules)==null?void 0:r.join("; ")}`}).join(`

`)}static generateActionsText(e,n){var s;return((s=n.elements_present)==null?void 0:s.map(i=>{var o;const a=e[i],r=(o=a==null?void 0:a.variants_by_scene)==null?void 0:o[`scene_${n.scene_id}`];return r?`${i}: ${r.action} at ${r.position}`:`${i}: positioned in scene`}).join(`

`))||""}static generateInteractionsText(e){return e.map(n=>n.description).join(`
`)||""}static formatElementName(e){return e.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}static mapElementType(e){switch(e){case"character":return"character";case"location":return"location";case"prop":return"prop";case"atmosphere":return"atmosphere";default:return"prop"}}static calculateConsistencyScore(e,n){return e>=8&&n>=3?"excellent":e>=4&&n>=2?"good":"review"}static getElementIcon(e,n){if(n.includes("samantha")||n.includes("character"))return"👤";if(n.includes("children")||n.includes("group"))return"👶";if(n.includes("library")||n.includes("entrance"))return"🏛️";if(n.includes("hologram")||n.includes("display"))return"🔮";if(n.includes("backpack")||n.includes("book"))return"🎒";if(n.includes("lighting")||n.includes("atmosphere"))return"💡";switch(e){case"character":return"👤";case"location":return"🏛️";case"prop":return"📦";case"atmosphere":return"💡";default:return"📦"}}static getElementColor(e){switch(e){case"character":return"#3b82f6";case"location":return"#10b981";case"prop":return"#f59e0b";case"atmosphere":return"#8b5cf6";default:return"#6b7280"}}}class sn{static updateField(e,n,s){var l,c,u,d;const i={...e},a=n.split(".");if(n.includes("global_style")){const h=sn.getField(e,n);console.log("🎨 STYLE FIELD UPDATE:",{fieldPath:n,oldValue:h,newValue:s,isColorPrimary:n.includes("color_palette.primary"),isRenderingLevel:n.includes("rendering_style.level")})}let r=i;for(let h=0;h<a.length-1;h++){const m=a[h];r[m]?r[m]={...r[m]}:r[m]={},r=r[m]}const o=a[a.length-1];return r[o]=s,n.includes("global_style")&&console.log("🎨 UPDATED GLOBAL_STYLE:",{primaryColor:(c=(l=i==null?void 0:i.global_style)==null?void 0:l.color_palette)==null?void 0:c.primary,renderingLevel:(d=(u=i==null?void 0:i.global_style)==null?void 0:u.rendering_style)==null?void 0:d.level,fullGlobalStyle:i==null?void 0:i.global_style}),i}static getField(e,n){const s=n.split(".");let i=e;for(const a of s){if(!i||typeof i!="object")return;i=i[a]}return i}static validateField(e,n){return n.includes("title")&&typeof e=="string"?e.trim().length>0:n.includes("duration")||n.includes("camera_type")||n.includes("mood")?!0:e!=null}static createEditHandler(e,n){return(s,i)=>{try{if(!sn.validateField(i,n))return console.warn(`Invalid value for field ${n}:`,i),!1;const r=(sn.getField(s,n)||"").toString().trim(),o=(i||"").toString().trim();if(r===o)return!0;const l=sn.updateField(s,n,i);return e(l),!0}catch(a){return console.error(`Error editing field ${n}:`,a),!1}}}}const hf=(t,e,n)=>{const s=sn.getField(t,e)||"",i=sn.createEditHandler(n,e);return{currentValue:s,updateValue:a=>i(t,a.trim())}},nN=(t,e,n,s)=>{const i=sn.getField(t,e)||n[0],a=sn.createEditHandler(s,e);return{currentValue:i,validOptions:n,updateValue:r=>n.includes(r)?a(t,r):!1}},Ag="/assets/16-9placeholder-CY_xecX8.png";function sN({scene:t,elements:e,onSelect:n,isSelected:s,onElementHover:i,hoveredElement:a,masterJson:r,onSceneEdit:o}){var C;const[l,c]=x.useState({description:!1,elements:!1,primaryFocus:!1,composition:!1}),[u,d]=x.useState(null),[h,m]=x.useState({}),b=e.filter(S=>{var T;return(T=t.elements_present)==null?void 0:T.includes(S.id)}),_=(S,T,j)=>!r||!o?null:T==="select"&&j?nN(r,S,j,o):hf(r,S,o),y={title:`scenes.scene_${t.scene_id}.title`,camera_type:`scenes.scene_${t.scene_id}.camera_type`,mood:`scenes.scene_${t.scene_id}.mood`,dialogue:`scenes.scene_${t.scene_id}.dialogue`,natural_description:`scenes.scene_${t.scene_id}.natural_description`,primary_focus:`scenes.scene_${t.scene_id}.primary_focus`,scene_frame_prompt:`scenes.scene_${t.scene_id}.scene_frame_prompt`,composition_approach:`scenes.scene_${t.scene_id}.composition_approach`},p=(S,T,j,R="text",U)=>{const P=u===j,L=y[j],V=_(L,R==="select"?"select":"text",U);return!V||!r||!o?f.jsxs("div",{className:"scene-field-row",children:[f.jsxs("strong",{className:"scene-field-label",children:[T,":"]}),f.jsx("div",{className:"scene-field-value-area",children:S||`No ${T.toLowerCase()}`})]}):f.jsxs("div",{className:"scene-field-row",children:[f.jsxs("strong",{className:"scene-field-label",children:[T,":"]}),f.jsx("div",{className:"scene-field-value-area",children:P?f.jsx("div",{className:"scene-field-edit-container",children:R==="textarea"?f.jsx("textarea",{value:h[j]??V.currentValue,onChange:N=>{const A=N.target.value;m(D=>({...D,[j]:A}))},onBlur:()=>{const N=h[j]??V.currentValue;V.updateValue(N),d(null)},onKeyDown:N=>{N.key==="Escape"&&(m(A=>{const{[j]:D,...M}=A;return M}),d(null))},className:"scene-field-textarea",autoFocus:!0,rows:3}):f.jsx("input",{type:"text",value:h[j]??V.currentValue,onChange:N=>{const A=N.target.value;m(D=>({...D,[j]:A}))},onBlur:()=>{const N=h[j]??V.currentValue;V.updateValue(N),d(null)},onKeyDown:N=>{if(N.key==="Enter"){const A=h[j]??V.currentValue;V.updateValue(A),d(null)}N.key==="Escape"&&(m(A=>{const{[j]:D,...M}=A;return M}),d(null))},className:"scene-field-input",autoFocus:!0})}):f.jsx("div",{className:"scene-field-value-display editable-field",onClick:N=>{N.stopPropagation(),d(j),m(A=>({...A,[j]:V.currentValue}))},title:`Click to edit ${T.toLowerCase()}`,children:S||`No ${T.toLowerCase()}`})})]})},g=(S,T)=>{const j=u==="title",R=y.title,U=_(R,"text");return!U||!r||!o?f.jsxs("div",{className:"scene-title-with-number",children:[f.jsxs("span",{className:"scene-number-part",children:["Scene ",T,":"]}),f.jsx("span",{className:"scene-title-part",children:S||"Untitled"})]}):f.jsxs("div",{className:"scene-title-with-number",children:[f.jsxs("span",{className:"scene-number-part",children:["Scene ",T,":"]}),j?f.jsx("input",{type:"text",value:h.title??S??"Untitled",onChange:P=>{const L=P.target.value;m(V=>({...V,title:L}))},onBlur:()=>{const P=h.title??S;P!==S&&U.updateValue(P),d(null),m(L=>{const{title:V,...N}=L;return N})},onKeyDown:P=>{if(P.key==="Enter"){const L=h.title??S;L!==S&&U.updateValue(L),d(null),m(V=>{const{title:N,...A}=V;return A})}P.key==="Escape"&&(m(L=>{const{title:V,...N}=L;return N}),d(null))},className:"scene-title-input",autoFocus:!0}):f.jsx("span",{className:"scene-title-part editable-field",onClick:P=>{P.stopPropagation(),d("title"),m(L=>({...L,title:S||"Untitled"}))},title:"Click to edit title",children:S||"Untitled"})]})},v=b.reduce((S,T)=>(S[T.type]||(S[T.type]=[]),S[T.type].push(T),S),{}),w={default:{scale:1,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",transition:{duration:.2}},hover:{scale:1.02,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:{duration:.2}},selected:{scale:1.02,boxShadow:"0 0 0 2px #3b82f6, 0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:{duration:.2}}},E={collapsed:{height:0,opacity:0},expanded:{height:"auto",opacity:1}};return f.jsxs(ls.div,{variants:w,initial:"default",whileHover:"hover",animate:s?"selected":"default",className:"timeline-scene-card rounded-lg border overflow-hidden cursor-pointer",onClick:n,children:[f.jsxs("div",{className:"scene-top-row",children:[f.jsx("div",{className:"scene-title-container",children:g(r&&((C=_(y.title,"text"))==null?void 0:C.currentValue)||t.title||"",t.scene_id)}),f.jsx("span",{className:"scene-duration",children:t.duration})]}),f.jsxs("div",{className:"scene-card-three-columns",children:[f.jsxs("div",{className:"scene-column scene-column-config",children:[f.jsx("div",{className:"scene-column-header",children:f.jsx("h4",{className:"scene-column-title",children:"Configuration"})}),p(t.camera_type||"","Camera","camera_type"),p(t.mood||"","Mood","mood"),p(t.dialogue||"","Speech","dialogue"),f.jsxs("div",{className:"scene-expandable-sections",children:[f.jsxs("div",{children:[f.jsxs("button",{onClick:S=>{S.stopPropagation(),c(T=>({...T,description:!T.description}))},className:`scene-expand-button ${l.description?"expanded":""}`,children:[f.jsx("span",{children:"📝 Description"}),f.jsx("span",{children:l.description?"▼":"▶"})]}),f.jsx(Wr,{children:l.description&&f.jsx(ls.div,{variants:E,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:p(t.natural_description||"","Description","natural_description","textarea")})})})]}),f.jsxs("div",{children:[f.jsxs("button",{onClick:S=>{S.stopPropagation(),c(T=>({...T,primaryFocus:!T.primaryFocus}))},className:`scene-expand-button ${l.primaryFocus?"expanded":""}`,children:[f.jsx("span",{children:"🎯 Primary Focus"}),f.jsx("span",{children:l.primaryFocus?"▼":"▶"})]}),f.jsx(Wr,{children:l.primaryFocus&&f.jsx(ls.div,{variants:E,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:p(t.primary_focus||"","Primary Focus","primary_focus","textarea")})})})]}),f.jsxs("div",{children:[f.jsxs("button",{onClick:S=>{S.stopPropagation(),c(T=>({...T,composition:!T.composition}))},className:`scene-expand-button ${l.composition?"expanded":""}`,children:[f.jsx("span",{children:"📐 Composition"}),f.jsx("span",{children:l.composition?"▼":"▶"})]}),f.jsx(Wr,{children:l.composition&&f.jsx(ls.div,{variants:E,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:p(t.composition_approach||"","Composition","composition_approach","textarea")})})})]}),f.jsxs("div",{children:[f.jsxs("button",{onClick:S=>{S.stopPropagation(),c(T=>({...T,elements:!T.elements}))},className:`scene-expand-button ${l.elements?"expanded":""}`,children:[f.jsxs("span",{children:["🎭 Elements (",b.length,")"]}),f.jsx("span",{children:l.elements?"▼":"▶"})]}),f.jsx(Wr,{children:l.elements&&f.jsx(ls.div,{variants:E,initial:"collapsed",animate:"expanded",exit:"collapsed",className:"scene-expand-content",children:f.jsx("div",{className:"scene-expand-inner",children:f.jsx("div",{className:"scene-elements-list",children:Object.entries(v).map(([S,T])=>f.jsxs("div",{className:"scene-element-group",children:[f.jsxs("span",{className:"scene-element-type",children:[S,":"]}),f.jsx("div",{className:"scene-element-tags",children:T.map(j=>f.jsx(ls.div,{whileHover:{scale:1.05},onMouseEnter:()=>i(j.id),onMouseLeave:()=>i(null),className:"scene-element-tag",style:{backgroundColor:a===j.id?j.color:`${j.color}20`,color:a===j.id?"white":j.color,borderColor:j.color},children:j.name},j.id))})]},S))})})})})]})]})]}),f.jsxs("div",{className:"scene-column scene-column-image",children:[f.jsx("div",{className:"scene-column-header",children:f.jsx("h4",{className:"scene-column-title",children:"Image Generation"})}),f.jsxs("div",{className:"scene-media-placeholder",children:[f.jsx("img",{src:t.scene_start_frame||Ag,alt:t.scene_start_frame?`Generated frame for scene ${t.scene_id}`:"Scene placeholder",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--radius-sm)",border:t.scene_start_frame?"2px solid #10b981":"1px solid var(--color-border-default)"}}),t.scene_start_frame&&f.jsx("div",{className:"scene-image-badge",children:f.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981"},children:"✅ Generated"})})]}),f.jsxs("div",{className:"scene-prompt-container",children:[f.jsx("div",{className:"scene-prompt-header",children:f.jsx("label",{className:"scene-prompt-label",children:"Generated Prompt"})}),f.jsx("textarea",{className:"scene-prompt-textarea",placeholder:t.scene_frame_prompt?"Click to edit generated prompt...":"Generated image prompt will appear here...",value:u==="scene_frame_prompt"?h.scene_frame_prompt||"":t.scene_frame_prompt||"",rows:6,readOnly:u!=="scene_frame_prompt",onClick:S=>{S.stopPropagation(),u!=="scene_frame_prompt"&&(d("scene_frame_prompt"),m(T=>({...T,scene_frame_prompt:t.scene_frame_prompt||""})))},onChange:S=>{u==="scene_frame_prompt"&&m(T=>({...T,scene_frame_prompt:S.target.value}))},onBlur:()=>{if(u==="scene_frame_prompt"){const S=_(y.scene_frame_prompt,"text");S&&S.updateValue(h.scene_frame_prompt||""),d(null)}},onKeyDown:S=>{S.key==="Enter"&&S.ctrlKey&&S.currentTarget.blur(),S.key==="Escape"&&(d(null),m(T=>({...T,scene_frame_prompt:t.scene_frame_prompt||""})))},style:{cursor:u==="scene_frame_prompt"?"text":"pointer",backgroundColor:u==="scene_frame_prompt"?"var(--color-bg-tertiary)":"var(--color-bg-secondary)",border:u==="scene_frame_prompt"?"1px solid var(--color-border-focus)":"1px solid var(--color-border-default)"}})]}),f.jsxs("div",{className:"scene-generate-buttons",children:[f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Prompt"}),f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Image"})]})]}),f.jsxs("div",{className:"scene-column scene-column-video",children:[f.jsx("div",{className:"scene-column-header",children:f.jsx("h4",{className:"scene-column-title",children:"Video Generation"})}),f.jsx("div",{className:"scene-media-placeholder",children:f.jsx("img",{src:Ag,alt:"Video placeholder",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--radius-sm)"}})}),f.jsx("textarea",{className:"scene-prompt-textarea",placeholder:"Video generation prompt will appear here...",rows:6,readOnly:!0}),f.jsxs("div",{className:"scene-generate-buttons",children:[f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Prompt"}),f.jsx("button",{className:"scene-generate-btn",disabled:!0,children:"Video"})]})]})]})]})}function iN({content:t,projectId:e,projectName:n,phaseId:s,onContentUpdate:i}){var T;const[a,r]=x.useState(null),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(""),[m,b]=x.useState(!0),_=x.useMemo(()=>{if(!t||Object.keys(t).length===0)return{project_info:{title:"Loading...",client:"",schema_version:"1.0",production_workflow:""},global_style:{},scenes:[],elements:[],style_evolution:{color_evolution:[],mood_evolution:[],camera_progression:[]}};try{return tN.parsePhase1Content(t,n)}catch(j){return console.error("Error parsing timeline content:",j),{project_info:{title:"Parsing Error",client:"",schema_version:"1.0",production_workflow:""},global_style:{},scenes:[],elements:[],style_evolution:{color_evolution:[],mood_evolution:[],camera_progression:[]}}}},[t,n]),y=x.useMemo(()=>i?hf(t,"project_metadata.title",i):null,[t,i]),p=()=>{if(!(y!=null&&y.currentValue)){console.error("Cannot edit title - title editor not available");return}h(y.currentValue),u(!0)},g=async()=>{if(!y||!d.trim()){u(!1);return}try{y.updateValue(d)&&u(!1)}catch(j){console.error("Error saving title:",j)}},v=()=>{h(""),u(!1)},w=x.useMemo(()=>{const j=_.scenes.reduce((L,V)=>{const N=V.duration||"3s",A=parseInt(N.replace(/[^\d]/g,""))||3;return L+A},0),R=Math.floor(j/60),U=j%60;return{totalDuration:R>0?`${R}m ${U}s`:`${j}s`,scenesCount:_.scenes.length,elementsCount:_.elements.length}},[_]),E=x.useMemo(()=>_.elements.map(U=>({...U,usage_percentage:Math.round(U.frequency/_.scenes.length*100)})).reduce((U,P)=>(U[P.type]||(U[P.type]=[]),U[P.type].push(P),U),{}),[_]),C=j=>{r(a===j?null:j)},S=j=>{l(j)};return _.scenes.length?f.jsxs("div",{className:"timeline-container",children:[f.jsx("div",{className:"timeline-header",style:{borderRadius:"var(--radius-md)"},children:f.jsxs("div",{className:"project-title-section",children:[c?f.jsxs("div",{className:"title-edit-container",children:[f.jsx("input",{type:"text",value:d,onChange:j=>h(j.target.value),onKeyDown:j=>{j.key==="Enter"&&g(),j.key==="Escape"&&v()},className:"title-edit-input",autoFocus:!0,onBlur:g}),f.jsxs("div",{className:"title-edit-buttons",children:[f.jsx("button",{onClick:g,className:"title-save-btn",children:"✓"}),f.jsx("button",{onClick:v,className:"title-cancel-btn",children:"✕"})]})]}):f.jsx("h1",{className:"project-title-display editable-title",onClick:p,title:"Click to edit project title",children:((T=_==null?void 0:_.project_info)==null?void 0:T.title)||"Untitled Project"}),f.jsxs("div",{className:"project-stats",children:[f.jsxs("span",{children:[f.jsx("strong",{children:w.scenesCount})," scenes"]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:[f.jsx("strong",{children:w.elementsCount})," elements"]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:[f.jsx("strong",{children:w.totalDuration})," total"]}),f.jsx("span",{children:"•"}),f.jsx("span",{children:f.jsx("strong",{children:_.project_info.client})})]})]})}),f.jsxs("div",{className:"elements-overview",children:[f.jsxs("div",{className:"elements-overview-header",style:{cursor:"pointer"},onClick:()=>b(!m),children:[f.jsxs("h3",{children:["Story Elements ",m?"▶":"▼"]}),f.jsxs("span",{className:"elements-count",children:[_.elements.length," total"]})]}),!m&&f.jsx("div",{className:"elements-horizontal",children:Object.entries(E).map(([j,R])=>f.jsxs("div",{className:"scene-element-group",children:[f.jsxs("span",{className:"scene-element-type",children:[j,"s:"]}),f.jsx("div",{className:"scene-element-tags",children:R.map(U=>f.jsxs(ls.div,{whileHover:{scale:1.05},onMouseEnter:()=>S(U.id),onMouseLeave:()=>S(null),className:"scene-element-tag",style:{backgroundColor:o===U.id?U.color:`${U.color}20`,color:o===U.id?"white":U.color,borderColor:U.color},children:[U.name," (",U.usage_percentage,"%)"]},U.id))})]},j))})]}),f.jsx("div",{className:"timeline-scenes",children:f.jsx("div",{className:"timeline-scenes-responsive-grid",children:_.scenes.map(j=>f.jsx(sN,{scene:j,elements:_.elements,isSelected:a===j.scene_id,hoveredElement:o,onSelect:()=>C(j.scene_id),onElementHover:S,masterJson:t,onSceneEdit:i},j.scene_id))})})]}):f.jsx("div",{className:"timeline-container",children:f.jsxs("div",{className:"timeline-header",children:[f.jsx("h2",{children:"Timeline View"}),f.jsx("p",{children:"No scenes available. Complete Phase 1 to see timeline."})]})})}function aN({masterJson:t,onContentUpdate:e}){const[n,s]=x.useState(null),[i,a]=x.useState({}),r={primary:"global_style.color_palette.primary",secondary:"global_style.color_palette.secondary",accent:"global_style.color_palette.accent",character_tones:"global_style.color_palette.character_tones",level:"global_style.rendering_style.level",line_work:"global_style.rendering_style.line_work",shading:"global_style.rendering_style.shading",detail_level:"global_style.rendering_style.detail_level",framing:"global_style.composition.framing",depth:"global_style.composition.depth",camera_style:"global_style.composition.camera_style",aspect_ratio:"global_style.composition.aspect_ratio",overall_mood:"global_style.mood_style.overall_mood",lighting_description:"global_style.mood_style.lighting_description",atmosphere:"global_style.mood_style.atmosphere",tone:"global_style.mood_style.tone"},o=u=>!t||!e?null:hf(t,u,e),l=(u,d,h)=>{const m=n===h,b=r[h],_=o(b);return!_||!t||!e?f.jsxs("div",{className:"style-field-container",children:[f.jsxs("strong",{className:"style-field-label",children:[d,":"]}),f.jsx("div",{className:"style-field-value",children:u||`No ${d.toLowerCase()}`})]}):f.jsxs("div",{className:"scene-field-row",children:[f.jsxs("strong",{className:"scene-field-label",children:[d,":"]}),f.jsx("div",{className:"scene-field-value-area",children:m?f.jsx("div",{className:"scene-field-edit-container",children:f.jsx("input",{type:"text",value:i[h]??_.currentValue,onChange:y=>{const p=y.target.value;a(g=>({...g,[h]:p}))},onBlur:()=>{const y=i[h]??_.currentValue;_.updateValue(y),s(null)},onKeyDown:y=>{if(y.key==="Enter"){const p=i[h]??_.currentValue;_.updateValue(p),s(null)}y.key==="Escape"&&(a(p=>{const{[h]:g,...v}=p;return v}),s(null))},className:"scene-field-input",autoFocus:!0})}):f.jsx("div",{className:"scene-field-value-display editable-field",onClick:()=>s(h),children:u||"Click to edit"})})]})},c=u=>{const h=r[u].split(".");let m=t;for(const b of h){if(!m||typeof m!="object")return"";m=m[b]}return m||""};return f.jsx("div",{className:"style-control-container",children:f.jsxs("div",{className:"style-cards-container",children:[f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Color Palette"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("primary"),"Primary","primary"),l(c("secondary"),"Secondary","secondary"),l(c("accent"),"Accent","accent"),l(c("character_tones"),"Character Tones","character_tones")]})]})}),f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Rendering Style"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("level"),"Level","level"),l(c("line_work"),"Line Work","line_work"),l(c("shading"),"Shading","shading"),l(c("detail_level"),"Detail Level","detail_level")]})]})}),f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Composition"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("framing"),"Framing","framing"),l(c("depth"),"Depth","depth"),l(c("camera_style"),"Camera Style","camera_style"),l(c("aspect_ratio"),"Aspect Ratio","aspect_ratio")]})]})}),f.jsx("div",{className:"timeline-scene-card",children:f.jsxs("div",{className:"scene-card-content",children:[f.jsx("div",{className:"scene-card-header",children:f.jsx("h3",{className:"style-card-title",children:"Mood Style"})}),f.jsxs("div",{className:"style-grid-2x2",children:[l(c("overall_mood"),"Overall Mood","overall_mood"),l(c("lighting_description"),"Lighting","lighting_description"),l(c("atmosphere"),"Atmosphere","atmosphere"),l(c("tone"),"Tone","tone")]})]})})]})})}function ia({title:t,children:e,defaultOpen:n=!1,icon:s="📋"}){const i=`accordion-${t.replace(/\s+/g,"-").toLowerCase()}`,[a,r]=x.useState(()=>{const l=localStorage.getItem(i);return l!==null?JSON.parse(l):n}),o=()=>{const l=!a;r(l),localStorage.setItem(i,JSON.stringify(l))};return f.jsxs("div",{className:"accordion-section",children:[f.jsxs("button",{className:`accordion-header ${a?"open":""}`,onClick:o,children:[f.jsxs("div",{className:"accordion-title",children:[f.jsx("span",{className:"accordion-icon",children:s}),f.jsx("span",{className:"accordion-label",children:t})]}),f.jsx("span",{className:"accordion-arrow",children:a?"▼":"▶"})]}),a&&f.jsx("div",{className:"accordion-content",children:f.jsx("div",{className:"accordion-inner",children:e})})]})}function rN({projectId:t}){var g,v,w,E,C;const[e,n]=x.useState({}),[s,i]=x.useState(""),[a,r]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!0),[d,h]=x.useState("");x.useEffect(()=>{m()},[]);const m=async()=>{u(!0),h("");try{const S=await kl(t);n(S),i(JSON.stringify(S,null,2)),r(!1),console.log("✅ Project configuration loaded successfully")}catch(S){h("Failed to load project configuration"),console.error("Load error:",S)}u(!1)},b=async()=>{console.log("💾 Save button clicked, hasUnsavedChanges:",a),l(!0),h("");try{const S=JSON.parse(s);console.log("📤 Saving project configuration to database..."),await Ml(t,S)?(n(S),r(!1),console.log("✅ Configuration marked as saved, hasUnsavedChanges set to false"),window.dispatchEvent(new CustomEvent("llm-config-updated",{detail:{projectId:t,config:S}})),await m(),console.log("✅ Project configuration saved and reloaded successfully"),console.log("🔄 LLM services should reinitialize automatically")):(h("Failed to save project configuration"),console.error("❌ Save failed"))}catch(S){h("Invalid JSON format"),console.error("Save error:",S)}l(!1)},_=S=>{i(S),r(!0),h("")},y=async()=>{if(window.confirm(`Are you sure you want to reset all configuration to default?

This will overwrite all your current settings and cannot be undone.`)){l(!0),h("");try{console.log("🔄 Resetting project configuration to default..."),await f0(t)?(await m(),window.dispatchEvent(new CustomEvent("llm-config-updated",{detail:{projectId:t,resetToDefault:!0}})),console.log("✅ Configuration reset to default successfully"),console.log("🔄 LLM services should reinitialize automatically")):(h("Failed to reset configuration to default"),console.error("❌ Reset failed"))}catch(T){h("Error resetting configuration"),console.error("Reset error:",T)}l(!1)}},p=(S,T)=>{try{const j=JSON.parse(T),R={...e,[S]:j};n(R),i(JSON.stringify(R,null,2)),r(!0),h("")}catch{h(`Invalid JSON in ${S} section`)}};return c?f.jsx("div",{className:"config-tab",children:f.jsx("div",{className:"config-loading",children:"Loading configuration..."})}):f.jsxs("div",{className:"config-tab",children:[f.jsxs("div",{className:"config-header",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"⚙️ LLM Configuration"}),f.jsx("p",{className:"config-subtitle",children:"Manage AI providers, prompts, and generation settings"})]}),f.jsxs("div",{className:"config-actions",children:[f.jsx("button",{onClick:m,disabled:o,className:"btn btn-secondary",children:"🔄 Reload"}),f.jsx("button",{onClick:y,disabled:o,className:"btn btn-warning",title:"Reset all configuration to default template",children:"🔄 Reset to Default"})]})]}),f.jsxs("div",{style:{padding:"1rem",backgroundColor:a?"#2d1b00":"#0a2a0a",border:`2px solid ${a?"#ff6b35":"#4ade80"}`,borderRadius:"0.5rem",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"bold",color:a?"#ff6b35":"#4ade80"},children:[a?"⚠️ UNSAVED CHANGES":"✅ ALL CHANGES SAVED",a&&f.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"normal",marginTop:"0.25rem",opacity:.8},children:'Click "Save Configuration" to persist changes to database'})]}),f.jsx("button",{onClick:b,disabled:!a||o,className:`btn ${a?"btn-primary":"btn-secondary"}`,style:{minWidth:"140px"},children:o?"💾 Saving...":a?"💾 Save Configuration":"✅ Saved"})]}),d&&f.jsxs("div",{className:"config-error",children:["⚠️ ",d]}),f.jsxs("div",{className:"config-accordion",children:[f.jsx(ia,{title:"Scene Frame Prompt Generation",icon:"✨",defaultOpen:!0,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"System and user prompts for scene start frame generation"}),f.jsxs("div",{className:"prompt-subsection",children:[f.jsx("h4",{className:"prompt-subsection-title",children:"🔧 System Prompt"}),f.jsx("p",{className:"prompt-subsection-desc",children:"Instructions for the AI model about how to generate scene prompts"}),f.jsx("textarea",{value:((g=e==null?void 0:e.start_frame_prompt_generation)==null?void 0:g.system_prompt)||"",onChange:S=>{const T={...e,start_frame_prompt_generation:{...e==null?void 0:e.start_frame_prompt_generation,system_prompt:S.target.value}};n(T),i(JSON.stringify(T,null,2)),r(!0),h("")},className:"section-textarea prompt-textarea",rows:8,placeholder:"Enter system prompt instructions..."}),f.jsx("div",{className:"prompt-preview",children:f.jsxs("details",{children:[f.jsx("summary",{className:"prompt-preview-toggle",children:"📋 Preview stored format"}),f.jsx("pre",{className:"prompt-preview-content",children:((v=e==null?void 0:e.start_frame_prompt_generation)==null?void 0:v.system_prompt)||"No content"})]})})]}),f.jsxs("div",{className:"prompt-subsection",children:[f.jsx("h4",{className:"prompt-subsection-title",children:"👤 User Prompt"}),f.jsx("p",{className:"prompt-subsection-desc",children:"Template for user input to generate scene descriptions"}),f.jsx("textarea",{value:((w=e==null?void 0:e.start_frame_prompt_generation)==null?void 0:w.user_prompt)||"",onChange:S=>{const T={...e,start_frame_prompt_generation:{...e==null?void 0:e.start_frame_prompt_generation,user_prompt:S.target.value}};n(T),i(JSON.stringify(T,null,2)),r(!0),h("")},className:"section-textarea prompt-textarea",rows:6,placeholder:"Enter user prompt template..."}),f.jsx("div",{className:"prompt-preview",children:f.jsxs("details",{children:[f.jsx("summary",{className:"prompt-preview-toggle",children:"📋 Preview stored format"}),f.jsx("pre",{className:"prompt-preview-content",children:((E=e==null?void 0:e.start_frame_prompt_generation)==null?void 0:E.user_prompt)||"No content"})]})})]})]})}),f.jsx(ia,{title:"LLM Providers",icon:"🤖",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Model configurations for different AI providers"}),f.jsx("textarea",{value:JSON.stringify((e==null?void 0:e.llm_providers)||{},null,2),onChange:S=>p("llm_providers",S.target.value),className:"section-textarea",rows:8})]})}),f.jsx(ia,{title:"Image Generation",icon:"🖼️",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Image generation API settings and parameters"}),f.jsx("textarea",{value:JSON.stringify((e==null?void 0:e.image_generation)||{},null,2),onChange:S=>p("image_generation",S.target.value),className:"section-textarea",rows:8})]})}),f.jsx(ia,{title:"Video Generation",icon:"🎥",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Video generation API settings and parameters"}),f.jsx("textarea",{value:JSON.stringify((e==null?void 0:e.video_generation)||{},null,2),onChange:S=>p("video_generation",S.target.value),className:"section-textarea",rows:8})]})}),f.jsx(ia,{title:"Raw JSON",icon:"📝",defaultOpen:!1,children:f.jsxs("div",{className:"config-section",children:[f.jsx("p",{children:"Complete configuration JSON (advanced editing)"}),f.jsx("textarea",{value:s,onChange:S=>_(S.target.value),className:"section-textarea",rows:20})]})})]}),f.jsxs("div",{style:{textAlign:"center",fontSize:"0.75rem",color:"#666",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #333"},children:["Configuration Version: ",((C=e==null?void 0:e.configuration_metadata)==null?void 0:C.version)||"Unknown"]})]})}function oN({modalState:t,onClose:e}){const{isVisible:n,content:s}=t;if(x.useEffect(()=>{const r=o=>{o.key==="Escape"&&n&&(s==null?void 0:s.type)!=="loading"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,s==null?void 0:s.type,e]),!n||!s)return null;const i=()=>{switch(s.type){case"loading":return"⏳";case"success":return"✅";case"error":return"❌";case"info":return"ℹ️";default:return"🤖"}},a=()=>{const r="app-modal-content",o=s.type?`app-modal-${s.type}`:"";return`${r} ${o}`.trim()};return f.jsx("div",{className:"app-modal-overlay",children:f.jsxs("div",{className:a(),children:[f.jsxs("div",{className:"app-modal-header",children:[f.jsxs("div",{className:"app-modal-title",children:[f.jsx("span",{className:"app-modal-icon",children:i()}),f.jsx("h3",{children:s.title})]}),s.type!=="loading"&&f.jsx("button",{className:"app-modal-close",onClick:e,title:"Close",children:"×"})]}),f.jsxs("div",{className:"app-modal-body",children:[f.jsx("p",{className:"app-modal-message",children:s.message}),s.progress&&f.jsxs("div",{className:"app-modal-progress",children:[f.jsx("div",{className:"app-modal-progress-bar",children:f.jsx("div",{className:"app-modal-progress-fill",style:{width:`${s.progress.percentage}%`}})}),f.jsxs("div",{className:"app-modal-progress-text",children:[s.progress.current,"/",s.progress.total," (",s.progress.percentage,"%)",s.progress.currentItem&&f.jsxs("span",{className:"app-modal-progress-item",children:["• ",s.progress.currentItem]})]})]}),s.details&&s.details.length>0&&f.jsx("div",{className:"app-modal-details",children:s.details.map((r,o)=>f.jsxs("p",{className:"app-modal-detail",children:["• ",r]},o))})]}),s.type==="loading"&&f.jsx("div",{className:"app-modal-spinner-container",children:f.jsx("div",{className:"app-modal-spinner"})})]})})}const al=class al{static saveBackup(e,n,s){try{const i={masterJSON:n,timestamp:new Date().toISOString(),projectId:e,version:s},a=this.BACKUP_PREFIX+e;localStorage.setItem(a,JSON.stringify(i)),console.log("✅ Backup saved for project:",e)}catch(i){console.warn("Failed to save backup to localStorage:",i)}}static checkForRestoration(e,n){try{const s=this.BACKUP_PREFIX+e,i=localStorage.getItem(s);if(!i)return null;const a=JSON.parse(i);if(a.projectId===e&&a.masterJSON){const r=new Date(a.timestamp).getTime();if(Date.now()-r<this.BACKUP_EXPIRY_DAYS*24*60*60*1e3)return console.log("🔄 Found potential backup for restoration:",{backupVersion:a.version,currentVersion:n,timestamp:a.timestamp}),a}return null}catch(s){return console.warn("Failed to check backup from localStorage:",s),null}}static clearBackup(e){try{const n=this.BACKUP_PREFIX+e;localStorage.removeItem(n),console.log("🗑️ Backup cleared for project:",e)}catch(n){console.warn("Failed to clear backup from localStorage:",n)}}static cleanupOldBackups(){try{const e=[],n=Date.now()-this.BACKUP_EXPIRY_DAYS*24*60*60*1e3;for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);if(i!=null&&i.startsWith(this.BACKUP_PREFIX)){const a=localStorage.getItem(i);if(a){const r=JSON.parse(a);new Date(r.timestamp).getTime()<n&&e.push(i)}}}e.forEach(s=>localStorage.removeItem(s)),e.length>0&&console.log(`🧹 Cleaned up ${e.length} old backups`)}catch(e){console.warn("Failed to cleanup old backups:",e)}}};al.BACKUP_PREFIX="flow-studio-backup-",al.BACKUP_EXPIRY_DAYS=7;let Qt=al;function lN({user:t}){const{id:e}=ET(),n=El(),[s,i]=x.useState(null),[a,r]=x.useState([]),[o,l]=x.useState(null),[c,u]=x.useState("timeline"),[d,h]=x.useState(!0),[m,b]=x.useState({}),[_,y]=x.useState(!1),[p,g]=x.useState([]),v=hj(),[w,E]=x.useState(!1);x.useEffect(()=>{fj(v)},[v]);const[C,S]=x.useState(!0),[T,j]=x.useState(""),[R,U]=x.useState(!1),[P,L]=x.useState(!1),[V,N]=x.useState(""),[A,D]=x.useState(!1),[M,K]=x.useState(null),[q,de]=x.useState({loaded:!1,version:0});x.useEffect(()=>{if(!e){n("/dashboard");return}Qt.cleanupOldBackups(),zl()},[e,n]);const Q=x.useCallback(async()=>{if(e)try{const k=await c0(e);if(k){b(k),j(JSON.stringify(k,null,2));const X=await td(e);X&&de({loaded:!0,version:X.current_version,lastSaved:X.updated_at}),U(!1);const kt=Qt.checkForRestoration(e,X.current_version);kt&&(K(kt),D(!0))}else de({loaded:!1,version:0,error:"Master JSON not found"})}catch(k){console.error("Error loading master JSON:",k),de({loaded:!1,version:0,error:"Failed to load master JSON"})}},[e]),te=x.useCallback(async()=>{if(!e)return;E(!0);const k=await u0(e);g(k),E(!1)},[e]),De=x.useCallback(async k=>{if(!e)return;const X=await d0(e,k);X&&X.master_json&&(b(X.master_json),j(JSON.stringify(X.master_json,null,2)),U(!0),y(!1))},[e]),Ce=x.useCallback(async()=>{if(!e||!T.trim()){N("No content to save");return}L(!0),N("");try{const k=JSON.parse(T);if(await Jo(e,k,"Master JSON updated")){b(k),U(!1),Qt.clearBackup(e);const kt=a.find(Yi=>Yi.phase_name===o),Gl=k.scenes&&typeof k.scenes=="object"&&k.scenes!==null&&Object.keys(k.scenes).length>0;await Q();const Hl=await nd(e);r(Hl);const ql=Hl.find(Yi=>Yi.phase_index===2),Il=Hl.find(Yi=>Yi.phase_index===3);Gl&&(!(ql!=null&&ql.can_proceed)||!(Il!=null&&Il.can_proceed))&&(console.warn("Phase unlock validation failed - phases not unlocked as expected"),N("Phases should have unlocked but didn't. Please refresh the page."))}else N("Failed to save master JSON to database")}catch(k){console.error("Error saving master JSON:",k),k instanceof SyntaxError?N("Invalid JSON format. Please check your syntax."):k.message.includes("database")||k.message.includes("supabase")?N("Database connection failed. Please check your internet connection and try again."):k.message.includes("project not found")?N("Project not found. Please refresh the page and try again."):k.message.includes("reload data")?N("Save succeeded but failed to reload. Please refresh the page to see changes."):N(`Save failed: ${k.message||"Unknown error occurred"}`)}finally{L(!1)}},[e,T]),zl=async()=>{if(!e)return;h(!0);const[k,X]=await Promise.all([td(e),nd(e)]);if(!k){n("/dashboard");return}i(k),r(X);const kt=X.find(Gl=>Gl.can_proceed);kt&&l(kt.phase_name),await Q(),h(!1)},Ii=k=>({script_interpretation:"Map Script",element_images:"Generate Elements",scene_generation:"Generate Scenes Frame",scene_videos:"Generate Scenes Clip",final_assembly:"Assembly"})[k]||k,Cr=k=>({script_interpretation:"📄",element_images:"🎨",scene_generation:"🎬",scene_videos:"🎥",final_assembly:"🎞️"})[k]||"📋",Fi=k=>po.isPhaseCompleted(m,k.phase_index)?"#00cc00":k.status==="processing"?"#ff9900":k.can_proceed?"#0066cc":"#666",ie=k=>po.isPhaseCompleted(m,k.phase_index)?"Completed":k.status==="processing"?"Processing":k.can_proceed?"Available":"Locked",it=k=>{!k.can_proceed&&k.status!=="completed"||l(k.phase_name)};x.useCallback(async k=>{console.log("loadPhaseContent called but deprecated - using master JSON")},[]);const $l=x.useCallback(k=>{j(k),U(!0)},[]);x.useCallback(async()=>{console.warn("handleSavePhase called - redirecting to handleSaveJSON"),await Ce()},[Ce]);const Yb=()=>{const k=a.find(X=>X.phase_name===o);if(!k||!s)return null;switch(c){case"json":return f.jsxs("div",{className:"view-content-container",children:[f.jsxs("div",{className:"view-content-header",children:[f.jsx("span",{className:"view-content-title",children:o==="script_interpretation"?`JSON Content (Phase ${k.phase_index})`:`Base Script Content (From Phase 1 → Phase ${k.phase_index})`}),f.jsx("span",{className:"view-content-subtitle",children:T||m?"Master JSON loaded":"No content - Complete Phase 1 first"})]}),f.jsx("div",{className:"json-editor",children:f.jsx("textarea",{value:T||(m?JSON.stringify(m,null,2):""),onChange:X=>$l(X.target.value),className:"json-textarea",style:{width:"100%",minHeight:"500px",fontFamily:"Monaco, Menlo, Consolas, monospace",fontSize:"0.875rem",padding:"1rem",border:"1px solid var(--color-border-default)",borderRadius:"4px",background:"var(--color-bg-secondary)",color:"var(--color-text-primary)",resize:"vertical"},placeholder:"No script interpretation content available - Please complete Phase 1 first to proceed with subsequent phases.",disabled:o!=="script_interpretation"})})]});case"timeline":if(m&&Object.keys(m).length>0){const X=m;return f.jsx(iN,{content:X,projectId:s.id,projectName:s.name,phaseId:k.id,onContentUpdate:kt=>{b(kt),j(JSON.stringify(kt,null,2)),U(!0),Qt.saveBackup(e,kt,q.version)}})}return f.jsxs("div",{className:"view-placeholder",children:[f.jsx("div",{className:"view-placeholder-icon",children:"📊"}),f.jsx("h3",{className:"view-placeholder-title",children:"Timeline View"}),f.jsxs("p",{children:["Story foundation for ",k.phase_name.replace("_"," ")]}),f.jsx("p",{children:f.jsx("em",{children:"Complete Phase 1 first to see the timeline foundation"})})]});case"elements":return f.jsxs("div",{className:"view-placeholder",children:[f.jsx("div",{className:"view-placeholder-icon",children:"🎭"}),f.jsx("h3",{className:"view-placeholder-title",children:"Elements View"}),f.jsx("p",{children:"Cross-scene element management (Phase 2+)"})]});case"style":return m&&Object.keys(m).length>0?f.jsx(aN,{masterJson:m,onContentUpdate:X=>{b(X),j(JSON.stringify(X,null,2)),U(!0),Qt.saveBackup(e,X,q.version)}}):f.jsxs("div",{className:"view-placeholder",children:[f.jsx("div",{className:"view-placeholder-icon",children:"🎨"}),f.jsx("h3",{className:"view-placeholder-title",children:"Style Control"}),f.jsx("p",{children:f.jsx("em",{children:"Complete Phase 1 first to access style controls"})})]});case"config":return f.jsx(rN,{projectId:s.id});default:return null}},Kb=()=>{if(!s)return null;const k=po.getCompletedPhases(m);return a.find(X=>X.phase_name===o),f.jsx("div",{className:"project-header-sticky",children:f.jsxs("div",{className:"flex justify-between items-center text-sm text-muted",children:[f.jsxs("div",{children:[f.jsxs("div",{style:{fontSize:"1.1rem",marginBottom:"0.25rem"},children:["Project: ",f.jsx("strong",{className:"text-primary",children:s.name}),f.jsxs("span",{style:{marginLeft:"1rem",color:"#00cc00",fontSize:"0.9rem"},children:["Version ",q.version]})]}),f.jsxs("div",{children:["Progress: ",f.jsx("strong",{style:{color:k>0?"#00cc00":"#999"},children:k}),"/5 phases"]})]}),f.jsxs("div",{className:"header-actions",children:[R&&f.jsx("span",{className:"btn text-xs px-md py-xs",style:{border:"1px solid #ff6600",color:"#ff6600",backgroundColor:"transparent",cursor:"default"},children:"⚠️ Unsaved Changes"}),f.jsx("button",{onClick:Ce,disabled:P||!R||!T.trim(),className:`btn text-xs px-md py-xs ${!R||!T.trim()||P?"btn-secondary":"btn-success"}`,children:P?"💾 Saving...":R?"💾 Save":"✅ Saved"}),q.version>0&&f.jsx("button",{onClick:()=>{te(),y(!0)},className:"btn text-xs px-md py-xs btn-secondary",children:"📋 History"})]})]})})},Xb=()=>{const k=a.find(X=>X.phase_name===o);return!k||!s?null:f.jsx("div",{className:"phase-content-container",children:o==="script_interpretation"?f.jsx(mj,{phase:k,projectId:s.id,projectName:s.name,onContentChange:zl,jsonContent:T,hasUnsavedChanges:R,isSaving:P,error:V,databaseStatus:q,showVersionHistory:_,versionHistory:p,loadingVersions:w,onJsonChange:$l,onSavePhase:Ce,onLoadPhaseContent:()=>{},onLoadVersionHistory:()=>te(),onLoadVersionContent:X=>De(X),onShowVersionHistory:y,useProduction:C,onUseProductionChange:S}):o==="scene_generation"?f.jsx(bj,{phase:k,projectId:s.id,projectName:s.name,masterJSON:m,onContentUpdate:X=>{b(X),j(JSON.stringify(X,null,2)),U(!0),Qt.saveBackup(e,X,q.version)},hasUnsavedChanges:R,onJsonChange:$l}):f.jsxs("div",{className:"phase-content-container",children:[f.jsx("div",{className:"phase-content-header",children:f.jsxs("div",{children:[f.jsxs("h2",{className:"phase-content-title",children:[Cr(k.phase_name)," ",Ii(k.phase_name)]}),f.jsxs("div",{className:"phase-content-meta",children:[f.jsxs("span",{children:["Phase ",k.phase_index," of 5"]}),f.jsx("span",{className:"phase-status",style:{background:Fi(k)},children:ie(k)})]})]})}),f.jsx("div",{className:"phase-placeholder",children:f.jsxs("div",{className:"phase-placeholder-content",children:[f.jsx("div",{className:"phase-placeholder-icon",children:Cr(k.phase_name)}),f.jsxs("h3",{className:"phase-placeholder-title",children:[Ii(k.phase_name)," Module"]}),f.jsxs("p",{className:"phase-placeholder-description",children:["This phase module will be implemented next. It will handle the ",k.phase_name.replace("_"," "),"workflow including n8n integration, content generation, and user approval interface."]}),k.can_proceed&&!k.user_saved&&f.jsx("div",{children:f.jsxs("button",{className:"phase-start-button",children:["Start ",Ii(k.phase_name)]})})]})})]})})};return d||!s?f.jsx("div",{className:"loading-container",children:"Loading project..."}):!s||!e?f.jsx("div",{className:"loading-container",children:"Project not found"}):f.jsxs("div",{className:"project-detail-container",children:[f.jsxs("div",{className:"project-detail-sidebar",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"var(--space-sm)"},children:f.jsx("img",{src:oj,alt:"Flow Studio",className:"logo-image"})}),f.jsx("div",{className:"phase-placeholder-section",children:f.jsx("button",{onClick:()=>n("/dashboard"),className:"phase-button-container",style:{backgroundColor:"rgba(255, 165, 0, 0.1)",borderColor:"#ffa500"},children:f.jsxs("div",{className:"phase-button-row",children:[f.jsx("div",{className:"phase-number-column",children:f.jsx("span",{className:"phase-number",children:"←"})}),f.jsxs("div",{className:"phase-info-column",children:[f.jsx("div",{className:"phase-name",children:"Projects"}),f.jsx("div",{className:"phase-status-text",children:"Dashboard"})]})]})})}),f.jsxs("div",{className:"phase-placeholder-section",children:[f.jsx("h3",{className:"phases-section-title",children:"Project Phases"}),f.jsx("div",{className:"phases-list",children:a.map(k=>f.jsx("button",{onClick:()=>it(k),disabled:!k.can_proceed&&!k.user_saved,className:`phase-button-container ${o===k.phase_name?"active":""}`,children:f.jsxs("div",{className:"phase-button-row",children:[f.jsx("div",{className:"phase-number-column",children:f.jsx("span",{className:"phase-number",children:k.phase_index})}),f.jsxs("div",{className:"phase-info-column",children:[f.jsx("div",{className:"phase-name",children:Ii(k.phase_name)}),f.jsx("div",{className:"phase-status-text",children:ie(k)})]}),f.jsx("div",{className:"phase-status-dot",style:{background:Fi(k)}})]})},k.id))})]})]}),f.jsxs("div",{className:"project-main-content",children:[Kb(),c!=="config"&&f.jsx("div",{style:{borderRadius:"var(--radius-md)",margin:"var(--space-md)",backgroundColor:"#000000",border:"2px solid #0066cc"},children:Xb()}),f.jsx("div",{className:"project-nav-sticky",style:{marginTop:"var(--space-md)",marginBottom:"var(--space-sm)"},children:f.jsx(Sj,{activeView:c,onViewChange:u,masterJSON:m})}),f.jsx("div",{style:{margin:"var(--space-md)"},children:Yb()})]}),A&&M&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content modal-width-500",children:[f.jsx("h2",{className:"text-primary text-2xl mb-xl flex items-center gap-md mb-0",children:"💾 Restore Unsaved Changes?"}),f.jsxs("div",{className:"bg-warning border border-light p-xl rounded-md mb-2xl",children:[f.jsx("p",{className:"text-secondary mb-md mb-0",children:"We found unsaved changes from your previous session."}),f.jsxs("p",{className:"text-sm text-muted mb-0",children:["Backup saved: ",new Date(M.timestamp).toLocaleString()]})]}),f.jsx("div",{className:"db-status db-status-info mb-2xl",children:f.jsx("p",{className:"text-sm mb-0",children:"✨ Your changes will be restored and you can continue editing where you left off."})}),f.jsxs("div",{className:"flex gap-xl justify-end",children:[f.jsx("button",{onClick:()=>{D(!1),K(null),Qt.clearBackup(e)},className:"btn btn-secondary",children:"Discard Changes"}),f.jsx("button",{onClick:()=>{b(M.masterJSON),j(JSON.stringify(M.masterJSON,null,2)),U(!0),D(!1),K(null)},className:"btn btn-primary",children:"🔄 Restore Changes"})]})]})}),f.jsx(oN,{modalState:v.modalState,onClose:v.hideModal})]})}function cN(){const[t,e]=x.useState(null),[n,s]=x.useState(!0);return x.useEffect(()=>{J.auth.getSession().then(({data:{session:a}})=>{e((a==null?void 0:a.user)??null),s(!1)});const{data:{subscription:i}}=J.auth.onAuthStateChange((a,r)=>{e((r==null?void 0:r.user)??null)});return()=>i.unsubscribe()},[]),n?f.jsx("div",{className:"app-loading",children:"Loading..."}):f.jsxs($T,{children:[f.jsx(ca,{path:"/login",element:t?f.jsx(qr,{to:"/dashboard",replace:!0}):f.jsx(ij,{})}),f.jsx(ca,{path:"/dashboard",element:t?f.jsx(rj,{user:t}):f.jsx(qr,{to:"/login",replace:!0})}),f.jsx(ca,{path:"/project/:id",element:t?f.jsx(lN,{user:t}):f.jsx(qr,{to:"/login",replace:!0})}),f.jsx(ca,{path:"/",element:f.jsx(qr,{to:t?"/dashboard":"/login",replace:!0})})]})}Qx.createRoot(document.getElementById("root")).render(f.jsx(x.StrictMode,{children:f.jsx(qT,{children:f.jsx(cN,{})})}));export{Tt as c,Jb as g};
